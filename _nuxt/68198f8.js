(window.webpackJsonp=window.webpackJsonp||[]).push([[15,5],{258:function(e,t,n){"use strict";n.r(t);n(136),n(48),n(261),n(196);var r={props:["ad","showNSFW","skipImage"],data:function(){return{blank:!1}},computed:{shown:function(){return!this.ad.NSFW||this.showNSFW},link:function(){return this.shown?this.ad.link&&function(link){var e=link.trim().toLowerCase();return!(!e.startsWith("javascript:")&&!e.startsWith("data:"))}(this.ad.link)?"":this.ad.link:""},title:function(){return this.shown?this.ad.title:"NSFW hidden"},image:function(){return!this.shown||this.blank?"":(e=this.ad.image)?(e.startsWith("bzz://")?e="http://swarm-gateways.net/bzz:/"+e.slice(6):e.startsWith("ipfs://")&&(e="https://gateway.ipfs.io/ipfs/"+e.slice(7)),e):"";var e},style:function(){return function(e,t){if(!e.width)return{display:"none"};var s={left:10*e.x+"px",top:10*e.y+"px",width:10*e.width+"px",height:10*e.height+"px"};return t||!e.image?s.background="#"+e.owner.slice(-6)+"cc":s.background="#fff",s}(this.ad,this.blank)},classMap:function(){return{nsfwAd:!this.shown,blank:this.blank}}},methods:{placeholder:function(e){this.blank=!0,e.target.setAttribute("x-original-src",this.ad.image),e.target.src="/static/broken-image.svg"}}},o=n(47),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{attrs:{href:e.link,target:"_blank"}},[e.skipImage?n("div",{class:e.classMap,style:e.style,attrs:{title:e.title}}):n("img",{class:e.classMap,style:e.style,attrs:{src:e.image,title:e.title},on:{error:e.placeholder}})])}),[],!1,null,null,null);t.default=component.exports},261:function(e,t,n){"use strict";var r=n(5),o=n(197).trim;r({target:"String",proto:!0,forced:n(263)("trim")},{trim:function(){return o(this)}})},263:function(e,t,n){var r=n(6),o=n(198);e.exports=function(e){return r((function(){return!!o[e]()||"​᠎"!="​᠎"[e]()||o[e].name!==e}))}},270:function(e,t,n){var content=n(281);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(103).default)("cdeb331e",content,!0,{sourceMap:!1})},280:function(e,t,n){"use strict";n(270)},281:function(e,t,n){var r=n(102)(!1);r.push([e.i,"form{margin-bottom:2em;width:600px}label{display:block;margin-bottom:.5em}label span{display:inline-block;min-width:6em}input{width:200px}.editAd{border-left:10px solid #eee;padding-left:10px}.editAd .previewAd img{display:block;overflow:hidden;font-size:11px;color:rgba(0,0,0,.7);white-space:nowrap}.editAd small{color:#966;margin:.5em;display:inline-block}.editAd input[type=submit]{font-size:1em;padding:5px;background:#fff8db;display:block;border-width:2px}.editAd .mini-adGrid{padding:10px;background:#ddd;margin-bottom:1em}",""]),e.exports=r},291:function(e,t,n){"use strict";n.r(t);var r=n(9),o=(n(49),n(196),n(199),{props:["provider","contract","showNSFW"],data:function(){return{ad:!1,error:null}},methods:{publish:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ga("send",{hitType:"event",eventCategory:e.contract._network,eventAction:"publish-submit"}),t.next=3,e.provider.getSigner();case 3:return n=t.sent,t.next=6,n.getAddress();case 6:if(t.sent.toLowerCase()==e.ad.owner){t.next=10;break}return e.error="Incorrect active wallet. Must publish with: "+e.ad.owner,t.abrupt("return");case 10:return t.prev=10,t.next=13,e.contract.connect(n).publish(e.ad.idx,e.ad.link,e.ad.image,e.ad.title,Number(e.ad.NSFW));case 13:t.next=20;break;case 15:return t.prev=15,t.t0=t.catch(10),ga("send",{hitType:"event",eventCategory:e.contract._network,eventAction:"publish-error",eventLabel:JSON.stringify(t.t0)}),e.error=t.t0,t.abrupt("return");case 20:return t.prev=20,e.ad=!1,t.finish(20);case 23:return ga("send",{hitType:"event",eventCategory:e.contract._network,eventAction:"publish-success"}),t.abrupt("return",!1);case 25:case"end":return t.stop()}}),t,null,[[10,15,20,23]])})))()}},components:{Ad:n(258).default}}),l=(n(280),n(47)),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"adPublish"}},[e.$store.getters.numOwned>0?n("form",{on:{submit:[e.publish,function(e){e.preventDefault()}]}},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.ad,expression:"ad"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.ad=t.target.multiple?n:n[0]}}},[n("option",{attrs:{disabled:"",value:""}},[e._v("Select ad to edit")]),e._v(" "),e._l(e.$store.state.ownedAds,(function(t){return n("option",{key:t.idx,domProps:{value:t}},[e._v(">\n        "+e._s(10*t.width)+"x"+e._s(10*t.height)+"px at ("+e._s(t.x)+", "+e._s(t.y)+"): "+e._s(t.title)+" - "+e._s(t.link||"(no link)")+"\n      ")])}))],2),e._v(" "),e.ad?n("div",{staticClass:"editAd"},[n("p",[e._v("\n        What do you want your ad to look like? Some rules:\n      ")]),e._v(" "),e._m(0),e._v(" "),n("label",[n("span",[e._v("Title")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.ad.title,expression:"ad.title"}],attrs:{type:"text",placeholder:"Come visit MyCorp"},domProps:{value:e.ad.title},on:{input:function(t){t.target.composing||e.$set(e.ad,"title",t.target.value)}}})]),e._v(" "),n("label",[n("span",[e._v("Link")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.ad.link,expression:"ad.link"}],attrs:{type:"text",placeholder:"https://..."},domProps:{value:e.ad.link},on:{input:function(t){t.target.composing||e.$set(e.ad,"link",t.target.value)}}}),e._v(" "),e.ad.link&&-1===e.ad.link.indexOf("://")?n("small",{staticClass:"error"},[e._v("Missing https://?")]):e._e()]),e._v(" "),n("label",[n("span",[e._v("Image")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.ad.image,expression:"ad.image"}],attrs:{type:"text",placeholder:"https://...."},domProps:{value:e.ad.image},on:{input:function(t){t.target.composing||e.$set(e.ad,"image",t.target.value)}}}),e._v(" "),e._m(1)]),e._v(" "),n("label",[n("span",[e._v("NSFW")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.ad.NSFW,expression:"ad.NSFW"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.ad.NSFW)?e._i(e.ad.NSFW,null)>-1:e.ad.NSFW},on:{change:function(t){var n=e.ad.NSFW,r=t.target,o=!!r.checked;if(Array.isArray(n)){var l=e._i(n,null);r.checked?l<0&&e.$set(e.ad,"NSFW",n.concat([null])):l>-1&&e.$set(e.ad,"NSFW",n.slice(0,l).concat(n.slice(l+1)))}else e.$set(e.ad,"NSFW",o)}}}),e._v(" "),e.ad.forceNSFW?n("strong",[e._v("Forced NSFW by moderator")]):e._e()]),e._v(" "),n("div",[e._m(2),e._v(" "),n("div",{staticClass:"mini-adGrid"},[n("Ad",{staticClass:"previewAd",attrs:{showNSFW:e.showNSFW,ad:e.ad}})],1)]),e._v(" "),n("input",{attrs:{type:"submit",value:"Publish Changes"}}),e._v(" "),n("small",[e._v("\n        It can take between 10 seconds to a few minutes for your published ad\n        to get mined into the blockchain and show up. The fees are paid to miners\n        to get the changes into the next block.\n      ")])]):e._e()]):n("p",[e._v("\n    No purchased ads detected for active accounts. Listening to Purchase events on the blockchain...\n  ")]),e._v(" "),e.error?n("p",{staticClass:"error"},[e._v("\n    "+e._s(e.error)+"\n  ")]):e._e()])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",[n("li",[e._v("If your ad contains adult content, please self-mark it as NSFW. NSFW ads are opt-in by viewers. You can change it later if you self-mark as NSFW.")]),e._v(" "),n("li",[e._v("Don't link to, or put, inappropriate or illegal content in the ad.")]),e._v(" "),n("li",[n("strong",[e._v("Keep your image size small, under 100KB.")]),e._v(" PNG is preferred, but JPG or non-animated GIF is acceptable.")]),e._v(" "),n("li",[e._v("If your ad breaks any rules, it can be forced to NSFW by the moderators of this contract and then only a moderator can change it back to non-NSFW.")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("small",[e._v("URL to PNG image. Can be "),n("code",[e._v("https://")]),e._v(", "),n("code",[e._v("ipfs://")]),e._v(", "),n("code",[e._v("bzz://")]),e._v(", or "),n("code",[e._v("data:image/png,base64,...")]),e._v(" encoded."),n("br"),e._v("Must be less than 100KB.")])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("h3",[e._v("Preview "),n("small",[e._v("(not published yet)")])])}],!1,null,null,null);t.default=component.exports;installComponents(component,{Ad:n(258).default})}}]);