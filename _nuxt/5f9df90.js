/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[25],Array(326).concat([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.wipe=function(t){for(var i=0;i<t.length;i++)t[i]=0;return t}},,function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(482),o=r(336);class c{constructor(t,e,r){this.name=t,this.prefix=e,this.baseEncode=r}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class f{constructor(t,e,r){if(this.name=t,this.prefix=e,void 0===e.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=r}decode(text){if("string"==typeof text){if(text.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(text)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(text.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(t){return h(this,t)}}class l{constructor(t){this.decoders=t}or(t){return h(this,t)}decode(input){const t=input[0],e=this.decoders[t];if(e)return e.decode(input);throw RangeError(`Unable to decode multibase string ${JSON.stringify(input)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const h=(t,e)=>new l({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class d{constructor(t,e,r,n){this.name=t,this.prefix=e,this.baseEncode=r,this.baseDecode=n,this.encoder=new c(t,e,r),this.decoder=new f(t,e,n)}encode(input){return this.encoder.encode(input)}decode(input){return this.decoder.decode(input)}}const v=({name:t,prefix:e,encode:r,decode:n})=>new d(t,e,r,n);e.Codec=d,e.baseX=({prefix:t,name:e,alphabet:r})=>{const{encode:c,decode:f}=n(r,e);return v({prefix:t,name:e,encode:c,decode:text=>o.coerce(f(text))})},e.from=v,e.or=h,e.rfc4648=({name:t,prefix:e,bitsPerChar:r,alphabet:n})=>v({prefix:e,name:t,encode:input=>((data,t,e)=>{const r="="===t[t.length-1],mask=(1<<e)-1;let n="",o=0,c=0;for(let i=0;i<data.length;++i)for(c=c<<8|data[i],o+=8;o>e;)o-=e,n+=t[mask&c>>o];if(o&&(n+=t[mask&c<<e-o]),r)for(;n.length*e&7;)n+="=";return n})(input,n,r),decode:input=>((t,e,r,n)=>{const o={};for(let i=0;i<e.length;++i)o[e[i]]=i;let c=t.length;for(;"="===t[c-1];)--c;const f=new Uint8Array(c*r/8|0);let l=0,h=0,d=0;for(let i=0;i<c;++i){const e=o[t[i]];if(void 0===e)throw new SyntaxError(`Non-${n} character`);h=h<<r|e,l+=r,l>=8&&(l-=8,f[d++]=255&h>>l)}if(l>=r||255&h<<8-l)throw new SyntaxError("Unexpected end of data");return f})(input,n,r,t)})},,,,,function(t,e,r){"use strict";var n,o="object"==typeof Reflect?Reflect:null,c=o&&"function"==typeof o.apply?o.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};n=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var f=Number.isNaN||function(t){return t!=t};function l(){l.init.call(this)}t.exports=l,t.exports.once=function(t,e){return new Promise((function(r,n){function o(r){t.removeListener(e,c),n(r)}function c(){"function"==typeof t.removeListener&&t.removeListener("error",o),r([].slice.call(arguments))}O(t,e,c,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&O(t,"error",e,r)}(t,o,{once:!0})}))},l.EventEmitter=l,l.prototype._events=void 0,l.prototype._eventsCount=0,l.prototype._maxListeners=void 0;var h=10;function d(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function v(t){return void 0===t._maxListeners?l.defaultMaxListeners:t._maxListeners}function y(t,e,r,n){var o,c,f,l;if(d(r),void 0===(c=t._events)?(c=t._events=Object.create(null),t._eventsCount=0):(void 0!==c.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),c=t._events),f=c[e]),void 0===f)f=c[e]=r,++t._eventsCount;else if("function"==typeof f?f=c[e]=n?[r,f]:[f,r]:n?f.unshift(r):f.push(r),(o=v(t))>0&&f.length>o&&!f.warned){f.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+f.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=t,h.type=e,h.count=f.length,l=h,console&&console.warn&&console.warn(l)}return t}function m(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function w(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},o=m.bind(n);return o.listener=r,n.wrapFn=o,o}function _(t,e,r){var n=t._events;if(void 0===n)return[];var o=n[e];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(o):E(o,o.length)}function x(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function E(t,e){for(var r=new Array(e),i=0;i<e;++i)r[i]=t[i];return r}function O(t,e,r,n){if("function"==typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function o(c){n.once&&t.removeEventListener(e,o),r(c)}))}}Object.defineProperty(l,"defaultMaxListeners",{enumerable:!0,get:function(){return h},set:function(t){if("number"!=typeof t||t<0||f(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");h=t}}),l.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},l.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||f(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},l.prototype.getMaxListeners=function(){return v(this)},l.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var r="error"===t,n=this._events;if(void 0!==n)r=r&&void 0===n.error;else if(!r)return!1;if(r){var o;if(e.length>0&&(o=e[0]),o instanceof Error)throw o;var f=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw f.context=o,f}var l=n[t];if(void 0===l)return!1;if("function"==typeof l)c(l,this,e);else{var h=l.length,d=E(l,h);for(i=0;i<h;++i)c(d[i],this,e)}return!0},l.prototype.addListener=function(t,e){return y(this,t,e,!1)},l.prototype.on=l.prototype.addListener,l.prototype.prependListener=function(t,e){return y(this,t,e,!0)},l.prototype.once=function(t,e){return d(e),this.on(t,w(this,t,e)),this},l.prototype.prependOnceListener=function(t,e){return d(e),this.prependListener(t,w(this,t,e)),this},l.prototype.removeListener=function(t,e){var r,n,o,i,c;if(d(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===e||r[i].listener===e){c=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,o),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,c||e)}return this},l.prototype.off=l.prototype.removeListener,l.prototype.removeAllListeners=function(t){var e,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var n,o=Object.keys(r);for(i=0;i<o.length;++i)"removeListener"!==(n=o[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},l.prototype.listeners=function(t){return _(this,t,!0)},l.prototype.rawListeners=function(t){return _(this,t,!1)},l.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):x.call(t,e)},l.prototype.listenerCount=x,l.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},,,function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=new Uint8Array(0);e.coerce=t=>{if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},e.empty=n,e.equals=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},e.fromHex=t=>{const e=t.match(/../g);return e?new Uint8Array(e.map((b=>parseInt(b,16)))):n},e.fromString=t=>(new TextEncoder).encode(t),e.isBinary=t=>t instanceof ArrayBuffer||ArrayBuffer.isView(t),e.toHex=t=>t.reduce(((t,e)=>t+e.toString(16).padStart(2,"0")),""),e.toString=b=>(new TextDecoder).decode(b)},,,,,,function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}r.d(e,"a",(function(){return f})),r.d(e,"b",(function(){return l}));var o=function(data){return JSON.stringify(data,(function(t,e){return"bigint"==typeof e?e.toString()+"n":e}))},c=function(t){var e=t.replace(/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,'$1"$2n"$3');return JSON.parse(e,(function(t,e){return"string"==typeof e&&e.match(/^\d+n$/)?BigInt(e.substring(0,e.length-1)):e}))};function f(t){if("string"!=typeof t)throw new Error("Cannot safe json parse value of type ".concat(n(t)));try{return c(t)}catch(e){return t}}function l(t){return"string"==typeof t?t:o(t)||""}},function(t,e,r){"use strict";r(357);var n=r(377);r.d(e,"parseConnectionError",(function(){return n.d}));var o=r(394);r.o(o,"IJsonRpcProvider")&&r.d(e,"IJsonRpcProvider",(function(){return o.IJsonRpcProvider})),r.o(o,"formatJsonRpcError")&&r.d(e,"formatJsonRpcError",(function(){return o.formatJsonRpcError})),r.o(o,"formatJsonRpcRequest")&&r.d(e,"formatJsonRpcRequest",(function(){return o.formatJsonRpcRequest})),r.o(o,"formatJsonRpcResult")&&r.d(e,"formatJsonRpcResult",(function(){return o.formatJsonRpcResult})),r.o(o,"getBigIntRpcId")&&r.d(e,"getBigIntRpcId",(function(){return o.getBigIntRpcId})),r.o(o,"isHttpUrl")&&r.d(e,"isHttpUrl",(function(){return o.isHttpUrl})),r.o(o,"isJsonRpcError")&&r.d(e,"isJsonRpcError",(function(){return o.isJsonRpcError})),r.o(o,"isJsonRpcRequest")&&r.d(e,"isJsonRpcRequest",(function(){return o.isJsonRpcRequest})),r.o(o,"isJsonRpcResponse")&&r.d(e,"isJsonRpcResponse",(function(){return o.isJsonRpcResponse})),r.o(o,"isJsonRpcResult")&&r.d(e,"isJsonRpcResult",(function(){return o.isJsonRpcResult})),r.o(o,"isLocalhostUrl")&&r.d(e,"isLocalhostUrl",(function(){return o.isLocalhostUrl})),r.o(o,"isReactNative")&&r.d(e,"isReactNative",(function(){return o.isReactNative})),r.o(o,"isWsUrl")&&r.d(e,"isWsUrl",(function(){return o.isWsUrl})),r.o(o,"payloadId")&&r.d(e,"payloadId",(function(){return o.payloadId}));var c=r(395);r.d(e,"formatJsonRpcError",(function(){return c.a})),r.d(e,"formatJsonRpcRequest",(function(){return c.b})),r.d(e,"formatJsonRpcResult",(function(){return c.c})),r.d(e,"getBigIntRpcId",(function(){return c.d})),r.d(e,"payloadId",(function(){return c.e}));r(396);var f=r(428);r.d(e,"IJsonRpcProvider",(function(){return f.a}));var l=r(397);r.d(e,"isHttpUrl",(function(){return l.a})),r.d(e,"isLocalhostUrl",(function(){return l.b})),r.d(e,"isWsUrl",(function(){return l.c}));var h=r(398);r.d(e,"isJsonRpcError",(function(){return h.a})),r.d(e,"isJsonRpcRequest",(function(){return h.b})),r.d(e,"isJsonRpcResponse",(function(){return h.c})),r.d(e,"isJsonRpcResult",(function(){return h.d}))},,,,,,,,,,function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(359);n.__exportStar(r(450),e),n.__exportStar(r(455),e),n.__exportStar(r(456),e),n.__exportStar(r(400),e)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(466);function o(t,e,r){return void 0===e&&(e=new Uint8Array(2)),void 0===r&&(r=0),e[r+0]=t>>>8,e[r+1]=t>>>0,e}function c(t,e,r){return void 0===e&&(e=new Uint8Array(2)),void 0===r&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e}function f(t,e){return void 0===e&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function l(t,e){return void 0===e&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}function h(t,e){return void 0===e&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}function d(t,e){return void 0===e&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}function v(t,e,r){return void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0),e[r+0]=t>>>24,e[r+1]=t>>>16,e[r+2]=t>>>8,e[r+3]=t>>>0,e}function y(t,e,r){return void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0),e[r+0]=t>>>0,e[r+1]=t>>>8,e[r+2]=t>>>16,e[r+3]=t>>>24,e}function m(t,e,r){return void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0),v(t/4294967296>>>0,e,r),v(t>>>0,e,r+4),e}function w(t,e,r){return void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0),y(t>>>0,e,r),y(t/4294967296>>>0,e,r+4),e}e.readInt16BE=function(t,e){return void 0===e&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16},e.readUint16BE=function(t,e){return void 0===e&&(e=0),(t[e+0]<<8|t[e+1])>>>0},e.readInt16LE=function(t,e){return void 0===e&&(e=0),(t[e+1]<<8|t[e])<<16>>16},e.readUint16LE=function(t,e){return void 0===e&&(e=0),(t[e+1]<<8|t[e])>>>0},e.writeUint16BE=o,e.writeInt16BE=o,e.writeUint16LE=c,e.writeInt16LE=c,e.readInt32BE=f,e.readUint32BE=l,e.readInt32LE=h,e.readUint32LE=d,e.writeUint32BE=v,e.writeInt32BE=v,e.writeUint32LE=y,e.writeInt32LE=y,e.readInt64BE=function(t,e){void 0===e&&(e=0);var r=f(t,e),n=f(t,e+4);return 4294967296*r+n-4294967296*(n>>31)},e.readUint64BE=function(t,e){return void 0===e&&(e=0),4294967296*l(t,e)+l(t,e+4)},e.readInt64LE=function(t,e){void 0===e&&(e=0);var r=h(t,e);return 4294967296*h(t,e+4)+r-4294967296*(r>>31)},e.readUint64LE=function(t,e){void 0===e&&(e=0);var r=d(t,e);return 4294967296*d(t,e+4)+r},e.writeUint64BE=m,e.writeInt64BE=m,e.writeUint64LE=w,e.writeInt64LE=w,e.readUintBE=function(t,e,r){if(void 0===r&&(r=0),t%8!=0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var n=0,o=1,i=t/8+r-1;i>=r;i--)n+=e[i]*o,o*=256;return n},e.readUintLE=function(t,e,r){if(void 0===r&&(r=0),t%8!=0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var n=0,o=1,i=r;i<r+t/8;i++)n+=e[i]*o,o*=256;return n},e.writeUintBE=function(t,e,r,o){if(void 0===r&&(r=new Uint8Array(t/8)),void 0===o&&(o=0),t%8!=0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!n.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var div=1,i=t/8+o-1;i>=o;i--)r[i]=e/div&255,div*=256;return r},e.writeUintLE=function(t,e,r,o){if(void 0===r&&(r=new Uint8Array(t/8)),void 0===o&&(o=0),t%8!=0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!n.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var div=1,i=o;i<o+t/8;i++)r[i]=e/div&255,div*=256;return r},e.readFloat32BE=function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat32(e)},e.readFloat32LE=function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat32(e,!0)},e.readFloat64BE=function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat64(e)},e.readFloat64LE=function(t,e){return void 0===e&&(e=0),new DataView(t.buffer,t.byteOffset,t.byteLength).getFloat64(e,!0)},e.writeFloat32BE=function(t,e,r){return void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat32(r,t),e},e.writeFloat32LE=function(t,e,r){return void 0===e&&(e=new Uint8Array(4)),void 0===r&&(r=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat32(r,t,!0),e},e.writeFloat64BE=function(t,e,r){return void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat64(r,t),e},e.writeFloat64LE=function(t,e,r){return void 0===e&&(e=new Uint8Array(8)),void 0===r&&(r=0),new DataView(e.buffer,e.byteOffset,e.byteLength).setFloat64(r,t,!0),e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(336),o=r(361);class c{constructor(code,t,e,r){this.code=code,this.size=t,this.digest=e,this.bytes=r}}e.Digest=c,e.create=(code,t)=>{const e=t.byteLength,r=o.encodingLength(code),n=r+o.encodingLength(e),f=new Uint8Array(n+e);return o.encodeTo(code,f,0),o.encodeTo(e,f,r),f.set(t,n),new c(code,e,t,f)},e.decode=t=>{const e=n.coerce(t),[code,r]=o.decode(e),[f,l]=o.decode(e.subarray(r)),h=e.subarray(r+l);if(h.byteLength!==f)throw new Error("Incorrect length");return new c(code,f,h,e)},e.equals=(a,b)=>a===b||a.code===b.code&&a.size===b.size&&n.equals(a.bytes,b.bytes)},,function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e,r){return(e=function(t){var i=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(i)?i:i+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}r.d(e,"b",(function(){return c})),r.d(e,"d",(function(){return f})),r.d(e,"c",(function(){return l})),r.d(e,"e",(function(){return h})),r.d(e,"f",(function(){return d})),r.d(e,"a",(function(){return v}));var c="INTERNAL_ERROR",f="SERVER_ERROR",l=[-32700,-32600,-32601,-32602,-32603],h=[-32e3,-32099],d=o(o(o(o(o(o({},"PARSE_ERROR",{code:-32700,message:"Parse error"}),"INVALID_REQUEST",{code:-32600,message:"Invalid Request"}),"METHOD_NOT_FOUND",{code:-32601,message:"Method not found"}),"INVALID_PARAMS",{code:-32602,message:"Invalid params"}),c,{code:-32603,message:"Internal error"}),f,{code:-32e3,message:"Server error"}),v=f},function(t,e,r){"use strict";(function(t,n,o){r.d(e,"a",(function(){return So})),r.d(e,"b",(function(){return Xa})),r.d(e,"c",(function(){return Mo})),r.d(e,"d",(function(){return pa})),r.d(e,"e",(function(){return gt})),r.d(e,"f",(function(){return ft})),r.d(e,"g",(function(){return bo})),r.d(e,"h",(function(){return lt})),r.d(e,"i",(function(){return zo})),r.d(e,"j",(function(){return Ho})),r.d(e,"k",(function(){return Bo})),r.d(e,"l",(function(){return Ko})),r.d(e,"m",(function(){return Fo})),r.d(e,"n",(function(){return bt})),r.d(e,"o",(function(){return vt})),r.d(e,"p",(function(){return po})),r.d(e,"q",(function(){return at})),r.d(e,"r",(function(){return pt})),r.d(e,"s",(function(){return ca})),r.d(e,"t",(function(){return Co})),r.d(e,"u",(function(){return Uo})),r.d(e,"v",(function(){return z})),r.d(e,"w",(function(){return it})),r.d(e,"x",(function(){return nt})),r.d(e,"y",(function(){return Oo})),r.d(e,"z",(function(){return Et})),r.d(e,"A",(function(){return fo})),r.d(e,"B",(function(){return ya})),r.d(e,"C",(function(){return Eo})),r.d(e,"D",(function(){return co})),r.d(e,"E",(function(){return Ao})),r.d(e,"F",(function(){return Qo})),r.d(e,"G",(function(){return Wo})),r.d(e,"H",(function(){return tr})),r.d(e,"I",(function(){return _t})),r.d(e,"J",(function(){return Do})),r.d(e,"K",(function(){return qo})),r.d(e,"L",(function(){return tt})),r.d(e,"M",(function(){return la})),r.d(e,"N",(function(){return Ka})),r.d(e,"O",(function(){return mt})),r.d(e,"P",(function(){return Z})),r.d(e,"Q",(function(){return Ya})),r.d(e,"R",(function(){return Aa})),r.d(e,"S",(function(){return $})),r.d(e,"T",(function(){return xa})),r.d(e,"U",(function(){return ka})),r.d(e,"V",(function(){return Yo})),r.d(e,"W",(function(){return ba})),r.d(e,"X",(function(){return ga})),r.d(e,"Y",(function(){return Sa})),r.d(e,"Z",(function(){return th})),r.d(e,"ab",(function(){return qa})),r.d(e,"bb",(function(){return Ca})),r.d(e,"cb",(function(){return Na})),r.d(e,"db",(function(){return za})),r.d(e,"eb",(function(){return Ha})),r.d(e,"fb",(function(){return Fa})),r.d(e,"gb",(function(){return ma})),r.d(e,"hb",(function(){return Ua})),r.d(e,"ib",(function(){return Ta})),r.d(e,"jb",(function(){return La})),r.d(e,"kb",(function(){return Ba})),r.d(e,"lb",(function(){return Va})),r.d(e,"mb",(function(){return Ra})),r.d(e,"nb",(function(){return Da})),r.d(e,"ob",(function(){return wa})),r.d(e,"pb",(function(){return Oa})),r.d(e,"qb",(function(){return ut})),r.d(e,"rb",(function(){return wt})),r.d(e,"sb",(function(){return _o})),r.d(e,"tb",(function(){return ct})),r.d(e,"ub",(function(){return D})),r.d(e,"vb",(function(){return yt})),r.d(e,"wb",(function(){return ha})),r.d(e,"xb",(function(){return sa})),r.d(e,"yb",(function(){return Wa})),r.d(e,"zb",(function(){return Go})),r.d(e,"Ab",(function(){return Vo})),r.d(e,"Bb",(function(){return lo}));var c=r(499),f=r(353),l=r(401),h=r(458),d=r(459),v=r(464),y=r(468),m=r(360),w=r(475),_=r(476),x=r(402),E=r(498);function O(t,e,r){return(e=I(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function A(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function k(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,I(n.key),n)}}function S(t,e,r){return e&&k(t.prototype,e),r&&k(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function I(t){var i=function(t,e){if("object"!=R(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=R(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==R(i)?i:i+""}function j(){j=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof w?e:w,a=Object.create(i.prototype),c=new N(n||[]);return o(a,"_invoke",{value:S(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",v="suspendedYield",y="executing",s="completed",m={};function w(){}function _(){}function x(){}var p={};f(p,a,(function(){return this}));var E=Object.getPrototypeOf,O=E&&E(E(T([])));O&&O!==r&&n.call(O,a)&&(p=O);var g=x.prototype=w.prototype=Object.create(p);function A(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,c,i,a){var f=h(t[o],t,c);if("throw"!==f.type){var u=f.arg,l=u.value;return l&&"object"==R(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,a)}),(function(t){r("throw",t,i,a)})):e.resolve(l).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,a)}))}a(f.arg)}var c;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return c=c?c.then(o,o):o()}})}function S(e,r,n){var o=d;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=I(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var p=h(e,r,n);if("normal"===p.type){if(o=n.done?s:v,p.arg===m)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function I(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,I(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(R(e)+" is not iterable")}return _.prototype=x,o(g,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:_,configurable:!0}),_.displayName=f(x,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},A(k.prototype),f(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},A(g),f(g,u,"Generator"),f(g,a,(function(){return this})),f(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(M),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var c=this.tryEntries.length-1;c>=0;--c){var i=this.tryEntries[c],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var f=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(f&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(f){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),M(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;M(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function P(t,e,r,n,o,a,c){try{var i=t[a](c),u=i.value}catch(t){return void r(t)}i.done?e(u):Promise.resolve(u).then(n,o)}function M(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){P(a,n,o,c,f,"next",t)}function f(t){P(a,n,o,c,f,"throw",t)}c(void 0)}))}}function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function N(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=C(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,c=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw c}}}}function T(t){return function(t){if(Array.isArray(t))return U(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||C(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,f=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){f=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(f)throw o}}return a}}(t,e)||C(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t,a){if(t){if("string"==typeof t)return U(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?U(t,a):void 0}}function U(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,r=Array(a);e<a;e++)r[e]=t[e];return r}var B=":";function D(t){var e=L(t.split(B),2);return{namespace:e[0],reference:e[1]}}function z(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return Object.keys(t).forEach((function(i){if(!e.length||e.includes(i)){var n=t[i];r.push.apply(r,T(n.accounts))}})),r}function F(t,e){return t.includes(":")?[t]:e.chains||[]}var H=Object.defineProperty,K=Object.getOwnPropertySymbols,G=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,Y=function(t,e,r){return e in t?H(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},J=function(t,e){for(var r in e||(e={}))G.call(e,r)&&Y(t,r,e[r]);if(K){var n,o=N(K(e));try{for(o.s();!(n=o.n()).done;){r=n.value;V.call(e,r)&&Y(t,r,e[r])}}catch(t){o.e(t)}finally{o.f()}}return t},W="ReactNative",Q={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},X="js";function Z(){return(void 0===t?"undefined":R(t))<"u"&&R(t.versions)<"u"&&R(t.versions.node)<"u"}function $(){return!Object(l.getDocument)()&&!!Object(l.getNavigator)()&&navigator.product===W}function tt(){return!Z()&&!!Object(l.getNavigator)()&&!!Object(l.getDocument)()}function et(){return $()?Q.reactNative:Z()?Q.node:tt()?Q.browser:Q.unknown}function nt(){var t;try{return $()&&(void 0===n?"undefined":R(n))<"u"&&R(null==n?void 0:n.Application)<"u"?null==(t=n.Application)?void 0:t.applicationId:void 0}catch(t){return}}function it(){return Object(h.getWindowMetadata)()||{name:"",description:"",url:"",icons:[""]}}function ot(t,e,r){var i=function(){if(et()===Q.reactNative&&(void 0===n?"undefined":R(n))<"u"&&R(null==n?void 0:n.Platform)<"u"){var t=n.Platform;return[t.OS,t.Version].join("-")}var e=Object(c.a)();if(null===e)return"unknown";var r=e.os?e.os.replace(" ","").toLowerCase():"unknown";return"browser"===e.type?[r,e.name,e.version].join("-"):[r,e.version].join("-")}(),o=function(){var t,e=et();return e===Q.browser?[e,(null==(t=Object(l.getLocation)())?void 0:t.host)||"unknown"].join(":"):e}();return[[t,e].join("-"),[X,r].join("-"),i,o].join("/")}function at(t){var e=t.protocol,r=t.version,n=t.relayUrl,i=t.sdkVersion,o=t.auth,c=t.projectId,f=t.useOnCloseEvent,p=t.bundleId,b=n.split("?"),l={auth:o,ua:ot(e,r,i),projectId:c,useOnCloseEvent:f||void 0,origin:p||void 0},h=function(t,e){var r=d.parse(t);return r=J(J({},r),e),d.stringify(r)}(b[1]||"",l);return b[0]+"?"+h}function st(t,e){return t.filter((function(t){return e.includes(t)})).length===t.length}function ut(t){return Object.fromEntries(t.entries())}function ct(t){return new Map(Object.entries(t))}function ft(){var i,t,e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f.FIVE_MINUTES,n=arguments.length>1?arguments[1]:void 0,o=Object(f.toMiliseconds)(r||f.FIVE_MINUTES);return{resolve:function(t){e&&i&&(clearTimeout(e),i(t))},reject:function(r){e&&t&&(clearTimeout(e),t(r))},done:function(){return new Promise((function(r,p){e=setTimeout((function(){p(new Error(n))}),o),i=r,t=p}))}}}function lt(t,e,r){return new Promise(function(){var n=M(j().mark((function n(i,o){var c,f;return j().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=setTimeout((function(){return o(new Error(r))}),e),n.prev=1,n.next=4,t;case 4:f=n.sent,i(f),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),o(n.t0);case 11:clearTimeout(c);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(t,e){return n.apply(this,arguments)}}())}function ht(t,e){if("string"==typeof e&&e.startsWith("".concat(t,":")))return e;if("topic"===t.toLowerCase()){if("string"!=typeof e)throw new Error('Value must be "string" for expirer target type: topic');return"topic:".concat(e)}if("id"===t.toLowerCase()){if("number"!=typeof e)throw new Error('Value must be "number" for expirer target type: id');return"id:".concat(e)}throw new Error("Unknown expirer target type: ".concat(t))}function pt(t){return ht("topic",t)}function vt(t){return ht("id",t)}function yt(t){var e=L(t.split(":"),2),r=e[0],n=e[1],i={id:void 0,topic:void 0};if("topic"===r&&"string"==typeof n)i.topic=n;else{if("id"!==r||!Number.isInteger(Number(n)))throw new Error("Invalid target, expected id:number or topic:string, got ".concat(r,":").concat(n));i.id=Number(n)}return i}function gt(t,e){return Object(f.fromMiliseconds)((e||Date.now())+Object(f.toMiliseconds)(t))}function mt(t){return Date.now()>=Object(f.toMiliseconds)(t)}function bt(t,e){return"".concat(t).concat(e?":".concat(e):"")}function wt(){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return T(new Set([].concat(T(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]),T(t))))}function _t(t){return xt.apply(this,arguments)}function xt(){return(xt=M(j().mark((function t(e){var r,o,c,i,f,l,h;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.id,o=e.topic,c=e.wcDeepLink,t.prev=1,c){t.next=4;break}return t.abrupt("return");case 4:if(i="string"==typeof c?JSON.parse(c):c,"string"==typeof(f=null==i?void 0:i.href)){t.next=8;break}return t.abrupt("return");case 8:if(f.endsWith("/")&&(f=f.slice(0,-1)),l="".concat(f,"/wc?requestId=").concat(r,"&sessionTopic=").concat(o),(h=et())!==Q.browser){t.next=14;break}l.startsWith("https://")||l.startsWith("http://")?window.open(l,"_blank","noreferrer noopener"):window.open(l,"_self","noreferrer noopener"),t.next=18;break;case 14:if(t.t0=h===Q.reactNative&&R(null==n?void 0:n.Linking)<"u",!t.t0){t.next=18;break}return t.next=18,n.Linking.openURL(l);case 18:t.next=23;break;case 20:t.prev=20,t.t1=t.catch(1),console.error(t.t1);case 23:case"end":return t.stop()}}),t,null,[[1,20]])})))).apply(this,arguments)}function Et(t,e){return Ot.apply(this,arguments)}function Ot(){return(Ot=M(j().mark((function t(e,r){return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getItem(r);case 3:if(t.t0=t.sent,t.t0){t.next=6;break}t.t0=tt()?localStorage.getItem(r):void 0;case 6:return t.abrupt("return",t.t0);case 9:t.prev=9,t.t1=t.catch(0),console.error(t.t1);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}var At=("undefined"==typeof globalThis?"undefined":R(globalThis))<"u"?globalThis:("undefined"==typeof window?"undefined":R(window))<"u"?window:(void 0===n?"undefined":R(n))<"u"?n:("undefined"==typeof self?"undefined":R(self))<"u"?self:{};var kt,St={exports:{}};kt=St,function(){var e="input is invalid type",i="object"==("undefined"==typeof window?"undefined":R(window)),r=i?window:{};r.JS_SHA3_NO_WINDOW&&(i=!1);var n=!i&&"object"==("undefined"==typeof self?"undefined":R(self));!r.JS_SHA3_NO_NODE_JS&&"object"==(void 0===t?"undefined":R(t))&&t.versions&&t.versions.node?r=At:n&&(r=self);var p=!r.JS_SHA3_NO_COMMON_JS&&kt.exports,b=!r.JS_SHA3_NO_ARRAY_BUFFER&&("undefined"==typeof ArrayBuffer?"undefined":R(ArrayBuffer))<"u",o="0123456789abcdef".split(""),c=[4,1024,262144,67108864],f=[0,8,16,24],l=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],h=[224,256,384,512],d=[128,256],v=["hex","buffer","arrayBuffer","array","digest"],y={128:168,256:136};(r.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(u){return"[object Array]"===Object.prototype.toString.call(u)}),b&&(r.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(u){return"object"==R(u)&&u.buffer&&u.buffer.constructor===ArrayBuffer});for(var m=function(u,t,e){return function(r){return new s(u,t,u).update(r)[e]()}},w=function(u,t,e){return function(r,n){return new s(u,t,n).update(r)[e]()}},_=function(u,t,e){return function(t,r,n,o){return k["cshake"+u].update(t,r,n,o)[e]()}},x=function(u,t,e){return function(t,r,n,o){return k["kmac"+u].update(t,r,n,o)[e]()}},E=function(u,t,e,r){for(var n=0;n<v.length;++n){var o=v[n];u[o]=t(e,r,o)}return u},O=function(u,t){var e=m(u,t,"hex");return e.create=function(){return new s(u,t,u)},e.update=function(t){return e.create().update(t)},E(e,m,u,t)},A=[{name:"keccak",padding:[1,256,65536,16777216],bits:h,createMethod:O},{name:"sha3",padding:[6,1536,393216,100663296],bits:h,createMethod:O},{name:"shake",padding:[31,7936,2031616,520093696],bits:d,createMethod:function(u,t){var e=w(u,t,"hex");return e.create=function(e){return new s(u,t,e)},e.update=function(t,r){return e.create(r).update(t)},E(e,w,u,t)}},{name:"cshake",padding:c,bits:d,createMethod:function(u,t){var e=y[u],r=_(u,0,"hex");return r.create=function(r,n,o){return n||o?new s(u,t,r).bytepad([n,o],e):k["shake"+u].create(r)},r.update=function(t,e,n,o){return r.create(e,n,o).update(t)},E(r,_,u,t)}},{name:"kmac",padding:c,bits:d,createMethod:function(u,t){var e=y[u],r=x(u,0,"hex");return r.create=function(r,n,o){return new N(u,t,n).bytepad(["KMAC",o],e).bytepad([r],e)},r.update=function(t,e,n,o){return r.create(t,n,o).update(e)},E(r,x,u,t)}}],k={},a=[],S=0;S<A.length;++S)for(var I=A[S],g=I.bits,j=0;j<g.length;++j){var P=I.name+"_"+g[j];if(a.push(P),k[P]=I.createMethod(g[j],I.padding),"sha3"!==I.name){var M=I.name+g[j];a.push(M),k[M]=k[P]}}function s(u,t,e){this.blocks=[],this.s=[],this.padding=t,this.outputBits=e,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(u<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=e>>5,this.extraBytes=(31&e)>>3;for(var r=0;r<50;++r)this.s[r]=0}function N(u,t,e){s.call(this,u,t,e)}s.prototype.update=function(u){if(this.finalized)throw new Error("finalize already called");var t,r=R(u);if("string"!==r){if("object"!==r)throw new Error(e);if(null===u)throw new Error(e);if(b&&u.constructor===ArrayBuffer)u=new Uint8Array(u);else if(!(Array.isArray(u)||b&&ArrayBuffer.isView(u)))throw new Error(e);t=!0}for(var n,q,o=this.blocks,c=this.byteCount,l=u.length,h=this.blockCount,d=0,v=this.s;d<l;){if(this.reset)for(this.reset=!1,o[0]=this.block,n=1;n<h+1;++n)o[n]=0;if(t)for(n=this.start;d<l&&n<c;++d)o[n>>2]|=u[d]<<f[3&n++];else for(n=this.start;d<l&&n<c;++d)(q=u.charCodeAt(d))<128?o[n>>2]|=q<<f[3&n++]:q<2048?(o[n>>2]|=(192|q>>6)<<f[3&n++],o[n>>2]|=(128|63&q)<<f[3&n++]):q<55296||q>=57344?(o[n>>2]|=(224|q>>12)<<f[3&n++],o[n>>2]|=(128|q>>6&63)<<f[3&n++],o[n>>2]|=(128|63&q)<<f[3&n++]):(q=65536+((1023&q)<<10|1023&u.charCodeAt(++d)),o[n>>2]|=(240|q>>18)<<f[3&n++],o[n>>2]|=(128|q>>12&63)<<f[3&n++],o[n>>2]|=(128|q>>6&63)<<f[3&n++],o[n>>2]|=(128|63&q)<<f[3&n++]);if(this.lastByteIndex=n,n>=c){for(this.start=n-c,this.block=o[h],n=0;n<h;++n)v[n]^=o[n];T(v),this.reset=!0}else this.start=n}return this},s.prototype.encode=function(u,t){var e=255&u,r=1,n=[e];for(e=255&(u>>=8);e>0;)n.unshift(e),e=255&(u>>=8),++r;return t?n.push(r):n.unshift(r),this.update(n),n.length},s.prototype.encodeString=function(u){var t,r=R(u);if("string"!==r){if("object"!==r)throw new Error(e);if(null===u)throw new Error(e);if(b&&u.constructor===ArrayBuffer)u=new Uint8Array(u);else if(!(Array.isArray(u)||b&&ArrayBuffer.isView(u)))throw new Error(e);t=!0}var n=0,o=u.length;if(t)n=o;else for(var c=0;c<u.length;++c){var f=u.charCodeAt(c);f<128?n+=1:f<2048?n+=2:f<55296||f>=57344?n+=3:(f=65536+((1023&f)<<10|1023&u.charCodeAt(++c)),n+=4)}return n+=this.encode(8*n),this.update(u),n},s.prototype.bytepad=function(u,t){for(var e=this.encode(t),r=0;r<u.length;++r)e+=this.encodeString(u[r]);var n=t-e%t,o=[];return o.length=n,this.update(o),this},s.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var u=this.blocks,t=this.lastByteIndex,e=this.blockCount,r=this.s;if(u[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(u[0]=u[e],t=1;t<e+1;++t)u[t]=0;for(u[e-1]|=2147483648,t=0;t<e;++t)r[t]^=u[t];T(r)}},s.prototype.toString=s.prototype.hex=function(){this.finalize();for(var t,u=this.blockCount,e=this.s,r=this.outputBlocks,n=this.extraBytes,c=0,f=0,l="";f<r;){for(c=0;c<u&&f<r;++c,++f)t=e[c],l+=o[t>>4&15]+o[15&t]+o[t>>12&15]+o[t>>8&15]+o[t>>20&15]+o[t>>16&15]+o[t>>28&15]+o[t>>24&15];f%u==0&&(T(e),c=0)}return n&&(t=e[c],l+=o[t>>4&15]+o[15&t],n>1&&(l+=o[t>>12&15]+o[t>>8&15]),n>2&&(l+=o[t>>20&15]+o[t>>16&15])),l},s.prototype.arrayBuffer=function(){this.finalize();var t,u=this.blockCount,e=this.s,r=this.outputBlocks,n=this.extraBytes,o=0,c=0,f=this.outputBits>>3;t=n?new ArrayBuffer(r+1<<2):new ArrayBuffer(f);for(var l=new Uint32Array(t);c<r;){for(o=0;o<u&&c<r;++o,++c)l[c]=e[o];c%u==0&&T(e)}return n&&(l[o]=e[o],t=t.slice(0,f)),t},s.prototype.buffer=s.prototype.arrayBuffer,s.prototype.digest=s.prototype.array=function(){this.finalize();for(var t,e,u=this.blockCount,r=this.s,n=this.outputBlocks,o=this.extraBytes,c=0,f=0,l=[];f<n;){for(c=0;c<u&&f<n;++c,++f)t=f<<2,e=r[c],l[t]=255&e,l[t+1]=e>>8&255,l[t+2]=e>>16&255,l[t+3]=e>>24&255;f%u==0&&T(r)}return o&&(t=f<<2,e=r[c],l[t]=255&e,o>1&&(l[t+1]=e>>8&255),o>2&&(l[t+2]=e>>16&255)),l},N.prototype=new s,N.prototype.finalize=function(){return this.encode(this.outputBits,!0),s.prototype.finalize.call(this)};var T=function(u){var t,e,r,n,o,c,f,h,d,q,v,y,m,w,_,x,E,O,rt,A,k,S,I,j,P,M,R,N,T,L,C,U,B,D,z,dt,F,H,K,G,V,Y,J,W,Q,X,Z,$,tt,et,nt,it,ot,at,st,ut,ct,ft,lt,ht,pt,vt,yt;for(r=0;r<48;r+=2)n=u[0]^u[10]^u[20]^u[30]^u[40],o=u[1]^u[11]^u[21]^u[31]^u[41],c=u[2]^u[12]^u[22]^u[32]^u[42],f=u[3]^u[13]^u[23]^u[33]^u[43],h=u[4]^u[14]^u[24]^u[34]^u[44],d=u[5]^u[15]^u[25]^u[35]^u[45],q=u[6]^u[16]^u[26]^u[36]^u[46],v=u[7]^u[17]^u[27]^u[37]^u[47],t=(y=u[8]^u[18]^u[28]^u[38]^u[48])^(c<<1|f>>>31),e=(m=u[9]^u[19]^u[29]^u[39]^u[49])^(f<<1|c>>>31),u[0]^=t,u[1]^=e,u[10]^=t,u[11]^=e,u[20]^=t,u[21]^=e,u[30]^=t,u[31]^=e,u[40]^=t,u[41]^=e,t=n^(h<<1|d>>>31),e=o^(d<<1|h>>>31),u[2]^=t,u[3]^=e,u[12]^=t,u[13]^=e,u[22]^=t,u[23]^=e,u[32]^=t,u[33]^=e,u[42]^=t,u[43]^=e,t=c^(q<<1|v>>>31),e=f^(v<<1|q>>>31),u[4]^=t,u[5]^=e,u[14]^=t,u[15]^=e,u[24]^=t,u[25]^=e,u[34]^=t,u[35]^=e,u[44]^=t,u[45]^=e,t=h^(y<<1|m>>>31),e=d^(m<<1|y>>>31),u[6]^=t,u[7]^=e,u[16]^=t,u[17]^=e,u[26]^=t,u[27]^=e,u[36]^=t,u[37]^=e,u[46]^=t,u[47]^=e,t=q^(n<<1|o>>>31),e=v^(o<<1|n>>>31),u[8]^=t,u[9]^=e,u[18]^=t,u[19]^=e,u[28]^=t,u[29]^=e,u[38]^=t,u[39]^=e,u[48]^=t,u[49]^=e,w=u[0],_=u[1],X=u[11]<<4|u[10]>>>28,Z=u[10]<<4|u[11]>>>28,N=u[20]<<3|u[21]>>>29,T=u[21]<<3|u[20]>>>29,ht=u[31]<<9|u[30]>>>23,pt=u[30]<<9|u[31]>>>23,Y=u[40]<<18|u[41]>>>14,J=u[41]<<18|u[40]>>>14,D=u[2]<<1|u[3]>>>31,z=u[3]<<1|u[2]>>>31,x=u[13]<<12|u[12]>>>20,E=u[12]<<12|u[13]>>>20,$=u[22]<<10|u[23]>>>22,tt=u[23]<<10|u[22]>>>22,L=u[33]<<13|u[32]>>>19,C=u[32]<<13|u[33]>>>19,vt=u[42]<<2|u[43]>>>30,yt=u[43]<<2|u[42]>>>30,at=u[5]<<30|u[4]>>>2,st=u[4]<<30|u[5]>>>2,dt=u[14]<<6|u[15]>>>26,F=u[15]<<6|u[14]>>>26,O=u[25]<<11|u[24]>>>21,rt=u[24]<<11|u[25]>>>21,et=u[34]<<15|u[35]>>>17,nt=u[35]<<15|u[34]>>>17,U=u[45]<<29|u[44]>>>3,B=u[44]<<29|u[45]>>>3,j=u[6]<<28|u[7]>>>4,P=u[7]<<28|u[6]>>>4,ut=u[17]<<23|u[16]>>>9,ct=u[16]<<23|u[17]>>>9,H=u[26]<<25|u[27]>>>7,K=u[27]<<25|u[26]>>>7,A=u[36]<<21|u[37]>>>11,k=u[37]<<21|u[36]>>>11,it=u[47]<<24|u[46]>>>8,ot=u[46]<<24|u[47]>>>8,W=u[8]<<27|u[9]>>>5,Q=u[9]<<27|u[8]>>>5,M=u[18]<<20|u[19]>>>12,R=u[19]<<20|u[18]>>>12,ft=u[29]<<7|u[28]>>>25,lt=u[28]<<7|u[29]>>>25,G=u[38]<<8|u[39]>>>24,V=u[39]<<8|u[38]>>>24,S=u[48]<<14|u[49]>>>18,I=u[49]<<14|u[48]>>>18,u[0]=w^~x&O,u[1]=_^~E&rt,u[10]=j^~M&N,u[11]=P^~R&T,u[20]=D^~dt&H,u[21]=z^~F&K,u[30]=W^~X&$,u[31]=Q^~Z&tt,u[40]=at^~ut&ft,u[41]=st^~ct&lt,u[2]=x^~O&A,u[3]=E^~rt&k,u[12]=M^~N&L,u[13]=R^~T&C,u[22]=dt^~H&G,u[23]=F^~K&V,u[32]=X^~$&et,u[33]=Z^~tt&nt,u[42]=ut^~ft&ht,u[43]=ct^~lt&pt,u[4]=O^~A&S,u[5]=rt^~k&I,u[14]=N^~L&U,u[15]=T^~C&B,u[24]=H^~G&Y,u[25]=K^~V&J,u[34]=$^~et&it,u[35]=tt^~nt&ot,u[44]=ft^~ht&vt,u[45]=lt^~pt&yt,u[6]=A^~S&w,u[7]=k^~I&_,u[16]=L^~U&j,u[17]=C^~B&P,u[26]=G^~Y&D,u[27]=V^~J&z,u[36]=et^~it&W,u[37]=nt^~ot&Q,u[46]=ht^~vt&at,u[47]=pt^~yt&st,u[8]=S^~w&x,u[9]=I^~_&E,u[18]=U^~j&M,u[19]=B^~P&R,u[28]=Y^~D&dt,u[29]=J^~z&F,u[38]=it^~W&X,u[39]=ot^~Q&Z,u[48]=vt^~at&ut,u[49]=yt^~st&ct,u[0]^=l[r],u[1]^=l[r+1]};if(p)kt.exports=k;else for(S=0;S<a.length;++S)r[a[S]]=k[a[S]]}();var It=St.exports,jt=!1,Pt=!1,Mt={debug:1,default:2,info:2,warning:3,error:4,off:5},Rt=Mt.default,Nt=null;var Tt,Lt,Ct=function(){try{var t=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(e){try{if("test"!=="test".normalize(e))throw new Error("bad normalize")}catch(r){t.push(e)}})),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}();!function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"}(Tt||(Tt={})),function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"}(Lt||(Lt={}));var Ut="0123456789abcdef",Bt=function(){function t(e){A(this,t),Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}return S(t,[{key:"_log",value:function(t,e){var i=t.toLowerCase();null==Mt[i]&&this.throwArgumentError("invalid log level name","logLevel",t),!(Rt>Mt[i])&&console.log.apply(console,e)}},{key:"debug",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];this._log(t.levels.DEBUG,r)}},{key:"info",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];this._log(t.levels.INFO,r)}},{key:"warn",value:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];this._log(t.levels.WARNING,r)}},{key:"makeError",value:function(e,r,i){if(Pt)return this.makeError("censored error",r,{});r||(r=t.errors.UNKNOWN_ERROR),i||(i={});var n=[];Object.keys(i).forEach((function(b){var t=i[b];try{if(t instanceof Uint8Array){for(var e="",r=0;r<t.length;r++)e+=Ut[t[r]>>4],e+=Ut[15&t[r]];n.push(b+"=Uint8Array(0x"+e+")")}else n.push(b+"="+JSON.stringify(t))}catch(t){n.push(b+"="+JSON.stringify(i[b].toString()))}})),n.push("code=".concat(r)),n.push("version=".concat(this.version));var o=e,c="";switch(r){case Lt.NUMERIC_FAULT:c="NUMERIC_FAULT";var b=e;switch(b){case"overflow":case"underflow":case"division-by-zero":c+="-"+b;break;case"negative-power":case"negative-width":c+="-unsupported";break;case"unbound-bitwise-result":c+="-unbound-result"}break;case Lt.CALL_EXCEPTION:case Lt.INSUFFICIENT_FUNDS:case Lt.MISSING_NEW:case Lt.NONCE_EXPIRED:case Lt.REPLACEMENT_UNDERPRICED:case Lt.TRANSACTION_REPLACED:case Lt.UNPREDICTABLE_GAS_LIMIT:c=r}c&&(e+=" [ See: https://links.ethers.org/v5-errors-"+c+" ]"),n.length&&(e+=" ("+n.join(", ")+")");var p=new Error(e);return p.reason=o,p.code=r,Object.keys(i).forEach((function(b){p[b]=i[b]})),p}},{key:"throwError",value:function(t,e,i){throw this.makeError(t,e,i)}},{key:"throwArgumentError",value:function(e,r,i){return this.throwError(e,t.errors.INVALID_ARGUMENT,{argument:r,value:i})}},{key:"assert",value:function(t,e,i,r){t||this.throwError(e,i,r)}},{key:"assertArgument",value:function(t,e,i,r){t||this.throwArgumentError(e,i,r)}},{key:"checkNormalize",value:function(e){Ct&&this.throwError("platform missing String.prototype.normalize",t.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Ct})}},{key:"checkSafeUint53",value:function(e,r){"number"==typeof e&&(null==r&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,t.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,t.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}},{key:"checkArgumentCount",value:function(e,r,i){i=i?": "+i:"",e<r&&this.throwError("missing argument"+i,t.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+i,t.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}},{key:"checkNew",value:function(e,r){(e===Object||null==e)&&this.throwError("missing new",t.errors.MISSING_NEW,{name:r.name})}},{key:"checkAbstract",value:function(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",t.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||null==e)&&this.throwError("missing new",t.errors.MISSING_NEW,{name:r.name})}}],[{key:"globalLogger",value:function(){return Nt||(Nt=new t("logger/5.7.0")),Nt}},{key:"setCensorship",value:function(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",t.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),jt){if(!e)return;this.globalLogger().throwError("error censorship permanent",t.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Pt=!!e,jt=!!r}},{key:"setLogLevel",value:function(e){var r=Mt[e.toLowerCase()];null!=r?Rt=r:t.globalLogger().warn("invalid log level - "+e)}},{key:"from",value:function(e){return new t(e)}}])}();Bt.errors=Lt,Bt.levels=Tt;var Dt=new Bt("bytes/5.7.0");function qt(t){return!!t.toHexString}function zt(t){return t.slice||(t.slice=function(){var e=Array.prototype.slice.call(arguments);return zt(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function Ft(t){return"number"==typeof t&&t==t&&t%1==0}function Ht(t){if(null==t)return!1;if(t.constructor===Uint8Array)return!0;if("string"==typeof t||!Ft(t.length)||t.length<0)return!1;for(var e=0;e<t.length;e++){var r=t[e];if(!Ft(r)||r<0||r>=256)return!1}return!0}function Kt(t,e){if(e||(e={}),"number"==typeof t){Dt.checkSafeUint53(t,"invalid arrayify value");for(var r=[];t;)r.unshift(255&t),t=parseInt(String(t/256));return 0===r.length&&r.push(0),zt(new Uint8Array(r))}if(e.allowMissingPrefix&&"string"==typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),qt(t)&&(t=t.toHexString()),Gt(t)){var n=t.substring(2);n.length%2&&("left"===e.hexPad?n="0"+n:"right"===e.hexPad?n+="0":Dt.throwArgumentError("hex data is odd-length","value",t));for(var i=[],o=0;o<n.length;o+=2)i.push(parseInt(n.substring(o,o+2),16));return zt(new Uint8Array(i))}return Ht(t)?zt(new Uint8Array(t)):Dt.throwArgumentError("invalid arrayify value","value",t)}function Gt(t,e){return!("string"!=typeof t||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}var Vt="0123456789abcdef";function Yt(t,e){if(e||(e={}),"number"==typeof t){Dt.checkSafeUint53(t,"invalid hexlify value");for(var r="";t;)r=Vt[15&t]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if("bigint"==typeof t)return(t=t.toString(16)).length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&"string"==typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),qt(t))return t.toHexString();if(Gt(t))return t.length%2&&("left"===e.hexPad?t="0x0"+t.substring(2):"right"===e.hexPad?t+="0":Dt.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(Ht(t)){for(var n="0x",i=0;i<t.length;i++){var o=t[i];n+=Vt[(240&o)>>4]+Vt[15&o]}return n}return Dt.throwArgumentError("invalid hexlify value","value",t)}function Jt(t,e,r){return"string"!=typeof t?t=Yt(t):(!Gt(t)||t.length%2)&&Dt.throwArgumentError("invalid hexData","value",t),e=2+2*e,null!=r?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function Wt(t,e){for("string"!=typeof t?t=Yt(t):Gt(t)||Dt.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&Dt.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function Qt(t){var e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(function(t){return Gt(t)&&!(t.length%2)||Ht(t)}(t)){var r=Kt(t);64===r.length?(e.v=27+(r[32]>>7),r[32]&=127,e.r=Yt(r.slice(0,32)),e.s=Yt(r.slice(32,64))):65===r.length?(e.r=Yt(r.slice(0,32)),e.s=Yt(r.slice(32,64)),e.v=r[64]):Dt.throwArgumentError("invalid signature string","signature",t),e.v<27&&(0===e.v||1===e.v?e.v+=27:Dt.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=Yt(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,null!=e._vs){var n=function(t,e){(t=Kt(t)).length>e&&Dt.throwArgumentError("value out of range","value",arguments[0]);var r=new Uint8Array(e);return r.set(t,e-t.length),zt(r)}(Kt(e._vs),32);e._vs=Yt(n);var o=n[0]>=128?1:0;null==e.recoveryParam?e.recoveryParam=o:e.recoveryParam!==o&&Dt.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),n[0]&=127;var c=Yt(n);null==e.s?e.s=c:e.s!==c&&Dt.throwArgumentError("signature v mismatch _vs","signature",t)}if(null==e.recoveryParam)null==e.v?Dt.throwArgumentError("signature missing v and recoveryParam","signature",t):0===e.v||1===e.v?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(null==e.v)e.v=27+e.recoveryParam;else{var f=0===e.v||1===e.v?e.v:1-e.v%2;e.recoveryParam!==f&&Dt.throwArgumentError("signature recoveryParam mismatch v","signature",t)}null!=e.r&&Gt(e.r)?e.r=Wt(e.r,32):Dt.throwArgumentError("signature missing or invalid r","signature",t),null!=e.s&&Gt(e.s)?e.s=Wt(e.s,32):Dt.throwArgumentError("signature missing or invalid s","signature",t);var l=Kt(e.s);l[0]>=128&&Dt.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(l[0]|=128);var i=Yt(l);e._vs&&(Gt(e._vs)||Dt.throwArgumentError("signature invalid _vs","signature",t),e._vs=Wt(e._vs,32)),null==e._vs?e._vs=i:e._vs!==i&&Dt.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function Xt(t){return"0x"+It.keccak_256(Kt(t))}var Zt={exports:{}},$t=function(t){var e=t.default;if("function"==typeof e){var r=function(){return e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach((function(i){var e=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,e.get?e:{enumerable:!0,get:function(){return t[i]}})})),r}(Object.freeze({__proto__:null,default:{}}));!function(t){!function(t,e){function i(t,e){if(!t)throw new Error(e||"Assertion failed")}function r(t,e){t.super_=e;var a=function(){};a.prototype=e.prototype,t.prototype=new a,t.prototype.constructor=t}function n(t,e,a){if(n.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(("le"===e||"be"===e)&&(a=e,e=10),this._init(t||0,e||10,a||"be"))}var o;"object"==R(t)?t.exports=n:e.BN=n,n.BN=n,n.wordSize=26;try{o=("undefined"==typeof window?"undefined":R(window))<"u"&&R(window.Buffer)<"u"?window.Buffer:$t.Buffer}catch(t){}function p(t,e){var a=t.charCodeAt(e);return a>=48&&a<=57?a-48:a>=65&&a<=70?a-55:a>=97&&a<=102?a-87:void i(!1,"Invalid character in "+t)}function b(t,e,a){var r=p(t,a);return a-1>=e&&(r|=p(t,a-1)<<4),r}function c(t,e,a,r){for(var n=0,g=0,o=Math.min(t.length,a),c=e;c<o;c++){var f=t.charCodeAt(c)-48;n*=r,g=f>=49?f-49+10:f>=17?f-17+10:f,i(f>=0&&g<r,"Invalid character"),n+=g}return n}function f(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(n.isBN=function(t){return t instanceof n||null!==t&&"object"==R(t)&&t.constructor.wordSize===n.wordSize&&Array.isArray(t.words)},n.max=function(t,a){return t.cmp(a)>0?t:a},n.min=function(t,a){return t.cmp(a)<0?t:a},n.prototype._init=function(t,a,e){if("number"==typeof t)return this._initNumber(t,a,e);if("object"==R(t))return this._initArray(t,a,e);"hex"===a&&(a=16),i(a===(0|a)&&a>=2&&a<=36);var r=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(r++,this.negative=1),r<t.length&&(16===a?this._parseHex(t,r,e):(this._parseBase(t,a,r),"le"===e&&this._initArray(this.toArray(),a,e)))},n.prototype._initNumber=function(t,a,e){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(i(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===e&&this._initArray(this.toArray(),a,e)},n.prototype._initArray=function(t,a,e){if(i("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var g,n,o=0;if("be"===e)for(r=t.length-1,g=0;r>=0;r-=3)n=t[r]|t[r-1]<<8|t[r-2]<<16,this.words[g]|=n<<o&67108863,this.words[g+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,g++);else if("le"===e)for(r=0,g=0;r<t.length;r+=3)n=t[r]|t[r+1]<<8|t[r+2]<<16,this.words[g]|=n<<o&67108863,this.words[g+1]=n>>>26-o&67108863,(o+=24)>=26&&(o-=26,g++);return this._strip()},n.prototype._parseHex=function(t,a,e){this.length=Math.ceil((t.length-a)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,g=0,o=0;if("be"===e)for(r=t.length-1;r>=a;r-=2)n=b(t,a,r)<<g,this.words[o]|=67108863&n,g>=18?(g-=18,o+=1,this.words[o]|=n>>>26):g+=8;else for(r=(t.length-a)%2==0?a+1:a;r<t.length;r+=2)n=b(t,a,r)<<g,this.words[o]|=67108863&n,g>=18?(g-=18,o+=1,this.words[o]|=n>>>26):g+=8;this._strip()},n.prototype._parseBase=function(t,a,e){this.words=[0],this.length=1;for(var r=0,g=1;g<=67108863;g*=a)r++;r--,g=g/a|0;for(var n=t.length-e,o=n%r,f=Math.min(n,n-o)+e,s=0,l=e;l<f;l+=r)s=c(t,l,l+r,a),this.imuln(g),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s);if(0!==o){var h=1;for(s=c(t,l,t.length,a),l=0;l<o;l++)h*=a;this.imuln(h),this.words[0]+s<67108864?this.words[0]+=s:this._iaddn(s)}this._strip()},n.prototype.copy=function(t){t.words=new Array(this.length);for(var a=0;a<this.length;a++)t.words[a]=this.words[a];t.length=this.length,t.negative=this.negative,t.red=this.red},n.prototype._move=function(t){f(t,this)},n.prototype.clone=function(){var t=new n(null);return this.copy(t),t},n.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},n.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},n.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},("undefined"==typeof Symbol?"undefined":R(Symbol))<"u"&&"function"==typeof Symbol.for)try{n.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(t){n.prototype.inspect=l}else n.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(t,a){var e;if(a=0|a||1,16===(t=t||10)||"hex"===t){e="";for(var r=0,g=0,n=0;n<this.length;n++){var o=this.words[n],c=(16777215&(o<<r|g)).toString(16);g=o>>>24-r&16777215,(r+=2)>=26&&(r-=26,n--),e=0!==g||n!==this.length-1?h[6-c.length]+c+e:c+e}for(0!==g&&(e=g.toString(16)+e);e.length%a!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}if(t===(0|t)&&t>=2&&t<=36){var s=d[t],f=v[t];e="";var l=this.clone();for(l.negative=0;!l.isZero();){var u=l.modrn(f).toString(t);e=(l=l.idivn(f)).isZero()?u+e:h[s-u.length]+u+e}for(this.isZero()&&(e="0"+e);e.length%a!=0;)e="0"+e;return 0!==this.negative&&(e="-"+e),e}i(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},n.prototype.toJSON=function(){return this.toString(16,2)},o&&(n.prototype.toBuffer=function(t,a){return this.toArrayLike(o,t,a)}),n.prototype.toArray=function(t,a){return this.toArrayLike(Array,t,a)};function y(t,e,a){a.negative=e.negative^t.negative;var r=t.length+e.length|0;a.length=r,r=r-1|0;var n=0|t.words[0],g=0|e.words[0],o=n*g,c=67108863&o,f=o/67108864|0;a.words[0]=c;for(var s=1;s<r;s++){for(var l=f>>>26,h=67108863&f,u=Math.min(s,e.length-1),d=Math.max(0,s-t.length+1);d<=u;d++){var v=s-d|0;l+=(o=(n=0|t.words[v])*(g=0|e.words[d])+h)/67108864|0,h=67108863&o}a.words[s]=0|h,f=0|l}return 0!==f?a.words[s]=0|f:a.length--,a._strip()}n.prototype.toArrayLike=function(t,a,e){this._strip();var r=this.byteLength(),g=e||Math.max(1,r);i(r<=g,"byte array longer than desired length"),i(g>0,"Requested array length <= 0");var n=function(t,a){return t.allocUnsafe?t.allocUnsafe(a):new t(a)}(t,g);return this["_toArrayLike"+("le"===a?"LE":"BE")](n,r),n},n.prototype._toArrayLikeLE=function(t,a){for(var e=0,r=0,g=0,n=0;g<this.length;g++){var o=this.words[g]<<n|r;t[e++]=255&o,e<t.length&&(t[e++]=o>>8&255),e<t.length&&(t[e++]=o>>16&255),6===n?(e<t.length&&(t[e++]=o>>24&255),r=0,n=0):(r=o>>>24,n+=2)}if(e<t.length)for(t[e++]=r;e<t.length;)t[e++]=0},n.prototype._toArrayLikeBE=function(t,a){for(var e=t.length-1,r=0,g=0,n=0;g<this.length;g++){var o=this.words[g]<<n|r;t[e--]=255&o,e>=0&&(t[e--]=o>>8&255),e>=0&&(t[e--]=o>>16&255),6===n?(e>=0&&(t[e--]=o>>24&255),r=0,n=0):(r=o>>>24,n+=2)}if(e>=0)for(t[e--]=r;e>=0;)t[e--]=0},Math.clz32?n.prototype._countBits=function(t){return 32-Math.clz32(t)}:n.prototype._countBits=function(t){var a=t,e=0;return a>=4096&&(e+=13,a>>>=13),a>=64&&(e+=7,a>>>=7),a>=8&&(e+=4,a>>>=4),a>=2&&(e+=2,a>>>=2),e+a},n.prototype._zeroBits=function(t){if(0===t)return 26;var a=t,e=0;return 8191&a||(e+=13,a>>>=13),127&a||(e+=7,a>>>=7),15&a||(e+=4,a>>>=4),3&a||(e+=2,a>>>=2),1&a||e++,e},n.prototype.bitLength=function(){var t=this.words[this.length-1],a=this._countBits(t);return 26*(this.length-1)+a},n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,a=0;a<this.length;a++){var e=this._zeroBits(this.words[a]);if(t+=e,26!==e)break}return t},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},n.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return 0!==this.negative},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var a=0;a<t.length;a++)this.words[a]=this.words[a]|t.words[a];return this._strip()},n.prototype.ior=function(t){return i(!(this.negative|t.negative)),this.iuor(t)},n.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},n.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},n.prototype.iuand=function(t){var a;a=this.length>t.length?t:this;for(var e=0;e<a.length;e++)this.words[e]=this.words[e]&t.words[e];return this.length=a.length,this._strip()},n.prototype.iand=function(t){return i(!(this.negative|t.negative)),this.iuand(t)},n.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},n.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},n.prototype.iuxor=function(t){var a,e;this.length>t.length?(a=this,e=t):(a=t,e=this);for(var r=0;r<e.length;r++)this.words[r]=a.words[r]^e.words[r];if(this!==a)for(;r<a.length;r++)this.words[r]=a.words[r];return this.length=a.length,this._strip()},n.prototype.ixor=function(t){return i(!(this.negative|t.negative)),this.iuxor(t)},n.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},n.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},n.prototype.inotn=function(t){i("number"==typeof t&&t>=0);var a=0|Math.ceil(t/26),e=t%26;this._expand(a),e>0&&a--;for(var r=0;r<a;r++)this.words[r]=67108863&~this.words[r];return e>0&&(this.words[r]=~this.words[r]&67108863>>26-e),this._strip()},n.prototype.notn=function(t){return this.clone().inotn(t)},n.prototype.setn=function(t,a){i("number"==typeof t&&t>=0);var e=t/26|0,r=t%26;return this._expand(e+1),this.words[e]=a?this.words[e]|1<<r:this.words[e]&~(1<<r),this._strip()},n.prototype.iadd=function(t){var a,e,r;if(0!==this.negative&&0===t.negative)return this.negative=0,a=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,a=this.isub(t),t.negative=1,a._normSign();this.length>t.length?(e=this,r=t):(e=t,r=this);for(var g=0,n=0;n<r.length;n++)a=(0|e.words[n])+(0|r.words[n])+g,this.words[n]=67108863&a,g=a>>>26;for(;0!==g&&n<e.length;n++)a=(0|e.words[n])+g,this.words[n]=67108863&a,g=a>>>26;if(this.length=e.length,0!==g)this.words[this.length]=g,this.length++;else if(e!==this)for(;n<e.length;n++)this.words[n]=e.words[n];return this},n.prototype.add=function(t){var a;return 0!==t.negative&&0===this.negative?(t.negative=0,a=this.sub(t),t.negative^=1,a):0===t.negative&&0!==this.negative?(this.negative=0,a=t.sub(this),this.negative=1,a):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},n.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var a=this.iadd(t);return t.negative=1,a._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var e,g,r=this.cmp(t);if(0===r)return this.negative=0,this.length=1,this.words[0]=0,this;r>0?(e=this,g=t):(e=t,g=this);for(var n=0,o=0;o<g.length;o++)n=(a=(0|e.words[o])-(0|g.words[o])+n)>>26,this.words[o]=67108863&a;for(;0!==n&&o<e.length;o++)n=(a=(0|e.words[o])+n)>>26,this.words[o]=67108863&a;if(0===n&&o<e.length&&e!==this)for(;o<e.length;o++)this.words[o]=e.words[o];return this.length=Math.max(this.length,o),e!==this&&(this.negative=1),this._strip()},n.prototype.sub=function(t){return this.clone().isub(t)};var m=function(t,a,e){var r,s,n,o=t.words,g=a.words,c=e.words,f=0,l=0|o[0],u=8191&l,h=l>>>13,d=0|o[1],v=8191&d,y=d>>>13,m=0|o[2],w=8191&m,_=m>>>13,x=0|o[3],E=8191&x,q=x>>>13,O=0|o[4],A=8191&O,k=O>>>13,S=0|o[5],I=8191&S,j=S>>>13,P=0|o[6],M=8191&P,rt=P>>>13,R=0|o[7],N=8191&R,T=R>>>13,L=0|o[8],C=8191&L,U=L>>>13,B=0|o[9],D=8191&B,z=B>>>13,F=0|g[0],H=8191&F,K=F>>>13,G=0|g[1],V=8191&G,Y=G>>>13,J=0|g[2],dt=8191&J,W=J>>>13,Q=0|g[3],X=8191&Q,Z=Q>>>13,$=0|g[4],tt=8191&$,et=$>>>13,nt=0|g[5],it=8191&nt,ot=nt>>>13,at=0|g[6],st=8191&at,ut=at>>>13,ct=0|g[7],ft=8191&ct,lt=ct>>>13,ht=0|g[8],pt=8191&ht,vt=ht>>>13,yt=0|g[9],gt=8191&yt,mt=yt>>>13;e.negative=t.negative^a.negative,e.length=19;var bt=(f+(r=Math.imul(u,H))|0)+((8191&(s=(s=Math.imul(u,K))+Math.imul(h,H)|0))<<13)|0;f=((n=Math.imul(h,K))+(s>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(v,H),s=(s=Math.imul(v,K))+Math.imul(y,H)|0,n=Math.imul(y,K);var wt=(f+(r=r+Math.imul(u,V)|0)|0)+((8191&(s=(s=s+Math.imul(u,Y)|0)+Math.imul(h,V)|0))<<13)|0;f=((n=n+Math.imul(h,Y)|0)+(s>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(w,H),s=(s=Math.imul(w,K))+Math.imul(_,H)|0,n=Math.imul(_,K),r=r+Math.imul(v,V)|0,s=(s=s+Math.imul(v,Y)|0)+Math.imul(y,V)|0,n=n+Math.imul(y,Y)|0;var _t=(f+(r=r+Math.imul(u,dt)|0)|0)+((8191&(s=(s=s+Math.imul(u,W)|0)+Math.imul(h,dt)|0))<<13)|0;f=((n=n+Math.imul(h,W)|0)+(s>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(E,H),s=(s=Math.imul(E,K))+Math.imul(q,H)|0,n=Math.imul(q,K),r=r+Math.imul(w,V)|0,s=(s=s+Math.imul(w,Y)|0)+Math.imul(_,V)|0,n=n+Math.imul(_,Y)|0,r=r+Math.imul(v,dt)|0,s=(s=s+Math.imul(v,W)|0)+Math.imul(y,dt)|0,n=n+Math.imul(y,W)|0;var xt=(f+(r=r+Math.imul(u,X)|0)|0)+((8191&(s=(s=s+Math.imul(u,Z)|0)+Math.imul(h,X)|0))<<13)|0;f=((n=n+Math.imul(h,Z)|0)+(s>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(A,H),s=(s=Math.imul(A,K))+Math.imul(k,H)|0,n=Math.imul(k,K),r=r+Math.imul(E,V)|0,s=(s=s+Math.imul(E,Y)|0)+Math.imul(q,V)|0,n=n+Math.imul(q,Y)|0,r=r+Math.imul(w,dt)|0,s=(s=s+Math.imul(w,W)|0)+Math.imul(_,dt)|0,n=n+Math.imul(_,W)|0,r=r+Math.imul(v,X)|0,s=(s=s+Math.imul(v,Z)|0)+Math.imul(y,X)|0,n=n+Math.imul(y,Z)|0;var Et=(f+(r=r+Math.imul(u,tt)|0)|0)+((8191&(s=(s=s+Math.imul(u,et)|0)+Math.imul(h,tt)|0))<<13)|0;f=((n=n+Math.imul(h,et)|0)+(s>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(I,H),s=(s=Math.imul(I,K))+Math.imul(j,H)|0,n=Math.imul(j,K),r=r+Math.imul(A,V)|0,s=(s=s+Math.imul(A,Y)|0)+Math.imul(k,V)|0,n=n+Math.imul(k,Y)|0,r=r+Math.imul(E,dt)|0,s=(s=s+Math.imul(E,W)|0)+Math.imul(q,dt)|0,n=n+Math.imul(q,W)|0,r=r+Math.imul(w,X)|0,s=(s=s+Math.imul(w,Z)|0)+Math.imul(_,X)|0,n=n+Math.imul(_,Z)|0,r=r+Math.imul(v,tt)|0,s=(s=s+Math.imul(v,et)|0)+Math.imul(y,tt)|0,n=n+Math.imul(y,et)|0;var Ot=(f+(r=r+Math.imul(u,it)|0)|0)+((8191&(s=(s=s+Math.imul(u,ot)|0)+Math.imul(h,it)|0))<<13)|0;f=((n=n+Math.imul(h,ot)|0)+(s>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(M,H),s=(s=Math.imul(M,K))+Math.imul(rt,H)|0,n=Math.imul(rt,K),r=r+Math.imul(I,V)|0,s=(s=s+Math.imul(I,Y)|0)+Math.imul(j,V)|0,n=n+Math.imul(j,Y)|0,r=r+Math.imul(A,dt)|0,s=(s=s+Math.imul(A,W)|0)+Math.imul(k,dt)|0,n=n+Math.imul(k,W)|0,r=r+Math.imul(E,X)|0,s=(s=s+Math.imul(E,Z)|0)+Math.imul(q,X)|0,n=n+Math.imul(q,Z)|0,r=r+Math.imul(w,tt)|0,s=(s=s+Math.imul(w,et)|0)+Math.imul(_,tt)|0,n=n+Math.imul(_,et)|0,r=r+Math.imul(v,it)|0,s=(s=s+Math.imul(v,ot)|0)+Math.imul(y,it)|0,n=n+Math.imul(y,ot)|0;var At=(f+(r=r+Math.imul(u,st)|0)|0)+((8191&(s=(s=s+Math.imul(u,ut)|0)+Math.imul(h,st)|0))<<13)|0;f=((n=n+Math.imul(h,ut)|0)+(s>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(N,H),s=(s=Math.imul(N,K))+Math.imul(T,H)|0,n=Math.imul(T,K),r=r+Math.imul(M,V)|0,s=(s=s+Math.imul(M,Y)|0)+Math.imul(rt,V)|0,n=n+Math.imul(rt,Y)|0,r=r+Math.imul(I,dt)|0,s=(s=s+Math.imul(I,W)|0)+Math.imul(j,dt)|0,n=n+Math.imul(j,W)|0,r=r+Math.imul(A,X)|0,s=(s=s+Math.imul(A,Z)|0)+Math.imul(k,X)|0,n=n+Math.imul(k,Z)|0,r=r+Math.imul(E,tt)|0,s=(s=s+Math.imul(E,et)|0)+Math.imul(q,tt)|0,n=n+Math.imul(q,et)|0,r=r+Math.imul(w,it)|0,s=(s=s+Math.imul(w,ot)|0)+Math.imul(_,it)|0,n=n+Math.imul(_,ot)|0,r=r+Math.imul(v,st)|0,s=(s=s+Math.imul(v,ut)|0)+Math.imul(y,st)|0,n=n+Math.imul(y,ut)|0;var kt=(f+(r=r+Math.imul(u,ft)|0)|0)+((8191&(s=(s=s+Math.imul(u,lt)|0)+Math.imul(h,ft)|0))<<13)|0;f=((n=n+Math.imul(h,lt)|0)+(s>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(C,H),s=(s=Math.imul(C,K))+Math.imul(U,H)|0,n=Math.imul(U,K),r=r+Math.imul(N,V)|0,s=(s=s+Math.imul(N,Y)|0)+Math.imul(T,V)|0,n=n+Math.imul(T,Y)|0,r=r+Math.imul(M,dt)|0,s=(s=s+Math.imul(M,W)|0)+Math.imul(rt,dt)|0,n=n+Math.imul(rt,W)|0,r=r+Math.imul(I,X)|0,s=(s=s+Math.imul(I,Z)|0)+Math.imul(j,X)|0,n=n+Math.imul(j,Z)|0,r=r+Math.imul(A,tt)|0,s=(s=s+Math.imul(A,et)|0)+Math.imul(k,tt)|0,n=n+Math.imul(k,et)|0,r=r+Math.imul(E,it)|0,s=(s=s+Math.imul(E,ot)|0)+Math.imul(q,it)|0,n=n+Math.imul(q,ot)|0,r=r+Math.imul(w,st)|0,s=(s=s+Math.imul(w,ut)|0)+Math.imul(_,st)|0,n=n+Math.imul(_,ut)|0,r=r+Math.imul(v,ft)|0,s=(s=s+Math.imul(v,lt)|0)+Math.imul(y,ft)|0,n=n+Math.imul(y,lt)|0;var St=(f+(r=r+Math.imul(u,pt)|0)|0)+((8191&(s=(s=s+Math.imul(u,vt)|0)+Math.imul(h,pt)|0))<<13)|0;f=((n=n+Math.imul(h,vt)|0)+(s>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(D,H),s=(s=Math.imul(D,K))+Math.imul(z,H)|0,n=Math.imul(z,K),r=r+Math.imul(C,V)|0,s=(s=s+Math.imul(C,Y)|0)+Math.imul(U,V)|0,n=n+Math.imul(U,Y)|0,r=r+Math.imul(N,dt)|0,s=(s=s+Math.imul(N,W)|0)+Math.imul(T,dt)|0,n=n+Math.imul(T,W)|0,r=r+Math.imul(M,X)|0,s=(s=s+Math.imul(M,Z)|0)+Math.imul(rt,X)|0,n=n+Math.imul(rt,Z)|0,r=r+Math.imul(I,tt)|0,s=(s=s+Math.imul(I,et)|0)+Math.imul(j,tt)|0,n=n+Math.imul(j,et)|0,r=r+Math.imul(A,it)|0,s=(s=s+Math.imul(A,ot)|0)+Math.imul(k,it)|0,n=n+Math.imul(k,ot)|0,r=r+Math.imul(E,st)|0,s=(s=s+Math.imul(E,ut)|0)+Math.imul(q,st)|0,n=n+Math.imul(q,ut)|0,r=r+Math.imul(w,ft)|0,s=(s=s+Math.imul(w,lt)|0)+Math.imul(_,ft)|0,n=n+Math.imul(_,lt)|0,r=r+Math.imul(v,pt)|0,s=(s=s+Math.imul(v,vt)|0)+Math.imul(y,pt)|0,n=n+Math.imul(y,vt)|0;var It=(f+(r=r+Math.imul(u,gt)|0)|0)+((8191&(s=(s=s+Math.imul(u,mt)|0)+Math.imul(h,gt)|0))<<13)|0;f=((n=n+Math.imul(h,mt)|0)+(s>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(D,V),s=(s=Math.imul(D,Y))+Math.imul(z,V)|0,n=Math.imul(z,Y),r=r+Math.imul(C,dt)|0,s=(s=s+Math.imul(C,W)|0)+Math.imul(U,dt)|0,n=n+Math.imul(U,W)|0,r=r+Math.imul(N,X)|0,s=(s=s+Math.imul(N,Z)|0)+Math.imul(T,X)|0,n=n+Math.imul(T,Z)|0,r=r+Math.imul(M,tt)|0,s=(s=s+Math.imul(M,et)|0)+Math.imul(rt,tt)|0,n=n+Math.imul(rt,et)|0,r=r+Math.imul(I,it)|0,s=(s=s+Math.imul(I,ot)|0)+Math.imul(j,it)|0,n=n+Math.imul(j,ot)|0,r=r+Math.imul(A,st)|0,s=(s=s+Math.imul(A,ut)|0)+Math.imul(k,st)|0,n=n+Math.imul(k,ut)|0,r=r+Math.imul(E,ft)|0,s=(s=s+Math.imul(E,lt)|0)+Math.imul(q,ft)|0,n=n+Math.imul(q,lt)|0,r=r+Math.imul(w,pt)|0,s=(s=s+Math.imul(w,vt)|0)+Math.imul(_,pt)|0,n=n+Math.imul(_,vt)|0;var jt=(f+(r=r+Math.imul(v,gt)|0)|0)+((8191&(s=(s=s+Math.imul(v,mt)|0)+Math.imul(y,gt)|0))<<13)|0;f=((n=n+Math.imul(y,mt)|0)+(s>>>13)|0)+(jt>>>26)|0,jt&=67108863,r=Math.imul(D,dt),s=(s=Math.imul(D,W))+Math.imul(z,dt)|0,n=Math.imul(z,W),r=r+Math.imul(C,X)|0,s=(s=s+Math.imul(C,Z)|0)+Math.imul(U,X)|0,n=n+Math.imul(U,Z)|0,r=r+Math.imul(N,tt)|0,s=(s=s+Math.imul(N,et)|0)+Math.imul(T,tt)|0,n=n+Math.imul(T,et)|0,r=r+Math.imul(M,it)|0,s=(s=s+Math.imul(M,ot)|0)+Math.imul(rt,it)|0,n=n+Math.imul(rt,ot)|0,r=r+Math.imul(I,st)|0,s=(s=s+Math.imul(I,ut)|0)+Math.imul(j,st)|0,n=n+Math.imul(j,ut)|0,r=r+Math.imul(A,ft)|0,s=(s=s+Math.imul(A,lt)|0)+Math.imul(k,ft)|0,n=n+Math.imul(k,lt)|0,r=r+Math.imul(E,pt)|0,s=(s=s+Math.imul(E,vt)|0)+Math.imul(q,pt)|0,n=n+Math.imul(q,vt)|0;var Pt=(f+(r=r+Math.imul(w,gt)|0)|0)+((8191&(s=(s=s+Math.imul(w,mt)|0)+Math.imul(_,gt)|0))<<13)|0;f=((n=n+Math.imul(_,mt)|0)+(s>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(D,X),s=(s=Math.imul(D,Z))+Math.imul(z,X)|0,n=Math.imul(z,Z),r=r+Math.imul(C,tt)|0,s=(s=s+Math.imul(C,et)|0)+Math.imul(U,tt)|0,n=n+Math.imul(U,et)|0,r=r+Math.imul(N,it)|0,s=(s=s+Math.imul(N,ot)|0)+Math.imul(T,it)|0,n=n+Math.imul(T,ot)|0,r=r+Math.imul(M,st)|0,s=(s=s+Math.imul(M,ut)|0)+Math.imul(rt,st)|0,n=n+Math.imul(rt,ut)|0,r=r+Math.imul(I,ft)|0,s=(s=s+Math.imul(I,lt)|0)+Math.imul(j,ft)|0,n=n+Math.imul(j,lt)|0,r=r+Math.imul(A,pt)|0,s=(s=s+Math.imul(A,vt)|0)+Math.imul(k,pt)|0,n=n+Math.imul(k,vt)|0;var Mt=(f+(r=r+Math.imul(E,gt)|0)|0)+((8191&(s=(s=s+Math.imul(E,mt)|0)+Math.imul(q,gt)|0))<<13)|0;f=((n=n+Math.imul(q,mt)|0)+(s>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(D,tt),s=(s=Math.imul(D,et))+Math.imul(z,tt)|0,n=Math.imul(z,et),r=r+Math.imul(C,it)|0,s=(s=s+Math.imul(C,ot)|0)+Math.imul(U,it)|0,n=n+Math.imul(U,ot)|0,r=r+Math.imul(N,st)|0,s=(s=s+Math.imul(N,ut)|0)+Math.imul(T,st)|0,n=n+Math.imul(T,ut)|0,r=r+Math.imul(M,ft)|0,s=(s=s+Math.imul(M,lt)|0)+Math.imul(rt,ft)|0,n=n+Math.imul(rt,lt)|0,r=r+Math.imul(I,pt)|0,s=(s=s+Math.imul(I,vt)|0)+Math.imul(j,pt)|0,n=n+Math.imul(j,vt)|0;var Rt=(f+(r=r+Math.imul(A,gt)|0)|0)+((8191&(s=(s=s+Math.imul(A,mt)|0)+Math.imul(k,gt)|0))<<13)|0;f=((n=n+Math.imul(k,mt)|0)+(s>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(D,it),s=(s=Math.imul(D,ot))+Math.imul(z,it)|0,n=Math.imul(z,ot),r=r+Math.imul(C,st)|0,s=(s=s+Math.imul(C,ut)|0)+Math.imul(U,st)|0,n=n+Math.imul(U,ut)|0,r=r+Math.imul(N,ft)|0,s=(s=s+Math.imul(N,lt)|0)+Math.imul(T,ft)|0,n=n+Math.imul(T,lt)|0,r=r+Math.imul(M,pt)|0,s=(s=s+Math.imul(M,vt)|0)+Math.imul(rt,pt)|0,n=n+Math.imul(rt,vt)|0;var Nt=(f+(r=r+Math.imul(I,gt)|0)|0)+((8191&(s=(s=s+Math.imul(I,mt)|0)+Math.imul(j,gt)|0))<<13)|0;f=((n=n+Math.imul(j,mt)|0)+(s>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,r=Math.imul(D,st),s=(s=Math.imul(D,ut))+Math.imul(z,st)|0,n=Math.imul(z,ut),r=r+Math.imul(C,ft)|0,s=(s=s+Math.imul(C,lt)|0)+Math.imul(U,ft)|0,n=n+Math.imul(U,lt)|0,r=r+Math.imul(N,pt)|0,s=(s=s+Math.imul(N,vt)|0)+Math.imul(T,pt)|0,n=n+Math.imul(T,vt)|0;var Tt=(f+(r=r+Math.imul(M,gt)|0)|0)+((8191&(s=(s=s+Math.imul(M,mt)|0)+Math.imul(rt,gt)|0))<<13)|0;f=((n=n+Math.imul(rt,mt)|0)+(s>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(D,ft),s=(s=Math.imul(D,lt))+Math.imul(z,ft)|0,n=Math.imul(z,lt),r=r+Math.imul(C,pt)|0,s=(s=s+Math.imul(C,vt)|0)+Math.imul(U,pt)|0,n=n+Math.imul(U,vt)|0;var Lt=(f+(r=r+Math.imul(N,gt)|0)|0)+((8191&(s=(s=s+Math.imul(N,mt)|0)+Math.imul(T,gt)|0))<<13)|0;f=((n=n+Math.imul(T,mt)|0)+(s>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,r=Math.imul(D,pt),s=(s=Math.imul(D,vt))+Math.imul(z,pt)|0,n=Math.imul(z,vt);var Ct=(f+(r=r+Math.imul(C,gt)|0)|0)+((8191&(s=(s=s+Math.imul(C,mt)|0)+Math.imul(U,gt)|0))<<13)|0;f=((n=n+Math.imul(U,mt)|0)+(s>>>13)|0)+(Ct>>>26)|0,Ct&=67108863;var Ut=(f+(r=Math.imul(D,gt))|0)+((8191&(s=(s=Math.imul(D,mt))+Math.imul(z,gt)|0))<<13)|0;return f=((n=Math.imul(z,mt))+(s>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,c[0]=bt,c[1]=wt,c[2]=_t,c[3]=xt,c[4]=Et,c[5]=Ot,c[6]=At,c[7]=kt,c[8]=St,c[9]=It,c[10]=jt,c[11]=Pt,c[12]=Mt,c[13]=Rt,c[14]=Nt,c[15]=Tt,c[16]=Lt,c[17]=Ct,c[18]=Ut,0!==f&&(c[19]=f,e.length++),e};function w(t,e,a){a.negative=e.negative^t.negative,a.length=t.length+e.length;for(var r=0,n=0,g=0;g<a.length-1;g++){var o=n;n=0;for(var c=67108863&r,f=Math.min(g,e.length-1),s=Math.max(0,g-t.length+1);s<=f;s++){var l=g-s,h=(0|t.words[l])*(0|e.words[s]),d=67108863&h;c=67108863&(d=d+c|0),n+=(o=(o=o+(h/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}a.words[g]=c,r=o,o=n}return 0!==r?a.words[g]=r:a.length--,a._strip()}function _(t,e,a){return w(t,e,a)}Math.imul||(m=y),n.prototype.mulTo=function(t,a){var e=this.length+t.length;return 10===this.length&&10===t.length?m(this,t,a):e<63?y(this,t,a):e<1024?w(this,t,a):_(this,t,a)},n.prototype.mul=function(t){var a=new n(null);return a.words=new Array(this.length+t.length),this.mulTo(t,a)},n.prototype.mulf=function(t){var a=new n(null);return a.words=new Array(this.length+t.length),_(this,t,a)},n.prototype.imul=function(t){return this.clone().mulTo(t,this)},n.prototype.imuln=function(t){var a=t<0;a&&(t=-t),i("number"==typeof t),i(t<67108864);for(var e=0,r=0;r<this.length;r++){var g=(0|this.words[r])*t,n=(67108863&g)+(67108863&e);e>>=26,e+=g/67108864|0,e+=n>>>26,this.words[r]=67108863&n}return 0!==e&&(this.words[r]=e,this.length++),a?this.ineg():this},n.prototype.muln=function(t){return this.clone().imuln(t)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(t){var a=function(t){for(var e=new Array(t.bitLength()),a=0;a<e.length;a++){var r=a/26|0,n=a%26;e[a]=t.words[r]>>>n&1}return e}(t);if(0===a.length)return new n(1);for(var e=this,r=0;r<a.length&&0===a[r];r++,e=e.sqr());if(++r<a.length)for(var g=e.sqr();r<a.length;r++,g=g.sqr())0!==a[r]&&(e=e.mul(g));return e},n.prototype.iushln=function(t){i("number"==typeof t&&t>=0);var g,a=t%26,e=(t-a)/26,r=67108863>>>26-a<<26-a;if(0!==a){var n=0;for(g=0;g<this.length;g++){var o=this.words[g]&r,c=(0|this.words[g])-o<<a;this.words[g]=c|n,n=o>>>26-a}n&&(this.words[g]=n,this.length++)}if(0!==e){for(g=this.length-1;g>=0;g--)this.words[g+e]=this.words[g];for(g=0;g<e;g++)this.words[g]=0;this.length+=e}return this._strip()},n.prototype.ishln=function(t){return i(0===this.negative),this.iushln(t)},n.prototype.iushrn=function(t,a,e){var r;i("number"==typeof t&&t>=0),r=a?(a-a%26)/26:0;var g=t%26,n=Math.min((t-g)/26,this.length),o=67108863^67108863>>>g<<g,c=e;if(r-=n,r=Math.max(0,r),c){for(var s=0;s<n;s++)c.words[s]=this.words[s];c.length=n}if(0!==n)if(this.length>n)for(this.length-=n,s=0;s<this.length;s++)this.words[s]=this.words[s+n];else this.words[0]=0,this.length=1;var f=0;for(s=this.length-1;s>=0&&(0!==f||s>=r);s--){var l=0|this.words[s];this.words[s]=f<<26-g|l>>>g,f=l&o}return c&&0!==f&&(c.words[c.length++]=f),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},n.prototype.ishrn=function(t,a,e){return i(0===this.negative),this.iushrn(t,a,e)},n.prototype.shln=function(t){return this.clone().ishln(t)},n.prototype.ushln=function(t){return this.clone().iushln(t)},n.prototype.shrn=function(t){return this.clone().ishrn(t)},n.prototype.ushrn=function(t){return this.clone().iushrn(t)},n.prototype.testn=function(t){i("number"==typeof t&&t>=0);var a=t%26,e=(t-a)/26,r=1<<a;return!(this.length<=e)&&!!(this.words[e]&r)},n.prototype.imaskn=function(t){i("number"==typeof t&&t>=0);var a=t%26,e=(t-a)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=e)return this;if(0!==a&&e++,this.length=Math.min(e,this.length),0!==a){var r=67108863^67108863>>>a<<a;this.words[this.length-1]&=r}return this._strip()},n.prototype.maskn=function(t){return this.clone().imaskn(t)},n.prototype.iaddn=function(t){return i("number"==typeof t),i(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},n.prototype._iaddn=function(t){this.words[0]+=t;for(var a=0;a<this.length&&this.words[a]>=67108864;a++)this.words[a]-=67108864,a===this.length-1?this.words[a+1]=1:this.words[a+1]++;return this.length=Math.max(this.length,a+1),this},n.prototype.isubn=function(t){if(i("number"==typeof t),i(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var a=0;a<this.length&&this.words[a]<0;a++)this.words[a]+=67108864,this.words[a+1]-=1;return this._strip()},n.prototype.addn=function(t){return this.clone().iaddn(t)},n.prototype.subn=function(t){return this.clone().isubn(t)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(t,a,e){var g,r=t.length+e;this._expand(r);var n,o=0;for(g=0;g<t.length;g++){n=(0|this.words[g+e])+o;var c=(0|t.words[g])*a;o=((n-=67108863&c)>>26)-(c/67108864|0),this.words[g+e]=67108863&n}for(;g<this.length-e;g++)o=(n=(0|this.words[g+e])+o)>>26,this.words[g+e]=67108863&n;if(0===o)return this._strip();for(i(-1===o),o=0,g=0;g<this.length;g++)o=(n=-(0|this.words[g])+o)>>26,this.words[g]=67108863&n;return this.negative=1,this._strip()},n.prototype._wordDiv=function(t,a){var e=(this.length,t.length),r=this.clone(),g=t,o=0|g.words[g.length-1];0!==(e=26-this._countBits(o))&&(g=g.ushln(e),r.iushln(e),o=0|g.words[g.length-1]);var s,c=r.length-g.length;if("mod"!==a){(s=new n(null)).length=c+1,s.words=new Array(s.length);for(var f=0;f<s.length;f++)s.words[f]=0}var l=r.clone()._ishlnsubmul(g,1,c);0===l.negative&&(r=l,s&&(s.words[c]=1));for(var u=c-1;u>=0;u--){var h=67108864*(0|r.words[g.length+u])+(0|r.words[g.length+u-1]);for(h=Math.min(h/o|0,67108863),r._ishlnsubmul(g,h,u);0!==r.negative;)h--,r.negative=0,r._ishlnsubmul(g,1,u),r.isZero()||(r.negative^=1);s&&(s.words[u]=h)}return s&&s._strip(),r._strip(),"div"!==a&&0!==e&&r.iushrn(e),{div:s||null,mod:r}},n.prototype.divmod=function(t,a,e){return i(!t.isZero()),this.isZero()?{div:new n(0),mod:new n(0)}:0!==this.negative&&0===t.negative?(o=this.neg().divmod(t,a),"mod"!==a&&(r=o.div.neg()),"div"!==a&&(g=o.mod.neg(),e&&0!==g.negative&&g.iadd(t)),{div:r,mod:g}):0===this.negative&&0!==t.negative?(o=this.divmod(t.neg(),a),"mod"!==a&&(r=o.div.neg()),{div:r,mod:o.mod}):this.negative&t.negative?(o=this.neg().divmod(t.neg(),a),"div"!==a&&(g=o.mod.neg(),e&&0!==g.negative&&g.isub(t)),{div:o.div,mod:g}):t.length>this.length||this.cmp(t)<0?{div:new n(0),mod:this}:1===t.length?"div"===a?{div:this.divn(t.words[0]),mod:null}:"mod"===a?{div:null,mod:new n(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new n(this.modrn(t.words[0]))}:this._wordDiv(t,a);var r,g,o},n.prototype.div=function(t){return this.divmod(t,"div",!1).div},n.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},n.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},n.prototype.divRound=function(t){var a=this.divmod(t);if(a.mod.isZero())return a.div;var e=0!==a.div.negative?a.mod.isub(t):a.mod,r=t.ushrn(1),g=t.andln(1),n=e.cmp(r);return n<0||1===g&&0===n?a.div:0!==a.div.negative?a.div.isubn(1):a.div.iaddn(1)},n.prototype.modrn=function(t){var a=t<0;a&&(t=-t),i(t<=67108863);for(var e=(1<<26)%t,r=0,g=this.length-1;g>=0;g--)r=(e*r+(0|this.words[g]))%t;return a?-r:r},n.prototype.modn=function(t){return this.modrn(t)},n.prototype.idivn=function(t){var a=t<0;a&&(t=-t),i(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var g=(0|this.words[r])+67108864*e;this.words[r]=g/t|0,e=g%t}return this._strip(),a?this.ineg():this},n.prototype.divn=function(t){return this.clone().idivn(t)},n.prototype.egcd=function(t){i(0===t.negative),i(!t.isZero());var a=this,e=t.clone();a=0!==a.negative?a.umod(t):a.clone();for(var r=new n(1),g=new n(0),o=new n(0),c=new n(1),f=0;a.isEven()&&e.isEven();)a.iushrn(1),e.iushrn(1),++f;for(var s=e.clone(),l=a.clone();!a.isZero();){for(var h=0,u=1;!(a.words[0]&u)&&h<26;++h,u<<=1);if(h>0)for(a.iushrn(h);h-- >0;)(r.isOdd()||g.isOdd())&&(r.iadd(s),g.isub(l)),r.iushrn(1),g.iushrn(1);for(var d=0,v=1;!(e.words[0]&v)&&d<26;++d,v<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(o.isOdd()||c.isOdd())&&(o.iadd(s),c.isub(l)),o.iushrn(1),c.iushrn(1);a.cmp(e)>=0?(a.isub(e),r.isub(o),g.isub(c)):(e.isub(a),o.isub(r),c.isub(g))}return{a:o,b:c,gcd:e.iushln(f)}},n.prototype._invmp=function(t){i(0===t.negative),i(!t.isZero());var e,a=this,r=t.clone();a=0!==a.negative?a.umod(t):a.clone();for(var o=new n(1),g=new n(0),c=r.clone();a.cmpn(1)>0&&r.cmpn(1)>0;){for(var f=0,l=1;!(a.words[0]&l)&&f<26;++f,l<<=1);if(f>0)for(a.iushrn(f);f-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);for(var s=0,h=1;!(r.words[0]&h)&&s<26;++s,h<<=1);if(s>0)for(r.iushrn(s);s-- >0;)g.isOdd()&&g.iadd(c),g.iushrn(1);a.cmp(r)>=0?(a.isub(r),o.isub(g)):(r.isub(a),g.isub(o))}return(e=0===a.cmpn(1)?o:g).cmpn(0)<0&&e.iadd(t),e},n.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var a=this.clone(),e=t.clone();a.negative=0,e.negative=0;for(var r=0;a.isEven()&&e.isEven();r++)a.iushrn(1),e.iushrn(1);for(;;){for(;a.isEven();)a.iushrn(1);for(;e.isEven();)e.iushrn(1);var g=a.cmp(e);if(g<0){var n=a;a=e,e=n}else if(0===g||0===e.cmpn(1))break;a.isub(e)}return e.iushln(r)},n.prototype.invm=function(t){return this.egcd(t).a.umod(t)},n.prototype.isEven=function(){return!(1&this.words[0])},n.prototype.isOdd=function(){return!(1&~this.words[0])},n.prototype.andln=function(t){return this.words[0]&t},n.prototype.bincn=function(t){i("number"==typeof t);var a=t%26,e=(t-a)/26,r=1<<a;if(this.length<=e)return this._expand(e+1),this.words[e]|=r,this;for(var g=r,n=e;0!==g&&n<this.length;n++){var o=0|this.words[n];g=(o+=g)>>>26,o&=67108863,this.words[n]=o}return 0!==g&&(this.words[n]=g,this.length++),this},n.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},n.prototype.cmpn=function(t){var e,a=t<0;if(0!==this.negative&&!a)return-1;if(0===this.negative&&a)return 1;if(this._strip(),this.length>1)e=1;else{a&&(t=-t),i(t<=67108863,"Number is too big");var r=0|this.words[0];e=r===t?0:r<t?-1:1}return 0!==this.negative?0|-e:e},n.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var a=this.ucmp(t);return 0!==this.negative?0|-a:a},n.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var a=0,e=this.length-1;e>=0;e--){var r=0|this.words[e],g=0|t.words[e];if(r!==g){r<g?a=-1:r>g&&(a=1);break}}return a},n.prototype.gtn=function(t){return 1===this.cmpn(t)},n.prototype.gt=function(t){return 1===this.cmp(t)},n.prototype.gten=function(t){return this.cmpn(t)>=0},n.prototype.gte=function(t){return this.cmp(t)>=0},n.prototype.ltn=function(t){return-1===this.cmpn(t)},n.prototype.lt=function(t){return-1===this.cmp(t)},n.prototype.lten=function(t){return this.cmpn(t)<=0},n.prototype.lte=function(t){return this.cmp(t)<=0},n.prototype.eqn=function(t){return 0===this.cmpn(t)},n.prototype.eq=function(t){return 0===this.cmp(t)},n.red=function(t){return new I(t)},n.prototype.toRed=function(t){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},n.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(t){return this.red=t,this},n.prototype.forceRed=function(t){return i(!this.red,"Already a number in reduction context"),this._forceRed(t)},n.prototype.redAdd=function(t){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},n.prototype.redIAdd=function(t){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},n.prototype.redSub=function(t){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},n.prototype.redISub=function(t){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},n.prototype.redShl=function(t){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},n.prototype.redMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},n.prototype.redIMul=function(t){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},n.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(t){return i(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var x={k256:null,p224:null,p192:null,p25519:null};function E(t,e){this.name=t,this.p=new n(e,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function O(){E.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function A(){E.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function k(){E.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function S(){E.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(t){if("string"==typeof t){var e=n._prime(t);this.m=e.p,this.prime=e}else i(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function j(t){I.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}E.prototype._tmp=function(){var t=new n(null);return t.words=new Array(Math.ceil(this.n/13)),t},E.prototype.ireduce=function(t){var e,a=t;do{this.split(a,this.tmp),e=(a=(a=this.imulK(a)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:a.ucmp(this.p);return 0===r?(a.words[0]=0,a.length=1):r>0?a.isub(this.p):void 0!==a.strip?a.strip():a._strip(),a},E.prototype.split=function(t,a){t.iushrn(this.n,0,a)},E.prototype.imulK=function(t){return t.imul(this.k)},r(O,E),O.prototype.split=function(t,a){for(var e=4194303,r=Math.min(t.length,9),g=0;g<r;g++)a.words[g]=t.words[g];if(a.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var n=t.words[9];for(a.words[a.length++]=n&e,g=10;g<t.length;g++){var o=0|t.words[g];t.words[g-10]=(o&e)<<4|n>>>22,n=o}n>>>=22,t.words[g-10]=n,0===n&&t.length>10?t.length-=10:t.length-=9},O.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var a=0,e=0;e<t.length;e++){var r=0|t.words[e];a+=977*r,t.words[e]=67108863&a,a=64*r+(a/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},r(A,E),r(k,E),r(S,E),S.prototype.imulK=function(t){for(var a=0,e=0;e<t.length;e++){var r=19*(0|t.words[e])+a,g=67108863&r;r>>>=26,t.words[e]=g,a=r}return 0!==a&&(t.words[t.length++]=a),t},n._prime=function(t){if(x[t])return x[t];var a;if("k256"===t)a=new O;else if("p224"===t)a=new A;else if("p192"===t)a=new k;else{if("p25519"!==t)throw new Error("Unknown prime "+t);a=new S}return x[t]=a,a},I.prototype._verify1=function(t){i(0===t.negative,"red works only with positives"),i(t.red,"red works only with red numbers")},I.prototype._verify2=function(t,a){i(!(t.negative|a.negative),"red works only with positives"),i(t.red&&t.red===a.red,"red works only with red numbers")},I.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(f(t,t.umod(this.m)._forceRed(this)),t)},I.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},I.prototype.add=function(t,a){this._verify2(t,a);var e=t.add(a);return e.cmp(this.m)>=0&&e.isub(this.m),e._forceRed(this)},I.prototype.iadd=function(t,a){this._verify2(t,a);var e=t.iadd(a);return e.cmp(this.m)>=0&&e.isub(this.m),e},I.prototype.sub=function(t,a){this._verify2(t,a);var e=t.sub(a);return e.cmpn(0)<0&&e.iadd(this.m),e._forceRed(this)},I.prototype.isub=function(t,a){this._verify2(t,a);var e=t.isub(a);return e.cmpn(0)<0&&e.iadd(this.m),e},I.prototype.shl=function(t,a){return this._verify1(t),this.imod(t.ushln(a))},I.prototype.imul=function(t,a){return this._verify2(t,a),this.imod(t.imul(a))},I.prototype.mul=function(t,a){return this._verify2(t,a),this.imod(t.mul(a))},I.prototype.isqr=function(t){return this.imul(t,t.clone())},I.prototype.sqr=function(t){return this.mul(t,t)},I.prototype.sqrt=function(t){if(t.isZero())return t.clone();var a=this.m.andln(3);if(i(a%2==1),3===a){var e=this.m.add(new n(1)).iushrn(2);return this.pow(t,e)}for(var r=this.m.subn(1),g=0;!r.isZero()&&0===r.andln(1);)g++,r.iushrn(1);i(!r.isZero());var o=new n(1).toRed(this),c=o.redNeg(),f=this.m.subn(1).iushrn(1),s=this.m.bitLength();for(s=new n(2*s*s).toRed(this);0!==this.pow(s,f).cmp(c);)s.redIAdd(c);for(var l=this.pow(s,r),h=this.pow(t,r.addn(1).iushrn(1)),u=this.pow(t,r),d=g;0!==u.cmp(o);){for(var v=u,y=0;0!==v.cmp(o);y++)v=v.redSqr();i(y<d);var m=this.pow(l,new n(1).iushln(d-y-1));h=h.redMul(m),l=m.redSqr(),u=u.redMul(l),d=y}return h},I.prototype.invm=function(t){var a=t._invmp(this.m);return 0!==a.negative?(a.negative=0,this.imod(a).redNeg()):this.imod(a)},I.prototype.pow=function(t,a){if(a.isZero())return new n(1).toRed(this);if(0===a.cmpn(1))return t.clone();var e=new Array(16);e[0]=new n(1).toRed(this),e[1]=t;for(var g=2;g<e.length;g++)e[g]=this.mul(e[g-1],t);var r=e[0],o=0,c=0,s=a.bitLength()%26;for(0===s&&(s=26),g=a.length-1;g>=0;g--){for(var f=a.words[g],l=s-1;l>=0;l--){var u=f>>l&1;(r!==e[0]&&(r=this.sqr(r)),0!==u||0!==o)?(o<<=1,o|=u,(4===++c||0===g&&0===l)&&(r=this.mul(r,e[o]),c=0,o=0)):c=0}s=26}return r},I.prototype.convertTo=function(t){var a=t.umod(this.m);return a===t?a.clone():a},I.prototype.convertFrom=function(t){var a=t.clone();return a.red=null,a},n.mont=function(t){return new j(t)},r(j,I),j.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},j.prototype.convertFrom=function(t){var a=this.imod(t.mul(this.rinv));return a.red=null,a},j.prototype.imul=function(t,a){if(t.isZero()||a.isZero())return t.words[0]=0,t.length=1,t;var e=t.imul(a),r=e.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=e.isub(r).iushrn(this.shift),n=g;return g.cmp(this.m)>=0?n=g.isub(this.m):g.cmpn(0)<0&&(n=g.iadd(this.m)),n._forceRed(this)},j.prototype.mul=function(t,a){if(t.isZero()||a.isZero())return new n(0)._forceRed(this);var e=t.mul(a),r=e.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),g=e.isub(r).iushrn(this.shift),o=g;return g.cmp(this.m)>=0?o=g.isub(this.m):g.cmpn(0)<0&&(o=g.iadd(this.m)),o._forceRed(this)},j.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,At)}(Zt);var te=Zt.exports,ee="bignumber/5.7.0",re=te.BN,ne=new Bt(ee),ie={},oe=9007199254740991;var ae=!1,se=function(){function t(e,r){A(this,t),e!==ie&&ne.throwError("cannot call constructor directly; use BigNumber.from",Bt.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}return S(t,[{key:"fromTwos",value:function(t){return ce(fe(this).fromTwos(t))}},{key:"toTwos",value:function(t){return ce(fe(this).toTwos(t))}},{key:"abs",value:function(){return"-"===this._hex[0]?t.from(this._hex.substring(1)):this}},{key:"add",value:function(t){return ce(fe(this).add(fe(t)))}},{key:"sub",value:function(t){return ce(fe(this).sub(fe(t)))}},{key:"div",value:function(e){return t.from(e).isZero()&&le("division-by-zero","div"),ce(fe(this).div(fe(e)))}},{key:"mul",value:function(t){return ce(fe(this).mul(fe(t)))}},{key:"mod",value:function(t){var e=fe(t);return e.isNeg()&&le("division-by-zero","mod"),ce(fe(this).umod(e))}},{key:"pow",value:function(t){var e=fe(t);return e.isNeg()&&le("negative-power","pow"),ce(fe(this).pow(e))}},{key:"and",value:function(t){var e=fe(t);return(this.isNegative()||e.isNeg())&&le("unbound-bitwise-result","and"),ce(fe(this).and(e))}},{key:"or",value:function(t){var e=fe(t);return(this.isNegative()||e.isNeg())&&le("unbound-bitwise-result","or"),ce(fe(this).or(e))}},{key:"xor",value:function(t){var e=fe(t);return(this.isNegative()||e.isNeg())&&le("unbound-bitwise-result","xor"),ce(fe(this).xor(e))}},{key:"mask",value:function(t){return(this.isNegative()||t<0)&&le("negative-width","mask"),ce(fe(this).maskn(t))}},{key:"shl",value:function(t){return(this.isNegative()||t<0)&&le("negative-width","shl"),ce(fe(this).shln(t))}},{key:"shr",value:function(t){return(this.isNegative()||t<0)&&le("negative-width","shr"),ce(fe(this).shrn(t))}},{key:"eq",value:function(t){return fe(this).eq(fe(t))}},{key:"lt",value:function(t){return fe(this).lt(fe(t))}},{key:"lte",value:function(t){return fe(this).lte(fe(t))}},{key:"gt",value:function(t){return fe(this).gt(fe(t))}},{key:"gte",value:function(t){return fe(this).gte(fe(t))}},{key:"isNegative",value:function(){return"-"===this._hex[0]}},{key:"isZero",value:function(){return fe(this).isZero()}},{key:"toNumber",value:function(){try{return fe(this).toNumber()}catch(t){le("overflow","toNumber",this.toString())}return null}},{key:"toBigInt",value:function(){try{return BigInt(this.toString())}catch(t){}return ne.throwError("this platform does not support BigInt",Bt.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}},{key:"toString",value:function(){return arguments.length>0&&(10===arguments[0]?ae||(ae=!0,ne.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?ne.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Bt.errors.UNEXPECTED_ARGUMENT,{}):ne.throwError("BigNumber.toString does not accept parameters",Bt.errors.UNEXPECTED_ARGUMENT,{})),fe(this).toString(10)}},{key:"toHexString",value:function(){return this._hex}},{key:"toJSON",value:function(t){return{type:"BigNumber",hex:this.toHexString()}}}],[{key:"from",value:function(e){if(e instanceof t)return e;if("string"==typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new t(ie,ue(e)):e.match(/^-?[0-9]+$/)?new t(ie,ue(new re(e))):ne.throwArgumentError("invalid BigNumber string","value",e);if("number"==typeof e)return e%1&&le("underflow","BigNumber.from",e),(e>=oe||e<=-oe)&&le("overflow","BigNumber.from",e),t.from(String(e));var r=e;if("bigint"==typeof r)return t.from(r.toString());if(Ht(r))return t.from(Yt(r));if(r)if(r.toHexString){var i=r.toHexString();if("string"==typeof i)return t.from(i)}else{var n=r._hex;if(null==n&&"BigNumber"===r.type&&(n=r.hex),"string"==typeof n&&(Gt(n)||"-"===n[0]&&Gt(n.substring(1))))return t.from(n)}return ne.throwArgumentError("invalid BigNumber value","value",e)}},{key:"isBigNumber",value:function(t){return!(!t||!t._isBigNumber)}}])}();function ue(t){if("string"!=typeof t)return ue(t.toString(16));if("-"===t[0])return"-"===(t=t.substring(1))[0]&&ne.throwArgumentError("invalid hex","value",t),"0x00"===(t=ue(t))?t:"-"+t;if("0x"!==t.substring(0,2)&&(t="0x"+t),"0x"===t)return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&"0x00"===t.substring(0,4);)t="0x"+t.substring(4);return t}function ce(t){return se.from(ue(t))}function fe(t){var e=se.from(t).toHexString();return"-"===e[0]?new re("-"+e.substring(3),16):new re(e.substring(2),16)}function le(t,e,r){var i={fault:t,operation:e};return null!=r&&(i.value=r),ne.throwError(t,Bt.errors.NUMERIC_FAULT,i)}var he=new Bt(ee),pe={},de=se.from(0),ve=se.from(-1);function ye(t,e,r,i){var n={fault:e,operation:r};return void 0!==i&&(n.value=i),he.throwError(t,Bt.errors.NUMERIC_FAULT,n)}for(var ge="0";ge.length<256;)ge+=ge;function me(t){if("number"!=typeof t)try{t=se.from(t).toNumber()}catch(t){}return"number"==typeof t&&t>=0&&t<=256&&!(t%1)?"1"+ge.substring(0,t):he.throwArgumentError("invalid decimal size","decimals",t)}function be(t,e){null==e&&(e=0);var r=me(e),i=(t=se.from(t)).lt(de);i&&(t=t.mul(ve));for(var n=t.mod(r).toString();n.length<r.length-1;)n="0"+n;n=n.match(/^([0-9]*[1-9]|0)(0*)/)[1];var o=t.div(r).toString();return t=1===r.length?o:o+"."+n,i&&(t="-"+t),t}function we(t,e){null==e&&(e=0);var r=me(e);("string"!=typeof t||!t.match(/^-?[0-9.]+$/))&&he.throwArgumentError("invalid decimal value","value",t);var i="-"===t.substring(0,1);i&&(t=t.substring(1)),"."===t&&he.throwArgumentError("missing value","value",t);var n=t.split(".");n.length>2&&he.throwArgumentError("too many decimal points","value",t);var o=n[0],c=n[1];for(o||(o="0"),c||(c="0");"0"===c[c.length-1];)c=c.substring(0,c.length-1);for(c.length>r.length-1&&ye("fractional component exceeds decimals","underflow","parseFixed"),""===c&&(c="0");c.length<r.length-1;)c+="0";var p=se.from(o),b=se.from(c),f=p.mul(r).add(b);return i&&(f=f.mul(ve)),f}var _e,xe,Ee=function(){function t(e,r,i,n){A(this,t),e!==pe&&he.throwError("cannot use FixedFormat constructor; use FixedFormat.from",Bt.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=r,this.width=i,this.decimals=n,this.name=(r?"":"u")+"fixed"+String(i)+"x"+String(n),this._multiplier=me(n),Object.freeze(this)}return S(t,null,[{key:"from",value:function(e){if(e instanceof t)return e;"number"==typeof e&&(e="fixed128x".concat(e));var r=!0,i=128,n=18;if("string"==typeof e){if("fixed"!==e)if("ufixed"===e)r=!1;else{var o=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);o||he.throwArgumentError("invalid fixed format","format",e),r="u"!==o[1],i=parseInt(o[2]),n=parseInt(o[3])}}else if(e){var c=function(t,p,b){return null==e[t]?b:(R(e[t])!==p&&he.throwArgumentError("invalid fixed format ("+t+" not "+p+")","format."+t,e[t]),e[t])};r=c("signed","boolean",r),i=c("width","number",i),n=c("decimals","number",n)}return i%8&&he.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",i),n>80&&he.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",n),new t(pe,r,i,n)}}])}(),Oe=function(){function t(e,r,i,n){A(this,t),e!==pe&&he.throwError("cannot use FixedNumber constructor; use FixedNumber.from",Bt.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=n,this._hex=r,this._value=i,this._isFixedNumber=!0,Object.freeze(this)}return S(t,[{key:"_checkFormat",value:function(t){this.format.name!==t.format.name&&he.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",t)}},{key:"addUnsafe",value:function(e){this._checkFormat(e);var r=we(this._value,this.format.decimals),i=we(e._value,e.format.decimals);return t.fromValue(r.add(i),this.format.decimals,this.format)}},{key:"subUnsafe",value:function(e){this._checkFormat(e);var r=we(this._value,this.format.decimals),i=we(e._value,e.format.decimals);return t.fromValue(r.sub(i),this.format.decimals,this.format)}},{key:"mulUnsafe",value:function(e){this._checkFormat(e);var r=we(this._value,this.format.decimals),i=we(e._value,e.format.decimals);return t.fromValue(r.mul(i).div(this.format._multiplier),this.format.decimals,this.format)}},{key:"divUnsafe",value:function(e){this._checkFormat(e);var r=we(this._value,this.format.decimals),i=we(e._value,e.format.decimals);return t.fromValue(r.mul(this.format._multiplier).div(i),this.format.decimals,this.format)}},{key:"floor",value:function(){var e=this.toString().split(".");1===e.length&&e.push("0");var r=t.from(e[0],this.format),i=!e[1].match(/^(0*)$/);return this.isNegative()&&i&&(r=r.subUnsafe(Ae.toFormat(r.format))),r}},{key:"ceiling",value:function(){var e=this.toString().split(".");1===e.length&&e.push("0");var r=t.from(e[0],this.format),i=!e[1].match(/^(0*)$/);return!this.isNegative()&&i&&(r=r.addUnsafe(Ae.toFormat(r.format))),r}},{key:"round",value:function(e){null==e&&(e=0);var r=this.toString().split(".");if(1===r.length&&r.push("0"),(e<0||e>80||e%1)&&he.throwArgumentError("invalid decimal count","decimals",e),r[1].length<=e)return this;var i=t.from("1"+ge.substring(0,e),this.format),n=ke.toFormat(this.format);return this.mulUnsafe(i).addUnsafe(n).floor().divUnsafe(i)}},{key:"isZero",value:function(){return"0.0"===this._value||"0"===this._value}},{key:"isNegative",value:function(){return"-"===this._value[0]}},{key:"toString",value:function(){return this._value}},{key:"toHexString",value:function(t){return null==t?this._hex:(t%8&&he.throwArgumentError("invalid byte width","width",t),Wt(se.from(this._hex).fromTwos(this.format.width).toTwos(t).toHexString(),t/8))}},{key:"toUnsafeFloat",value:function(){return parseFloat(this.toString())}},{key:"toFormat",value:function(e){return t.fromString(this._value,e)}}],[{key:"fromValue",value:function(e,r,i){return null==i&&null!=r&&!function(t){return null!=t&&(se.isBigNumber(t)||"number"==typeof t&&t%1==0||"string"==typeof t&&!!t.match(/^-?[0-9]+$/)||Gt(t)||"bigint"==typeof t||Ht(t))}(r)&&(i=r,r=null),null==r&&(r=0),null==i&&(i="fixed"),t.fromString(be(e,r),Ee.from(i))}},{key:"fromString",value:function(e,r){null==r&&(r="fixed");var i=Ee.from(r),n=we(e,i.decimals);!i.signed&&n.lt(de)&&ye("unsigned value cannot be negative","overflow","value",e);var o=null;i.signed?o=n.toTwos(i.width).toHexString():o=Wt(o=n.toHexString(),i.width/8);var c=be(n,i.decimals);return new t(pe,o,c,i)}},{key:"fromBytes",value:function(e,r){null==r&&(r="fixed");var i=Ee.from(r);if(Kt(e).length>i.width/8)throw new Error("overflow");var n=se.from(e);i.signed&&(n=n.fromTwos(i.width));var o=n.toTwos((i.signed?0:1)+i.width).toHexString(),c=be(n,i.decimals);return new t(pe,o,c,i)}},{key:"from",value:function(e,r){if("string"==typeof e)return t.fromString(e,r);if(Ht(e))return t.fromBytes(e,r);try{return t.fromValue(e,0,r)}catch(t){if(t.code!==Bt.errors.INVALID_ARGUMENT)throw t}return he.throwArgumentError("invalid FixedNumber value","value",e)}},{key:"isFixedNumber",value:function(t){return!(!t||!t._isFixedNumber)}}])}(),Ae=Oe.from(1),ke=Oe.from("0.5"),Se=new Bt("strings/5.7.0");function Ie(t,e,r,i,n){if(t===xe.BAD_PREFIX||t===xe.UNEXPECTED_CONTINUE){for(var o=0,c=e+1;c<r.length&&r[c]>>6==2;c++)o++;return o}return t===xe.OVERRUN?r.length-e-1:0}function je(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_e.current;e!=_e.current&&(Se.checkNormalize(),t=t.normalize(e));for(var r=[],i=0;i<t.length;i++){var n=t.charCodeAt(i);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if(55296==(64512&n)){i++;var o=t.charCodeAt(i);if(i>=t.length||56320!=(64512&o))throw new Error("invalid utf-8 string");var c=65536+((1023&n)<<10)+(1023&o);r.push(c>>18|240),r.push(c>>12&63|128),r.push(c>>6&63|128),r.push(63&c|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return Kt(r)}function Pe(t,e){e||(e=function(t){return[parseInt(t,16)]});var r=0,i={};return t.split(",").forEach((function(t){var n=t.split(":");r+=parseInt(n[0],16),i[r]=e(n[1])})),i}function Me(t){var e=0;return t.split(",").map((function(t){var i=t.split("-");return 1===i.length?i[1]="0":""===i[1]&&(i[1]="1"),{l:e+parseInt(i[0],16),h:e=parseInt(i[1],16)}}))}!function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"}(_e||(_e={})),function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"}(xe||(xe={})),Object.freeze({error:function(t,e,r,i,n){return Se.throwArgumentError("invalid codepoint at offset ".concat(e,"; ").concat(t),"bytes",r)},ignore:Ie,replace:function(t,e,r,i,n){return t===xe.OVERLONG?(i.push(n),0):(i.push(65533),Ie(t,e,r))}}),Me("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),"ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map((function(t){return parseInt(t,16)})),Pe("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),Pe("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),Pe("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",(function(t){if(t.length%4!=0)throw new Error("bad data");for(var e=[],r=0;r<t.length;r+=4)e.push(parseInt(t.substring(r,r+4),16));return e})),Me("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");var Re="hash/5.7.0";function Ne(t,e){null==e&&(e=1);var r=[],i=r.forEach,n=function(t,e){i.call(t,(function(p){e>0&&Array.isArray(p)?n(p,e-1):r.push(p)}))};return n(t,e),r}function Te(t){return function(t){var e=0;return function(){return t[e++]}}(function(t){var e=0;function r(){return t[e++]<<8|t[e++]}for(var i=r(),n=1,o=[0,1],c=1;c<i;c++)o.push(n+=r());var f=r(),p=e;e+=f;var b=0,l=0;function h(){return 0==b&&(l=l<<8|t[e++],b=8),l>>--b&1}for(var d=Math.pow(2,31),v=d>>>1,y=v>>1,m=d-1,w=0,_=0;_<31;_++)w=w<<1|h();for(var x=[],E=0,O=d;;){for(var A=Math.floor(((w-E+1)*n-1)/O),k=0,S=i;S-k>1;){var I=k+S>>>1;A<o[I]?S=I:k=I}if(0==k)break;x.push(k);for(var j=E+Math.floor(O*o[k]/n),P=E+Math.floor(O*o[k+1]/n)-1;!((j^P)&v);)w=w<<1&m|h(),j=j<<1&m,P=P<<1&m|1;for(;j&~P&y;)w=w&v|w<<1&m>>>1|h(),j=j<<1^v,P=(P^v)<<1|v|1;E=j,O=1+P-j}var M=i-4;return x.map((function(e){switch(e-M){case 3:return M+65792+(t[p++]<<16|t[p++]<<8|t[p++]);case 2:return M+256+(t[p++]<<8|t[p++]);case 1:return M+t[p++];default:return e-1}}))}(t))}function Le(t){return 1&t?~t>>1:t>>1}function Ce(t,e){for(var r=Array(t),i=0,n=-1;i<t;i++)r[i]=n+=1+e();return r}function Ue(t,e){for(var r=Array(t),i=0,n=0;i<t;i++)r[i]=n+=Le(e());return r}function Be(t,e){for(var r=Ce(t(),t),i=t(),n=Ce(i,t),o=function(t,e){for(var r=Array(t),i=0;i<t;i++)r[i]=1+e();return r}(i,t),c=0;c<i;c++)for(var p=0;p<o[c];p++)r.push(n[c]+p);return e?r.map((function(t){return e[t]})):r}function De(t,e,r){for(var i=Array(t).fill(void 0).map((function(){return[]})),n=0;n<e;n++)Ue(t,r).forEach((function(t,e){return i[e].push(t)}));return i}function qe(t,e){var r=1+e(),i=e(),n=function(t){for(var e=[];;){var r=t();if(0==r)break;e.push(r)}return e}(e);return Ne(De(n.length,1+t,e).map((function(t,p){var b=t[0],e=t.slice(1);return Array(n[p]).fill(void 0).map((function(t,n){var o=n*i;return[b+n*r,e.map((function(t){return t+o}))]}))})))}function ze(t,e){return De(1+e(),1+t,e).map((function(t){return[t[0],t.slice(1)]}))}var Fe=Te(function(t){t=atob(t);for(var e=[],r=0;r<t.length;r++)e.push(t.charCodeAt(r));return Kt(e)}("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="));new Set(Be(Fe)),new Set(Be(Fe)),function(t){for(var e=[];;){var r=t();if(0==r)break;e.push(qe(r,t))}for(;;){var n=t()-1;if(n<0)break;e.push(ze(n,t))}(function(t){for(var e={},r=0;r<t.length;r++){var i=t[r];e[i[0]]=i[1]}})(Ne(e))}(Fe),function(t){var e=Be(t).sort((function(i,t){return i-t}));(function r(){for(var i=[];;){var n=Be(t,e);if(0==n.length)break;i.push({set:new Set(n),node:r()})}i.sort((function(t,e){return e.set.size-t.set.size}));var o=t();return{branches:i,valid:o%3,fe0f:!!(1&(o=o/3|0)),save:1==(o>>=1),check:2==o}})()}(Fe),new Bt(Re),new Uint8Array(32).fill(0);var He="Ethereum Signed Message:\n";function Ke(t){return"string"==typeof t&&(t=je(t)),Xt(function(t){var e=t.map((function(t){return Kt(t)})),r=e.reduce((function(t,e){return t+e.length}),0),i=new Uint8Array(r);return e.reduce((function(t,e){return i.set(e,t),t+e.length}),0),zt(i)}([je(He),je(String(t.length)),t]))}new Bt("rlp/5.7.0");var Ge=new Bt("address/5.7.0");function Ve(t){Gt(t,20)||Ge.throwArgumentError("invalid address","address",t);for(var e=(t=t.toLowerCase()).substring(2).split(""),r=new Uint8Array(40),n=0;n<40;n++)r[n]=e[n].charCodeAt(0);for(var i=Kt(Xt(r)),o=0;o<40;o+=2)i[o>>1]>>4>=8&&(e[o]=e[o].toUpperCase()),(15&i[o>>1])>=8&&(e[o+1]=e[o+1].toUpperCase());return"0x"+e.join("")}for(var Ye={},Je=0;Je<10;Je++)Ye[String(Je)]=String(Je);for(var We=0;We<26;We++)Ye[String.fromCharCode(65+We)]=String(10+We);var Qe=Math.floor(function(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}(9007199254740991));function Xe(t){var e=null;if("string"!=typeof t&&Ge.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==t.substring(0,2)&&(t="0x"+t),e=Ve(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&Ge.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==function(t){for(var e=(t=(t=t.toUpperCase()).substring(4)+t.substring(0,2)+"00").split("").map((function(i){return Ye[i]})).join("");e.length>=Qe;){var i=e.substring(0,Qe);e=parseInt(i,10)%97+e.substring(i.length)}for(var r=String(98-parseInt(e,10)%97);r.length<2;)r="0"+r;return r}(t)&&Ge.throwArgumentError("bad icap checksum","address",t),e=function(t){return new re(t,36).toString(16)}(t.substring(4));e.length<40;)e="0"+e;e=Ve("0x"+e)}else Ge.throwArgumentError("invalid address","address",t);return e}function br(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}new Bt("properties/5.7.0"),new Bt(Re),new Uint8Array(32).fill(0),se.from(-1);var Ze=se.from(0),$e=se.from(1);se.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Wt($e.toHexString(),32),Wt(Ze.toHexString(),32);var er={},rr={},nr=ir;function ir(t,e){if(!t)throw new Error(e||"Assertion failed")}ir.equal=function(t,e,i){if(t!=e)throw new Error(i||"Assertion failed: "+t+" != "+e)};var or={exports:{}};"function"==typeof Object.create?or.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:or.exports=function(t,e){if(e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}};var ar=nr,sr=or.exports;function ur(t,e){return!(55296!=(64512&t.charCodeAt(e))||e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1))}function cr(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function fr(t){return 1===t.length?"0"+t:t}function lr(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}rr.inherits=sr,rr.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),n=0;n<t.length;n+=2)r.push(parseInt(t[n]+t[n+1],16))}else for(var i=0,n=0;n<t.length;n++){var o=t.charCodeAt(n);o<128?r[i++]=o:o<2048?(r[i++]=o>>6|192,r[i++]=63&o|128):ur(t,n)?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++n)),r[i++]=o>>18|240,r[i++]=o>>12&63|128,r[i++]=o>>6&63|128,r[i++]=63&o|128):(r[i++]=o>>12|224,r[i++]=o>>6&63|128,r[i++]=63&o|128)}else for(n=0;n<t.length;n++)r[n]=0|t[n];return r},rr.toHex=function(t){for(var e="",r=0;r<t.length;r++)e+=fr(t[r].toString(16));return e},rr.htonl=cr,rr.toHex32=function(t,e){for(var r="",i=0;i<t.length;i++){var n=t[i];"little"===e&&(n=cr(n)),r+=lr(n.toString(16))}return r},rr.zero2=fr,rr.zero8=lr,rr.join32=function(t,e,r,i){var n=r-e;ar(n%4==0);for(var o=new Array(n/4),c=0,p=e;c<o.length;c++,p+=4){var b;b="big"===i?t[p]<<24|t[p+1]<<16|t[p+2]<<8|t[p+3]:t[p+3]<<24|t[p+2]<<16|t[p+1]<<8|t[p],o[c]=b>>>0}return o},rr.split32=function(t,e){for(var r=new Array(4*t.length),i=0,n=0;i<t.length;i++,n+=4){var o=t[i];"big"===e?(r[n]=o>>>24,r[n+1]=o>>>16&255,r[n+2]=o>>>8&255,r[n+3]=255&o):(r[n+3]=o>>>24,r[n+2]=o>>>16&255,r[n+1]=o>>>8&255,r[n]=255&o)}return r},rr.rotr32=function(t,e){return t>>>e|t<<32-e},rr.rotl32=function(t,e){return t<<e|t>>>32-e},rr.sum32=function(t,e){return t+e>>>0},rr.sum32_3=function(t,e,r){return t+e+r>>>0},rr.sum32_4=function(t,e,r,i){return t+e+r+i>>>0},rr.sum32_5=function(t,e,r,i,n){return t+e+r+i+n>>>0},rr.sum64=function(t,e,r,i){var n=t[e],o=i+t[e+1]>>>0,p=(o<i?1:0)+r+n;t[e]=p>>>0,t[e+1]=o},rr.sum64_hi=function(t,e,r,i){return(e+i>>>0<e?1:0)+t+r>>>0},rr.sum64_lo=function(t,e,r,i){return e+i>>>0},rr.sum64_4_hi=function(t,e,r,i,n,o,c,p){var b=0,f=e;return b+=(f=f+i>>>0)<e?1:0,b+=(f=f+o>>>0)<o?1:0,t+r+n+c+(b+=(f=f+p>>>0)<p?1:0)>>>0},rr.sum64_4_lo=function(t,e,r,i,n,o,c,p){return e+i+o+p>>>0},rr.sum64_5_hi=function(t,e,r,i,n,o,c,p,b,f){var l=0,h=e;return l+=(h=h+i>>>0)<e?1:0,l+=(h=h+o>>>0)<o?1:0,l+=(h=h+p>>>0)<p?1:0,t+r+n+c+b+(l+=(h=h+f>>>0)<f?1:0)>>>0},rr.sum64_5_lo=function(t,e,r,i,n,o,c,p,b,f){return e+i+o+p+f>>>0},rr.rotr64_hi=function(t,e,r){return(e<<32-r|t>>>r)>>>0},rr.rotr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0},rr.shr64_hi=function(t,e,r){return t>>>r},rr.shr64_lo=function(t,e,r){return(t<<32-r|e>>>r)>>>0};var pr={},dr=rr,vr=nr;function yr(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}pr.BlockHash=yr,yr.prototype.update=function(t,e){if(t=dr.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var i=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-i,t.length),0===this.pending.length&&(this.pending=null),t=dr.join32(t,0,t.length-i,this.endian);for(var r=0;r<t.length;r+=this._delta32)this._update(t,r,r+this._delta32)}return this},yr.prototype.digest=function(t){return this.update(this._pad()),vr(null===this.pending),this._digest(t)},yr.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,i=e-(t+this.padLength)%e,r=new Array(i+this.padLength);r[0]=128;for(var n=1;n<i;n++)r[n]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)r[n++]=0;r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=t>>>24&255,r[n++]=t>>>16&255,r[n++]=t>>>8&255,r[n++]=255&t}else for(r[n++]=255&t,r[n++]=t>>>8&255,r[n++]=t>>>16&255,r[n++]=t>>>24&255,r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=0,o=8;o<this.padLength;o++)r[n++]=0;return r};var gr={},mr={},wr=rr.rotr32;function _r(t,e,r){return t&e^~t&r}function xr(t,e,r){return t&e^t&r^e&r}function Er(t,e,r){return t^e^r}mr.ft_1=function(t,e,r,i){return 0===t?_r(e,r,i):1===t||3===t?Er(e,r,i):2===t?xr(e,r,i):void 0},mr.ch32=_r,mr.maj32=xr,mr.p32=Er,mr.s0_256=function(t){return wr(t,2)^wr(t,13)^wr(t,22)},mr.s1_256=function(t){return wr(t,6)^wr(t,11)^wr(t,25)},mr.g0_256=function(t){return wr(t,7)^wr(t,18)^t>>>3},mr.g1_256=function(t){return wr(t,17)^wr(t,19)^t>>>10};var Or=rr,Ar=pr,kr=mr,Sr=Or.rotl32,Ir=Or.sum32,jr=Or.sum32_5,Pr=kr.ft_1,Mr=Ar.BlockHash,Rr=[1518500249,1859775393,2400959708,3395469782];function Nr(){if(!(this instanceof Nr))return new Nr;Mr.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Or.inherits(Nr,Mr);var Tr=Nr;Nr.blockSize=512,Nr.outSize=160,Nr.hmacStrength=80,Nr.padLength=64,Nr.prototype._update=function(t,e){for(var i=this.W,r=0;r<16;r++)i[r]=t[e+r];for(;r<i.length;r++)i[r]=Sr(i[r-3]^i[r-8]^i[r-14]^i[r-16],1);var n=this.h[0],o=this.h[1],p=this.h[2],b=this.h[3],c=this.h[4];for(r=0;r<i.length;r++){var f=~~(r/20),l=jr(Sr(n,5),Pr(f,o,p,b),c,i[r],Rr[f]);c=b,b=p,p=Sr(o,30),o=n,n=l}this.h[0]=Ir(this.h[0],n),this.h[1]=Ir(this.h[1],o),this.h[2]=Ir(this.h[2],p),this.h[3]=Ir(this.h[3],b),this.h[4]=Ir(this.h[4],c)},Nr.prototype._digest=function(t){return"hex"===t?Or.toHex32(this.h,"big"):Or.split32(this.h,"big")};var Lr=rr,Cr=pr,Ur=mr,Br=nr,Dr=Lr.sum32,qr=Lr.sum32_4,zr=Lr.sum32_5,Fr=Ur.ch32,Hr=Ur.maj32,Kr=Ur.s0_256,Gr=Ur.s1_256,Vr=Ur.g0_256,Yr=Ur.g1_256,Jr=Cr.BlockHash,Wr=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Qr(){if(!(this instanceof Qr))return new Qr;Jr.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=Wr,this.W=new Array(64)}Lr.inherits(Qr,Jr);var Xr=Qr;Qr.blockSize=512,Qr.outSize=256,Qr.hmacStrength=192,Qr.padLength=64,Qr.prototype._update=function(t,e){for(var i=this.W,r=0;r<16;r++)i[r]=t[e+r];for(;r<i.length;r++)i[r]=qr(Yr(i[r-2]),i[r-7],Vr(i[r-15]),i[r-16]);var n=this.h[0],o=this.h[1],p=this.h[2],b=this.h[3],c=this.h[4],f=this.h[5],l=this.h[6],h=this.h[7];for(Br(this.k.length===i.length),r=0;r<i.length;r++){var d=zr(h,Gr(c),Fr(c,f,l),this.k[r],i[r]),v=Dr(Kr(n),Hr(n,o,p));h=l,l=f,f=c,c=Dr(b,d),b=p,p=o,o=n,n=Dr(d,v)}this.h[0]=Dr(this.h[0],n),this.h[1]=Dr(this.h[1],o),this.h[2]=Dr(this.h[2],p),this.h[3]=Dr(this.h[3],b),this.h[4]=Dr(this.h[4],c),this.h[5]=Dr(this.h[5],f),this.h[6]=Dr(this.h[6],l),this.h[7]=Dr(this.h[7],h)},Qr.prototype._digest=function(t){return"hex"===t?Lr.toHex32(this.h,"big"):Lr.split32(this.h,"big")};var Zr=rr,$r=Xr;function tn(){if(!(this instanceof tn))return new tn;$r.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Zr.inherits(tn,$r);var en=tn;tn.blockSize=512,tn.outSize=224,tn.hmacStrength=192,tn.padLength=64,tn.prototype._digest=function(t){return"hex"===t?Zr.toHex32(this.h.slice(0,7),"big"):Zr.split32(this.h.slice(0,7),"big")};var rn=rr,nn=pr,on=nr,an=rn.rotr64_hi,sn=rn.rotr64_lo,un=rn.shr64_hi,cn=rn.shr64_lo,fn=rn.sum64,ln=rn.sum64_hi,hn=rn.sum64_lo,pn=rn.sum64_4_hi,dn=rn.sum64_4_lo,vn=rn.sum64_5_hi,yn=rn.sum64_5_lo,gn=nn.BlockHash,mn=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function bn(){if(!(this instanceof bn))return new bn;gn.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=mn,this.W=new Array(160)}rn.inherits(bn,gn);var wn=bn;function _n(t,e,r,i,n){var o=t&r^~t&n;return o<0&&(o+=4294967296),o}function xn(t,e,r,i,n,o){var c=e&i^~e&o;return c<0&&(c+=4294967296),c}function En(t,e,r,i,n){var o=t&r^t&n^r&n;return o<0&&(o+=4294967296),o}function On(t,e,r,i,n,o){var c=e&i^e&o^i&o;return c<0&&(c+=4294967296),c}function An(t,e){var r=an(t,e,28)^an(e,t,2)^an(e,t,7);return r<0&&(r+=4294967296),r}function kn(t,e){var r=sn(t,e,28)^sn(e,t,2)^sn(e,t,7);return r<0&&(r+=4294967296),r}function Sn(t,e){var r=an(t,e,14)^an(t,e,18)^an(e,t,9);return r<0&&(r+=4294967296),r}function In(t,e){var r=sn(t,e,14)^sn(t,e,18)^sn(e,t,9);return r<0&&(r+=4294967296),r}function jn(t,e){var r=an(t,e,1)^an(t,e,8)^un(t,e,7);return r<0&&(r+=4294967296),r}function Pn(t,e){var r=sn(t,e,1)^sn(t,e,8)^cn(t,e,7);return r<0&&(r+=4294967296),r}function Mn(t,e){var r=an(t,e,19)^an(e,t,29)^un(t,e,6);return r<0&&(r+=4294967296),r}function Rn(t,e){var r=sn(t,e,19)^sn(e,t,29)^cn(t,e,6);return r<0&&(r+=4294967296),r}bn.blockSize=1024,bn.outSize=512,bn.hmacStrength=192,bn.padLength=128,bn.prototype._prepareBlock=function(t,e){for(var i=this.W,r=0;r<32;r++)i[r]=t[e+r];for(;r<i.length;r+=2){var n=Mn(i[r-4],i[r-3]),o=Rn(i[r-4],i[r-3]),p=i[r-14],b=i[r-13],c=jn(i[r-30],i[r-29]),f=Pn(i[r-30],i[r-29]),l=i[r-32],h=i[r-31];i[r]=pn(n,o,p,b,c,f,l,h),i[r+1]=dn(n,o,p,b,c,f,l,h)}},bn.prototype._update=function(t,e){this._prepareBlock(t,e);var i=this.W,r=this.h[0],n=this.h[1],o=this.h[2],p=this.h[3],b=this.h[4],c=this.h[5],f=this.h[6],l=this.h[7],h=this.h[8],d=this.h[9],v=this.h[10],y=this.h[11],m=this.h[12],w=this.h[13],_=this.h[14],x=this.h[15];on(this.k.length===i.length);for(var E=0;E<i.length;E+=2){var O=_,A=x,k=Sn(h,d),S=In(h,d),I=_n(h,d,v,y,m),j=xn(h,d,v,y,m,w),P=this.k[E],M=this.k[E+1],R=i[E],N=i[E+1],a=vn(O,A,k,S,I,j,P,M,R,N),T=yn(O,A,k,S,I,j,P,M,R,N);O=An(r,n),A=kn(r,n),k=En(r,n,o,p,b),S=On(r,n,o,p,b,c);var L=ln(O,A,k,S),g=hn(O,A,k,S);_=m,x=w,m=v,w=y,v=h,y=d,h=ln(f,l,a,T),d=hn(l,l,a,T),f=b,l=c,b=o,c=p,o=r,p=n,r=ln(a,T,L,g),n=hn(a,T,L,g)}fn(this.h,0,r,n),fn(this.h,2,o,p),fn(this.h,4,b,c),fn(this.h,6,f,l),fn(this.h,8,h,d),fn(this.h,10,v,y),fn(this.h,12,m,w),fn(this.h,14,_,x)},bn.prototype._digest=function(t){return"hex"===t?rn.toHex32(this.h,"big"):rn.split32(this.h,"big")};var Nn=rr,Tn=wn;function Ln(){if(!(this instanceof Ln))return new Ln;Tn.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Nn.inherits(Ln,Tn);var Cn=Ln;Ln.blockSize=1024,Ln.outSize=384,Ln.hmacStrength=192,Ln.padLength=128,Ln.prototype._digest=function(t){return"hex"===t?Nn.toHex32(this.h.slice(0,12),"big"):Nn.split32(this.h.slice(0,12),"big")},gr.sha1=Tr,gr.sha224=en,gr.sha256=Xr,gr.sha384=Cn,gr.sha512=wn;var Un={},Bn=rr,Dn=pr,qn=Bn.rotl32,zn=Bn.sum32,Fn=Bn.sum32_3,Hn=Bn.sum32_4,Kn=Dn.BlockHash;function Gn(){if(!(this instanceof Gn))return new Gn;Kn.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function Vn(t,e,r,i){return t<=15?e^r^i:t<=31?e&r|~e&i:t<=47?(e|~r)^i:t<=63?e&i|r&~i:e^(r|~i)}function Yn(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Jn(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}Bn.inherits(Gn,Kn),Un.ripemd160=Gn,Gn.blockSize=512,Gn.outSize=160,Gn.hmacStrength=192,Gn.padLength=64,Gn.prototype._update=function(t,e){for(var i=this.h[0],r=this.h[1],n=this.h[2],o=this.h[3],p=this.h[4],b=i,c=r,f=n,l=o,h=p,d=0;d<80;d++){var v=zn(qn(Hn(i,Vn(d,r,n,o),t[Wn[d]+e],Yn(d)),Xn[d]),p);i=p,p=o,o=qn(n,10),n=r,r=v,v=zn(qn(Hn(b,Vn(79-d,c,f,l),t[Qn[d]+e],Jn(d)),Zn[d]),h),b=h,h=l,l=qn(f,10),f=c,c=v}v=Fn(this.h[1],n,l),this.h[1]=Fn(this.h[2],o,h),this.h[2]=Fn(this.h[3],p,b),this.h[3]=Fn(this.h[4],i,c),this.h[4]=Fn(this.h[0],r,f),this.h[0]=v},Gn.prototype._digest=function(t){return"hex"===t?Bn.toHex32(this.h,"little"):Bn.split32(this.h,"little")};var Wn=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Qn=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Xn=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Zn=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],$n=rr,ti=nr;function hr(t,e,r){if(!(this instanceof hr))return new hr(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init($n.toArray(e,r))}var ei=hr;function ri(t,e,r){return t(r={path:e,exports:{},require:function(i,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null!=t||r.path)}},r.exports),r.exports}hr.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),ti(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},hr.prototype.update=function(t,e){return this.inner.update(t,e),this},hr.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)},function(t){var e=t;e.utils=rr,e.common=pr,e.sha=gr,e.ripemd=Un,e.hmac=ei,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160}(er);var ni=ii;function ii(t,e){if(!t)throw new Error(e||"Assertion failed")}ii.equal=function(t,e,i){if(t!=e)throw new Error(i||"Assertion failed: "+t+" != "+e)};var oi=ri((function(t,e){var r=e;function n(t){return 1===t.length?"0"+t:t}function o(t){for(var p="",b=0;b<t.length;b++)p+=n(t[b].toString(16));return p}r.toArray=function(t,p){if(Array.isArray(t))return t.slice();if(!t)return[];var b=[];if("string"!=typeof t){for(var e=0;e<t.length;e++)b[e]=0|t[e];return b}if("hex"===p){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t);for(e=0;e<t.length;e+=2)b.push(parseInt(t[e]+t[e+1],16))}else for(e=0;e<t.length;e++){var r=t.charCodeAt(e),n=r>>8,o=255&r;n?b.push(n,o):b.push(o)}return b},r.zero2=n,r.toHex=o,r.encode=function(p,b){return"hex"===b?o(p):p}})),ai=ri((function(t,e){var r=e;r.assert=ni,r.toArray=oi.toArray,r.zero2=oi.zero2,r.toHex=oi.toHex,r.encode=oi.encode,r.getNAF=function(b,t,e){var r=new Array(Math.max(b.bitLength(),e)+1);r.fill(0);for(var n=1<<t+1,o=b.clone(),c=0;c<r.length;c++){var f,l=o.andln(n-1);o.isOdd()?(f=l>(n>>1)-1?(n>>1)-l:l,o.isubn(f)):f=0,r[c]=f,o.iushrn(1)}return r},r.getJSF=function(b,t){var e=[[],[]];b=b.clone(),t=t.clone();for(var r,n=0,o=0;b.cmpn(-n)>0||t.cmpn(-o)>0;){var c,f,l=b.andln(3)+n&3,h=t.andln(3)+o&3;3===l&&(l=-1),3===h&&(h=-1),1&l?c=3!==(r=b.andln(7)+n&7)&&5!==r||2!==h?l:-l:c=0,e[0].push(c),1&h?f=3!==(r=t.andln(7)+o&7)&&5!==r||2!==l?h:-h:f=0,e[1].push(f),2*n===c+1&&(n=1-n),2*o===f+1&&(o=1-o),b.iushrn(1),t.iushrn(1)}return e},r.cachedProperty=function(b,t,e){var r="_"+t;b.prototype[t]=function(){return void 0!==this[r]?this[r]:this[r]=e.call(this)}},r.parseBytes=function(b){return"string"==typeof b?r.toArray(b,"hex"):b},r.intFromLE=function(b){return new te(b,"hex","le")}})),si=ai.getNAF,ui=ai.getJSF,ci=ai.assert;function fi(t,e){this.type=t,this.p=new te(e.p,16),this.red=e.prime?te.red(e.prime):te.mont(this.p),this.zero=new te(0).toRed(this.red),this.one=new te(1).toRed(this.red),this.two=new te(2).toRed(this.red),this.n=e.n&&new te(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var hi=fi;function pi(t,e){this.curve=t,this.type=e,this.precomputed=null}fi.prototype.point=function(){throw new Error("Not implemented")},fi.prototype.validate=function(){throw new Error("Not implemented")},fi.prototype._fixedNafMul=function(t,e){ci(t.precomputed);var i=t._getDoubles(),r=si(e,1,this._bitLength),n=(1<<i.step+1)-(i.step%2==0?2:1);n/=3;var p,b,o=[];for(p=0;p<r.length;p+=i.step){b=0;for(var c=p+i.step-1;c>=p;c--)b=(b<<1)+r[c];o.push(b)}for(var f=this.jpoint(null,null,null),l=this.jpoint(null,null,null),h=n;h>0;h--){for(p=0;p<o.length;p++)(b=o[p])===h?l=l.mixedAdd(i.points[p]):b===-h&&(l=l.mixedAdd(i.points[p].neg()));f=f.add(l)}return f.toP()},fi.prototype._wnafMul=function(t,e){var i=4,r=t._getNAFPoints(i);i=r.wnd;for(var n=r.points,o=si(e,i,this._bitLength),p=this.jpoint(null,null,null),b=o.length-1;b>=0;b--){for(var c=0;b>=0&&0===o[b];b--)c++;if(b>=0&&c++,p=p.dblp(c),b<0)break;var f=o[b];ci(0!==f),p="affine"===t.type?f>0?p.mixedAdd(n[f-1>>1]):p.mixedAdd(n[-f-1>>1].neg()):f>0?p.add(n[f-1>>1]):p.add(n[-f-1>>1].neg())}return"affine"===t.type?p.toP():p},fi.prototype._wnafMulAdd=function(t,e,i,r,n){var o,c,f,l=this._wnafT1,p=this._wnafT2,b=this._wnafT3,h=0;for(o=0;o<r;o++){var d=(f=e[o])._getNAFPoints(t);l[o]=d.wnd,p[o]=d.points}for(o=r-1;o>=1;o-=2){var v=o-1,y=o;if(1===l[v]&&1===l[y]){var m=[e[v],null,null,e[y]];0===e[v].y.cmp(e[y].y)?(m[1]=e[v].add(e[y]),m[2]=e[v].toJ().mixedAdd(e[y].neg())):0===e[v].y.cmp(e[y].y.redNeg())?(m[1]=e[v].toJ().mixedAdd(e[y]),m[2]=e[v].add(e[y].neg())):(m[1]=e[v].toJ().mixedAdd(e[y]),m[2]=e[v].toJ().mixedAdd(e[y].neg()));var w=[-3,-1,-5,-7,0,7,5,1,3],_=ui(i[v],i[y]);for(h=Math.max(_[0].length,h),b[v]=new Array(h),b[y]=new Array(h),c=0;c<h;c++){var x=0|_[0][c],E=0|_[1][c];b[v][c]=w[3*(x+1)+(E+1)],b[y][c]=0,p[v]=m}}else b[v]=si(i[v],l[v],this._bitLength),b[y]=si(i[y],l[y],this._bitLength),h=Math.max(b[v].length,h),h=Math.max(b[y].length,h)}var O=this.jpoint(null,null,null),A=this._wnafT4;for(o=h;o>=0;o--){for(var k=0;o>=0;){var S=!0;for(c=0;c<r;c++)A[c]=0|b[c][o],0!==A[c]&&(S=!1);if(!S)break;k++,o--}if(o>=0&&k++,O=O.dblp(k),o<0)break;for(c=0;c<r;c++){var I=A[c];0!==I&&(I>0?f=p[c][I-1>>1]:I<0&&(f=p[c][-I-1>>1].neg()),O="affine"===f.type?O.mixedAdd(f):O.add(f))}}for(o=0;o<r;o++)p[o]=null;return n?O:O.toP()},fi.BasePoint=pi,pi.prototype.eq=function(){throw new Error("Not implemented")},pi.prototype.validate=function(){return this.curve.validate(this)},fi.prototype.decodePoint=function(t,e){t=ai.toArray(t,e);var i=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*i)return 6===t[0]?ci(t[t.length-1]%2==0):7===t[0]&&ci(t[t.length-1]%2==1),this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));if((2===t[0]||3===t[0])&&t.length-1===i)return this.pointFromX(t.slice(1,1+i),3===t[0]);throw new Error("Unknown point format")},pi.prototype.encodeCompressed=function(t){return this.encode(t,!0)},pi.prototype._encode=function(t){var e=this.curve.p.byteLength(),i=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",e))},pi.prototype.encode=function(t,e){return ai.encode(this._encode(e),t)},pi.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},pi.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},pi.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],r=this,n=0;n<e;n+=t){for(var o=0;o<t;o++)r=r.dbl();i.push(r)}return{step:t,points:i}},pi.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],i=(1<<t)-1,r=1===i?null:this.dbl(),n=1;n<i;n++)e[n]=e[n-1].add(r);return{wnd:t,points:e}},pi.prototype._getBeta=function(){return null},pi.prototype.dblp=function(t){for(var e=this,i=0;i<t;i++)e=e.dbl();return e};var di=ri((function(t){"function"==typeof Object.create?t.exports=function(t,i){i&&(t.super_=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,i){if(i){t.super_=i;var e=function(){};e.prototype=i.prototype,t.prototype=new e,t.prototype.constructor=t}}})),vi=ai.assert;function yi(t){hi.call(this,"short",t),this.a=new te(t.a,16).toRed(this.red),this.b=new te(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}di(yi,hi);var gi=yi;function mi(t,e,r,i){hi.BasePoint.call(this,t,"affine"),null===e&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new te(e,16),this.y=new te(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function bi(t,e,r,i){hi.BasePoint.call(this,t,"jacobian"),null===e&&null===r&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new te(0)):(this.x=new te(e,16),this.y=new te(r,16),this.z=new te(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}yi.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,i;if(t.beta)e=new te(t.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);e=(e=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(t.lambda)i=new te(t.lambda,16);else{var n=this._getEndoRoots(this.n);0===this.g.mul(n[0]).x.cmp(this.g.x.redMul(e))?i=n[0]:(i=n[1],vi(0===this.g.mul(i).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:i,basis:t.basis?t.basis.map((function(p){return{a:new te(p.a,16),b:new te(p.b,16)}})):this._getEndoBasis(i)}}},yi.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:te.mont(t),i=new te(2).toRed(e).redInvm(),r=i.redNeg(),n=new te(3).toRed(e).redNeg().redSqrt().redMul(i);return[r.redAdd(n).fromRed(),r.redSub(n).fromRed()]},yi.prototype._getEndoBasis=function(t){for(var e,r,n,o,c,f,l,h,d,v=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=t,y=this.n.clone(),m=new te(1),w=new te(0),p=new te(0),b=new te(1),_=0;0!==i.cmpn(0);){var x=y.div(i);h=y.sub(x.mul(i)),d=p.sub(x.mul(m));var E=b.sub(x.mul(w));if(!n&&h.cmp(v)<0)e=l.neg(),r=m,n=h.neg(),o=d;else if(n&&2==++_)break;l=h,y=i,i=h,p=m,m=d,b=w,w=E}c=h.neg(),f=d;var O=n.sqr().add(o.sqr());return c.sqr().add(f.sqr()).cmp(O)>=0&&(c=e,f=r),n.negative&&(n=n.neg(),o=o.neg()),c.negative&&(c=c.neg(),f=f.neg()),[{a:n,b:o},{a:c,b:f}]},yi.prototype._endoSplit=function(t){var e=this.endo.basis,i=e[0],r=e[1],n=r.b.mul(t).divRound(this.n),o=i.b.neg().mul(t).divRound(this.n),p=n.mul(i.a),b=o.mul(r.a),c=n.mul(i.b),f=o.mul(r.b);return{k1:t.sub(p).sub(b),k2:c.add(f).neg()}},yi.prototype.pointFromX=function(t,e){(t=new te(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),r=i.redSqrt();if(0!==r.redSqr().redSub(i).cmp(this.zero))throw new Error("invalid point");var n=r.fromRed().isOdd();return(e&&!n||!e&&n)&&(r=r.redNeg()),this.point(t,r)},yi.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,i=t.y,r=this.a.redMul(e),n=e.redSqr().redMul(e).redIAdd(r).redIAdd(this.b);return 0===i.redSqr().redISub(n).cmpn(0)},yi.prototype._endoWnafMulAdd=function(t,e,i){for(var r=this._endoWnafT1,n=this._endoWnafT2,o=0;o<t.length;o++){var p=this._endoSplit(e[o]),b=t[o],c=b._getBeta();p.k1.negative&&(p.k1.ineg(),b=b.neg(!0)),p.k2.negative&&(p.k2.ineg(),c=c.neg(!0)),r[2*o]=b,r[2*o+1]=c,n[2*o]=p.k1,n[2*o+1]=p.k2}for(var f=this._wnafMulAdd(1,r,n,2*o,i),l=0;l<2*o;l++)r[l]=null,n[l]=null;return f},di(mi,hi.BasePoint),yi.prototype.point=function(t,e,i){return new mi(this,t,e,i)},yi.prototype.pointFromJSON=function(t,e){return mi.fromJSON(this,t,e)},mi.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var i=this.curve,r=function(t){return i.point(t.x.redMul(i.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(r)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(r)}}}return e}},mi.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},mi.fromJSON=function(t,e,i){"string"==typeof e&&(e=JSON.parse(e));var r=t.point(e[0],e[1],i);if(!e[2])return r;function n(p){return t.point(p[0],p[1],i)}var o=e[2];return r.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[r].concat(o.doubles.points.map(n))},naf:o.naf&&{wnd:o.naf.wnd,points:[r].concat(o.naf.points.map(n))}},r},mi.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},mi.prototype.isInfinity=function(){return this.inf},mi.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var i=e.redSqr().redISub(this.x).redISub(t.x),r=e.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,r)},mi.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,i=this.x.redSqr(),r=t.redInvm(),n=i.redAdd(i).redIAdd(i).redIAdd(e).redMul(r),o=n.redSqr().redISub(this.x.redAdd(this.x)),p=n.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,p)},mi.prototype.getX=function(){return this.x.fromRed()},mi.prototype.getY=function(){return this.y.fromRed()},mi.prototype.mul=function(t){return t=new te(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},mi.prototype.mulAdd=function(t,e,i){var r=[this,e],n=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(r,n):this.curve._wnafMulAdd(1,r,n,2)},mi.prototype.jmulAdd=function(t,e,i){var r=[this,e],n=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(r,n,!0):this.curve._wnafMulAdd(1,r,n,2,!0)},mi.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},mi.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var i=this.precomputed,r=function(t){return t.neg()};e.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(r)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(r)}}}return e},mi.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},di(bi,hi.BasePoint),yi.prototype.jpoint=function(t,e,i){return new bi(this,t,e,i)},bi.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),i=this.x.redMul(e),r=this.y.redMul(e).redMul(t);return this.curve.point(i,r)},bi.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},bi.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),i=this.z.redSqr(),r=this.x.redMul(e),n=t.x.redMul(i),o=this.y.redMul(e.redMul(t.z)),p=t.y.redMul(i.redMul(this.z)),b=r.redSub(n),c=o.redSub(p);if(0===b.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var f=b.redSqr(),l=f.redMul(b),h=r.redMul(f),d=c.redSqr().redIAdd(l).redISub(h).redISub(h),v=c.redMul(h.redISub(d)).redISub(o.redMul(l)),y=this.z.redMul(t.z).redMul(b);return this.curve.jpoint(d,v,y)},bi.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),i=this.x,r=t.x.redMul(e),n=this.y,o=t.y.redMul(e).redMul(this.z),p=i.redSub(r),b=n.redSub(o);if(0===p.cmpn(0))return 0!==b.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=p.redSqr(),f=c.redMul(p),l=i.redMul(c),h=b.redSqr().redIAdd(f).redISub(l).redISub(l),d=b.redMul(l.redISub(h)).redISub(n.redMul(f)),v=this.z.redMul(p);return this.curve.jpoint(h,d,v)},bi.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var i=this;for(e=0;e<t;e++)i=i.dbl();return i}var r=this.curve.a,n=this.curve.tinv,o=this.x,p=this.y,b=this.z,c=b.redSqr().redSqr(),f=p.redAdd(p);for(e=0;e<t;e++){var l=o.redSqr(),h=f.redSqr(),d=h.redSqr(),v=l.redAdd(l).redIAdd(l).redIAdd(r.redMul(c)),y=o.redMul(h),m=v.redSqr().redISub(y.redAdd(y)),w=y.redISub(m),_=v.redMul(w);_=_.redIAdd(_).redISub(d);var x=f.redMul(b);e+1<t&&(c=c.redMul(d)),o=m,b=x,f=_}return this.curve.jpoint(o,f.redMul(n),b)},bi.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},bi.prototype._zeroDbl=function(){var t,e,i;if(this.zOne){var r=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr(),p=this.x.redAdd(n).redSqr().redISub(r).redISub(o);p=p.redIAdd(p);var b=r.redAdd(r).redIAdd(r),c=b.redSqr().redISub(p).redISub(p),f=o.redIAdd(o);f=(f=f.redIAdd(f)).redIAdd(f),t=c,e=b.redMul(p.redISub(c)).redISub(f),i=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),h=this.y.redSqr(),d=h.redSqr(),v=this.x.redAdd(h).redSqr().redISub(l).redISub(d);v=v.redIAdd(v);var y=l.redAdd(l).redIAdd(l),m=y.redSqr(),w=d.redIAdd(d);w=(w=w.redIAdd(w)).redIAdd(w),t=m.redISub(v).redISub(v),e=y.redMul(v.redISub(t)).redISub(w),i=(i=this.y.redMul(this.z)).redIAdd(i)}return this.curve.jpoint(t,e,i)},bi.prototype._threeDbl=function(){var t,e,i;if(this.zOne){var r=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr(),p=this.x.redAdd(n).redSqr().redISub(r).redISub(o);p=p.redIAdd(p);var b=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),c=b.redSqr().redISub(p).redISub(p);t=c;var f=o.redIAdd(o);f=(f=f.redIAdd(f)).redIAdd(f),e=b.redMul(p.redISub(c)).redISub(f),i=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),h=this.y.redSqr(),d=this.x.redMul(h),v=this.x.redSub(l).redMul(this.x.redAdd(l));v=v.redAdd(v).redIAdd(v);var y=d.redIAdd(d),m=(y=y.redIAdd(y)).redAdd(y);t=v.redSqr().redISub(m),i=this.y.redAdd(this.z).redSqr().redISub(h).redISub(l);var w=h.redSqr();w=(w=(w=w.redIAdd(w)).redIAdd(w)).redIAdd(w),e=v.redMul(y.redISub(t)).redISub(w)}return this.curve.jpoint(t,e,i)},bi.prototype._dbl=function(){var t=this.curve.a,e=this.x,i=this.y,r=this.z,n=r.redSqr().redSqr(),o=e.redSqr(),p=i.redSqr(),b=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(n)),c=e.redAdd(e),f=(c=c.redIAdd(c)).redMul(p),l=b.redSqr().redISub(f.redAdd(f)),h=f.redISub(l),d=p.redSqr();d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var v=b.redMul(h).redISub(d),y=i.redAdd(i).redMul(r);return this.curve.jpoint(l,v,y)},bi.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),i=this.z.redSqr(),r=e.redSqr(),n=t.redAdd(t).redIAdd(t),o=n.redSqr(),p=this.x.redAdd(e).redSqr().redISub(t).redISub(r),b=(p=(p=(p=p.redIAdd(p)).redAdd(p).redIAdd(p)).redISub(o)).redSqr(),c=r.redIAdd(r);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var f=n.redIAdd(p).redSqr().redISub(o).redISub(b).redISub(c),l=e.redMul(f);l=(l=l.redIAdd(l)).redIAdd(l);var h=this.x.redMul(b).redISub(l);h=(h=h.redIAdd(h)).redIAdd(h);var d=this.y.redMul(f.redMul(c.redISub(f)).redISub(p.redMul(b)));d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var v=this.z.redAdd(p).redSqr().redISub(i).redISub(b);return this.curve.jpoint(h,d,v)},bi.prototype.mul=function(t,e){return t=new te(t,e),this.curve._wnafMul(this,t)},bi.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),i=t.z.redSqr();if(0!==this.x.redMul(i).redISub(t.x.redMul(e)).cmpn(0))return!1;var r=e.redMul(this.z),n=i.redMul(t.z);return 0===this.y.redMul(n).redISub(t.y.redMul(r)).cmpn(0)},bi.prototype.eqXToP=function(t){var e=this.z.redSqr(),i=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(i))return!0;for(var r=t.clone(),n=this.curve.redN.redMul(e);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(n),0===this.x.cmp(i))return!0}},bi.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},bi.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var wi=ri((function(t,e){var r=e;r.base=hi,r.short=gi,r.mont=null,r.edwards=null})),_i=ri((function(t,e){var r,n=e,i=ai.assert;function o(p){"short"===p.type?this.curve=new wi.short(p):"edwards"===p.type?this.curve=new wi.edwards(p):this.curve=new wi.mont(p),this.g=this.curve.g,this.n=this.curve.n,this.hash=p.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(p,b){Object.defineProperty(n,p,{configurable:!0,enumerable:!0,get:function(){var t=new o(b);return Object.defineProperty(n,p,{configurable:!0,enumerable:!0,value:t}),t}})}n.PresetCurve=o,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:er.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:er.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:er.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:er.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:er.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:er.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:er.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(t){r=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:er.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})}));function xi(t){if(!(this instanceof xi))return new xi(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=oi.toArray(t.entropy,t.entropyEnc||"hex"),r=oi.toArray(t.nonce,t.nonceEnc||"hex"),i=oi.toArray(t.pers,t.persEnc||"hex");ni(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,i)}var Ei=xi;xi.prototype._init=function(t,e,i){var r=t.concat(e).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},xi.prototype._hmac=function(){return new er.hmac(this.hash,this.K)},xi.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},xi.prototype.reseed=function(t,e,i,r){"string"!=typeof e&&(r=i,i=e,e=null),t=oi.toArray(t,e),i=oi.toArray(i,r),ni(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(i||[])),this._reseed=1},xi.prototype.generate=function(t,e,i,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(r=i,i=e,e=null),i&&(i=oi.toArray(i,r||"hex"),this._update(i));for(var n=[];n.length<t;)this.V=this._hmac().update(this.V).digest(),n=n.concat(this.V);var o=n.slice(0,t);return this._update(i),this._reseed++,oi.encode(o,e)};var Oi=ai.assert;function Ai(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var ki=Ai;Ai.fromPublic=function(t,e,i){return e instanceof Ai?e:new Ai(t,{pub:e,pubEnc:i})},Ai.fromPrivate=function(t,e,i){return e instanceof Ai?e:new Ai(t,{priv:e,privEnc:i})},Ai.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Ai.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},Ai.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},Ai.prototype._importPrivate=function(t,e){this.priv=new te(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},Ai.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?Oi(t.x,"Need x coordinate"):("short"===this.ec.curve.type||"edwards"===this.ec.curve.type)&&Oi(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},Ai.prototype.derive=function(t){return t.validate()||Oi(t.validate(),"public point not validated"),t.mul(this.priv).getX()},Ai.prototype.sign=function(t,e,i){return this.ec.sign(t,this,e,i)},Ai.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},Ai.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Si=ai.assert;function Ii(t,e){if(t instanceof Ii)return t;this._importDER(t,e)||(Si(t.r&&t.s,"Signature without r or s"),this.r=new te(t.r,16),this.s=new te(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var ji=Ii;function Pi(){this.place=0}function Mi(t,e){var r=t[e.place++];if(!(128&r))return r;var i=15&r;if(0===i||i>4)return!1;for(var n=0,o=0,c=e.place;o<i;o++,c++)n<<=8,n|=t[c],n>>>=0;return!(n<=127)&&(e.place=c,n)}function Ri(t){for(var e=0,r=t.length-1;!t[e]&&!(128&t[e+1])&&e<r;)e++;return 0===e?t:t.slice(e)}function Ni(t,e){if(e<128)t.push(e);else{var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|r);--r;)t.push(e>>>(r<<3)&255);t.push(e)}}Ii.prototype._importDER=function(t,e){t=ai.toArray(t,e);var i=new Pi;if(48!==t[i.place++])return!1;var r=Mi(t,i);if(!1===r||r+i.place!==t.length||2!==t[i.place++])return!1;var n=Mi(t,i);if(!1===n)return!1;var o=t.slice(i.place,n+i.place);if(i.place+=n,2!==t[i.place++])return!1;var p=Mi(t,i);if(!1===p||t.length!==p+i.place)return!1;var b=t.slice(i.place,p+i.place);if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}if(0===b[0]){if(!(128&b[1]))return!1;b=b.slice(1)}return this.r=new te(o),this.s=new te(b),this.recoveryParam=null,!0},Ii.prototype.toDER=function(t){var e=this.r.toArray(),i=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&i[0]&&(i=[0].concat(i)),e=Ri(e),i=Ri(i);!(i[0]||128&i[1]);)i=i.slice(1);var r=[2];Ni(r,e.length),(r=r.concat(e)).push(2),Ni(r,i.length);var n=r.concat(i),o=[48];return Ni(o,n.length),o=o.concat(n),ai.encode(o,t)};var Ti=function(){throw new Error("unsupported")},Li=ai.assert;function Ci(t){if(!(this instanceof Ci))return new Ci(t);"string"==typeof t&&(Li(Object.prototype.hasOwnProperty.call(_i,t),"Unknown curve "+t),t=_i[t]),t instanceof _i.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var Ui=Ci;Ci.prototype.keyPair=function(t){return new ki(this,t)},Ci.prototype.keyFromPrivate=function(t,e){return ki.fromPrivate(this,t,e)},Ci.prototype.keyFromPublic=function(t,e){return ki.fromPublic(this,t,e)},Ci.prototype.genKeyPair=function(t){t||(t={});for(var e=new Ei({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||Ti(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),r=this.n.sub(new te(2));;){var n=new te(e.generate(i));if(!(n.cmp(r)>0))return n.iaddn(1),this.keyFromPrivate(n)}},Ci.prototype._truncateToN=function(t,e){var i=8*t.byteLength()-this.n.bitLength();return i>0&&(t=t.ushrn(i)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},Ci.prototype.sign=function(t,e,i,r){"object"==R(i)&&(r=i,i=null),r||(r={}),e=this.keyFromPrivate(e,i),t=this._truncateToN(new te(t,16));for(var n=this.n.byteLength(),o=e.getPrivate().toArray("be",n),p=t.toArray("be",n),b=new Ei({hash:this.hash,entropy:o,nonce:p,pers:r.pers,persEnc:r.persEnc||"utf8"}),c=this.n.sub(new te(1)),f=0;;f++){var l=r.k?r.k(f):new te(b.generate(this.n.byteLength()));if(!((l=this._truncateToN(l,!0)).cmpn(1)<=0||l.cmp(c)>=0)){var h=this.g.mul(l);if(!h.isInfinity()){var d=h.getX(),v=d.umod(this.n);if(0!==v.cmpn(0)){var y=l.invm(this.n).mul(v.mul(e.getPrivate()).iadd(t));if(0!==(y=y.umod(this.n)).cmpn(0)){var m=(h.getY().isOdd()?1:0)|(0!==d.cmp(v)?2:0);return r.canonical&&y.cmp(this.nh)>0&&(y=this.n.sub(y),m^=1),new ji({r:v,s:y,recoveryParam:m})}}}}}},Ci.prototype.verify=function(t,e,i,r){t=this._truncateToN(new te(t,16)),i=this.keyFromPublic(i,r);var n=(e=new ji(e,"hex")).r,o=e.s;if(n.cmpn(1)<0||n.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var c,p=o.invm(this.n),b=p.mul(t).umod(this.n),f=p.mul(n).umod(this.n);return this.curve._maxwellTrick?!(c=this.g.jmulAdd(b,i.getPublic(),f)).isInfinity()&&c.eqXToP(n):!(c=this.g.mulAdd(b,i.getPublic(),f)).isInfinity()&&0===c.getX().umod(this.n).cmp(n)},Ci.prototype.recoverPubKey=function(t,e,r,i){Li((3&r)===r,"The recovery param is more than two bits"),e=new ji(e,i);var n=this.n,o=new te(t),c=e.r,p=e.s,b=1&r,f=r>>1;if(c.cmp(this.curve.p.umod(this.curve.n))>=0&&f)throw new Error("Unable to find sencond key candinate");c=f?this.curve.pointFromX(c.add(this.curve.n),b):this.curve.pointFromX(c,b);var l=e.r.invm(n),h=n.sub(o).mul(l).umod(n),d=p.mul(l).umod(n);return this.g.mulAdd(h,c,d)},Ci.prototype.getKeyRecoveryParam=function(t,e,r,i){if(null!==(e=new ji(e,i)).recoveryParam)return e.recoveryParam;for(var n=0;n<4;n++){var o;try{o=this.recoverPubKey(t,e,n)}catch(t){continue}if(o.eq(r))return n}throw new Error("Unable to find valid recovery factor")};var Bi=ri((function(t,e){var r=e;r.version="6.5.4",r.utils=ai,r.rand=function(){throw new Error("unsupported")},r.curve=wi,r.curves=_i,r.ec=Ui,r.eddsa=null})).ec,Di=new Bt("signing-key/5.7.0"),qi=null;function zi(){return qi||(qi=new Bi("secp256k1")),qi}var Fi=function(){return S((function t(e){A(this,t),br(this,"curve","secp256k1"),br(this,"privateKey",Yt(e)),32!==function(t){if("string"!=typeof t)t=Yt(t);else if(!Gt(t)||t.length%2)return null;return(t.length-2)/2}(this.privateKey)&&Di.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");var r=zi().keyFromPrivate(Kt(this.privateKey));br(this,"publicKey","0x"+r.getPublic(!1,"hex")),br(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),br(this,"_isSigningKey",!0)}),[{key:"_addPoint",value:function(t){var e=zi().keyFromPublic(Kt(this.publicKey)),i=zi().keyFromPublic(Kt(t));return"0x"+e.pub.add(i.pub).encodeCompressed("hex")}},{key:"signDigest",value:function(t){var e=zi().keyFromPrivate(Kt(this.privateKey)),i=Kt(t);32!==i.length&&Di.throwArgumentError("bad digest length","digest",t);var r=e.sign(i,{canonical:!0});return Qt({recoveryParam:r.recoveryParam,r:Wt("0x"+r.r.toString(16),32),s:Wt("0x"+r.s.toString(16),32)})}},{key:"computeSharedSecret",value:function(t){var e=zi().keyFromPrivate(Kt(this.privateKey)),i=zi().keyFromPublic(Kt(Hi(t)));return Wt("0x"+e.derive(i.getPublic()).toString(16),32)}}],[{key:"isSigningKey",value:function(t){return!(!t||!t._isSigningKey)}}])}();function Hi(t,e){var r=Kt(t);if(32===r.length){var i=new Fi(r);return e?"0x"+zi().keyFromPrivate(r).getPublic(!0,"hex"):i.publicKey}return 33===r.length?e?Yt(r):"0x"+zi().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?e?"0x"+zi().keyFromPublic(r).getPublic(!0,"hex"):Yt(r):Di.throwArgumentError("invalid public or private key","key","[REDACTED]")}var Ki;function Gi(t,e){return function(t){return Xe(Jt(Xt(Jt(Hi(t),1)),12))}(function(t,e){var r=Qt(e),i={r:Kt(r.r),s:Kt(r.s)};return"0x"+zi().recoverPubKey(Kt(t),i,r.recoveryParam).encode("hex",!1)}(Kt(t),e))}new Bt("transactions/5.7.0"),function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"}(Ki||(Ki={}));var Vi="https://rpc.walletconnect.com/v1";function Yi(t,e,r,n,o,c){return Ji.apply(this,arguments)}function Ji(){return Ji=M(j().mark((function t(e,r,n,i,o,c){return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n.t,t.next="eip191"===t.t0?3:"eip1271"===t.t0?4:7;break;case 3:return t.abrupt("return",Wi(e,r,n.s));case 4:return t.next=6,Qi(e,r,n.s,i,o,c);case 6:return t.abrupt("return",t.sent);case 7:throw new Error("verifySignature failed: Attempted to verify CacaoSignature with unknown type: ".concat(n.t));case 8:case"end":return t.stop()}}),t)}))),Ji.apply(this,arguments)}function Wi(t,e,r){return Gi(Ke(e),r).toLowerCase()===t.toLowerCase()}function Qi(t,e,r,n,o,c){return Xi.apply(this,arguments)}function Xi(){return Xi=M(j().mark((function t(e,r,n,i,o,c){var f,l,h,d,v,y,m;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,f="0x1626ba7e",l=n.substring(2),h=Ke(r).substring(2),d=f+h+"00000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000041"+l,t.next=9,fetch("".concat(c||Vi,"/?chainId=").concat(i,"&projectId=").concat(o),{method:"POST",body:JSON.stringify({id:Date.now()+Math.floor(1e3*Math.random()),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:d},"latest"]})});case 9:return v=t.sent,t.next=12,v.json();case 12:return y=t.sent,m=y.result,t.abrupt("return",!!m&&m.slice(0,f.length).toLowerCase()===f.toLowerCase());case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",(console.error("isValidEip1271Signature: ",t.t0),!1));case 20:case"end":return t.stop()}}),t,null,[[0,17]])}))),Xi.apply(this,arguments)}var Zi=Object.defineProperty,$i=Object.defineProperties,to=Object.getOwnPropertyDescriptors,eo=Object.getOwnPropertySymbols,ro=Object.prototype.hasOwnProperty,no=Object.prototype.propertyIsEnumerable,io=function(t,e,r){return e in t?Zi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},oo=function(t,e){for(var r in e||(e={}))ro.call(e,r)&&io(t,r,e[r]);if(eo){var n,o=N(eo(e));try{for(o.s();!(n=o.n()).done;){r=n.value;no.call(e,r)&&io(t,r,e[r])}}catch(t){o.e(t)}finally{o.f()}}return t},ao=function(t,e){return $i(t,to(e))},so=function(t){return null==t?void 0:t.split(":")},uo=function(t){var e=t&&so(t);if(e)return t.includes("did:pkh:")?e[3]:e[1]},co=function(t){var e=t&&so(t);if(e)return e[2]+":"+e[3]},fo=function(t){var e=t&&so(t);if(e)return e.pop()};function lo(t){return ho.apply(this,arguments)}function ho(){return ho=M(j().mark((function t(e){var r,n,i,o,c,f;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.cacao,n=e.projectId,i=r.s,o=r.p,c=po(o,o.iss),f=fo(o.iss),t.next=3,Yi(f,c,i,uo(o.iss),n);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)}))),ho.apply(this,arguments)}var po=function(t,e){var r="".concat(t.domain," wants you to sign in with your Ethereum account:"),i=fo(e);if(!t.aud&&!t.uri)throw new Error("Either `aud` or `uri` is required to construct the message");var n=t.statement||void 0,o="URI: ".concat(t.aud||t.uri),c="Version: ".concat(t.version),p="Chain ID: ".concat(uo(e)),b="Nonce: ".concat(t.nonce),f="Issued At: ".concat(t.iat),l=t.exp?"Expiration Time: ".concat(t.exp):void 0,h=t.nbf?"Not Before: ".concat(t.nbf):void 0,d=t.requestId?"Request ID: ".concat(t.requestId):void 0,v=t.resources?"Resources:".concat(t.resources.map((function(t){return"\n- ".concat(t)})).join("")):void 0,y=Ao(t.resources);y&&(n=xo(n,mo(y)));return[r,i,"",n,"",o,c,p,b,f,l,h,d,v].filter((function(t){return null!=t})).join("\n")};function vo(t){if(!t)throw new Error("No recap provided, value is undefined");if(!t.att)throw new Error("No `att` property found");var e=Object.keys(t.att);if(null==e||!e.length)throw new Error("No resources found in `att` property");e.forEach((function(e){var i=t.att[e];if(Array.isArray(i))throw new Error("Resource must be an object: ".concat(e));if("object"!=R(i))throw new Error("Resource must be an object: ".concat(e));if(!Object.keys(i).length)throw new Error("Resource object is empty: ".concat(e));Object.keys(i).forEach((function(t){var e=i[t];if(!Array.isArray(e))throw new Error("Ability limits ".concat(t," must be an array of objects, found: ").concat(e));if(!e.length)throw new Error("Value of ".concat(t," is empty array, must be an array with objects"));e.forEach((function(e){if("object"!=R(e))throw new Error("Ability limits (".concat(t,") must be an array of objects, found: ").concat(e))}))}))}))}function yo(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(e=null===(r=e)||void 0===r?void 0:r.sort((function(t,e){return t.localeCompare(e)}))).map((function(e){return O({},"".concat(t,"/").concat(e),[n])}));return Object.assign.apply(Object,[{}].concat(T(i)))}function go(t){return vo(t),"urn:recap:".concat(function(t){return o.from(JSON.stringify(t)).toString("base64")}(t).replace(/=/g,""))}function mo(t){var e=function(t){return JSON.parse(o.from(t,"base64").toString("utf-8"))}(t.replace("urn:recap:",""));return vo(e),e}function bo(t,e,r){var i=function(t,e,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return null!=r&&r.sort((function(t,e){return t.localeCompare(e)})),{att:O({},t,yo(e,r,i))}}(t,e,r);return go(i)}function wo(t){return t&&t.includes("urn:recap:")}function _o(t,e){var r=function(t,e){vo(t),vo(e);var r=Object.keys(t.att).concat(Object.keys(e.att)).sort((function(t,e){return t.localeCompare(e)})),i={att:{}};return r.forEach((function(r){var n,o;Object.keys((null==(n=t.att)?void 0:n[r])||{}).concat(Object.keys((null==(o=e.att)?void 0:o[r])||{})).sort((function(p,b){return p.localeCompare(b)})).forEach((function(p){var b,n;i.att[r]=ao(oo({},i.att[r]),O({},p,(null==(b=t.att[r])?void 0:b[p])||(null==(n=e.att[r])?void 0:n[p])))}))})),i}(mo(t),mo(e));return go(r)}function xo(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;vo(e);var r="I further authorize the stated URI to perform the following actions on my behalf: ";if(t.includes(r))return t;var i=[],n=0;Object.keys(e.att).forEach((function(p){var b=Object.keys(e.att[p]).map((function(t){return{ability:t.split("/")[0],action:t.split("/")[1]}}));b.sort((function(t,e){return t.action.localeCompare(e.action)}));var t={};b.forEach((function(e){t[e.ability]||(t[e.ability]=[]),t[e.ability].push(e.action)}));var r=Object.keys(t).map((function(e){return n++,"(".concat(n,") '").concat(e,"': '").concat(t[e].join("', '"),"' for '").concat(p,"'.")}));i.push(r.join(", ").replace(".,","."))}));var o=i.join(" "),c="".concat(r).concat(o);return"".concat(t?t+" ":"").concat(c)}function Eo(t){var e,r=mo(t);vo(r);var i=null==(e=r.att)?void 0:e.eip155;return i?Object.keys(i).map((function(t){return t.split("/")[1]})):[]}function Oo(t){var e=mo(t);vo(e);var r=[];return Object.values(e.att).forEach((function(i){Object.values(i).forEach((function(t){var e;null!=(e=null==t?void 0:t[0])&&e.chains&&r.push(t[0].chains)}))})),T(new Set(r.flat()))}function Ao(t){if(t){var e=null==t?void 0:t[t.length-1];return wo(e)?e:void 0}}var ko="base10",So="base16",Io="base64pad",jo="utf8",Po=0,Mo=1,Ro=0,No=1,To=12,Lo=32;function Co(){var t=_.generateKeyPair();return{privateKey:Object(x.toString)(t.secretKey,So),publicKey:Object(x.toString)(t.publicKey,So)}}function Uo(){var t=Object(m.randomBytes)(Lo);return Object(x.toString)(t,So)}function Bo(t,e){var r=_.sharedKey(Object(x.fromString)(t,So),Object(x.fromString)(e,So),!0),i=new y.HKDF(w.SHA256,r).expand(Lo);return Object(x.toString)(i,So)}function Do(t){var e=Object(w.hash)(Object(x.fromString)(t,So));return Object(x.toString)(e,So)}function qo(t){var e=Object(w.hash)(Object(x.fromString)(t,jo));return Object(x.toString)(e,So)}function zo(t){return Number(Object(x.toString)(t,ko))}function Fo(t){var e=function(t){return Object(x.fromString)("".concat(t),ko)}(R(t.type)<"u"?t.type:Po);if(zo(e)===Mo&&R(t.senderPublicKey)>"u")throw new Error("Missing sender public key for type 1 envelope");var r=R(t.senderPublicKey)<"u"?Object(x.fromString)(t.senderPublicKey,So):void 0,i=R(t.iv)<"u"?Object(x.fromString)(t.iv,So):Object(m.randomBytes)(To);return function(t){if(zo(t.type)===Mo){if(R(t.senderPublicKey)>"u")throw new Error("Missing sender public key for type 1 envelope");return Object(x.toString)(Object(x.concat)([t.type,t.senderPublicKey,t.iv,t.sealed]),Io)}return Object(x.toString)(Object(x.concat)([t.type,t.iv,t.sealed]),Io)}({type:e,sealed:new v.ChaCha20Poly1305(Object(x.fromString)(t.symKey,So)).seal(i,Object(x.fromString)(t.message,jo)),iv:i,senderPublicKey:r})}function Ho(t){var e=new v.ChaCha20Poly1305(Object(x.fromString)(t.symKey,So)),r=Ko(t.encoded),n=r.sealed,i=r.iv,o=e.open(i,n);if(null===o)throw new Error("Failed to decrypt");return Object(x.toString)(o,jo)}function Ko(t){var e=Object(x.fromString)(t,Io),r=e.slice(Ro,No),i=No;if(zo(r)===Mo){var p=i+Lo,b=p+To,n=e.slice(i,p),o=e.slice(p,b);return{type:r,sealed:e.slice(b),iv:o,senderPublicKey:n}}var c=i+To,f=e.slice(i,c);return{type:r,sealed:e.slice(c),iv:f}}function Go(t,e){var r=Ko(t);return Vo({type:zo(r.type),senderPublicKey:R(r.senderPublicKey)<"u"?Object(x.toString)(r.senderPublicKey,So):void 0,receiverPublicKey:null==e?void 0:e.receiverPublicKey})}function Vo(t){var e=(null==t?void 0:t.type)||Po;if(e===Mo){if(R(null==t?void 0:t.senderPublicKey)>"u")throw new Error("missing sender public key");if(R(null==t?void 0:t.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:null==t?void 0:t.senderPublicKey,receiverPublicKey:null==t?void 0:t.receiverPublicKey}}function Yo(t){return t.type===Mo&&"string"==typeof t.senderPublicKey&&"string"==typeof t.receiverPublicKey}var Jo="irn";function Wo(t){return(null==t?void 0:t.relay)||{protocol:Jo}}function Qo(t){var e=E.a[t];if(R(e)>"u")throw new Error("Relay Protocol not supported: ".concat(t));return e}var Xo=Object.defineProperty,Zo=Object.defineProperties,$o=Object.getOwnPropertyDescriptors,ta=Object.getOwnPropertySymbols,ea=Object.prototype.hasOwnProperty,ra=Object.prototype.propertyIsEnumerable,na=function(t,e,r){return e in t?Xo(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},ia=function(t,e){for(var r in e||(e={}))ea.call(e,r)&&na(t,r,e[r]);if(ta){var n,o=N(ta(e));try{for(o.s();!(n=o.n()).done;){r=n.value;ra.call(e,r)&&na(t,r,e[r])}}catch(t){o.e(t)}finally{o.f()}}return t},oa=function(t,e){return Zo(t,$o(e))};function aa(t){var e={},i="relay"+(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-");return Object.keys(t).forEach((function(r){if(r.startsWith(i)){var n=r.replace(i,""),o=t[r];e[n]=o}})),e}function sa(t){var e=(t=(t=t.includes("wc://")?t.replace("wc://",""):t).includes("wc:")?t.replace("wc:",""):t).indexOf(":"),r=-1!==t.indexOf("?")?t.indexOf("?"):void 0,i=t.substring(0,e),n=t.substring(e+1,r).split("@"),o=R(r)<"u"?t.substring(r):"",c=d.parse(o),p="string"==typeof c.methods?c.methods.split(","):void 0;return{protocol:i,topic:ua(n[0]),version:parseInt(n[1],10),symKey:c.symKey,relay:aa(c),methods:p,expiryTimestamp:c.expiryTimestamp?parseInt(c.expiryTimestamp,10):void 0}}function ua(t){return t.startsWith("//")?t.substring(2):t}function ca(t){return"".concat(t.protocol,":").concat(t.topic,"@").concat(t.version,"?")+d.stringify(ia(oa(ia({symKey:t.symKey},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",i={};return Object.keys(t).forEach((function(r){var n="relay"+e+r;t[r]&&(i[n]=t[r])})),i}(t.relay)),{expiryTimestamp:t.expiryTimestamp}),t.methods?{methods:t.methods.join(",")}:{}))}Object.defineProperty,Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;function fa(t){var e=[];return t.forEach((function(t){var r=L(t.split(":"),2),i=r[0],n=r[1];e.push("".concat(i,":").concat(n))})),e}function la(t){return t.includes(":")}function ha(t){return la(t)?t.split(":")[0]:t}function pa(t,e){e=e.map((function(i){return i.replace("did:pkh:","")}));for(var r=function(t){var e={};return null!=t&&t.forEach((function(t){var r=L(t.split(":"),2),i=r[0],n=r[1];e[i]||(e[i]={accounts:[],chains:[],events:[]}),e[i].accounts.push(t),e[i].chains.push("".concat(i,":").concat(n))})),e}(e),n=0,o=Object.entries(r);n<o.length;n++){var c=L(o[n],2),f=(c[0],c[1]);f.methods?f.methods=wt(f.methods,t):f.methods=t,f.events=["chainChanged","accountsChanged"]}return r}var da={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},va={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ya(t,e){var r=va[t],n=r.message,i=r.code;return{message:e?"".concat(n," ").concat(e):n,code:i}}function tr(t,e){var r=da[t],n=r.message,i=r.code;return{message:e?"".concat(n," ").concat(e):n,code:i}}function ga(t,e){return!!Array.isArray(t)&&(!(R(e)<"u"&&t.length)||t.every(e))}function ma(t){return Object.getPrototypeOf(t)===Object.prototype&&Object.keys(t).length}function ba(t){return R(t)>"u"}function wa(t,e){return!(!e||!ba(t))||"string"==typeof t&&!!t.trim().length}function _a(t,e){return!(!e||!ba(t))||"number"==typeof t&&!isNaN(t)}function xa(t,e){var r=e.requiredNamespaces,i=Object.keys(t.namespaces),n=Object.keys(r),o=!0;return!!st(n,i)&&(i.forEach((function(e){var n=t.namespaces[e],p=n.accounts,b=n.methods,c=n.events,f=fa(p),l=r[e];st(F(e,l),f)&&st(l.methods,b)&&st(l.events,c)||(o=!1)})),o)}function Ea(t){return!(!wa(t,!1)||!t.includes(":"))&&2===t.split(":").length}function Oa(t){if(wa(t,!1))try{return R(new URL(t))<"u"}catch(t){return!1}return!1}function Aa(t){var e;return null==(e=null==t?void 0:t.proposer)?void 0:e.publicKey}function ka(t){return null==t?void 0:t.topic}function Sa(t,e){var r=null;return wa(null==t?void 0:t.publicKey,!1)||(r=ya("MISSING_OR_INVALID","".concat(e," controller public key should be a string"))),r}function Ia(t){var e=!0;return ga(t)?t.length&&(e=t.every((function(t){return wa(t,!1)}))):e=!1,e}function ja(t,e,r){var i=null;return Object.entries(t).forEach((function(t){var n=L(t,2),o=n[0],c=n[1];if(!i){var f=function(t,e,r){var i=null;return ga(e)&&e.length?e.forEach((function(t){i||Ea(t)||(i=tr("UNSUPPORTED_CHAINS","".concat(r,", chain ").concat(t,' should be a string and conform to "namespace:chainId" format')))})):Ea(t)||(i=tr("UNSUPPORTED_CHAINS","".concat(r,', chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }'))),i}(o,F(o,c),"".concat(e," ").concat(r));f&&(i=f)}})),i}function Pa(t,e){var r=null;return ga(t)?t.forEach((function(i){r||function(t){if(wa(t,!1)&&t.includes(":")){var e=t.split(":");if(3===e.length){var r=e[0]+":"+e[1];return!!e[2]&&Ea(r)}}return!1}(i)||(r=tr("UNSUPPORTED_ACCOUNTS","".concat(e,", account ").concat(i,' should be a string and conform to "namespace:chainId:address" format')))})):r=tr("UNSUPPORTED_ACCOUNTS","".concat(e,', accounts should be an array of strings conforming to "namespace:chainId:address" format')),r}function Ma(t,e){var r=null;return Object.values(t).forEach((function(i){if(!r){var t=function(t,e){var r=null;return Ia(null==t?void 0:t.methods)?Ia(null==t?void 0:t.events)||(r=tr("UNSUPPORTED_EVENTS","".concat(e,", events should be an array of strings or empty array for no events"))):r=tr("UNSUPPORTED_METHODS","".concat(e,", methods should be an array of strings or empty array for no methods")),r}(i,"".concat(e,", namespace"));t&&(r=t)}})),r}function Ra(t,e,r){var i=null;if(t&&ma(t)){var n=Ma(t,e);n&&(i=n);var o=ja(t,e,r);o&&(i=o)}else i=ya("MISSING_OR_INVALID","".concat(e,", ").concat(r," should be an object with data"));return i}function Na(t,e){var r=null;if(t&&ma(t)){var i=Ma(t,e);i&&(r=i);var n=function(t,e){var r=null;return Object.values(t).forEach((function(i){if(!r){var t=Pa(null==i?void 0:i.accounts,"".concat(e," namespace"));t&&(r=t)}})),r}(t,e);n&&(r=n)}else r=ya("MISSING_OR_INVALID","".concat(e,", namespaces should be an object with data"));return r}function Ta(t){return wa(t.protocol,!0)}function La(t,e){var r=!1;return e&&!t?r=!0:t&&ga(t)&&t.length&&t.forEach((function(i){r=Ta(i)})),r}function Ca(t){return"number"==typeof t}function Ua(t){return R(t)<"u"&&null!==R(t)}function th(t){return!!(t&&"object"==R(t)&&t.code&&_a(t.code,!1)&&t.message&&wa(t.message,!1))}function Ba(t){return!(ba(t)||!wa(t.method,!1))}function Da(t){return!(ba(t)||ba(t.result)&&ba(t.error)||!_a(t.id,!1)||!wa(t.jsonrpc,!1))}function qa(t){return!(ba(t)||!wa(t.name,!1))}function za(t,e){return!(!Ea(e)||!function(t){var e=[];return Object.values(t).forEach((function(t){e.push.apply(e,T(fa(t.accounts)))})),e}(t).includes(e))}function Fa(t,e,r){return!!wa(r,!1)&&function(t,e){var r=[];return Object.values(t).forEach((function(i){fa(i.accounts).includes(e)&&r.push.apply(r,T(i.methods))})),r}(t,e).includes(r)}function Ha(t,e,r){return!!wa(r,!1)&&function(t,e){var r=[];return Object.values(t).forEach((function(i){fa(i.accounts).includes(e)&&r.push.apply(r,T(i.events))})),r}(t,e).includes(r)}function Ka(t,e,r){var i=null,n=function(t){var e={};return Object.keys(t).forEach((function(r){var i;r.includes(":")?e[r]=t[r]:null==(i=t[r].chains)||i.forEach((function(n){e[n]={methods:t[r].methods,events:t[r].events}}))})),e}(t),o=function(t){var e={};return Object.keys(t).forEach((function(r){if(r.includes(":"))e[r]=t[r];else{var i=fa(t[r].accounts);null==i||i.forEach((function(n){e[n]={accounts:t[r].accounts.filter((function(t){return t.includes("".concat(n,":"))})),methods:t[r].methods,events:t[r].events}}))}})),e}(e),c=Object.keys(n),p=Object.keys(o),b=Ga(Object.keys(t)),f=Ga(Object.keys(e)),l=b.filter((function(t){return!f.includes(t)}));return l.length&&(i=ya("NON_CONFORMING_NAMESPACES","".concat(r," namespaces keys don't satisfy requiredNamespaces.\n      Required: ").concat(l.toString(),"\n      Received: ").concat(Object.keys(e).toString()))),st(c,p)||(i=ya("NON_CONFORMING_NAMESPACES","".concat(r," namespaces chains don't satisfy required namespaces.\n      Required: ").concat(c.toString(),"\n      Approved: ").concat(p.toString()))),Object.keys(e).forEach((function(t){if(t.includes(":")&&!i){var n=fa(e[t].accounts);n.includes(t)||(i=ya("NON_CONFORMING_NAMESPACES","".concat(r," namespaces accounts don't satisfy namespace accounts for ").concat(t,"\n        Required: ").concat(t,"\n        Approved: ").concat(n.toString())))}})),c.forEach((function(t){i||(st(n[t].methods,o[t].methods)?st(n[t].events,o[t].events)||(i=ya("NON_CONFORMING_NAMESPACES","".concat(r," namespaces events don't satisfy namespace events for ").concat(t))):i=ya("NON_CONFORMING_NAMESPACES","".concat(r," namespaces methods don't satisfy namespace methods for ").concat(t)))})),i}function Ga(t){return T(new Set(t.map((function(t){return t.includes(":")?t.split(":")[0]:t}))))}function Va(t,e){return _a(t,!1)&&t<=e.max&&t>=e.min}function Ya(){var t=et();return new Promise((function(e){switch(t){case Q.browser:e(tt()&&(null===(r=navigator)||void 0===r?void 0:r.onLine));break;case Q.reactNative:e(function(){return Ja.apply(this,arguments)}());break;case Q.node:default:e(!0)}var r}))}function Ja(){return(Ja=M(j().mark((function t(){var e;return j().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!($()&&(void 0===n?"undefined":R(n))<"u"&&null!=n&&n.NetInfo)){t.next=5;break}return t.next=3,null==n?void 0:n.NetInfo.fetch();case 3:return e=t.sent,t.abrupt("return",null==e?void 0:e.isConnected);case 5:return t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Wa(t){switch(et()){case Q.browser:!function(t){!$()&&tt()&&(window.addEventListener("online",(function(){return t(!0)})),window.addEventListener("offline",(function(){return t(!1)})))}(t);break;case Q.reactNative:!function(t){var e;$()&&(void 0===n?"undefined":R(n))<"u"&&null!=n&&n.NetInfo&&(null===(e=n)||void 0===e||e.NetInfo.addEventListener((function(e){return t(null==e?void 0:e.isConnected)})))}(t);case Q.node:}}var Qa={},Xa=function(){return S((function t(){A(this,t)}),null,[{key:"get",value:function(t){return Qa[t]}},{key:"set",value:function(t,e){Qa[t]=e}},{key:"delete",value:function(t){delete Qa[t]}}])}()}).call(this,r(164),r(31),r(446).Buffer)},function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}r.r(e),r.d(e,"__extends",(function(){return c})),r.d(e,"__assign",(function(){return f})),r.d(e,"__rest",(function(){return l})),r.d(e,"__decorate",(function(){return h})),r.d(e,"__param",(function(){return d})),r.d(e,"__metadata",(function(){return v})),r.d(e,"__awaiter",(function(){return y})),r.d(e,"__generator",(function(){return m})),r.d(e,"__createBinding",(function(){return w})),r.d(e,"__exportStar",(function(){return _})),r.d(e,"__values",(function(){return x})),r.d(e,"__read",(function(){return E})),r.d(e,"__spread",(function(){return O})),r.d(e,"__spreadArrays",(function(){return A})),r.d(e,"__await",(function(){return k})),r.d(e,"__asyncGenerator",(function(){return S})),r.d(e,"__asyncDelegator",(function(){return I})),r.d(e,"__asyncValues",(function(){return j})),r.d(e,"__makeTemplateObject",(function(){return P})),r.d(e,"__importStar",(function(){return M})),r.d(e,"__importDefault",(function(){return R})),r.d(e,"__classPrivateFieldGet",(function(){return N})),r.d(e,"__classPrivateFieldSet",(function(){return T}));var o=function(t,b){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])},o(t,b)};function c(t,b){function e(){this.constructor=t}o(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}var f=function(){return f=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},f.apply(this,arguments)};function l(s,t){var e={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&t.indexOf(p)<0&&(e[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)t.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(e[p[i]]=s[p[i]])}return e}function h(t,e,r,desc){var o,c=arguments.length,f=c<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)f=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(f=(c<3?o(f):c>3?o(e,r,f):o(e,r))||f);return c>3&&f&&Object.defineProperty(e,r,f),f}function d(t,e){return function(r,n){e(r,n,t)}}function v(t,e){if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function y(t,e,r,n){return new(r||(r=Promise))((function(o,c){function f(t){try{h(n.next(t))}catch(t){c(t)}}function l(t){try{h(n.throw(t))}catch(t){c(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(f,l)}h((n=n.apply(t,e||[])).next())}))}function m(t,body){var e,r,n,g,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(f){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,r&&(n=2&c[0]?r.return:c[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,c[1])).done)return n;switch(r=0,n&&(c=[2&c[0],n.value]),c[0]){case 0:case 1:n=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!n||c[1]>n[0]&&c[1]<n[3])){o.label=c[1];break}if(6===c[0]&&o.label<n[1]){o.label=n[1],n=c;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(c);break}n[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],r=0}finally{e=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,f])}}}function w(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}function _(t,e){for(var p in t)"default"===p||e.hasOwnProperty(p)||(e[p]=t[p])}function x(t){var s="function"==typeof Symbol&&Symbol.iterator,e=s&&t[s],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function E(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)c.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return c}function O(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(E(arguments[i]));return t}function A(){for(var s=0,i=0,t=arguments.length;i<t;i++)s+=arguments[i].length;var e=Array(s),r=0;for(i=0;i<t;i++)for(var a=arguments[i],n=0,o=a.length;n<o;n++,r++)e[r]=a[n];return e}function k(t){return this instanceof k?(this.v=t,this):new k(t)}function S(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=r.apply(t,e||[]),q=[];return i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i;function n(t){g[t]&&(i[t]=function(e){return new Promise((function(a,b){q.push([t,e,a,b])>1||o(t,e)}))})}function o(t,e){try{(r=g[t](e)).value instanceof k?Promise.resolve(r.value.v).then(c,f):l(q[0][2],r)}catch(t){l(q[0][3],t)}var r}function c(t){o("next",t)}function f(t){o("throw",t)}function l(t,e){t(e),q.shift(),q.length&&o(q[0][0],q[0][1])}}function I(t){var i,p;return i={},e("next"),e("throw",(function(t){throw t})),e("return"),i[Symbol.iterator]=function(){return this},i;function e(e,r){i[e]=t[e]?function(n){return(p=!p)?{value:k(t[e](n)),done:"return"===e}:r?r(n):n}:r}}function j(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,e=t[Symbol.asyncIterator];return e?e.call(t):(t=x(t),i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i);function r(e){i[e]=t[e]&&function(r){return new Promise((function(n,o){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,o,(r=t[e](r)).done,r.value)}))}}}function P(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function M(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function R(t){return t&&t.__esModule?t:{default:t}}function N(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function T(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.randomStringForEntropy=e.randomString=e.randomUint32=e.randomBytes=e.defaultRandomSource=void 0;const n=r(471),o=r(354),c=r(326);function f(t,r=e.defaultRandomSource){return r.randomBytes(t)}e.defaultRandomSource=new n.SystemRandomSource,e.randomBytes=f,e.randomUint32=function(t=e.defaultRandomSource){const r=f(4,t),n=(0,o.readUint32LE)(r);return(0,c.wipe)(r),n};const l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function h(t,r=l,n=e.defaultRandomSource){if(r.length<2)throw new Error("randomString charset is too short");if(r.length>256)throw new Error("randomString charset is too long");let o="";const h=r.length,d=256-256%h;for(;t>0;){const e=f(Math.ceil(256*t/d),n);for(let i=0;i<e.length&&t>0;i++){const n=e[i];n<d&&(o+=r.charAt(n%h),t--)}(0,c.wipe)(e)}return o}e.randomString=h,e.randomStringForEntropy=function(t,r=l,n=e.defaultRandomSource){return h(Math.ceil(t/(Math.log(r.length)/Math.LN2)),r,n)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(491);e.decode=(data,t=0)=>[n.decode(data,t),n.decode.bytes],e.encodeTo=(t,e,r=0)=>(n.encode(t,e,r),e),e.encodingLength=t=>n.encodingLength(t)},function(t,e,r){"use strict";r.d(e,"h",(function(){return n})),r.d(e,"i",(function(){return o})),r.d(e,"f",(function(){return c})),r.d(e,"g",(function(){return f})),r.d(e,"e",(function(){return l})),r.d(e,"a",(function(){return h})),r.d(e,"b",(function(){return d})),r.d(e,"d",(function(){return v})),r.d(e,"c",(function(){return y})),r.d(e,"l",(function(){return m})),r.d(e,"k",(function(){return w})),r.d(e,"m",(function(){return _})),r.d(e,"n",(function(){return x})),r.d(e,"j",(function(){return E}));var n="EdDSA",o="JWT",c=".",f="base64url",l="utf8",h="utf8",d=":",v="did",y="key",m="base58btc",w="z",_="K36",x=32,E=32},,,,,,,,,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return C})),r.d(e,"b",(function(){return U})),r.d(e,"c",(function(){return T})),r.d(e,"d",(function(){return L}));var n=r(376),o=r.n(n);r.d(e,"e",(function(){return o.a}));var c=r(342);function f(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,a){if(t){if("string"==typeof t)return l(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?l(t,a):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,c=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw c}}}}function l(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,r=Array(a);e<a;e++)r[e]=t[e];return r}function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function d(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function v(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,m(n.key),n)}}function y(t,e,r){return e&&v(t.prototype,e),r&&v(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function m(t){var i=function(t,e){if("object"!=h(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=h(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==h(i)?i:i+""}var w={level:"info"},_="custom_context",x=1024e3,E=function(){return y((function t(e){d(this,t),this.nodeValue=e,this.sizeInBytes=(new TextEncoder).encode(this.nodeValue).length,this.next=null}),[{key:"value",get:function(){return this.nodeValue}},{key:"size",get:function(){return this.sizeInBytes}}])}(),O=function(){return y((function t(e){d(this,t),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=e,this.sizeInBytes=0}),[{key:"append",value:function(t){var e=new E(t);if(e.size>this.maxSizeInBytes)throw new Error("[LinkedList] Value too big to insert into list: ".concat(t," with size ").concat(e.size));for(;this.size+e.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=e),this.tail=e):(this.head=e,this.tail=e),this.lengthInNodes++,this.sizeInBytes+=e.size}},{key:"shift",value:function(){if(this.head){var t=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=t.size}}},{key:"toArray",value:function(){for(var t=[],e=this.head;null!==e;)t.push(e.value),e=e.next;return t}},{key:"length",get:function(){return this.lengthInNodes}},{key:"size",get:function(){return this.sizeInBytes}},{key:"toOrderedArray",value:function(){return Array.from(this)}},{key:Symbol.iterator,value:function(){var t=this.head;return{next:function(){if(!t)return{done:!0,value:null};var e=t.value;return t=t.next,{done:!1,value:e}}}}}])}(),A=function(){return y((function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;d(this,t),this.level=null!=e?e:"error",this.levelValue=n.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=r,this.logs=new O(this.MAX_LOG_SIZE_IN_BYTES)}),[{key:"forwardToConsole",value:function(t,e){e===n.levels.values.error?console.error(t):e===n.levels.values.warn?console.warn(t):e===n.levels.values.debug?console.debug(t):e===n.levels.values.trace?console.trace(t):console.log(t)}},{key:"appendToLogs",value:function(t){this.logs.append(Object(c.b)({timestamp:(new Date).toISOString(),log:t}));var e="string"==typeof t?JSON.parse(t).level:t.level;e>=this.levelValue&&this.forwardToConsole(t,e)}},{key:"getLogs",value:function(){return this.logs}},{key:"clearLogs",value:function(){this.logs=new O(this.MAX_LOG_SIZE_IN_BYTES)}},{key:"getLogArray",value:function(){return Array.from(this.logs)}},{key:"logsToBlob",value:function(t){var e=this.getLogArray();return e.push(Object(c.b)({extraMetadata:t})),new Blob(e,{type:"application/json"})}}])}(),k=function(){return y((function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;d(this,t),this.baseChunkLogger=new A(e,r)}),[{key:"write",value:function(t){this.baseChunkLogger.appendToLogs(t)}},{key:"getLogs",value:function(){return this.baseChunkLogger.getLogs()}},{key:"clearLogs",value:function(){this.baseChunkLogger.clearLogs()}},{key:"getLogArray",value:function(){return this.baseChunkLogger.getLogArray()}},{key:"logsToBlob",value:function(t){return this.baseChunkLogger.logsToBlob(t)}},{key:"downloadLogsBlobInBrowser",value:function(t){var e=URL.createObjectURL(this.logsToBlob(t)),r=document.createElement("a");r.href=e,r.download="walletconnect-logs-".concat((new Date).toISOString(),".txt"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(e)}}])}(),S=function(){return y((function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x;d(this,t),this.baseChunkLogger=new A(e,r)}),[{key:"write",value:function(t){this.baseChunkLogger.appendToLogs(t)}},{key:"getLogs",value:function(){return this.baseChunkLogger.getLogs()}},{key:"clearLogs",value:function(){this.baseChunkLogger.clearLogs()}},{key:"getLogArray",value:function(){return this.baseChunkLogger.getLogArray()}},{key:"logsToBlob",value:function(t){return this.baseChunkLogger.logsToBlob(t)}}])}(),I=Object.defineProperty,j=Object.defineProperties,P=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,M=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable,N=function(t,e,r){return e in t?I(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},i=function(t,e){for(var r in e||(e={}))M.call(e,r)&&N(t,r,e[r]);if(p){var n,o=f(p(e));try{for(o.s();!(n=o.n()).done;){r=n.value;R.call(e,r)&&N(t,r,e[r])}}catch(t){o.e(t)}finally{o.f()}}return t},g=function(t,e){return j(t,P(e))};function T(t){return g(i({},t),{level:(null==t?void 0:t.level)||w.level})}function L(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_,r="";return r=h(t.bindings)>"u"?function(t){return t[arguments.length>1&&void 0!==arguments[1]?arguments[1]:_]||""}(t,e):t.bindings().context||"",r}function C(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_,n=function(t,e){var r=L(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:_);return r.trim()?"".concat(r,"/").concat(e):e}(t,e,r);return function(t,e){return t[arguments.length>2&&void 0!==arguments[2]?arguments[2]:_]=e,t}(t.child({context:n}),n,r)}function U(t){return h(t.loggerOverride)<"u"&&"string"!=typeof t.loggerOverride?{logger:t.loggerOverride,chunkLoggerController:null}:("undefined"==typeof window?"undefined":h(window))<"u"?function(t){var e,r,n=new k(null==(e=t.opts)?void 0:e.level,t.maxSizeInBytes);return{logger:o()(g(i({},t.opts),{level:"trace",browser:g(i({},null==(r=t.opts)?void 0:r.browser),{write:function(a){return n.write(a)}})})),chunkLoggerController:n}}(t):function(t){var e,r=new S(null==(e=t.opts)?void 0:e.level,t.maxSizeInBytes);return{logger:o()(g(i({},t.opts),{level:"trace"}),r),chunkLoggerController:r}}(t)}},function(t,e,r){"use strict";const n=r(440);t.exports=f;const o=function(){function t(t){return void 0!==t&&t}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(e){return t(self)||t(window)||t(this)||{}}}().console||{},c={mapHttpRequest:m,mapHttpResponse:m,wrapRequestSerializer:w,wrapResponseSerializer:w,wrapErrorSerializer:w,req:m,res:m,err:function(t){const e={type:t.constructor.name,msg:t.message,stack:t.stack};for(const r in t)void 0===e[r]&&(e[r]=t[r]);return e}};function f(t){(t=t||{}).browser=t.browser||{};const e=t.browser.transmit;if(e&&"function"!=typeof e.send)throw Error("pino: transmit option must have a send function");const r=t.browser.write||o;t.browser.write&&(t.browser.asObject=!0);const n=t.serializers||{},c=function(t,e){if(Array.isArray(t))return t.filter((function(t){return"!stdSerializers.err"!==t}));return!0===t&&Object.keys(e)}(t.browser.serialize,n);let m=t.browser.serialize;Array.isArray(t.browser.serialize)&&t.browser.serialize.indexOf("!stdSerializers.err")>-1&&(m=!1);"function"==typeof r&&(r.error=r.fatal=r.warn=r.info=r.debug=r.trace=r),!1===t.enabled&&(t.level="silent");const w=t.level||"info",x=Object.create(r);x.log||(x.log=_),Object.defineProperty(x,"levelVal",{get:function(){return"silent"===this.level?1/0:this.levels.values[this.level]}}),Object.defineProperty(x,"level",{get:function(){return this._level},set:function(t){if("silent"!==t&&!this.levels.values[t])throw Error("unknown level "+t);this._level=t,l(E,x,"error","log"),l(E,x,"fatal","error"),l(E,x,"warn","error"),l(E,x,"info","log"),l(E,x,"debug","log"),l(E,x,"trace","log")}});const E={transmit:e,serialize:c,asObject:t.browser.asObject,levels:["error","fatal","warn","info","debug","trace"],timestamp:y(t)};return x.levels=f.levels,x.level=w,x.setMaxListeners=x.getMaxListeners=x.emit=x.addListener=x.on=x.prependListener=x.once=x.prependOnceListener=x.removeListener=x.removeAllListeners=x.listeners=x.listenerCount=x.eventNames=x.write=x.flush=_,x.serializers=n,x._serialize=c,x._stdErrSerialize=m,x.child=function(r,o){if(!r)throw new Error("missing bindings for child Pino");o=o||{},c&&r.serializers&&(o.serializers=r.serializers);const f=o.serializers;if(c&&f){var l=Object.assign({},n,f),y=!0===t.browser.serialize?Object.keys(l):c;delete r.serializers,h([r],y,l,this._stdErrSerialize)}function m(t){this._childLevel=1+(0|t._childLevel),this.error=d(t,r,"error"),this.fatal=d(t,r,"fatal"),this.warn=d(t,r,"warn"),this.info=d(t,r,"info"),this.debug=d(t,r,"debug"),this.trace=d(t,r,"trace"),l&&(this.serializers=l,this._serialize=y),e&&(this._logEvent=v([].concat(t._logEvent.bindings,r)))}return m.prototype=this,new m(this)},e&&(x._logEvent=v()),x}function l(t,e,r,c){const l=Object.getPrototypeOf(e);e[r]=e.levelVal>e.levels.values[r]?_:l[r]?l[r]:o[r]||o[c]||_,function(t,e,r){if(!t.transmit&&e[r]===_)return;e[r]=(c=e[r],function(){const l=t.timestamp(),d=new Array(arguments.length),y=Object.getPrototypeOf&&Object.getPrototypeOf(this)===o?o:this;for(var i=0;i<d.length;i++)d[i]=arguments[i];if(t.serialize&&!t.asObject&&h(d,this._serialize,this.serializers,this._stdErrSerialize),t.asObject?c.call(y,function(t,e,r,o){t._serialize&&h(r,t._serialize,t.serializers,t._stdErrSerialize);const c=r.slice();let l=c[0];const d={};o&&(d.time=o),d.level=f.levels.values[e];let v=1+(0|t._childLevel);if(v<1&&(v=1),null!==l&&"object"==typeof l){for(;v--&&"object"==typeof c[0];)Object.assign(d,c.shift());l=c.length?n(c.shift(),c):void 0}else"string"==typeof l&&(l=n(c.shift(),c));return void 0!==l&&(d.msg=l),d}(this,r,d,l)):c.apply(y,d),t.transmit){const n=t.transmit.level||e.level,o=f.levels.values[n],c=f.levels.values[r];if(c<o)return;!function(t,e,r){const n=e.send,o=e.ts,c=e.methodLevel,f=e.methodValue,l=e.val,d=t._logEvent.bindings;h(r,t._serialize||Object.keys(t.serializers),t.serializers,void 0===t._stdErrSerialize||t._stdErrSerialize),t._logEvent.ts=o,t._logEvent.messages=r.filter((function(t){return-1===d.indexOf(t)})),t._logEvent.level.label=c,t._logEvent.level.value=f,n(c,t._logEvent,l),t._logEvent=v(d)}(this,{ts:l,methodLevel:r,methodValue:c,transmitLevel:n,transmitValue:f.levels.values[t.transmit.level||e.level],send:t.transmit.send,val:e.levelVal},d)}});var c}(t,e,r)}function h(t,e,r,n){for(const i in t)if(n&&t[i]instanceof Error)t[i]=f.stdSerializers.err(t[i]);else if("object"==typeof t[i]&&!Array.isArray(t[i]))for(const n in t[i])e&&e.indexOf(n)>-1&&n in r&&(t[i][n]=r[n](t[i][n]))}function d(t,e,r){return function(){const n=new Array(1+arguments.length);n[0]=e;for(var i=1;i<n.length;i++)n[i]=arguments[i-1];return t[r].apply(this,n)}}function v(t){return{ts:0,messages:[],bindings:t||[],level:{label:"",value:0}}}function y(t){return"function"==typeof t.timestamp?t.timestamp:!1===t.timestamp?x:E}function m(){return{}}function w(a){return a}function _(){}function x(){return!1}function E(){return Date.now()}f.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},f.stdSerializers=c,f.stdTimeFunctions=Object.assign({},{nullTime:x,epochTime:E,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}})},function(t,e,r){"use strict";r.d(e,"c",(function(){return o})),r.d(e,"a",(function(){return c})),r.d(e,"b",(function(){return f})),r.d(e,"d",(function(){return l}));var n=r(357);function o(code){return n.c.includes(code)}function c(t){return Object.keys(n.f).includes(t)?n.f[t]:n.f[n.a]}function f(code){var t=Object.values(n.f).find((function(t){return t.code===code}));return t||n.f[n.a]}function l(t,e,r){return t.message.includes("getaddrinfo ENOTFOUND")||t.message.includes("connect ECONNREFUSED")?new Error("Unavailable ".concat(r," RPC url at ").concat(e)):t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(443);n.__exportStar(r(444),e),n.__exportStar(r(445),e)},function(t,e,r){"use strict";function n(a,b){if(a.length!==b.length)return 0;for(var t=0,i=0;i<a.length;i++)t|=a[i]^b[i];return 1&t-1>>>8}Object.defineProperty(e,"__esModule",{value:!0}),e.select=function(t,e,r){return~(t-1)&e|t-1&r},e.lessOrEqual=function(a,b){return(0|a)-(0|b)-1>>>31&1},e.compare=n,e.equal=function(a,b){return 0!==a.length&&0!==b.length&&0!==n(a,b)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.alloc=function(t=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.alloc?globalThis.Buffer.alloc(t):new Uint8Array(t)},e.allocUnsafe=function(t=0){return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(355);class o{constructor(t,code,e){this.name=t,this.code=code,this.encode=e}digest(input){if(input instanceof Uint8Array){const t=this.encode(input);return t instanceof Uint8Array?n.create(this.code,t):t.then((t=>n.create(this.code,t)))}throw Error("Unknown type, must be binary type")}}e.Hasher=o,e.from=({name:t,code:code,encode:e})=>new o(t,code,e)},function(t,e,r){"use strict";r.d(e,"d",(function(){return m})),r.d(e,"a",(function(){return w})),r.d(e,"c",(function(){return _})),r.d(e,"e",(function(){return x})),r.d(e,"b",(function(){return E}));var n=r(510),o=r(511),c=r(512),f=r(342),l=r(362);function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,f=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){f=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(f)throw o}}return a}}(t,e)||function(t,a){if(t){if("string"==typeof t)return d(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?d(t,a):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,r=Array(a);e<a;e++)r[e]=t[e];return r}function v(t){return Object(f.a)(Object(o.toString)(Object(c.fromString)(t,l.g),l.e))}function y(t){return Object(o.toString)(Object(c.fromString)(Object(f.b)(t),l.e),l.g)}function m(t){var header=Object(c.fromString)(l.m,l.l),e=l.k+Object(o.toString)(Object(n.concat)([header,t]),l.l);return[l.d,l.c,e].join(l.b)}function w(t){var e=h(t.split(l.b),3),r=e[0],n=e[1],f=e[2];if(r!==l.d||n!==l.c)throw new Error('Issuer must be a DID with method "key"');if(f.slice(0,1)!==l.k)throw new Error("Issuer must be a key in mulicodec format");var d=Object(c.fromString)(f.slice(1),l.l);if(Object(o.toString)(d.slice(0,2),l.l)!==l.m)throw new Error('Issuer must be a public key with type "Ed25519"');var v=d.slice(2);if(v.length!==l.n)throw new Error("Issuer must be a public key with length 32 bytes");return v}function _(t){return Object(c.fromString)([y(t.header),y(t.payload)].join(l.f),l.a)}function x(t){return[y(t.header),y(t.payload),(e=t.signature,Object(o.toString)(e,l.g))].join(l.f);var e}function E(t){var e,r=t.split(l.f);return{header:v(r[0]),payload:v(r[1]),signature:(e=r[2],Object(c.fromString)(e,l.g)),data:Object(c.fromString)(r.slice(0,2).join(l.f),l.a)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.asUint8Array=function(t){return null!=globalThis.Buffer?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}},,,,,,,,,,,function(t,e,r){"use strict";var n=r(378);r.o(n,"IJsonRpcProvider")&&r.d(e,"IJsonRpcProvider",(function(){return n.IJsonRpcProvider})),r.o(n,"formatJsonRpcError")&&r.d(e,"formatJsonRpcError",(function(){return n.formatJsonRpcError})),r.o(n,"formatJsonRpcRequest")&&r.d(e,"formatJsonRpcRequest",(function(){return n.formatJsonRpcRequest})),r.o(n,"formatJsonRpcResult")&&r.d(e,"formatJsonRpcResult",(function(){return n.formatJsonRpcResult})),r.o(n,"getBigIntRpcId")&&r.d(e,"getBigIntRpcId",(function(){return n.getBigIntRpcId})),r.o(n,"isHttpUrl")&&r.d(e,"isHttpUrl",(function(){return n.isHttpUrl})),r.o(n,"isJsonRpcError")&&r.d(e,"isJsonRpcError",(function(){return n.isJsonRpcError})),r.o(n,"isJsonRpcRequest")&&r.d(e,"isJsonRpcRequest",(function(){return n.isJsonRpcRequest})),r.o(n,"isJsonRpcResponse")&&r.d(e,"isJsonRpcResponse",(function(){return n.isJsonRpcResponse})),r.o(n,"isJsonRpcResult")&&r.d(e,"isJsonRpcResult",(function(){return n.isJsonRpcResult})),r.o(n,"isLocalhostUrl")&&r.d(e,"isLocalhostUrl",(function(){return n.isLocalhostUrl})),r.o(n,"isReactNative")&&r.d(e,"isReactNative",(function(){return n.isReactNative})),r.o(n,"isWsUrl")&&r.d(e,"isWsUrl",(function(){return n.isWsUrl})),r.o(n,"payloadId")&&r.d(e,"payloadId",(function(){return n.payloadId}));n.isNode},function(t,e,r){"use strict";r.d(e,"e",(function(){return c})),r.d(e,"d",(function(){return f})),r.d(e,"b",(function(){return l})),r.d(e,"c",(function(){return h})),r.d(e,"a",(function(){return d}));var n=r(377),o=r(357);function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;return Date.now()*Math.pow(10,t)+Math.floor(Math.random()*Math.pow(10,t))}function f(){return BigInt(c(arguments.length>0&&void 0!==arguments[0]?arguments[0]:6))}function l(t,e,r){return{id:r||c(),jsonrpc:"2.0",method:t,params:e}}function h(t,e){return{id:t,jsonrpc:"2.0",result:e}}function d(t,e,data){return{id:t,jsonrpc:"2.0",error:v(e,data)}}function v(t,data){return void 0===t?Object(n.a)(o.b):("string"==typeof t&&(t=Object.assign(Object.assign({},Object(n.a)(o.d)),{message:t})),void 0!==data&&(t.data=data),Object(n.c)(t.code)&&(t=Object(n.b)(t.code)),t)}},function(t,e,r){"use strict"},function(t,e,r){"use strict";r.d(e,"a",(function(){return f})),r.d(e,"c",(function(){return l})),r.d(e,"b",(function(){return h}));var n="^https?:",o="^wss?:";function c(t,e){var r=function(t){var e=t.match(new RegExp(/^\w+:/,"gi"));if(e&&e.length)return e[0]}(t);return void 0!==r&&new RegExp(e).test(r)}function f(t){return c(t,n)}function l(t){return c(t,o)}function h(t){return new RegExp("wss?://localhost(:d{2,5})?").test(t)}},function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t){return"object"===n(t)&&"id"in t&&"jsonrpc"in t&&"2.0"===t.jsonrpc}function c(t){return o(t)&&"method"in t}function f(t){return o(t)&&(l(t)||h(t))}function l(t){return"result"in t}function h(t){return"error"in t}r.d(e,"b",(function(){return c})),r.d(e,"c",(function(){return f})),r.d(e,"d",(function(){return l})),r.d(e,"a",(function(){return h}))},function(t,e,r){"use strict";r.d(e,"a",(function(){return x}));var n=r(333),o=r(343);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function f(){f=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function h(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,r){return t[e]=r}}function d(t,e,r,n){var i=e&&e.prototype instanceof x?e:x,a=Object.create(i.prototype),c=new N(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function v(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var y="suspendedStart",m="suspendedYield",w="executing",s="completed",_={};function x(){}function E(){}function O(){}var p={};h(p,a,(function(){return this}));var A=Object.getPrototypeOf,k=A&&A(A(T([])));k&&k!==r&&n.call(k,a)&&(p=k);var g=O.prototype=x.prototype=Object.create(p);function S(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function r(o,f,i,a){var l=v(t[o],t,f);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==c(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,i,a)}),(function(t){r("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,a)}))}a(l.arg)}var f;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return f=f?f.then(o,o):o()}})}function j(e,r,n){var o=y;return function(i,a){if(o===w)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===_)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=w;var p=v(e,r,n);if("normal"===p.type){if(o=n.done?s:m,p.arg===_)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var i=v(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,_;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,_):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(c(e)+" is not iterable")}return E.prototype=O,o(g,"constructor",{value:O,configurable:!0}),o(O,"constructor",{value:E,configurable:!0}),E.displayName=h(O,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,O):(t.__proto__=O,h(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},S(I.prototype),h(I.prototype,l,(function(){return this})),e.AsyncIterator=I,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new I(d(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(g),h(g,u,"Generator"),h(g,a,(function(){return this})),h(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var c=this.tryEntries.length-1;c>=0;--c){var i=this.tryEntries[c],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var f=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(f&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(f){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),_}},e}function l(t,e,r,n,o,a,c){try{var i=t[a](c),u=i.value}catch(t){return void r(t)}i.done?e(u):Promise.resolve(u).then(n,o)}function h(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){l(a,n,o,c,f,"next",t)}function f(t){l(a,n,o,c,f,"throw",t)}c(void 0)}))}}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function v(t){var i=function(t,e){if("object"!=c(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=c(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==c(i)?i:i+""}function y(t,e,r){return e=w(e),function(t,e){if(e&&("object"==c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,m()?Reflect.construct(e,r||[],w(t).constructor):e.apply(t,r))}function m(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(m=function(){return!!t})()}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}function _(t,e){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_(t,e)}var x=function(t){function e(t){var r;return function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),(r=y(this,e,[t])).events=new n.EventEmitter,r.hasRegisteredEventListeners=!1,r.connection=r.setConnection(t),r.connection.connected&&r.registerEventListeners(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}(e,t),r=e,c=[{key:"connect",value:(O=h(f().mark((function t(){var e,r=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:this.connection,t.next=3,this.open(e);case 3:case"end":return t.stop()}}),t,this)}))),function(){return O.apply(this,arguments)})},{key:"disconnect",value:(E=h(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.close();case 2:case"end":return t.stop()}}),t,this)}))),function(){return E.apply(this,arguments)})},{key:"on",value:function(t,e){this.events.on(t,e)}},{key:"once",value:function(t,e){this.events.once(t,e)}},{key:"off",value:function(t,e){this.events.off(t,e)}},{key:"removeListener",value:function(t,e){this.events.removeListener(t,e)}},{key:"request",value:(x=h(f().mark((function t(e,r){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.requestStrict(Object(o.formatJsonRpcRequest)(e.method,e.params||[],e.id||Object(o.getBigIntRpcId)().toString()),r));case 1:case"end":return t.stop()}}),t,this)}))),function(t,e){return x.apply(this,arguments)})},{key:"requestStrict",value:(w=h(f().mark((function t(e,r){var n=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=h(f().mark((function t(i,s){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.connection.connected){t.next=9;break}return t.prev=1,t.next=4,n.open();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),s(t.t0);case 9:return n.events.on("".concat(e.id),(function(t){Object(o.isJsonRpcError)(t)?s(t.error):i(t.result)})),t.prev=10,t.next=13,n.connection.send(e,r);case 13:t.next=18;break;case 15:t.prev=15,t.t1=t.catch(10),s(t.t1);case 18:case"end":return t.stop()}}),t,null,[[1,6],[10,15]])})));return function(e,r){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)}))),function(t,e){return w.apply(this,arguments)})},{key:"setConnection",value:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.connection}},{key:"onPayload",value:function(t){this.events.emit("payload",t),Object(o.isJsonRpcResponse)(t)?this.events.emit("".concat(t.id),t):this.events.emit("message",{type:t.method,data:t.params})}},{key:"onClose",value:function(t){t&&3e3===t.code&&this.events.emit("error",new Error("WebSocket connection closed abnormally with code: ".concat(t.code," ").concat(t.reason?"(".concat(t.reason,")"):""))),this.events.emit("disconnect")}},{key:"open",value:(m=h(f().mark((function t(){var e,r=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.length>0&&void 0!==r[0]?r[0]:this.connection,t.t0=this.connection===e&&this.connection.connected,t.t0){t.next=14;break}if(this.connection.connected&&this.close(),t.t1="string"==typeof e,!t.t1){t.next=9;break}return t.next=8,this.connection.open(e);case 8:e=this.connection;case 9:return this.connection=this.setConnection(e),t.next=12,this.connection.open();case 12:this.registerEventListeners(),this.events.emit("connect");case 14:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)})},{key:"close",value:(v=h(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.connection.close();case 2:case"end":return t.stop()}}),t,this)}))),function(){return v.apply(this,arguments)})},{key:"registerEventListeners",value:function(){var t=this;this.hasRegisteredEventListeners||(this.connection.on("payload",(function(e){return t.onPayload(e)})),this.connection.on("close",(function(e){return t.onClose(e)})),this.connection.on("error",(function(e){return t.events.emit("error",e)})),this.connection.on("register_error",(function(e){return t.onClose()})),this.hasRegisteredEventListeners=!0)}}],c&&d(r.prototype,c),l&&d(r,l),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,c,l,v,m,w,x,E,O}(o.IJsonRpcProvider)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(359);n.__exportStar(r(453),e),n.__exportStar(r(454),e)},function(t,e,r){"use strict";function n(t){var e=void 0;return"undefined"!=typeof window&&void 0!==window[t]&&(e=window[t]),e}function o(t){var e=n(t);if(!e)throw new Error("".concat(t," is not defined in Window"));return e}Object.defineProperty(e,"__esModule",{value:!0}),e.getLocalStorage=e.getLocalStorageOrThrow=e.getCrypto=e.getCryptoOrThrow=e.getLocation=e.getLocationOrThrow=e.getNavigator=e.getNavigatorOrThrow=e.getDocument=e.getDocumentOrThrow=e.getFromWindowOrThrow=e.getFromWindow=void 0,e.getFromWindow=n,e.getFromWindowOrThrow=o,e.getDocumentOrThrow=function(){return o("document")},e.getDocument=function(){return n("document")},e.getNavigatorOrThrow=function(){return o("navigator")},e.getNavigator=function(){return n("navigator")},e.getLocationOrThrow=function(){return o("location")},e.getLocation=function(){return n("location")},e.getCryptoOrThrow=function(){return o("crypto")},e.getCrypto=function(){return n("crypto")},e.getLocalStorageOrThrow=function(){return o("localStorage")},e.getLocalStorage=function(){return n("localStorage")}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(477),o=r(478),c=r(479),f=r(480),l=r(496),h=r(497);e.compare=n.compare,e.concat=o.concat,e.equals=c.equals,e.fromString=f.fromString,e.toString=l.toString,e.xor=h.xor},function(t,e,r){"use strict";var n=r(404),o=r(380);function c(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const f=c("utf8","u",(t=>"u"+new TextDecoder("utf8").decode(t)),(t=>(new TextEncoder).encode(t.substring(1)))),l=c("ascii","a",(t=>{let e="a";for(let i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return e}),(t=>{t=t.substring(1);const e=o.allocUnsafe(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e})),h={utf8:f,"utf-8":f,hex:n.bases.base16,latin1:l,ascii:l,binary:l,...n.bases};t.exports=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(481),o=r(483),c=r(484),f=r(485),l=r(486),h=r(405),d=r(487),v=r(406),y=r(488),m=r(489),w=r(490),_=r(492),x=r(493),E=r(494);r(495);var O=r(407),A=r(381),k=r(355),S=r(361),I=r(336);const j={...n,...o,...c,...f,...l,...h,...d,...v,...y,...m},P={...w,..._},M={raw:x,json:E};e.CID=O.CID,e.hasher=A,e.digest=k,e.varint=S,e.bytes=I,e.bases=j,e.codecs=M,e.hashes=P},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var base=r(328);const n=base.rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),o=base.rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),c=base.rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),f=base.rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),l=base.rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),h=base.rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),d=base.rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),v=base.rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),y=base.rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});e.base32=n,e.base32hex=l,e.base32hexpad=d,e.base32hexpadupper=v,e.base32hexupper=h,e.base32pad=c,e.base32padupper=f,e.base32upper=o,e.base32z=y},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var base=r(328);const n=base.baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),o=base.baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});e.base58btc=n,e.base58flickr=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(361),o=r(355),c=r(406),f=r(405),l=r(336);class h{constructor(t,code,e,r){this.code=code,this.version=t,this.multihash=e,this.bytes=r,this.byteOffset=r.byteOffset,this.byteLength=r.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:O,byteLength:O,code:E,version:E,multihash:E,bytes:E,_baseCache:O,asCID:O})}toV0(){if(0===this.version)return this;{const{code:code,multihash:t}=this;if(code!==m)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==w)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return h.createV0(t)}}toV1(){switch(this.version){case 0:{const{code:code,digest:t}=this.multihash,e=o.create(code,t);return h.createV1(this.code,e)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(t){return t&&this.code===t.code&&this.version===t.version&&o.equals(this.multihash,t.multihash)}toString(base){const{bytes:t,version:e,_baseCache:r}=this;return 0===e?v(t,r,base||c.base58btc.encoder):y(t,r,base||f.base32.encoder)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(t){return A(/^0\.0/,k),!(!t||!t[x]&&t.asCID!==t)}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(t){if(t instanceof h)return t;if(null!=t&&t.asCID===t){const{version:e,code:code,multihash:r,bytes:n}=t;return new h(e,code,r,n||_(e,code,r.bytes))}if(null!=t&&!0===t[x]){const{version:e,multihash:r,code:code}=t,n=o.decode(r);return h.create(e,code,n)}return null}static create(t,code,e){if("number"!=typeof code)throw new Error("String codecs are no longer supported");switch(t){case 0:if(code!==m)throw new Error(`Version 0 CID must use dag-pb (code: ${m}) block encoding`);return new h(t,code,e,e.bytes);case 1:{const r=_(t,code,e.bytes);return new h(t,code,e,r)}default:throw new Error("Invalid version")}}static createV0(t){return h.create(0,m,t)}static createV1(code,t){return h.create(1,code,t)}static decode(t){const[e,r]=h.decodeFirst(t);if(r.length)throw new Error("Incorrect length");return e}static decodeFirst(t){const e=h.inspectBytes(t),r=e.size-e.multihashSize,n=l.coerce(t.subarray(r,r+e.multihashSize));if(n.byteLength!==e.multihashSize)throw new Error("Incorrect length");const c=n.subarray(e.multihashSize-e.digestSize),f=new o.Digest(e.multihashCode,e.digestSize,c,n);return[0===e.version?h.createV0(f):h.createV1(e.codec,f),t.subarray(e.size)]}static inspectBytes(t){let e=0;const r=()=>{const[i,r]=n.decode(t.subarray(e));return e+=r,i};let o=r(),c=m;if(18===o?(o=0,e=0):1===o&&(c=r()),0!==o&&1!==o)throw new RangeError(`Invalid CID version ${o}`);const f=e,l=r(),h=r(),d=e+h;return{version:o,codec:c,multihashCode:l,digestSize:h,multihashSize:d-f,size:d}}static parse(source,base){const[t,e]=d(source,base),r=h.decode(e);return r._baseCache.set(t,source),r}}const d=(source,base)=>{switch(source[0]){case"Q":{const t=base||c.base58btc;return[c.base58btc.prefix,t.decode(`${c.base58btc.prefix}${source}`)]}case c.base58btc.prefix:{const t=base||c.base58btc;return[c.base58btc.prefix,t.decode(source)]}case f.base32.prefix:{const t=base||f.base32;return[f.base32.prefix,t.decode(source)]}default:if(null==base)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[source[0],base.decode(source)]}},v=(t,e,base)=>{const{prefix:r}=base;if(r!==c.base58btc.prefix)throw Error(`Cannot string encode V0 in ${base.name} encoding`);const n=e.get(r);if(null==n){const n=base.encode(t).slice(1);return e.set(r,n),n}return n},y=(t,e,base)=>{const{prefix:r}=base,n=e.get(r);if(null==n){const n=base.encode(t);return e.set(r,n),n}return n},m=112,w=18,_=(t,code,e)=>{const r=n.encodingLength(t),o=r+n.encodingLength(code),c=new Uint8Array(o+e.byteLength);return n.encodeTo(t,c,0),n.encodeTo(code,c,r),c.set(e,o),c},x=Symbol.for("@ipld/js-cid/CID"),E={writable:!1,configurable:!1,enumerable:!0},O={writable:!1,enumerable:!1,configurable:!1},A=(t,e)=>{if(!t.test("0.0.0-dev"))throw new Error(e);console.warn(e)},k="CID.isCID(v) is deprecated and will be removed in the next major release.\nFollowing code pattern:\n\nif (CID.isCID(value)) {\n  doSomethingWithCID(value)\n}\n\nIs replaced with:\n\nconst cid = CID.asCID(value)\nif (cid) {\n  // Make sure to use cid instead of value\n  doSomethingWithCID(cid)\n}\n";e.CID=h},function(t,e,r){"use strict";r.d(e,"a",(function(){return m})),r.d(e,"b",(function(){return w}));var n=r(508),o=r(360),c=r(353),f=r(362),l=r(382);function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function d(){d=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof x?e:x,a=Object.create(i.prototype),c=new N(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function v(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var y="suspendedStart",m="suspendedYield",w="executing",s="completed",_={};function x(){}function E(){}function O(){}var p={};f(p,a,(function(){return this}));var A=Object.getPrototypeOf,k=A&&A(A(T([])));k&&k!==r&&n.call(k,a)&&(p=k);var g=O.prototype=x.prototype=Object.create(p);function S(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function r(o,c,i,a){var f=v(t[o],t,c);if("throw"!==f.type){var u=f.arg,l=u.value;return l&&"object"==h(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,a)}),(function(t){r("throw",t,i,a)})):e.resolve(l).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,a)}))}a(f.arg)}var c;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return c=c?c.then(o,o):o()}})}function j(e,r,n){var o=y;return function(i,a){if(o===w)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===_)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=w;var p=v(e,r,n);if("normal"===p.type){if(o=n.done?s:m,p.arg===_)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var i=v(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,_;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,_):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(h(e)+" is not iterable")}return E.prototype=O,o(g,"constructor",{value:O,configurable:!0}),o(O,"constructor",{value:E,configurable:!0}),E.displayName=f(O,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,O):(t.__proto__=O,f(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},S(I.prototype),f(I.prototype,c,(function(){return this})),e.AsyncIterator=I,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new I(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(g),f(g,u,"Generator"),f(g,a,(function(){return this})),f(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var c=this.tryEntries.length-1;c>=0;--c){var i=this.tryEntries[c],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var f=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(f&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(f){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),_}},e}function v(t,e,r,n,o,a,c){try{var i=t[a](c),u=i.value}catch(t){return void r(t)}i.done?e(u):Promise.resolve(u).then(n,o)}function y(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){v(a,n,o,c,f,"next",t)}function f(t){v(a,n,o,c,f,"throw",t)}c(void 0)}))}}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(o.randomBytes)(f.j);return n.generateKeyPairFromSeed(t)}function w(t,e,r,n){return _.apply(this,arguments)}function _(){return _=y(d().mark((function t(sub,e,r,o){var h,header,v,y,data,m,w=arguments;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return h=w.length>4&&void 0!==w[4]?w[4]:Object(c.fromMiliseconds)(Date.now()),header={alg:f.h,typ:f.i},v=Object(l.d)(o.publicKey),y={iss:v,sub:sub,aud:e,iat:h,exp:h+r},data=Object(l.c)({header:header,payload:y}),m=n.sign(o.secretKey,data),t.abrupt("return",Object(l.e)({header:header,payload:y,signature:m}));case 8:case"end":return t.stop()}}),t)}))),_.apply(this,arguments)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(383);e.alloc=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=globalThis.Buffer&&null!=globalThis.Buffer.alloc?n.asUint8Array(globalThis.Buffer.alloc(t)):new Uint8Array(t)},e.allocUnsafe=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?n.asUint8Array(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}},function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t,e,r){return(e=function(t){var i=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(i)?i:i+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var f=r(404),l=r(409);function h(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}var d=h("utf8","u",(function(t){return"u"+new TextDecoder("utf8").decode(t)}),(function(t){return(new TextEncoder).encode(t.substring(1))})),v=h("ascii","a",(function(t){for(var e="a",i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return e}),(function(t){t=t.substring(1);for(var e=l.allocUnsafe(t.length),i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e})),y=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({utf8:d,"utf-8":d,hex:f.bases.base16,latin1:v,ascii:v,binary:v},f.bases);t.exports=y},function(t,e){},function(t,e,r){"use strict";r.r(e),e.default=function(t,e){return e=e||{},new Promise((function(r,n){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(t){return i[t.toLowerCase()]},has:function(t){return t.toLowerCase()in i}}}};for(var c in s.open(e.method||"get",t,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,r){o.push(e=e.toLowerCase()),u.push([e,r]),i[e]=i[e]?i[e]+","+r:r})),r(a())},s.onerror=n,s.withCredentials="include"==e.credentials,e.headers)s.setRequestHeader(c,e.headers[c]);s.send(e.body||null)}))}},function(t,e,r){"use strict";r.d(e,"a",(function(){return E})),r.d(e,"b",(function(){return I})),r.d(e,"c",(function(){return j})),r.d(e,"d",(function(){return k})),r.d(e,"e",(function(){return O})),r.d(e,"f",(function(){return a})),r.d(e,"g",(function(){return u})),r.d(e,"h",(function(){return g})),r.d(e,"i",(function(){return b})),r.d(e,"j",(function(){return p})),r.d(e,"k",(function(){return A})),r.d(e,"l",(function(){return S}));var n=r(429),o=r(333),c=r.n(o);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d(n.key),n)}}function h(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(t){var i=function(t,e){if("object"!=f(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=f(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==f(i)?i:i+""}function v(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function y(t,e,r){return e=w(e),function(t,e){if(e&&("object"==f(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,m()?Reflect.construct(e,r||[],w(t).constructor):e.apply(t,r))}function m(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(m=function(){return!!t})()}function w(t){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},w(t)}function _(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x(t,e)}function x(t,e){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},x(t,e)}var E=function(t){function e(s){var t;return v(this,e),(t=y(this,e)).opts=s,t.protocol="wc",t.version=2,t}return _(e,t),h(e)}(n.a),O=function(t){function e(s,t){var r;return v(this,e),(r=y(this,e)).core=s,r.logger=t,r.records=new Map,r}return _(e,t),h(e)}(n.a),a=h((function a(s,t){v(this,a),this.logger=s,this.core=t})),u=function(t){function u(s,t){var e;return v(this,u),(e=y(this,u)).relayer=s,e.logger=t,e}return _(u,t),h(u)}(n.a),g=function(t){function g(s){return v(this,g),y(this,g)}return _(g,t),h(g)}(n.a),p=h((function p(s,t,e,r){v(this,p),this.core=s,this.logger=t,this.name=e})),A=function(t){function e(s,t){var r;return v(this,e),(r=y(this,e)).relayer=s,r.logger=t,r}return _(e,t),h(e)}(n.a),k=function(t){function e(s,t){var r;return v(this,e),(r=y(this,e)).core=s,r.logger=t,r}return _(e,t),h(e)}(n.a),S=h((function t(s,e){v(this,t),this.projectId=s,this.logger=e})),I=h((function t(s,e){v(this,t),this.projectId=s,this.logger=e})),b=(c.a,h((function b(s){v(this,b),this.opts=s,this.protocol="wc",this.version=2}))),j=(o.EventEmitter,h((function t(s){v(this,t),this.client=s})))},,,,,,,,,,,,,,,function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e,r){return e=f(e),function(t,e){if(e&&("object"==n(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,c()?Reflect.construct(e,r||[],f(t).constructor):e.apply(t,r))}function c(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(c=function(){return!!t})()}function f(t){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},f(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function v(t,e,r){return e&&d(t.prototype,e),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t){var i=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(i)?i:i+""}function m(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}r.d(e,"a",(function(){return _}));var w=v((function t(){m(this,t)})),_=function(t){function e(t){return m(this,e),o(this,e)}return l(e,t),v(e)}(function(t){function e(){return m(this,e),o(this,e)}return l(e,t),v(e)}(w))},function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function c(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var i=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(i)?i:i+""}r.d(e,"a",(function(){return l}));var l=c((function t(){!function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}))},,,,,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return U}));var n=r(333),o=r(358),c=r(439);function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,f=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){f=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(f)throw o}}return a}}(t,e)||x(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(){h=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function d(t,e,r,n){var i=e&&e.prototype instanceof x?e:x,a=Object.create(i.prototype),c=new N(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function v(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var y="suspendedStart",m="suspendedYield",w="executing",s="completed",_={};function x(){}function E(){}function O(){}var p={};l(p,a,(function(){return this}));var A=Object.getPrototypeOf,k=A&&A(A(T([])));k&&k!==r&&n.call(k,a)&&(p=k);var g=O.prototype=x.prototype=Object.create(p);function S(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function r(o,c,i,a){var l=v(t[o],t,c);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==f(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,i,a)}),(function(t){r("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,a)}))}a(l.arg)}var c;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return c=c?c.then(o,o):o()}})}function j(e,r,n){var o=y;return function(i,a){if(o===w)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===_)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=w;var p=v(e,r,n);if("normal"===p.type){if(o=n.done?s:m,p.arg===_)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var i=v(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,_;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,_):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(f(e)+" is not iterable")}return E.prototype=O,o(g,"constructor",{value:O,configurable:!0}),o(O,"constructor",{value:E,configurable:!0}),E.displayName=l(O,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,O):(t.__proto__=O,l(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},S(I.prototype),l(I.prototype,c,(function(){return this})),e.AsyncIterator=I,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new I(d(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(g),l(g,u,"Generator"),l(g,a,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var c=this.tryEntries.length-1;c>=0;--c){var i=this.tryEntries[c],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var f=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(f&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(f){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),_}},e}function d(t,e,r,n,o,a,c){try{var i=t[a](c),u=i.value}catch(t){return void r(t)}i.done?e(u):Promise.resolve(u).then(n,o)}function v(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){d(a,n,o,c,f,"next",t)}function f(t){d(a,n,o,c,f,"throw",t)}c(void 0)}))}}function y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_(n.key),n)}}function m(t){return function(t){if(Array.isArray(t))return E(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||x(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,e,r){return(e=_(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function _(t){var i=function(t,e){if("object"!=f(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=f(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==f(i)?i:i+""}function x(t,a){if(t){if("string"==typeof t)return E(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?E(t,a):void 0}}function E(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,r=Array(a);e<a;e++)r[e]=t[e];return r}var O="".concat("wc","@2:").concat("ethereum_provider",":"),u=["eth_sendTransaction","personal_sign"],A=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],g=["chainChanged","accountsChanged"],k=["chainChanged","accountsChanged","message","disconnect","connect"],q=Object.defineProperty,S=Object.defineProperties,I=Object.getOwnPropertyDescriptors,j=Object.getOwnPropertySymbols,P=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable,b=function(a,t,s){return t in a?q(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s},p=function(a,t){for(var s in t||(t={}))P.call(t,s)&&b(a,s,t[s]);if(j){var e,r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=x(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,c=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw c}}}}(j(t));try{for(r.s();!(e=r.n()).done;){s=e.value;M.call(t,s)&&b(a,s,t[s])}}catch(t){r.e(t)}finally{r.f()}}return a},R=function(a,t){return S(a,I(t))};function N(a){return Number(a[0].split(":")[1])}function T(a){return"0x".concat(a.toString(16))}function L(a){var t=a.chains,s=a.optionalChains,i=a.methods,e=a.optionalMethods,r=a.events,n=a.optionalEvents,c=a.rpcMap;if(!Object(o.X)(t))throw new Error("Invalid chains");var f={chains:t,methods:i||u,events:r||g,rpcMap:p({},t.length?w({},N(t),c[N(t)]):{})},l=null==r?void 0:r.filter((function(t){return!g.includes(t)})),h=null==i?void 0:i.filter((function(t){return!u.includes(t)}));if(!(s||n||e||null!=l&&l.length||null!=h&&h.length))return{required:t.length?f:void 0};var d=(null==l?void 0:l.length)&&(null==h?void 0:h.length)||!s,v={chains:m(new Set(d?f.chains.concat(s||[]):s)),methods:m(new Set(f.methods.concat(null!=e&&e.length?e:A))),events:m(new Set(f.events.concat(null!=n&&n.length?n:k))),rpcMap:c};return{required:t.length?f:void 0,optional:s.length?v:void 0}}var C=function(){function t(){var e=this;!function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.events=new n.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=O,this.on=function(t,s){return e.events.on(t,s),e},this.once=function(t,s){return e.events.once(t,s),e},this.removeListener=function(t,s){return e.events.removeListener(t,s),e},this.off=function(t,s){return e.events.off(t,s),e},this.parseAccount=function(t){return e.isCompatibleChainId(t)?e.parseAccountId(t).address:t},this.signer={},this.rpc={}}return e=t,f=[{key:"request",value:(I=v(h().mark((function t(e,s){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.signer.request(e,this.formatChainId(this.chainId),s);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return I.apply(this,arguments)})},{key:"sendAsync",value:function(t,s,i){this.signer.sendAsync(t,s,this.formatChainId(this.chainId),i)}},{key:"connected",get:function(){return!!this.signer.client&&this.signer.client.core.relayer.connected}},{key:"connecting",get:function(){return!!this.signer.client&&this.signer.client.core.relayer.connecting}},{key:"enable",value:(S=v(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.session,t.t0){t.next=4;break}return t.next=4,this.connect();case 4:return t.next=6,this.request({method:"eth_requestAccounts"});case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)}))),function(){return S.apply(this,arguments)})},{key:"connect",value:(k=v(h().mark((function t(e){var r,s,i,n,c,f=this;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.signer.client){t.next=2;break}throw new Error("Provider not initialized. Call init() first");case 2:return this.loadConnectOpts(e),r=L(this.rpc),s=r.required,i=r.optional,t.prev=4,t.next=7,new Promise(function(){var t=v(h().mark((function t(r,n){var o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f.rpc.showQrModal&&(null==(o=f.modal)||o.subscribeModal((function(t){!t.open&&!f.signer.session&&(f.signer.abortPairingAttempt(),n(new Error("Connection request reset. Please try again.")))}))),t.next=3,f.signer.connect(R(p({namespaces:p({},s&&w({},f.namespace,s))},i&&{optionalNamespaces:w({},f.namespace,i)}),{pairingTopic:null==e?void 0:e.pairingTopic})).then((function(t){r(t)})).catch((function(t){n(new Error(t.message))}));case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}());case 7:if(n=t.sent){t.next=10;break}return t.abrupt("return");case 10:c=Object(o.v)(n.namespaces,[this.namespace]),this.setChainIds(this.rpc.chains.length?this.rpc.chains:c),this.setAccounts(c),this.events.emit("connect",{chainId:T(this.chainId)}),t.next=17;break;case 14:throw t.prev=14,t.t0=t.catch(4),this.signer.logger.error(t.t0),t.t0;case 17:return t.prev=17,this.modal&&this.modal.closeModal(),t.finish(17);case 20:case"end":return t.stop()}}),t,this,[[4,14,17,20]])}))),function(t){return k.apply(this,arguments)})},{key:"authenticate",value:(A=v(h().mark((function t(e){var s,i,r,n=this;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.signer.client){t.next=2;break}throw new Error("Provider not initialized. Call init() first");case 2:return this.loadConnectOpts({chains:null==e?void 0:e.chains}),t.prev=3,t.next=6,new Promise(function(){var t=v(h().mark((function t(r,o){var c;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.rpc.showQrModal&&(null==(c=n.modal)||c.subscribeModal((function(t){!t.open&&!n.signer.session&&(n.signer.abortPairingAttempt(),o(new Error("Connection request reset. Please try again.")))}))),t.next=3,n.signer.authenticate(R(p({},e),{chains:n.rpc.chains})).then((function(t){r(t)})).catch((function(t){o(new Error(t.message))}));case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}());case 6:return s=t.sent,(i=s.session)&&(r=Object(o.v)(i.namespaces,[this.namespace]),this.setChainIds(this.rpc.chains.length?this.rpc.chains:r),this.setAccounts(r),this.events.emit("connect",{chainId:T(this.chainId)})),t.abrupt("return",s);case 12:throw t.prev=12,t.t0=t.catch(3),this.signer.logger.error(t.t0),t.t0;case 15:return t.prev=15,this.modal&&this.modal.closeModal(),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[3,12,15,18]])}))),function(t){return A.apply(this,arguments)})},{key:"disconnect",value:(E=v(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.session,!t.t0){t.next=4;break}return t.next=4,this.signer.disconnect();case 4:this.reset();case 5:case"end":return t.stop()}}),t,this)}))),function(){return E.apply(this,arguments)})},{key:"isWalletConnect",get:function(){return!0}},{key:"session",get:function(){return this.signer.session}},{key:"registerEventListeners",value:function(){var t=this;this.signer.on("session_event",(function(e){var i=e.params.event;"accountsChanged"===i.name?(t.accounts=t.parseAccounts(i.data),t.events.emit("accountsChanged",t.accounts)):"chainChanged"===i.name?t.setChainId(t.formatChainId(i.data)):t.events.emit(i.name,i.data),t.events.emit("session_event",e)})),this.signer.on("chainChanged",(function(e){var s=parseInt(e);t.chainId=s,t.events.emit("chainChanged",T(t.chainId)),t.persist()})),this.signer.on("session_update",(function(e){t.events.emit("session_update",e)})),this.signer.on("session_delete",(function(e){t.reset(),t.events.emit("session_delete",e),t.events.emit("disconnect",R(p({},Object(o.H)("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))})),this.signer.on("display_uri",(function(e){var s,i;t.rpc.showQrModal&&(null==(s=t.modal)||s.closeModal(),null==(i=t.modal)||i.openModal({uri:e})),t.events.emit("display_uri",e)}))}},{key:"switchEthereumChain",value:function(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}},{key:"isCompatibleChainId",value:function(t){return"string"==typeof t&&t.startsWith("".concat(this.namespace,":"))}},{key:"formatChainId",value:function(t){return"".concat(this.namespace,":").concat(t)}},{key:"parseChainId",value:function(t){return Number(t.split(":")[1])}},{key:"setChainIds",value:function(t){var e=this,s=t.filter((function(i){return e.isCompatibleChainId(i)})).map((function(i){return e.parseChainId(i)}));s.length&&(this.chainId=s[0],this.events.emit("chainChanged",T(this.chainId)),this.persist())}},{key:"setChainId",value:function(t){if(this.isCompatibleChainId(t)){var s=this.parseChainId(t);this.chainId=s,this.switchEthereumChain(s)}}},{key:"parseAccountId",value:function(t){var e=l(t.split(":"),3),s=e[0],i=e[1],r=e[2];return{chainId:"".concat(s,":").concat(i),address:r}}},{key:"setAccounts",value:function(t){var e=this;this.accounts=t.filter((function(s){return e.parseChainId(e.parseAccountId(s).chainId)===e.chainId})).map((function(s){return e.parseAccountId(s).address})),this.events.emit("accountsChanged",this.accounts)}},{key:"getRpcConfig",value:function(t){var s,i,e=this,r=null!=(s=null==t?void 0:t.chains)?s:[],n=null!=(i=null==t?void 0:t.optionalChains)?i:[],o=r.concat(n);if(!o.length)throw new Error("No chains specified in either `chains` or `optionalChains`");var c=r.length?(null==t?void 0:t.methods)||u:[],f=r.length?(null==t?void 0:t.events)||g:[],l=(null==t?void 0:t.optionalMethods)||[],h=(null==t?void 0:t.optionalEvents)||[],d=(null==t?void 0:t.rpcMap)||this.buildRpcMap(o,t.projectId),v=(null==t?void 0:t.qrModalOptions)||void 0;return{chains:null==r?void 0:r.map((function(t){return e.formatChainId(t)})),optionalChains:n.map((function(t){return e.formatChainId(t)})),methods:c,events:f,optionalMethods:l,optionalEvents:h,rpcMap:d,showQrModal:!(null==t||!t.showQrModal),qrModalOptions:v,projectId:t.projectId,metadata:t.metadata}}},{key:"buildRpcMap",value:function(t,s){var e=this,i={};return t.forEach((function(t){i[t]=e.getRpcUrl(t,s)})),i}},{key:"initialize",value:(x=v(h().mark((function t(e){var s,n,i;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?N(this.rpc.chains):N(this.rpc.optionalChains),t.next=4,c.a.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions});case 4:return this.signer=t.sent,this.registerEventListeners(),t.next=8,this.loadPersistedSession();case 8:if(!this.rpc.showQrModal){t.next=28;break}return t.prev=9,t.next=12,r.e(27).then(r.bind(null,523));case 12:n=t.sent,i=n.WalletConnectModal,s=i,t.next=20;break;case 17:throw t.prev=17,t.t0=t.catch(9),new Error("To use QR modal, please install @walletconnect/modal package");case 20:if(!s){t.next=28;break}t.prev=21,this.modal=new s(p({projectId:this.rpc.projectId},this.rpc.qrModalOptions)),t.next=28;break;case 25:throw t.prev=25,t.t1=t.catch(21),this.signer.logger.error(t.t1),new Error("Could not generate WalletConnectModal Instance");case 28:case"end":return t.stop()}}),t,this,[[9,17],[21,25]])}))),function(t){return x.apply(this,arguments)})},{key:"loadConnectOpts",value:function(t){var e=this;if(t){var s=t.chains,i=t.optionalChains,r=t.rpcMap;s&&Object(o.X)(s)&&(this.rpc.chains=s.map((function(t){return e.formatChainId(t)})),s.forEach((function(t){e.rpc.rpcMap[t]=(null==r?void 0:r[t])||e.getRpcUrl(t)}))),i&&Object(o.X)(i)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=null==i?void 0:i.map((function(t){return e.formatChainId(t)})),i.forEach((function(t){e.rpc.rpcMap[t]=(null==r?void 0:r[t])||e.getRpcUrl(t)})))}}},{key:"getRpcUrl",value:function(t,s){var i;return(null==(i=this.rpc.rpcMap)?void 0:i[t])||"".concat("https://rpc.walletconnect.com/v1/","?chainId=eip155:").concat(t,"&projectId=").concat(s||this.rpc.projectId)}},{key:"loadPersistedSession",value:(_=v(h().mark((function t(){var e,s,r=this;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.session){t.next=15;break}return t.prev=1,t.next=4,this.signer.client.core.storage.getItem("".concat(this.STORAGE_KEY,"/chainId"));case 4:e=t.sent,s=this.session.namespaces["".concat(this.namespace,":").concat(e)]?this.session.namespaces["".concat(this.namespace,":").concat(e)]:this.session.namespaces[this.namespace],this.setChainIds(e?[this.formatChainId(e)]:null==s?void 0:s.accounts),this.setAccounts(null==s?void 0:s.accounts),t.next=15;break;case 9:return t.prev=9,t.t0=t.catch(1),this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(t.t0),t.next=15,this.disconnect().catch((function(s){return r.signer.logger.warn(s)}));case 15:case"end":return t.stop()}}),t,this,[[1,9]])}))),function(){return _.apply(this,arguments)})},{key:"reset",value:function(){this.chainId=1,this.accounts=[]}},{key:"persist",value:function(){this.session&&this.signer.client.core.storage.setItem("".concat(this.STORAGE_KEY,"/chainId"),this.chainId)}},{key:"parseAccounts",value:function(t){var e=this;return"string"==typeof t||t instanceof String?[this.parseAccount(t)]:t.map((function(s){return e.parseAccount(s)}))}}],d=[{key:"init",value:(m=v(h().mark((function e(r){var s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new t,e.next=3,s.initialize(r);case 3:return e.abrupt("return",s);case 4:case"end":return e.stop()}}),e)}))),function(t){return m.apply(this,arguments)})}],f&&y(e.prototype,f),d&&y(e,d),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,f,d,m,_,x,E,A,k,S,I}(),U=C},function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return Lt}));var n=r(500),o=r(358),c=r(375),f=r(441),l=r(399),h=r(333),d=r.n(h),v=r(343);function y(){y=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof _?e:_,a=Object.create(i.prototype),c=new N(n||[]);return o(a,"_invoke",{value:I(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",v="suspendedYield",m="executing",s="completed",w={};function _(){}function x(){}function E(){}var p={};f(p,a,(function(){return this}));var O=Object.getPrototypeOf,A=O&&O(O(T([])));A&&A!==r&&n.call(A,a)&&(p=A);var g=E.prototype=_.prototype=Object.create(p);function k(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,c,i,a){var f=h(t[o],t,c);if("throw"!==f.type){var u=f.arg,l=u.value;return l&&"object"==P(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,a)}),(function(t){r("throw",t,i,a)})):e.resolve(l).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,a)}))}a(f.arg)}var c;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return c=c?c.then(o,o):o()}})}function I(e,r,n){var o=d;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=j(c,n);if(u){if(u===w)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var p=h(e,r,n);if("normal"===p.type){if(o=n.done?s:v,p.arg===w)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function j(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,j(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,w;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,w):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,w)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(P(e)+" is not iterable")}return x.prototype=E,o(g,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:x,configurable:!0}),x.displayName=f(E,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,f(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},k(S.prototype),f(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},k(g),f(g,u,"Generator"),f(g,a,(function(){return this})),f(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var c=this.tryEntries.length-1;c>=0;--c){var i=this.tryEntries[c],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var f=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(f&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(f){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,w):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),w},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),w}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),w}},e}function m(t,e,r,n,o,a,c){try{var i=t[a](c),u=i.value}catch(t){return void r(t)}i.done?e(u):Promise.resolve(u).then(n,o)}function w(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){m(a,n,o,c,f,"next",t)}function f(t){m(a,n,o,c,f,"throw",t)}c(void 0)}))}}function _(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function x(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,O(n.key),n)}}function E(t,e,r){return e&&x(t.prototype,e),r&&x(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function O(t){var i=function(t,e){if("object"!=P(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=P(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==P(i)?i:i+""}function A(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,u,a=[],c=!0,f=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);c=!0);}catch(t){f=!0,o=t}finally{try{if(!c&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(f)throw o}}return a}}(t,e)||I(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||I(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=I(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,c=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw c}}}}function I(t,a){if(t){if("string"==typeof t)return j(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?j(t,a):void 0}}function j(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,r=Array(a);e<a;e++)r[e]=t[e];return r}function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}var M,s,R="error",N="".concat("wc","@2:").concat("universal_provider",":"),T="generic",L="default_chain_changed",C=("undefined"==typeof globalThis?"undefined":P(globalThis))<"u"?globalThis:("undefined"==typeof window?"undefined":P(window))<"u"?window:(void 0===t?"undefined":P(t))<"u"?t:("undefined"==typeof self?"undefined":P(self))<"u"?self:{},U={exports:{}};M=U,s=U.exports,function(){var i,t="Expected a function",e="__lodash_hash_undefined__",r="__lodash_placeholder__",n=16,o=32,c=64,f=128,l=256,h=1/0,d=9007199254740991,v=NaN,y=4294967295,m=y-1,w=y>>>1,_=[["ary",f],["bind",1],["bindKey",2],["curry",8],["curryRight",n],["flip",512],["partial",o],["partialRight",c],["rearg",l]],x="[object Arguments]",E="[object Array]",O="[object Boolean]",A="[object Date]",k="[object Error]",S="[object Function]",I="[object GeneratorFunction]",j="[object Map]",R="[object Number]",N="[object Object]",T="[object Promise]",L="[object RegExp]",U="[object Set]",B="[object String]",D="[object Symbol]",z="[object WeakMap]",F="[object ArrayBuffer]",H="[object DataView]",K="[object Float32Array]",G="[object Float64Array]",V="[object Int8Array]",Y="[object Int16Array]",J="[object Int32Array]",W="[object Uint8Array]",Q="[object Uint8ClampedArray]",X="[object Uint16Array]",Z="[object Uint32Array]",$=/\b__p \+= '';/g,tt=/\b(__p \+=) '' \+/g,et=/(__e\(.*?\)|\b__t\)) \+\n'';/g,nt=/&(?:amp|lt|gt|quot|#39);/g,it=/[&<>"']/g,ot=RegExp(nt.source),at=RegExp(it.source),st=/<%-([\s\S]+?)%>/g,ut=/<%([\s\S]+?)%>/g,ct=/<%=([\s\S]+?)%>/g,ft=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,lt=/^\w*$/,ht=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,pt=/[\\^$.*+?()[\]{}|]/g,vt=RegExp(pt.source),yt=/^\s+/,gt=/\s/,mt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,bt=/\{\n\/\* \[wrapped with (.+)\] \*/,wt=/,? & /,_t=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,xt=/[()=,{}\[\]\/\s]/,Et=/\\(\\)?/g,Ot=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,At=/\w*$/,kt=/^[-+]0x[0-9a-f]+$/i,St=/^0b[01]+$/i,It=/^\[object .+?Constructor\]$/,jt=/^0o[0-7]+$/i,Pt=/^(?:0|[1-9]\d*)$/,Mt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Rt=/($^)/,Nt=/['\n\r\u2028\u2029\\]/g,Tt="\\ud800-\\udfff",Lt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ct="\\u2700-\\u27bf",Ut="a-z\\xdf-\\xf6\\xf8-\\xff",Bt="A-Z\\xc0-\\xd6\\xd8-\\xde",Dt="\\ufe0e\\ufe0f",qt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",zt="[']",Ft="["+Tt+"]",Ht="["+qt+"]",Kt="["+Lt+"]",Gt="\\d+",Vt="["+Ct+"]",Yt="["+Ut+"]",Jt="[^"+Tt+qt+Gt+Ct+Ut+Bt+"]",Wt="\\ud83c[\\udffb-\\udfff]",Qt="[^"+Tt+"]",Xt="(?:\\ud83c[\\udde6-\\uddff]){2}",br="[\\ud800-\\udbff][\\udc00-\\udfff]",Zt="["+Bt+"]",$t="\\u200d",te="(?:"+Yt+"|"+Jt+")",ee="(?:"+Zt+"|"+Jt+")",re="(?:['](?:d|ll|m|re|s|t|ve))?",ne="(?:['](?:D|LL|M|RE|S|T|VE))?",ie="(?:"+Kt+"|"+Wt+")?",oe="["+Dt+"]?",ae=oe+ie+"(?:"+$t+"(?:"+[Qt,Xt,br].join("|")+")"+oe+ie+")*",se="(?:"+[Vt,Xt,br].join("|")+")"+ae,ue="(?:"+[Qt+Kt+"?",Kt,Xt,br,Ft].join("|")+")",ce=RegExp(zt,"g"),fe=RegExp(Kt,"g"),le=RegExp(Wt+"(?="+Wt+")|"+ue+ae,"g"),he=RegExp([Zt+"?"+Yt+"+"+re+"(?="+[Ht,Zt,"$"].join("|")+")",ee+"+"+ne+"(?="+[Ht,Zt+te,"$"].join("|")+")",Zt+"?"+te+"+"+re,Zt+"+"+ne,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Gt,se].join("|"),"g"),pe=RegExp("["+$t+Tt+Lt+Dt+"]"),de=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ve=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ye=-1,ge={};ge[K]=ge[G]=ge[V]=ge[Y]=ge[J]=ge[W]=ge[Q]=ge[X]=ge[Z]=!0,ge[x]=ge[E]=ge[F]=ge[O]=ge[H]=ge[A]=ge[k]=ge[S]=ge[j]=ge[R]=ge[N]=ge[L]=ge[U]=ge[B]=ge[z]=!1;var me={};me[x]=me[E]=me[F]=me[H]=me[O]=me[A]=me[K]=me[G]=me[V]=me[Y]=me[J]=me[j]=me[R]=me[N]=me[L]=me[U]=me[B]=me[D]=me[W]=me[Q]=me[X]=me[Z]=!0,me[k]=me[S]=me[z]=!1;var be={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},we=parseFloat,_e=parseInt,xe="object"==P(C)&&C&&C.Object===Object&&C,Ee="object"==("undefined"==typeof self?"undefined":P(self))&&self&&self.Object===Object&&self,Oe=xe||Ee||Function("return this")(),Ae=s&&!s.nodeType&&s,ke=Ae&&M&&!M.nodeType&&M,Se=ke&&ke.exports===Ae,Ie=Se&&xe.process,je=function(){try{return ke&&ke.require&&ke.require("util").types||Ie&&Ie.binding&&Ie.binding("util")}catch(t){}}(),Pe=je&&je.isArrayBuffer,Me=je&&je.isDate,Re=je&&je.isMap,Ne=je&&je.isRegExp,Te=je&&je.isSet,Le=je&&je.isTypedArray;function Ce(t,g,e){switch(e.length){case 0:return t.call(g);case 1:return t.call(g,e[0]);case 2:return t.call(g,e[0],e[1]);case 3:return t.call(g,e[0],e[1],e[2])}return t.apply(g,e)}function Ue(t,g,e,r){for(var n=-1,o=null==t?0:t.length;++n<o;){var c=t[n];g(r,c,e(c),t)}return r}function Be(t,g){for(var e=-1,r=null==t?0:t.length;++e<r&&!1!==g(t[e],e,t););return t}function De(t,g){for(var e=null==t?0:t.length;e--&&!1!==g(t[e],e,t););return t}function qe(t,g){for(var e=-1,r=null==t?0:t.length;++e<r;)if(!g(t[e],e,t))return!1;return!0}function ze(t,g){for(var e=-1,r=null==t?0:t.length,n=0,o=[];++e<r;){var c=t[e];g(c,e,t)&&(o[n++]=c)}return o}function Fe(t,g){return!(null==t||!t.length)&&Ze(t,g,0)>-1}function He(t,g,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(g,t[r]))return!0;return!1}function Ke(t,g){for(var e=-1,r=null==t?0:t.length,n=Array(r);++e<r;)n[e]=g(t[e],e,t);return n}function Ge(t,g){for(var e=-1,r=g.length,n=t.length;++e<r;)t[n+e]=g[e];return t}function Ve(t,g,e,r){var n=-1,o=null==t?0:t.length;for(r&&o&&(e=t[++n]);++n<o;)e=g(e,t[n],n,t);return e}function Ye(t,g,e,r){var n=null==t?0:t.length;for(r&&n&&(e=t[--n]);n--;)e=g(e,t[n],n,t);return e}function Je(t,g){for(var e=-1,r=null==t?0:t.length;++e<r;)if(g(t[e],e,t))return!0;return!1}var We=nr("length");function Qe(t,g,e){var r;return e(t,(function(t,e,n){if(g(t,e,n))return r=e,!1})),r}function Xe(t,g,e,r){for(var n=t.length,o=e+(r?1:-1);r?o--:++o<n;)if(g(t[o],o,t))return o;return-1}function Ze(t,g,e){return g==g?function(t,g,e){for(var r=e-1,n=t.length;++r<n;)if(t[r]===g)return r;return-1}(t,g,e):Xe(t,er,e)}function $e(t,g,e,r){for(var n=e-1,o=t.length;++n<o;)if(r(t[n],g))return n;return-1}function er(t){return t!=t}function rr(t,g){var e=null==t?0:t.length;return e?ar(t,g)/e:v}function nr(t){return function(g){return null==g?i:g[t]}}function ir(t){return function(g){return null==t?i:t[g]}}function or(t,g,e,r,n){return n(t,(function(t,n,o){e=r?(r=!1,t):g(e,t,n,o)})),e}function ar(t,g){for(var e,r=-1,n=t.length;++r<n;){var o=g(t[r]);o!==i&&(e=e===i?o:e+o)}return e}function sr(t,g){for(var e=-1,r=Array(t);++e<t;)r[e]=g(e);return r}function ur(t){return t&&t.slice(0,kr(t)+1).replace(yt,"")}function cr(t){return function(g){return t(g)}}function fr(t,g){return Ke(g,(function(e){return t[e]}))}function lr(t,g){return t.has(g)}function pr(t,g){for(var e=-1,r=t.length;++e<r&&Ze(g,t[e],0)>-1;);return e}function dr(t,g){for(var e=t.length;e--&&Ze(g,t[e],0)>-1;);return e}var vr=ir({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"}),yr=ir({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function gr(t){return"\\"+be[t]}function mr(t){return pe.test(t)}function wr(t){var g=-1,e=Array(t.size);return t.forEach((function(t,r){e[++g]=[r,t]})),e}function _r(t,g){return function(e){return t(g(e))}}function xr(t,g){for(var e=-1,n=t.length,o=0,c=[];++e<n;){var f=t[e];(f===g||f===r)&&(t[e]=r,c[o++]=e)}return c}function Er(t){var g=-1,e=Array(t.size);return t.forEach((function(t){e[++g]=t})),e}function Or(t){return mr(t)?function(t){for(var g=le.lastIndex=0;le.test(t);)++g;return g}(t):We(t)}function Ar(t){return mr(t)?function(t){return t.match(le)||[]}(t):function(t){return t.split("")}(t)}function kr(t){for(var g=t.length;g--&&gt.test(t.charAt(g)););return g}var Sr=ir({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ir=function M(g){var C,gt=(g=null==g?Oe:Ir.defaults(Oe.Object(),g,Ir.pick(Oe,ve))).Array,Tt=g.Date,Lt=g.Error,Ct=g.Function,Ut=g.Math,Bt=g.Object,Dt=g.RegExp,qt=g.String,zt=g.TypeError,Ft=gt.prototype,Ht=Ct.prototype,Kt=Bt.prototype,Gt=g["__core-js_shared__"],Vt=Ht.toString,Yt=Kt.hasOwnProperty,Jt=0,Wt=(C=/[^.]+$/.exec(Gt&&Gt.keys&&Gt.keys.IE_PROTO||""))?"Symbol(src)_1."+C:"",Qt=Kt.toString,Xt=Vt.call(Bt),Zt=Oe._,$t=Dt("^"+Vt.call(Yt).replace(pt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=Se?g.Buffer:i,ee=g.Symbol,re=g.Uint8Array,ne=te?te.allocUnsafe:i,ie=_r(Bt.getPrototypeOf,Bt),oe=Bt.create,ae=Kt.propertyIsEnumerable,se=Ft.splice,ue=ee?ee.isConcatSpreadable:i,le=ee?ee.iterator:i,pe=ee?ee.toStringTag:i,be=function(){try{var t=Eo(Bt,"defineProperty");return t({},"",{}),t}catch(t){}}(),xe=g.clearTimeout!==Oe.clearTimeout&&g.clearTimeout,Ee=Tt&&Tt.now!==Oe.Date.now&&Tt.now,Ae=g.setTimeout!==Oe.setTimeout&&g.setTimeout,ke=Ut.ceil,Ie=Ut.floor,je=Bt.getOwnPropertySymbols,We=te?te.isBuffer:i,ir=g.isFinite,jr=Ft.join,Pr=_r(Bt.keys,Bt),Mr=Ut.max,Rr=Ut.min,Nr=Tt.now,Tr=g.parseInt,Lr=Ut.random,Cr=Ft.reverse,Ur=Eo(g,"DataView"),Br=Eo(g,"Map"),Dr=Eo(g,"Promise"),qr=Eo(g,"Set"),zr=Eo(g,"WeakMap"),Fr=Eo(Bt,"create"),Hr=zr&&new zr,Kr={},Gr=Wo(Ur),Vr=Wo(Br),Yr=Wo(Dr),Jr=Wo(qr),Wr=Wo(zr),Qr=ee?ee.prototype:i,Xr=Qr?Qr.valueOf:i,Zr=Qr?Qr.toString:i;function a(t){if(cs(t)&&!b(t)&&!(t instanceof rn)){if(t instanceof en)return t;if(Yt.call(t,"__wrapped__"))return Qo(t)}return new en(t)}var $r=function(){function t(){}return function(e){if(!us(e))return{};if(oe)return oe(e);t.prototype=e;var r=new t;return t.prototype=i,r}}();function tn(){}function en(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function rn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=y,this.__views__=[]}function nn(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function on(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function an(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function sn(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new an;++e<r;)this.add(t[e])}function un(t){var e=this.__data__=new on(t);this.size=e.size}function cn(t,e){var r=b(t),n=!r&&Za(t),u=!r&&!n&&rs(t),o=!r&&!n&&!u&&gs(t),c=r||n||u||o,f=c?sr(t.length,qt):[],l=f.length;for(var h in t)(e||Yt.call(t,h))&&(!c||!("length"==h||u&&("offset"==h||"parent"==h)||o&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||Po(h,l)))&&f.push(h);return f}function fn(t){var e=t.length;return e?t[ai(0,e-1)]:i}function ln(t,e){return Vo(Fi(t),wn(e,0,t.length))}function hn(t){return Vo(Fi(t))}function pn(t,e,r){(r!==i&&!Wa(t[e],r)||r===i&&!(e in t))&&mn(t,e,r)}function dn(t,e,r){var n=t[e];(!Yt.call(t,e)||!Wa(n,r)||r===i&&!(e in t))&&mn(t,e,r)}function vn(t,e){for(var r=t.length;r--;)if(Wa(t[r][0],e))return r;return-1}function yn(t,e,r,n){return An(t,(function(u,t,o){e(n,u,r(u),o)})),n}function gn(t,e){return t&&Hi(e,Us(e),t)}function mn(t,e,r){"__proto__"==e&&be?be(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function bn(t,e){for(var r=-1,n=e.length,u=gt(n),o=null==t;++r<n;)u[r]=o?i:Rs(t,e[r]);return u}function wn(t,e,r){return t==t&&(r!==i&&(t=t<=r?t:r),e!==i&&(t=t>=e?t:e)),t}function _n(t,e,r,n,u,o){var c,f=1&e,l=2&e,h=4&e;if(r&&(c=u?r(t,n,u,o):r(t)),c!==i)return c;if(!us(t))return t;var d=b(t);if(d){if(c=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&Yt.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(t),!f)return Fi(t,c)}else{var v=ko(t),y=v==S||v==I;if(rs(t))return Ci(t,f);if(v==N||v==x||y&&!u){if(c=l||y?{}:Io(t),!f)return l?function(t,e){return Hi(t,Ao(t),e)}(t,function(t,e){return t&&Hi(e,Bs(e),t)}(c,t)):function(t,e){return Hi(t,Oo(t),e)}(t,gn(c,t))}else{if(!me[v])return u?t:{};c=function(t,e,r){var n=t.constructor;switch(e){case F:return Ui(t);case O:case A:return new n(+t);case H:return function(t,e){var r=e?Ui(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case K:case G:case V:case Y:case J:case W:case Q:case X:case Z:return Bi(t,r);case j:return new n;case R:case B:return new n(t);case L:return function(t){var e=new t.constructor(t.source,At.exec(t));return e.lastIndex=t.lastIndex,e}(t);case U:return new n;case D:return function(t){return Xr?Bt(Xr.call(t)):{}}(t)}}(t,v,f)}}o||(o=new un);var m=o.get(t);if(m)return m;o.set(t,c),ds(t)?t.forEach((function(n){c.add(_n(n,e,r,n,t,o))})):fs(t)&&t.forEach((function(n,f){c.set(f,_n(n,e,r,f,t,o))}));var w=d?i:(h?l?yo:vo:l?Bs:Us)(t);return Be(w||t,(function(n,f){w&&(n=t[f=n]),dn(c,f,_n(n,e,r,f,t,o))})),c}function xn(t,e,r){var n=r.length;if(null==t)return!n;for(t=Bt(t);n--;){var u=r[n],o=e[u],c=t[u];if(c===i&&!(u in t)||!o(c))return!1}return!0}function En(e,r,n){if("function"!=typeof e)throw new zt(t);return Fo((function(){e.apply(i,n)}),r)}function On(t,e,r,n){var u=-1,o=Fe,c=!0,f=t.length,l=[],h=e.length;if(!f)return l;r&&(e=Ke(e,cr(r))),n?(o=He,c=!1):e.length>=200&&(o=lr,c=!1,e=new sn(e));t:for(;++u<f;){var d=t[u],v=null==r?d:r(d);if(d=n||0!==d?d:0,c&&v==v){for(var y=h;y--;)if(e[y]===v)continue t;l.push(d)}else o(e,v,n)||l.push(d)}return l}a.templateSettings={escape:st,evaluate:ut,interpolate:ct,variable:"",imports:{_:a}},a.prototype=tn.prototype,a.prototype.constructor=a,en.prototype=$r(tn.prototype),en.prototype.constructor=en,rn.prototype=$r(tn.prototype),rn.prototype.constructor=rn,nn.prototype.clear=function(){this.__data__=Fr?Fr(null):{},this.size=0},nn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},nn.prototype.get=function(t){var r=this.__data__;if(Fr){var n=r[t];return n===e?i:n}return Yt.call(r,t)?r[t]:i},nn.prototype.has=function(t){var e=this.__data__;return Fr?e[t]!==i:Yt.call(e,t)},nn.prototype.set=function(t,r){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Fr&&r===i?e:r,this},on.prototype.clear=function(){this.__data__=[],this.size=0},on.prototype.delete=function(t){var e=this.__data__,r=vn(e,t);return!(r<0||(r==e.length-1?e.pop():se.call(e,r,1),--this.size,0))},on.prototype.get=function(t){var e=this.__data__,r=vn(e,t);return r<0?i:e[r][1]},on.prototype.has=function(t){return vn(this.__data__,t)>-1},on.prototype.set=function(t,e){var r=this.__data__,n=vn(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this},an.prototype.clear=function(){this.size=0,this.__data__={hash:new nn,map:new(Br||on),string:new nn}},an.prototype.delete=function(t){var e=_o(this,t).delete(t);return this.size-=e?1:0,e},an.prototype.get=function(t){return _o(this,t).get(t)},an.prototype.has=function(t){return _o(this,t).has(t)},an.prototype.set=function(t,e){var r=_o(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this},sn.prototype.add=sn.prototype.push=function(t){return this.__data__.set(t,e),this},sn.prototype.has=function(t){return this.__data__.has(t)},un.prototype.clear=function(){this.__data__=new on,this.size=0},un.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},un.prototype.get=function(t){return this.__data__.get(t)},un.prototype.has=function(t){return this.__data__.has(t)},un.prototype.set=function(t,e){var r=this.__data__;if(r instanceof on){var n=r.__data__;if(!Br||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new an(n)}return r.set(t,e),this.size=r.size,this};var An=Vi(Nn),kn=Vi(Tn,!0);function Sn(t,e){var r=!0;return An(t,(function(t,u,n){return r=!!e(t,u,n)})),r}function In(t,e,r){for(var n=-1,u=t.length;++n<u;){var o=t[n],c=e(o);if(null!=c&&(f===i?c==c&&!ys(c):r(c,f)))var f=c,l=o}return l}function jn(t,e){var r=[];return An(t,(function(t,u,n){e(t,u,n)&&r.push(t)})),r}function Pn(t,e,r,n,u){var o=-1,c=t.length;for(r||(r=jo),u||(u=[]);++o<c;){var f=t[o];e>0&&r(f)?e>1?Pn(f,e-1,r,n,u):Ge(u,f):n||(u[u.length]=f)}return u}var Mn=Yi(),Rn=Yi(!0);function Nn(t,e){return t&&Mn(t,e,Us)}function Tn(t,e){return t&&Rn(t,e,Us)}function Ln(t,e){return ze(e,(function(e){return os(t[e])}))}function Cn(t,e){for(var r=0,n=(e=Ri(e,t)).length;null!=t&&r<n;)t=t[Jo(e[r++])];return r&&r==n?t:i}function Un(t,e,r){var n=e(t);return b(t)?n:Ge(n,r(t))}function rt(t){return null==t?t===i?"[object Undefined]":"[object Null]":pe&&pe in Bt(t)?function(t){var e=Yt.call(t,pe),r=t[pe];try{t[pe]=i;var n=!0}catch(t){}var u=Qt.call(t);return n&&(e?t[pe]=r:delete t[pe]),u}(t):function(t){return Qt.call(t)}(t)}function Bn(t,e){return t>e}function Dn(t,e){return null!=t&&Yt.call(t,e)}function qn(t,e){return null!=t&&e in Bt(t)}function zn(t,e,r){for(var n=r?He:Fe,u=t[0].length,o=t.length,c=o,f=gt(o),l=1/0,h=[];c--;){var d=t[c];c&&e&&(d=Ke(d,cr(e))),l=Rr(d.length,l),f[c]=!r&&(e||u>=120&&d.length>=120)?new sn(c&&d):i}d=t[0];var v=-1,y=f[0];t:for(;++v<u&&h.length<l;){var m=d[v],w=e?e(m):m;if(m=r||0!==m?m:0,!(y?lr(y,w):n(h,w,r))){for(c=o;--c;){var _=f[c];if(!(_?lr(_,w):n(t[c],w,r)))continue t}y&&y.push(w),h.push(m)}}return h}function Fn(t,e,r){var n=null==(t=Do(t,e=Ri(e,t)))?t:t[Jo(sa(e))];return null==n?i:Ce(n,t,r)}function Hn(t){return cs(t)&&rt(t)==x}function Kn(t,e,r,n,u){return t===e||(null==t||null==e||!cs(t)&&!cs(e)?t!=t&&e!=e:function(t,e,r,n,u,o){var c=b(t),f=b(e),l=c?E:ko(t),h=f?E:ko(e),d=(l=l==x?N:l)==N,v=(h=h==x?N:h)==N,y=l==h;if(y&&rs(t)){if(!rs(e))return!1;c=!0,d=!1}if(y&&!d)return o||(o=new un),c||gs(t)?ho(t,e,r,n,u,o):function(t,e,r,n,u,o,c){switch(r){case H:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case F:return!(t.byteLength!=e.byteLength||!o(new re(t),new re(e)));case O:case A:case R:return Wa(+t,+e);case k:return t.name==e.name&&t.message==e.message;case L:case B:return t==e+"";case j:var f=wr;case U:var l=1&n;if(f||(f=Er),t.size!=e.size&&!l)return!1;var h=c.get(t);if(h)return h==e;n|=2,c.set(t,e);var d=ho(f(t),f(e),n,u,o,c);return c.delete(t),d;case D:if(Xr)return Xr.call(t)==Xr.call(e)}return!1}(t,e,l,r,n,u,o);if(!(1&r)){var m=d&&Yt.call(t,"__wrapped__"),w=v&&Yt.call(e,"__wrapped__");if(m||w){var _=m?t.value():t,S=w?e.value():e;return o||(o=new un),u(_,S,r,n,o)}}return!!y&&(o||(o=new un),function(t,e,r,n,u,o){var c=1&r,f=vo(t),l=f.length,h=vo(e),d=h.length;if(l!=d&&!c)return!1;for(var v=l;v--;){var y=f[v];if(!(c?y in e:Yt.call(e,y)))return!1}var m=o.get(t),w=o.get(e);if(m&&w)return m==e&&w==t;var _=!0;o.set(t,e),o.set(e,t);for(var x=c;++v<l;){var E=t[y=f[v]],O=e[y];if(n)var dt=c?n(O,E,y,e,t,o):n(E,O,y,t,e,o);if(!(dt===i?E===O||u(E,O,r,n,o):dt)){_=!1;break}x||(x="constructor"==y)}if(_&&!x){var A=t.constructor,k=e.constructor;A!=k&&"constructor"in t&&"constructor"in e&&!("function"==typeof A&&A instanceof A&&"function"==typeof k&&k instanceof k)&&(_=!1)}return o.delete(t),o.delete(e),_}(t,e,r,n,u,o))}(t,e,r,n,Kn,u))}function Gn(t,e,r,n){var u=r.length,o=u,c=!n;if(null==t)return!o;for(t=Bt(t);u--;){var f=r[u];if(c&&f[2]?f[1]!==t[f[0]]:!(f[0]in t))return!1}for(;++u<o;){var l=(f=r[u])[0],h=t[l],d=f[1];if(c&&f[2]){if(h===i&&!(l in t))return!1}else{var v=new un;if(n)var y=n(h,d,l,t,e,v);if(!(y===i?Kn(d,h,3,n,v):y))return!1}}return!0}function Vn(t){return!(!us(t)||function(t){return!!Wt&&Wt in t}(t))&&(os(t)?$t:It).test(Wo(t))}function Yn(t){return"function"==typeof t?t:null==t?uu:"object"==P(t)?b(t)?$n(t[0],t[1]):Zn(t):gu(t)}function Jn(t){if(!Lo(t))return Pr(t);var e=[];for(var r in Bt(t))Yt.call(t,r)&&"constructor"!=r&&e.push(r);return e}function Wn(t){if(!us(t))return function(t){var e=[];if(null!=t)for(var r in Bt(t))e.push(r);return e}(t);var e=Lo(t),r=[];for(var n in t)"constructor"==n&&(e||!Yt.call(t,n))||r.push(n);return r}function Qn(t,e){return t<e}function Xn(t,e){var r=-1,n=ts(t)?gt(t.length):[];return An(t,(function(u,t,o){n[++r]=e(u,t,o)})),n}function Zn(t){var e=xo(t);return 1==e.length&&e[0][2]?Uo(e[0][0],e[0][1]):function(r){return r===t||Gn(r,t,e)}}function $n(t,e){return Ro(t)&&Co(e)?Uo(Jo(t),e):function(r){var n=Rs(r,t);return n===i&&n===e?Ns(r,t):Kn(e,n,3)}}function ti(t,e,r,n,u){t!==e&&Mn(e,(function(o,c){if(u||(u=new un),us(o))!function(t,e,r,n,u,o,c){var f=qo(t,r),l=qo(e,r),h=c.get(l);if(h)pn(t,r,h);else{var d=o?o(f,l,r+"",t,e,c):i,v=d===i;if(v){var y=b(l),m=!y&&rs(l),w=!y&&!m&&gs(l);d=l,y||m||w?b(f)?d=f:es(f)?d=Fi(f):m?(v=!1,d=Ci(l,!0)):w?(v=!1,d=Bi(l,!0)):d=[]:hs(l)||Za(l)?(d=f,Za(f)?d=As(f):(!us(f)||os(f))&&(d=Io(l))):v=!1}v&&(c.set(l,d),u(d,l,n,o,c),c.delete(l)),pn(t,r,d)}}(t,e,c,r,ti,n,u);else{var f=n?n(qo(t,c),o,c+"",t,e,u):i;f===i&&(f=o),pn(t,c,f)}}),Bs)}function ei(t,e){var r=t.length;if(r)return Po(e+=e<0?r:0,r)?t[e]:i}function ri(t,e,r){e=e.length?Ke(e,(function(t){return b(t)?function(e){return Cn(e,1===t.length?t[0]:t)}:t})):[uu];var n=-1;return e=Ke(e,cr(wo())),function(t,g){var e=t.length;for(t.sort(g);e--;)t[e]=t[e].value;return t}(Xn(t,(function(t,r,o){return{criteria:Ke(e,(function(e){return e(t)})),index:++n,value:t}})),(function(t,e){return function(t,e,r){for(var n=-1,u=t.criteria,o=e.criteria,c=u.length,f=r.length;++n<c;){var l=Di(u[n],o[n]);if(l)return n>=f?l:l*("desc"==r[n]?-1:1)}return t.index-e.index}(t,e,r)}))}function ni(t,e,r){for(var n=-1,u=e.length,o={};++n<u;){var c=e[n],f=Cn(t,c);r(f,c)&&hi(o,Ri(c,t),f)}return o}function ii(t,e,r,n){var u=n?$e:Ze,o=-1,c=e.length,f=t;for(t===e&&(e=Fi(e)),r&&(f=Ke(t,cr(r)));++o<c;)for(var l=0,h=e[o],d=r?r(h):h;(l=u(f,d,l,n))>-1;)f!==t&&se.call(f,l,1),se.call(t,l,1);return t}function oi(t,e){for(var r=t?e.length:0,n=r-1;r--;){var u=e[r];if(r==n||u!==o){var o=u;Po(u)?se.call(t,u,1):Oi(t,u)}}return t}function ai(t,e){return t+Ie(Lr()*(e-t+1))}function si(t,e){var r="";if(!t||e<1||e>d)return r;do{e%2&&(r+=t),(e=Ie(e/2))&&(t+=t)}while(e);return r}function ui(t,e){return Ho(Bo(t,e,uu),t+"")}function ci(t){return fn(Gs(t))}function fi(t,e){var r=Gs(t);return Vo(r,wn(e,0,r.length))}function hi(t,e,r,n){if(!us(t))return t;for(var u=-1,o=(e=Ri(e,t)).length,c=o-1,f=t;null!=f&&++u<o;){var l=Jo(e[u]),h=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(u!=c){var d=f[l];(h=n?n(d,l,f):i)===i&&(h=us(d)?d:Po(e[u+1])?[]:{})}dn(f,l,h),f=f[l]}return t}var pi=Hr?function(t,e){return Hr.set(t,e),t}:uu,di=be?function(t,e){return be(t,"toString",{configurable:!0,enumerable:!1,value:ou(e),writable:!0})}:uu;function vi(t){return Vo(Gs(t))}function yi(t,e,r){var n=-1,u=t.length;e<0&&(e=-e>u?0:u+e),(r=r>u?u:r)<0&&(r+=u),u=e>r?0:r-e>>>0,e>>>=0;for(var o=gt(u);++n<u;)o[n]=t[n+e];return o}function gi(t,e){var r;return An(t,(function(t,u,n){return!(r=e(t,u,n))})),!!r}function mi(t,e,r){var n=0,u=null==t?n:t.length;if("number"==typeof e&&e==e&&u<=w){for(;n<u;){var o=n+u>>>1,c=t[o];null!==c&&!ys(c)&&(r?c<=e:c<e)?n=o+1:u=o}return u}return bi(t,e,uu,r)}function bi(t,e,r,n){var u=0,o=null==t?0:t.length;if(0===o)return 0;for(var c=(e=r(e))!=e,f=null===e,l=ys(e),h=e===i;u<o;){var d=Ie((u+o)/2),v=r(t[d]),y=v!==i,w=null===v,_=v==v,x=ys(v);if(c)var E=n||_;else E=h?_&&(n||y):f?_&&y&&(n||!w):l?_&&y&&!w&&(n||!x):!w&&!x&&(n?v<=e:v<e);E?u=d+1:o=d}return Rr(o,m)}function wi(t,e){for(var r=-1,n=t.length,u=0,o=[];++r<n;){var c=t[r],f=e?e(c):c;if(!r||!Wa(f,l)){var l=f;o[u++]=0===c?0:c}}return o}function _i(t){return"number"==typeof t?t:ys(t)?v:+t}function xi(t){if("string"==typeof t)return t;if(b(t))return Ke(t,xi)+"";if(ys(t))return Zr?Zr.call(t):"";var e=t+"";return"0"==e&&1/t==-h?"-0":e}function Ei(t,e,r){var n=-1,u=Fe,o=t.length,c=!0,f=[],l=f;if(r)c=!1,u=He;else if(o>=200){var h=e?null:ao(t);if(h)return Er(h);c=!1,u=lr,l=new sn}else l=e?[]:f;t:for(;++n<o;){var d=t[n],v=e?e(d):d;if(d=r||0!==d?d:0,c&&v==v){for(var y=l.length;y--;)if(l[y]===v)continue t;e&&l.push(v),f.push(d)}else u(l,v,r)||(l!==f&&l.push(v),f.push(d))}return f}function Oi(t,e){return null==(t=Do(t,e=Ri(e,t)))||delete t[Jo(sa(e))]}function Ai(t,e,r,n){return hi(t,e,r(Cn(t,e)),n)}function ki(t,e,r,n){for(var u=t.length,o=n?u:-1;(n?o--:++o<u)&&e(t[o],o,t););return r?yi(t,n?0:o,n?o+1:u):yi(t,n?o+1:0,n?u:o)}function Si(t,e){var r=t;return r instanceof rn&&(r=r.value()),Ve(e,(function(t,u){return u.func.apply(u.thisArg,Ge([t],u.args))}),r)}function Ii(t,e,r){var n=t.length;if(n<2)return n?Ei(t[0]):[];for(var u=-1,o=gt(n);++u<n;)for(var c=t[u],f=-1;++f<n;)f!=u&&(o[u]=On(o[u]||c,t[f],e,r));return Ei(Pn(o,1),e,r)}function ji(t,e,r){for(var n=-1,u=t.length,o=e.length,c={};++n<u;){var f=n<o?e[n]:i;r(c,t[n],f)}return c}function Pi(t){return es(t)?t:[]}function Mi(t){return"function"==typeof t?t:uu}function Ri(t,e){return b(t)?t:Ro(t,e)?[t]:Yo(q(t))}var Ni=ui;function Ti(t,e,r){var n=t.length;return r=r===i?n:r,!e&&r>=n?t:yi(t,e,r)}var Li=xe||function(t){return Oe.clearTimeout(t)};function Ci(t,e){if(e)return t.slice();var r=t.length,n=ne?ne(r):new t.constructor(r);return t.copy(n),n}function Ui(t){var e=new t.constructor(t.byteLength);return new re(e).set(new re(t)),e}function Bi(t,e){var r=e?Ui(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function Di(t,e){if(t!==e){var r=t!==i,n=null===t,u=t==t,o=ys(t),c=e!==i,f=null===e,l=e==e,h=ys(e);if(!f&&!h&&!o&&t>e||o&&c&&l&&!f&&!h||n&&c&&l||!r&&l||!u)return 1;if(!n&&!o&&!h&&t<e||h&&r&&u&&!n&&!o||f&&r&&u||!c&&u||!l)return-1}return 0}function qi(t,e,r,n){for(var u=-1,o=t.length,c=r.length,f=-1,l=e.length,h=Mr(o-c,0),d=gt(l+h),v=!n;++f<l;)d[f]=e[f];for(;++u<c;)(v||u<o)&&(d[r[u]]=t[u]);for(;h--;)d[f++]=t[u++];return d}function zi(t,e,r,n){for(var u=-1,o=t.length,c=-1,f=r.length,l=-1,h=e.length,d=Mr(o-f,0),v=gt(d+h),y=!n;++u<d;)v[u]=t[u];for(var m=u;++l<h;)v[m+l]=e[l];for(;++c<f;)(y||u<o)&&(v[m+r[c]]=t[u++]);return v}function Fi(t,e){var r=-1,n=t.length;for(e||(e=gt(n));++r<n;)e[r]=t[r];return e}function Hi(t,e,r,n){var u=!r;r||(r={});for(var o=-1,c=e.length;++o<c;){var f=e[o],l=n?n(r[f],t[f],f,r,t):i;l===i&&(l=t[f]),u?mn(r,f,l):dn(r,f,l)}return r}function Ki(t,e){return function(r,n){var u=b(r)?Ue:yn,o=e?e():{};return u(r,t,wo(n,2),o)}}function Gi(t){return ui((function(e,r){var n=-1,u=r.length,o=u>1?r[u-1]:i,c=u>2?r[2]:i;for(o=t.length>3&&"function"==typeof o?(u--,o):i,c&&Mo(r[0],r[1],c)&&(o=u<3?i:o,u=1),e=Bt(e);++n<u;){var f=r[n];f&&t(e,f,n,o)}return e}))}function Vi(t,e){return function(r,n){if(null==r)return r;if(!ts(r))return t(r,n);for(var u=r.length,o=e?u:-1,c=Bt(r);(e?o--:++o<u)&&!1!==n(c[o],o,c););return r}}function Yi(t){return function(e,r,n){for(var u=-1,o=Bt(e),c=n(e),f=c.length;f--;){var l=c[t?f:++u];if(!1===r(o[l],l,o))break}return e}}function Ji(t){return function(e){var r=mr(e=q(e))?Ar(e):i,n=r?r[0]:e.charAt(0),u=r?Ti(r,1).join(""):e.slice(1);return n[t]()+u}}function Wi(t){return function(e){return Ve(ru(Js(e).replace(ce,"")),t,"")}}function Qi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=$r(t.prototype),n=t.apply(r,e);return us(n)?n:r}}function Xi(t){return function(e,r,n){var u=Bt(e);if(!ts(e)){var o=wo(r,3);e=Us(e),r=function(t){return o(u[t],t,u)}}var c=t(e,r,n);return c>-1?u[o?e[c]:c]:i}}function Zi(e){return po((function(r){var n=r.length,o=n,u=en.prototype.thru;for(e&&r.reverse();o--;){var c=r[o];if("function"!=typeof c)throw new zt(t);if(u&&!f&&"wrapper"==mo(c))var f=new en([],!0)}for(o=f?o:n;++o<n;){var l=mo(c=r[o]),h="wrapper"==l?go(c):i;f=h&&No(h[0])&&424==h[1]&&!h[4].length&&1==h[9]?f[mo(h[0])].apply(f,h[3]):1==c.length&&No(c)?f[l]():f.thru(c)}return function(){var t=arguments,e=t[0];if(f&&1==t.length&&b(e))return f.plant(e).value();for(var o=0,c=n?r[o].apply(this,t):e;++o<n;)c=r[o].call(this,c);return c}}))}function $i(t,e,r,n,u,o,c,l,h,d){var v=e&f,y=1&e,m=2&e,w=24&e,_=512&e,x=m?i:Qi(t);return function f(){for(var E=arguments.length,O=gt(E),dt=E;dt--;)O[dt]=arguments[dt];if(w)var A=bo(f),k=function(t,g){for(var e=t.length,r=0;e--;)t[e]===g&&++r;return r}(O,A);if(n&&(O=qi(O,n,u,w)),o&&(O=zi(O,o,c,w)),E-=k,w&&E<d){var S=xr(O,A);return oo(t,e,$i,f.placeholder,r,O,S,l,h,d-E)}var I=y?r:this,j=m?I[t]:t;return E=O.length,l?O=function(t,e){for(var r=t.length,n=Rr(e.length,r),u=Fi(t);n--;){var o=e[n];t[n]=Po(o,r)?u[o]:i}return t}(O,l):_&&E>1&&O.reverse(),v&&h<E&&(O.length=h),this&&this!==Oe&&this instanceof f&&(j=x||Qi(j)),j.apply(I,O)}}function to(t,e){return function(r,n){return function(t,e,r,n){return Nn(t,(function(u,t,o){e(n,r(u),t,o)})),n}(r,t,e(n),{})}}function eo(t,e){return function(r,n){var u;if(r===i&&n===i)return e;if(r!==i&&(u=r),n!==i){if(u===i)return n;"string"==typeof r||"string"==typeof n?(r=xi(r),n=xi(n)):(r=_i(r),n=_i(n)),u=t(r,n)}return u}}function ro(t){return po((function(e){return e=Ke(e,cr(wo())),ui((function(r){var n=this;return t(e,(function(u){return Ce(u,n,r)}))}))}))}function no(t,e){var r=(e=e===i?" ":xi(e)).length;if(r<2)return r?si(e,t):e;var n=si(e,ke(t/Or(e)));return mr(e)?Ti(Ar(n),0,t).join(""):n.slice(0,t)}function io(t){return function(e,r,n){return n&&"number"!=typeof n&&Mo(e,r,n)&&(r=n=i),e=_s(e),r===i?(r=e,e=0):r=_s(r),function(t,e,r,n){for(var u=-1,o=Mr(ke((e-t)/(r||1)),0),c=gt(o);o--;)c[n?o:++u]=t,t+=r;return c}(e,r,n=n===i?e<r?1:-1:_s(n),t)}}function tr(t){return function(e,r){return"string"==typeof e&&"string"==typeof r||(e=Os(e),r=Os(r)),t(e,r)}}function oo(t,e,r,n,u,f,l,h,d,v){var y=8&e;e|=y?o:c,4&(e&=~(y?c:o))||(e&=-4);var m=[t,e,u,y?f:i,y?l:i,y?i:f,y?i:l,h,d,v],w=r.apply(i,m);return No(t)&&zo(w,m),w.placeholder=n,Ko(w,t,e)}function li(t){var e=Ut[t];return function(t,r){if(t=Os(t),(r=null==r?0:Rr(xs(r),292))&&ir(t)){var u=(q(t)+"e").split("e");return+((u=(q(e(u[0]+"e"+(+u[1]+r)))+"e").split("e"))[0]+"e"+(+u[1]-r))}return e(t)}}var ao=qr&&1/Er(new qr([,-0]))[1]==h?function(t){return new qr(t)}:pu;function so(t){return function(e){var r=ko(e);return r==j?wr(e):r==U?function(t){var g=-1,e=Array(t.size);return t.forEach((function(t){e[++g]=[t,t]})),e}(e):function(t,g){return Ke(g,(function(e){return[e,t[e]]}))}(e,t(e))}}function uo(e,h,d,v,u,y,m,w){var _=2&h;if(!_&&"function"!=typeof e)throw new zt(t);var x=v?v.length:0;if(x||(h&=-97,v=u=i),m=m===i?m:Mr(xs(m),0),w=w===i?w:xs(w),x-=u?u.length:0,h&c){var E=v,O=u;v=u=i}var A=_?i:go(e),k=[e,h,d,v,u,E,O,y,m,w];if(A&&function(t,e){var n=t[1],o=e[1],u=n|o,c=u<131,h=o==f&&8==n||o==f&&n==l&&t[7].length<=e[8]||384==o&&e[7].length<=e[8]&&8==n;if(!c&&!h)return t;1&o&&(t[2]=e[2],u|=1&n?0:4);var d=e[3];if(d){var v=t[3];t[3]=v?qi(v,d,e[4]):d,t[4]=v?xr(t[3],r):e[4]}(d=e[5])&&(v=t[5],t[5]=v?zi(v,d,e[6]):d,t[6]=v?xr(t[5],r):e[6]),(d=e[7])&&(t[7]=d),o&f&&(t[8]=null==t[8]?e[8]:Rr(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=u}(k,A),e=k[0],h=k[1],d=k[2],v=k[3],u=k[4],!(w=k[9]=k[9]===i?_?0:e.length:Mr(k[9]-x,0))&&24&h&&(h&=-25),h&&1!=h)S=8==h||h==n?function(t,e,r){var n=Qi(t);return function u(){for(var o=arguments.length,c=gt(o),f=o,l=bo(u);f--;)c[f]=arguments[f];var h=o<3&&c[0]!==l&&c[o-1]!==l?[]:xr(c,l);return(o-=h.length)<r?oo(t,e,$i,u.placeholder,i,c,h,i,i,r-o):Ce(this&&this!==Oe&&this instanceof u?n:t,this,c)}}(e,h,w):h!=o&&33!=h||u.length?$i.apply(i,k):function(t,e,r,n){var u=1&e,o=Qi(t);return function e(){for(var c=-1,f=arguments.length,l=-1,h=n.length,d=gt(h+f),v=this&&this!==Oe&&this instanceof e?o:t;++l<h;)d[l]=n[l];for(;f--;)d[l++]=arguments[++c];return Ce(v,u?r:this,d)}}(e,h,d,v);else var S=function(t,e,r){var n=1&e,u=Qi(t);return function e(){return(this&&this!==Oe&&this instanceof e?u:t).apply(n?r:this,arguments)}}(e,h,d);return Ko((A?pi:zo)(S,k),e,h)}function co(t,e,r,n){return t===i||Wa(t,Kt[r])&&!Yt.call(n,r)?e:t}function fo(t,e,r,n,u,o){return us(t)&&us(e)&&(o.set(e,t),ti(t,e,i,fo,o),o.delete(e)),t}function lo(t){return hs(t)?i:t}function ho(t,e,r,n,u,o){var c=1&r,f=t.length,l=e.length;if(f!=l&&!(c&&l>f))return!1;var h=o.get(t),d=o.get(e);if(h&&d)return h==e&&d==t;var v=-1,y=!0,m=2&r?new sn:i;for(o.set(t,e),o.set(e,t);++v<f;){var w=t[v],_=e[v];if(n)var x=c?n(_,w,v,e,t,o):n(w,_,v,t,e,o);if(x!==i){if(x)continue;y=!1;break}if(m){if(!Je(e,(function(t,e){if(!lr(m,e)&&(w===t||u(w,t,r,n,o)))return m.push(e)}))){y=!1;break}}else if(w!==_&&!u(w,_,r,n,o)){y=!1;break}}return o.delete(t),o.delete(e),y}function po(t){return Ho(Bo(t,i,ra),t+"")}function vo(t){return Un(t,Us,Oo)}function yo(t){return Un(t,Bs,Ao)}var go=Hr?function(t){return Hr.get(t)}:pu;function mo(t){for(var e=t.name+"",r=Kr[e],n=Yt.call(Kr,e)?r.length:0;n--;){var u=r[n],o=u.func;if(null==o||o==t)return u.name}return e}function bo(t){return(Yt.call(a,"placeholder")?a:t).placeholder}function wo(){var t=a.iteratee||cu;return t=t===cu?Yn:t,arguments.length?t(arguments[0],arguments[1]):t}function _o(t,e){var r=t.__data__;return function(t){var e=P(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?r["string"==typeof e?"string":"hash"]:r.map}function xo(t){for(var e=Us(t),r=e.length;r--;){var n=e[r],u=t[n];e[r]=[n,u,Co(u)]}return e}function Eo(t,e){var r=function(t,g){return null==t?i:t[g]}(t,e);return Vn(r)?r:i}var Oo=je?function(t){return null==t?[]:(t=Bt(t),ze(je(t),(function(e){return ae.call(t,e)})))}:wu,Ao=je?function(t){for(var e=[];t;)Ge(e,Oo(t)),t=ie(t);return e}:wu,ko=rt;function So(t,e,r){for(var n=-1,u=(e=Ri(e,t)).length,o=!1;++n<u;){var c=Jo(e[n]);if(!(o=null!=t&&r(t,c)))break;t=t[c]}return o||++n!=u?o:!!(u=null==t?0:t.length)&&ss(u)&&Po(c,u)&&(b(t)||Za(t))}function Io(t){return"function"!=typeof t.constructor||Lo(t)?{}:$r(ie(t))}function jo(t){return b(t)||Za(t)||!!(ue&&t&&t[ue])}function Po(t,e){var r,n=P(t);return!!(e=null!==(r=e)&&void 0!==r?r:d)&&("number"==n||"symbol"!=n&&Pt.test(t))&&t>-1&&t%1==0&&t<e}function Mo(t,e,r){if(!us(r))return!1;var n=P(e);return!!("number"==n?ts(r)&&Po(e,r.length):"string"==n&&e in r)&&Wa(r[e],t)}function Ro(t,e){if(b(t))return!1;var r=P(t);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!ys(t))||lt.test(t)||!ft.test(t)||null!=e&&t in Bt(e)}function No(t){var e=mo(t),r=a[e];if("function"!=typeof r||!(e in rn.prototype))return!1;if(t===r)return!0;var n=go(r);return!!n&&t===n[0]}(Ur&&ko(new Ur(new ArrayBuffer(1)))!=H||Br&&ko(new Br)!=j||Dr&&ko(Dr.resolve())!=T||qr&&ko(new qr)!=U||zr&&ko(new zr)!=z)&&(ko=function(t){var e=rt(t),r=e==N?t.constructor:i,n=r?Wo(r):"";if(n)switch(n){case Gr:return H;case Vr:return j;case Yr:return T;case Jr:return U;case Wr:return z}return e});var To=Gt?os:_u;function Lo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Kt)}function Co(t){return t==t&&!us(t)}function Uo(t,e){return function(r){return null!=r&&r[t]===e&&(e!==i||t in Bt(r))}}function Bo(t,e,r){return e=Mr(e===i?t.length-1:e,0),function(){for(var n=arguments,u=-1,o=Mr(n.length-e,0),c=gt(o);++u<o;)c[u]=n[e+u];u=-1;for(var f=gt(e+1);++u<e;)f[u]=n[u];return f[e]=r(c),Ce(t,this,f)}}function Do(t,e){return e.length<2?t:Cn(t,yi(e,0,-1))}function qo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var zo=Go(pi),Fo=Ae||function(t,e){return Oe.setTimeout(t,e)},Ho=Go(di);function Ko(t,e,r){var n=e+"";return Ho(t,function(t,e){var r=e.length;if(!r)return t;var n=r-1;return e[n]=(r>1?"& ":"")+e[n],e=e.join(r>2?", ":" "),t.replace(mt,"{\n/* [wrapped with "+e+"] */\n")}(n,function(t,e){return Be(_,(function(r){var n="_."+r[0];e&r[1]&&!Fe(t,n)&&t.push(n)})),t.sort()}(function(t){var e=t.match(bt);return e?e[1].split(wt):[]}(n),r)))}function Go(t){var e=0,r=0;return function(){var n=Nr(),u=16-(n-r);if(r=n,u>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Vo(t,e){var r=-1,n=t.length,u=n-1;for(e=e===i?n:e;++r<e;){var o=ai(r,u),c=t[o];t[o]=t[r],t[r]=c}return t.length=e,t}var Yo=function(t){var e=Ha(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(ht,(function(t,r,u,n){e.push(u?n.replace(Et,"$1"):r||t)})),e}));function Jo(t){if("string"==typeof t||ys(t))return t;var e=t+"";return"0"==e&&1/t==-h?"-0":e}function Wo(t){if(null!=t){try{return Vt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Qo(t){if(t instanceof rn)return t.clone();var e=new en(t.__wrapped__,t.__chain__);return e.__actions__=Fi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Xo=ui((function(t,e){return es(t)?On(t,Pn(e,1,es,!0)):[]})),Zo=ui((function(t,e){var r=sa(e);return es(r)&&(r=i),es(t)?On(t,Pn(e,1,es,!0),wo(r,2)):[]})),$o=ui((function(t,e){var r=sa(e);return es(r)&&(r=i),es(t)?On(t,Pn(e,1,es,!0),i,r):[]}));function ta(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var u=null==r?0:xs(r);return u<0&&(u=Mr(n+u,0)),Xe(t,wo(e,3),u)}function ea(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var u=n-1;return r!==i&&(u=xs(r),u=r<0?Mr(n+u,0):Rr(u,n-1)),Xe(t,wo(e,3),u,!0)}function ra(t){return null!=t&&t.length?Pn(t,1):[]}function na(t){return t&&t.length?t[0]:i}var ia=ui((function(t){var e=Ke(t,Pi);return e.length&&e[0]===t[0]?zn(e):[]})),oa=ui((function(t){var e=sa(t),r=Ke(t,Pi);return e===sa(r)?e=i:r.pop(),r.length&&r[0]===t[0]?zn(r,wo(e,2)):[]})),aa=ui((function(t){var e=sa(t),r=Ke(t,Pi);return(e="function"==typeof e?e:i)&&r.pop(),r.length&&r[0]===t[0]?zn(r,i,e):[]}));function sa(t){var e=null==t?0:t.length;return e?t[e-1]:i}var ua=ui(ca);function ca(t,e){return t&&t.length&&e&&e.length?ii(t,e):t}var fa=po((function(t,e){var r=null==t?0:t.length,n=bn(t,e);return oi(t,Ke(e,(function(u){return Po(u,r)?+u:u})).sort(Di)),n}));function la(t){return null==t?t:Cr.call(t)}var ha=ui((function(t){return Ei(Pn(t,1,es,!0))})),pa=ui((function(t){var e=sa(t);return es(e)&&(e=i),Ei(Pn(t,1,es,!0),wo(e,2))})),dl=ui((function(t){var e=sa(t);return e="function"==typeof e?e:i,Ei(Pn(t,1,es,!0),i,e)}));function da(t){if(!t||!t.length)return[];var e=0;return t=ze(t,(function(t){if(es(t))return e=Mr(t.length,e),!0})),sr(e,(function(e){return Ke(t,nr(e))}))}function va(t,e){if(!t||!t.length)return[];var r=da(t);return null==e?r:Ke(r,(function(t){return Ce(e,i,t)}))}var ya=ui((function(t,e){return es(t)?On(t,e):[]})),ga=ui((function(t){return Ii(ze(t,es))})),ma=ui((function(t){var e=sa(t);return es(e)&&(e=i),Ii(ze(t,es),wo(e,2))})),ba=ui((function(t){var e=sa(t);return e="function"==typeof e?e:i,Ii(ze(t,es),i,e)})),wa=ui(da),_a=ui((function(t){var e=t.length,r=e>1?t[e-1]:i;return r="function"==typeof r?(t.pop(),r):i,va(t,r)}));function xa(t){var e=a(t);return e.__chain__=!0,e}function Ea(t,e){return e(t)}var Oa=po((function(t){var e=t.length,r=e?t[0]:0,n=this.__wrapped__,u=function(e){return bn(e,t)};return!(e>1||this.__actions__.length)&&n instanceof rn&&Po(r)?((n=n.slice(r,+r+(e?1:0))).__actions__.push({func:Ea,args:[u],thisArg:i}),new en(n,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(u)})),Aa=Ki((function(t,e,r){Yt.call(t,r)?++t[r]:mn(t,r,1)})),ka=Xi(ta),Sa=Xi(ea);function Ia(t,e){return(b(t)?Be:An)(t,wo(e,3))}function ja(t,e){return(b(t)?De:kn)(t,wo(e,3))}var Pa=Ki((function(t,e,r){Yt.call(t,r)?t[r].push(e):mn(t,r,[e])})),Ma=ui((function(t,e,r){var n=-1,u="function"==typeof e,o=ts(t)?gt(t.length):[];return An(t,(function(t){o[++n]=u?Ce(e,t,r):Fn(t,e,r)})),o})),Ra=Ki((function(t,e,r){mn(t,r,e)}));function Na(t,e){return(b(t)?Ke:Xn)(t,wo(e,3))}var Ta=Ki((function(t,e,r){t[r?0:1].push(e)}),(function(){return[[],[]]})),rp=ui((function(t,e){if(null==t)return[];var r=e.length;return r>1&&Mo(t,e[0],e[1])?e=[]:r>2&&Mo(e[0],e[1],e[2])&&(e=[e[0]]),ri(t,Pn(e,1),[])})),La=Ee||function(){return Oe.Date.now()};function Ca(t,e,r){return e=r?i:e,e=t&&null==e?t.length:e,uo(t,f,i,i,i,i,e)}function Ua(e,r){var n;if("function"!=typeof r)throw new zt(t);return e=xs(e),function(){return--e>0&&(n=r.apply(this,arguments)),e<=1&&(r=i),n}}var Ba=ui((function(t,e,r){var n=1;if(r.length){var u=xr(r,bo(Ba));n|=o}return uo(t,n,e,r,u)})),Da=ui((function(t,e,r){var n=3;if(r.length){var u=xr(r,bo(Da));n|=o}return uo(e,n,t,r,u)}));function qa(e,r,n){var o,u,c,f,l,h,d=0,v=!1,y=!1,m=!0;if("function"!=typeof e)throw new zt(t);function w(t){var r=o,n=u;return o=u=i,d=t,f=e.apply(n,r)}function _(t){var e=t-h;return h===i||e>=r||e<0||y&&t-d>=c}function x(){var t=La();if(_(t))return E(t);l=Fo(x,function(t){var e=r-(t-h);return y?Rr(e,c-(t-d)):e}(t))}function E(t){return l=i,m&&o?w(t):(o=u=i,f)}function O(){var t=La(),e=_(t);if(o=arguments,u=this,h=t,e){if(l===i)return function(t){return d=t,l=Fo(x,r),v?w(t):f}(h);if(y)return Li(l),l=Fo(x,r),w(h)}return l===i&&(l=Fo(x,r)),f}return r=Os(r)||0,us(n)&&(v=!!n.leading,c=(y="maxWait"in n)?Mr(Os(n.maxWait)||0,r):c,m="trailing"in n?!!n.trailing:m),O.cancel=function(){l!==i&&Li(l),d=0,o=h=u=l=i},O.flush=function(){return l===i?f:E(La())},O}var za=ui((function(t,e){return En(t,1,e)})),Fa=ui((function(t,e,r){return En(t,Os(e)||0,r)}));function Ha(e,r){if("function"!=typeof e||null!=r&&"function"!=typeof r)throw new zt(t);var n=function(){var t=arguments,u=r?r.apply(this,t):t[0],o=n.cache;if(o.has(u))return o.get(u);var c=e.apply(this,t);return n.cache=o.set(u,c)||o,c};return n.cache=new(Ha.Cache||an),n}function Ka(e){if("function"!=typeof e)throw new zt(t);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Ha.Cache=an;var Ga=Ni((function(t,e){var r=(e=1==e.length&&b(e[0])?Ke(e[0],cr(wo())):Ke(Pn(e,1),cr(wo()))).length;return ui((function(n){for(var u=-1,o=Rr(n.length,r);++u<o;)n[u]=e[u].call(this,n[u]);return Ce(t,this,n)}))})),Va=ui((function(t,e){var r=xr(e,bo(Va));return uo(t,o,i,e,r)})),Ya=ui((function(t,e){var r=xr(e,bo(Ya));return uo(t,c,i,e,r)})),Ja=po((function(t,e){return uo(t,l,i,i,i,e)}));function Wa(t,e){return t===e||t!=t&&e!=e}var Qa=tr(Bn),Xa=tr((function(t,e){return t>=e})),Za=Hn(function(){return arguments}())?Hn:function(t){return cs(t)&&Yt.call(t,"callee")&&!ae.call(t,"callee")},b=gt.isArray,$a=Pe?cr(Pe):function(t){return cs(t)&&rt(t)==F};function ts(t){return null!=t&&ss(t.length)&&!os(t)}function es(t){return cs(t)&&ts(t)}var rs=We||_u,ns=Me?cr(Me):function(t){return cs(t)&&rt(t)==A};function is(t){if(!cs(t))return!1;var e=rt(t);return e==k||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!hs(t)}function os(t){if(!us(t))return!1;var e=rt(t);return e==S||e==I||"[object AsyncFunction]"==e||"[object Proxy]"==e}function as(t){return"number"==typeof t&&t==xs(t)}function ss(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=d}function us(t){var e=P(t);return null!=t&&("object"==e||"function"==e)}function cs(t){return null!=t&&"object"==P(t)}var fs=Re?cr(Re):function(t){return cs(t)&&ko(t)==j};function ls(t){return"number"==typeof t||cs(t)&&rt(t)==R}function hs(t){if(!cs(t)||rt(t)!=N)return!1;var e=ie(t);if(null===e)return!0;var r=Yt.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&Vt.call(r)==Xt}var ps=Ne?cr(Ne):function(t){return cs(t)&&rt(t)==L},ds=Te?cr(Te):function(t){return cs(t)&&ko(t)==U};function vs(t){return"string"==typeof t||!b(t)&&cs(t)&&rt(t)==B}function ys(t){return"symbol"==P(t)||cs(t)&&rt(t)==D}var gs=Le?cr(Le):function(t){return cs(t)&&ss(t.length)&&!!ge[rt(t)]},ms=tr(Qn),bs=tr((function(t,e){return t<=e}));function ws(t){if(!t)return[];if(ts(t))return vs(t)?Ar(t):Fi(t);if(le&&t[le])return function(t){for(var g,e=[];!(g=t.next()).done;)e.push(g.value);return e}(t[le]());var e=ko(t);return(e==j?wr:e==U?Er:Gs)(t)}function _s(t){return t?(t=Os(t))===h||t===-h?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function xs(t){var e=_s(t),r=e%1;return e==e?r?e-r:e:0}function Es(t){return t?wn(xs(t),0,y):0}function Os(t){if("number"==typeof t)return t;if(ys(t))return v;if(us(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=us(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=ur(t);var r=St.test(t);return r||jt.test(t)?_e(t.slice(2),r?2:8):kt.test(t)?v:+t}function As(t){return Hi(t,Bs(t))}function q(t){return null==t?"":xi(t)}var ks=Gi((function(t,e){if(Lo(e)||ts(e))Hi(e,Us(e),t);else for(var r in e)Yt.call(e,r)&&dn(t,r,e[r])})),Ss=Gi((function(t,e){Hi(e,Bs(e),t)})),hr=Gi((function(t,e,r,n){Hi(e,Bs(e),t,n)})),Is=Gi((function(t,e,r,n){Hi(e,Us(e),t,n)})),js=po(bn),Ps=ui((function(t,e){t=Bt(t);var r=-1,n=e.length,u=n>2?e[2]:i;for(u&&Mo(e[0],e[1],u)&&(n=1);++r<n;)for(var o=e[r],c=Bs(o),f=-1,l=c.length;++f<l;){var h=c[f],d=t[h];(d===i||Wa(d,Kt[h])&&!Yt.call(t,h))&&(t[h]=o[h])}return t})),Ms=ui((function(t){return t.push(i,fo),Ce(qs,i,t)}));function Rs(t,e,r){var n=null==t?i:Cn(t,e);return n===i?r:n}function Ns(t,e){return null!=t&&So(t,e,qn)}var Ts=to((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=Qt.call(e)),t[e]=r}),ou(uu)),Ls=to((function(t,e,r){null!=e&&"function"!=typeof e.toString&&(e=Qt.call(e)),Yt.call(t,e)?t[e].push(r):t[e]=[r]}),wo),Cs=ui(Fn);function Us(t){return ts(t)?cn(t):Jn(t)}function Bs(t){return ts(t)?cn(t,!0):Wn(t)}var Ds=Gi((function(t,e,r){ti(t,e,r)})),qs=Gi((function(t,e,r,n){ti(t,e,r,n)})),zs=po((function(t,e){var r={};if(null==t)return r;var n=!1;e=Ke(e,(function(e){return e=Ri(e,t),n||(n=e.length>1),e})),Hi(t,yo(t),r),n&&(r=_n(r,7,lo));for(var u=e.length;u--;)Oi(r,e[u]);return r})),dd=po((function(t,e){return null==t?{}:function(t,e){return ni(t,e,(function(e,r){return Ns(t,r)}))}(t,e)}));function Fs(t,e){if(null==t)return{};var r=Ke(yo(t),(function(t){return[t]}));return e=wo(e),ni(t,r,(function(t,u){return e(t,u[0])}))}var Hs=so(Us),Ks=so(Bs);function Gs(t){return null==t?[]:fr(t,Us(t))}var Vs=Wi((function(t,e,r){return e=e.toLowerCase(),t+(r?Ys(e):e)}));function Ys(t){return eu(q(t).toLowerCase())}function Js(t){return(t=q(t))&&t.replace(Mt,vr).replace(fe,"")}var Ws=Wi((function(t,e,r){return t+(r?"-":"")+e.toLowerCase()})),Qs=Wi((function(t,e,r){return t+(r?" ":"")+e.toLowerCase()})),Xs=Ji("toLowerCase"),Zs=Wi((function(t,e,r){return t+(r?"_":"")+e.toLowerCase()})),$s=Wi((function(t,e,r){return t+(r?" ":"")+eu(e)})),tu=Wi((function(t,e,r){return t+(r?" ":"")+e.toUpperCase()})),eu=Ji("toUpperCase");function ru(t,e,r){return t=q(t),(e=r?i:e)===i?function(t){return de.test(t)}(t)?function(t){return t.match(he)||[]}(t):function(t){return t.match(_t)||[]}(t):t.match(e)||[]}var nu=ui((function(t,e){try{return Ce(t,i,e)}catch(t){return is(t)?t:new Lt(t)}})),iu=po((function(t,e){return Be(e,(function(e){e=Jo(e),mn(t,e,Ba(t[e],t))})),t}));function ou(t){return function(){return t}}var au=Zi(),su=Zi(!0);function uu(t){return t}function cu(t){return Yn("function"==typeof t?t:_n(t,1))}var fu=ui((function(t,e){return function(r){return Fn(r,t,e)}})),lu=ui((function(t,e){return function(r){return Fn(t,r,e)}}));function hu(t,e,r){var n=Us(e),u=Ln(e,n);null==r&&(!us(e)||!u.length&&n.length)&&(r=e,e=t,t=this,u=Ln(e,Us(e)));var o=!(us(r)&&"chain"in r&&!r.chain),c=os(t);return Be(u,(function(r){var n=e[r];t[r]=n,c&&(t.prototype[r]=function(){var e=this.__chain__;if(o||e){var r=t(this.__wrapped__);return(r.__actions__=Fi(this.__actions__)).push({func:n,args:arguments,thisArg:t}),r.__chain__=e,r}return n.apply(t,Ge([this.value()],arguments))})})),t}function pu(){}var du=ro(Ke),vu=ro(qe),yu=ro(Je);function gu(t){return Ro(t)?nr(Jo(t)):function(t){return function(e){return Cn(e,t)}}(t)}var mu=io(),bu=io(!0);function wu(){return[]}function _u(){return!1}var xu=eo((function(t,e){return t+e}),0),Eu=li("ceil"),Ou=eo((function(t,e){return t/e}),1),Au=li("floor"),ku=eo((function(t,e){return t*e}),1),Su=li("round"),Iu=eo((function(t,e){return t-e}),0);return a.after=function(e,r){if("function"!=typeof r)throw new zt(t);return e=xs(e),function(){if(--e<1)return r.apply(this,arguments)}},a.ary=Ca,a.assign=ks,a.assignIn=Ss,a.assignInWith=hr,a.assignWith=Is,a.at=js,a.before=Ua,a.bind=Ba,a.bindAll=iu,a.bindKey=Da,a.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return b(t)?t:[t]},a.chain=xa,a.chunk=function(t,e,r){e=(r?Mo(t,e,r):e===i)?1:Mr(xs(e),0);var n=null==t?0:t.length;if(!n||e<1)return[];for(var u=0,o=0,c=gt(ke(n/e));u<n;)c[o++]=yi(t,u,u+=e);return c},a.compact=function(t){for(var e=-1,r=null==t?0:t.length,n=0,u=[];++e<r;){var o=t[e];o&&(u[n++]=o)}return u},a.concat=function(){var t=arguments.length;if(!t)return[];for(var e=gt(t-1),r=arguments[0],n=t;n--;)e[n-1]=arguments[n];return Ge(b(r)?Fi(r):[r],Pn(e,1))},a.cond=function(e){var r=null==e?0:e.length,n=wo();return e=r?Ke(e,(function(e){if("function"!=typeof e[1])throw new zt(t);return[n(e[0]),e[1]]})):[],ui((function(t){for(var u=-1;++u<r;){var n=e[u];if(Ce(n[0],this,t))return Ce(n[1],this,t)}}))},a.conforms=function(t){return function(t){var e=Us(t);return function(r){return xn(r,t,e)}}(_n(t,1))},a.constant=ou,a.countBy=Aa,a.create=function(t,e){var r=$r(t);return null==e?r:gn(r,e)},a.curry=function t(e,r,n){var o=uo(e,8,i,i,i,i,i,r=n?i:r);return o.placeholder=t.placeholder,o},a.curryRight=function t(e,r,o){var c=uo(e,n,i,i,i,i,i,r=o?i:r);return c.placeholder=t.placeholder,c},a.debounce=qa,a.defaults=Ps,a.defaultsDeep=Ms,a.defer=za,a.delay=Fa,a.difference=Xo,a.differenceBy=Zo,a.differenceWith=$o,a.drop=function(t,e,r){var n=null==t?0:t.length;return n?yi(t,(e=r||e===i?1:xs(e))<0?0:e,n):[]},a.dropRight=function(t,e,r){var n=null==t?0:t.length;return n?yi(t,0,(e=n-(e=r||e===i?1:xs(e)))<0?0:e):[]},a.dropRightWhile=function(t,e){return t&&t.length?ki(t,wo(e,3),!0,!0):[]},a.dropWhile=function(t,e){return t&&t.length?ki(t,wo(e,3),!0):[]},a.fill=function(t,e,r,n){var u=null==t?0:t.length;return u?(r&&"number"!=typeof r&&Mo(t,e,r)&&(r=0,n=u),function(t,e,r,n){var u=t.length;for((r=xs(r))<0&&(r=-r>u?0:u+r),(n=n===i||n>u?u:xs(n))<0&&(n+=u),n=r>n?0:Es(n);r<n;)t[r++]=e;return t}(t,e,r,n)):[]},a.filter=function(t,e){return(b(t)?ze:jn)(t,wo(e,3))},a.flatMap=function(t,e){return Pn(Na(t,e),1)},a.flatMapDeep=function(t,e){return Pn(Na(t,e),h)},a.flatMapDepth=function(t,e,r){return r=r===i?1:xs(r),Pn(Na(t,e),r)},a.flatten=ra,a.flattenDeep=function(t){return null!=t&&t.length?Pn(t,h):[]},a.flattenDepth=function(t,e){return null!=t&&t.length?Pn(t,e=e===i?1:xs(e)):[]},a.flip=function(t){return uo(t,512)},a.flow=au,a.flowRight=su,a.fromPairs=function(t){for(var e=-1,r=null==t?0:t.length,n={};++e<r;){var u=t[e];n[u[0]]=u[1]}return n},a.functions=function(t){return null==t?[]:Ln(t,Us(t))},a.functionsIn=function(t){return null==t?[]:Ln(t,Bs(t))},a.groupBy=Pa,a.initial=function(t){return null!=t&&t.length?yi(t,0,-1):[]},a.intersection=ia,a.intersectionBy=oa,a.intersectionWith=aa,a.invert=Ts,a.invertBy=Ls,a.invokeMap=Ma,a.iteratee=cu,a.keyBy=Ra,a.keys=Us,a.keysIn=Bs,a.map=Na,a.mapKeys=function(t,e){var r={};return e=wo(e,3),Nn(t,(function(t,u,n){mn(r,e(t,u,n),t)})),r},a.mapValues=function(t,e){var r={};return e=wo(e,3),Nn(t,(function(t,u,n){mn(r,u,e(t,u,n))})),r},a.matches=function(t){return Zn(_n(t,1))},a.matchesProperty=function(t,e){return $n(t,_n(e,1))},a.memoize=Ha,a.merge=Ds,a.mergeWith=qs,a.method=fu,a.methodOf=lu,a.mixin=hu,a.negate=Ka,a.nthArg=function(t){return t=xs(t),ui((function(e){return ei(e,t)}))},a.omit=zs,a.omitBy=function(t,e){return Fs(t,Ka(wo(e)))},a.once=function(t){return Ua(2,t)},a.orderBy=function(t,e,r,n){return null==t?[]:(b(e)||(e=null==e?[]:[e]),b(r=n?i:r)||(r=null==r?[]:[r]),ri(t,e,r))},a.over=du,a.overArgs=Ga,a.overEvery=vu,a.overSome=yu,a.partial=Va,a.partialRight=Ya,a.partition=Ta,a.pick=dd,a.pickBy=Fs,a.property=gu,a.propertyOf=function(t){return function(e){return null==t?i:Cn(t,e)}},a.pull=ua,a.pullAll=ca,a.pullAllBy=function(t,e,r){return t&&t.length&&e&&e.length?ii(t,e,wo(r,2)):t},a.pullAllWith=function(t,e,r){return t&&t.length&&e&&e.length?ii(t,e,i,r):t},a.pullAt=fa,a.range=mu,a.rangeRight=bu,a.rearg=Ja,a.reject=function(t,e){return(b(t)?ze:jn)(t,Ka(wo(e,3)))},a.remove=function(t,e){var r=[];if(!t||!t.length)return r;var n=-1,u=[],o=t.length;for(e=wo(e,3);++n<o;){var c=t[n];e(c,n,t)&&(r.push(c),u.push(n))}return oi(t,u),r},a.rest=function(e,r){if("function"!=typeof e)throw new zt(t);return ui(e,r=r===i?r:xs(r))},a.reverse=la,a.sampleSize=function(t,e,r){return e=(r?Mo(t,e,r):e===i)?1:xs(e),(b(t)?ln:fi)(t,e)},a.set=function(t,e,r){return null==t?t:hi(t,e,r)},a.setWith=function(t,e,r,n){return n="function"==typeof n?n:i,null==t?t:hi(t,e,r,n)},a.shuffle=function(t){return(b(t)?hn:vi)(t)},a.slice=function(t,e,r){var n=null==t?0:t.length;return n?(r&&"number"!=typeof r&&Mo(t,e,r)?(e=0,r=n):(e=null==e?0:xs(e),r=r===i?n:xs(r)),yi(t,e,r)):[]},a.sortBy=rp,a.sortedUniq=function(t){return t&&t.length?wi(t):[]},a.sortedUniqBy=function(t,e){return t&&t.length?wi(t,wo(e,2)):[]},a.split=function(t,e,r){return r&&"number"!=typeof r&&Mo(t,e,r)&&(e=r=i),(r=r===i?y:r>>>0)?(t=q(t))&&("string"==typeof e||null!=e&&!ps(e))&&!(e=xi(e))&&mr(t)?Ti(Ar(t),0,r):t.split(e,r):[]},a.spread=function(e,r){if("function"!=typeof e)throw new zt(t);return r=null==r?0:Mr(xs(r),0),ui((function(t){var n=t[r],u=Ti(t,0,r);return n&&Ge(u,n),Ce(e,this,u)}))},a.tail=function(t){var e=null==t?0:t.length;return e?yi(t,1,e):[]},a.take=function(t,e,r){return t&&t.length?yi(t,0,(e=r||e===i?1:xs(e))<0?0:e):[]},a.takeRight=function(t,e,r){var n=null==t?0:t.length;return n?yi(t,(e=n-(e=r||e===i?1:xs(e)))<0?0:e,n):[]},a.takeRightWhile=function(t,e){return t&&t.length?ki(t,wo(e,3),!1,!0):[]},a.takeWhile=function(t,e){return t&&t.length?ki(t,wo(e,3)):[]},a.tap=function(t,e){return e(t),t},a.throttle=function(e,r,n){var o=!0,u=!0;if("function"!=typeof e)throw new zt(t);return us(n)&&(o="leading"in n?!!n.leading:o,u="trailing"in n?!!n.trailing:u),qa(e,r,{leading:o,maxWait:r,trailing:u})},a.thru=Ea,a.toArray=ws,a.toPairs=Hs,a.toPairsIn=Ks,a.toPath=function(t){return b(t)?Ke(t,Jo):ys(t)?[t]:Fi(Yo(q(t)))},a.toPlainObject=As,a.transform=function(t,e,r){var n=b(t),u=n||rs(t)||gs(t);if(e=wo(e,4),null==r){var o=t&&t.constructor;r=u?n?new o:[]:us(t)&&os(o)?$r(ie(t)):{}}return(u?Be:Nn)(t,(function(t,n,o){return e(r,t,n,o)})),r},a.unary=function(t){return Ca(t,1)},a.union=ha,a.unionBy=pa,a.unionWith=dl,a.uniq=function(t){return t&&t.length?Ei(t):[]},a.uniqBy=function(t,e){return t&&t.length?Ei(t,wo(e,2)):[]},a.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?Ei(t,i,e):[]},a.unset=function(t,e){return null==t||Oi(t,e)},a.unzip=da,a.unzipWith=va,a.update=function(t,e,r){return null==t?t:Ai(t,e,Mi(r))},a.updateWith=function(t,e,r,n){return n="function"==typeof n?n:i,null==t?t:Ai(t,e,Mi(r),n)},a.values=Gs,a.valuesIn=function(t){return null==t?[]:fr(t,Bs(t))},a.without=ya,a.words=ru,a.wrap=function(t,e){return Va(Mi(e),t)},a.xor=ga,a.xorBy=ma,a.xorWith=ba,a.zip=wa,a.zipObject=function(t,e){return ji(t||[],e||[],dn)},a.zipObjectDeep=function(t,e){return ji(t||[],e||[],hi)},a.zipWith=_a,a.entries=Hs,a.entriesIn=Ks,a.extend=Ss,a.extendWith=hr,hu(a,a),a.add=xu,a.attempt=nu,a.camelCase=Vs,a.capitalize=Ys,a.ceil=Eu,a.clamp=function(t,e,r){return r===i&&(r=e,e=i),r!==i&&(r=(r=Os(r))==r?r:0),e!==i&&(e=(e=Os(e))==e?e:0),wn(Os(t),e,r)},a.clone=function(t){return _n(t,4)},a.cloneDeep=function(t){return _n(t,5)},a.cloneDeepWith=function(t,e){return _n(t,5,e="function"==typeof e?e:i)},a.cloneWith=function(t,e){return _n(t,4,e="function"==typeof e?e:i)},a.conformsTo=function(t,e){return null==e||xn(t,e,Us(e))},a.deburr=Js,a.defaultTo=function(t,e){return null==t||t!=t?e:t},a.divide=Ou,a.endsWith=function(t,e,r){t=q(t),e=xi(e);var n=t.length,u=r=r===i?n:wn(xs(r),0,n);return(r-=e.length)>=0&&t.slice(r,u)==e},a.eq=Wa,a.escape=function(t){return(t=q(t))&&at.test(t)?t.replace(it,yr):t},a.escapeRegExp=function(t){return(t=q(t))&&vt.test(t)?t.replace(pt,"\\$&"):t},a.every=function(t,e,r){var n=b(t)?qe:Sn;return r&&Mo(t,e,r)&&(e=i),n(t,wo(e,3))},a.find=ka,a.findIndex=ta,a.findKey=function(t,e){return Qe(t,wo(e,3),Nn)},a.findLast=Sa,a.findLastIndex=ea,a.findLastKey=function(t,e){return Qe(t,wo(e,3),Tn)},a.floor=Au,a.forEach=Ia,a.forEachRight=ja,a.forIn=function(t,e){return null==t?t:Mn(t,wo(e,3),Bs)},a.forInRight=function(t,e){return null==t?t:Rn(t,wo(e,3),Bs)},a.forOwn=function(t,e){return t&&Nn(t,wo(e,3))},a.forOwnRight=function(t,e){return t&&Tn(t,wo(e,3))},a.get=Rs,a.gt=Qa,a.gte=Xa,a.has=function(t,e){return null!=t&&So(t,e,Dn)},a.hasIn=Ns,a.head=na,a.identity=uu,a.includes=function(t,e,r,n){t=ts(t)?t:Gs(t),r=r&&!n?xs(r):0;var u=t.length;return r<0&&(r=Mr(u+r,0)),vs(t)?r<=u&&t.indexOf(e,r)>-1:!!u&&Ze(t,e,r)>-1},a.indexOf=function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var u=null==r?0:xs(r);return u<0&&(u=Mr(n+u,0)),Ze(t,e,u)},a.inRange=function(t,e,r){return e=_s(e),r===i?(r=e,e=0):r=_s(r),function(t,e,r){return t>=Rr(e,r)&&t<Mr(e,r)}(t=Os(t),e,r)},a.invoke=Cs,a.isArguments=Za,a.isArray=b,a.isArrayBuffer=$a,a.isArrayLike=ts,a.isArrayLikeObject=es,a.isBoolean=function(t){return!0===t||!1===t||cs(t)&&rt(t)==O},a.isBuffer=rs,a.isDate=ns,a.isElement=function(t){return cs(t)&&1===t.nodeType&&!hs(t)},a.isEmpty=function(t){if(null==t)return!0;if(ts(t)&&(b(t)||"string"==typeof t||"function"==typeof t.splice||rs(t)||gs(t)||Za(t)))return!t.length;var e=ko(t);if(e==j||e==U)return!t.size;if(Lo(t))return!Jn(t).length;for(var r in t)if(Yt.call(t,r))return!1;return!0},a.isEqual=function(t,e){return Kn(t,e)},a.isEqualWith=function(t,e,r){var n=(r="function"==typeof r?r:i)?r(t,e):i;return n===i?Kn(t,e,i,r):!!n},a.isError=is,a.isFinite=function(t){return"number"==typeof t&&ir(t)},a.isFunction=os,a.isInteger=as,a.isLength=ss,a.isMap=fs,a.isMatch=function(t,e){return t===e||Gn(t,e,xo(e))},a.isMatchWith=function(t,e,r){return r="function"==typeof r?r:i,Gn(t,e,xo(e),r)},a.isNaN=function(t){return ls(t)&&t!=+t},a.isNative=function(t){if(To(t))throw new Lt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Vn(t)},a.isNil=function(t){return null==t},a.isNull=function(t){return null===t},a.isNumber=ls,a.isObject=us,a.isObjectLike=cs,a.isPlainObject=hs,a.isRegExp=ps,a.isSafeInteger=function(t){return as(t)&&t>=-d&&t<=d},a.isSet=ds,a.isString=vs,a.isSymbol=ys,a.isTypedArray=gs,a.isUndefined=function(t){return t===i},a.isWeakMap=function(t){return cs(t)&&ko(t)==z},a.isWeakSet=function(t){return cs(t)&&"[object WeakSet]"==rt(t)},a.join=function(t,e){return null==t?"":jr.call(t,e)},a.kebabCase=Ws,a.last=sa,a.lastIndexOf=function(t,e,r){var n=null==t?0:t.length;if(!n)return-1;var u=n;return r!==i&&(u=(u=xs(r))<0?Mr(n+u,0):Rr(u,n-1)),e==e?function(t,g,e){for(var r=e+1;r--;)if(t[r]===g)return r;return r}(t,e,u):Xe(t,er,u,!0)},a.lowerCase=Qs,a.lowerFirst=Xs,a.lt=ms,a.lte=bs,a.max=function(t){return t&&t.length?In(t,uu,Bn):i},a.maxBy=function(t,e){return t&&t.length?In(t,wo(e,2),Bn):i},a.mean=function(t){return rr(t,uu)},a.meanBy=function(t,e){return rr(t,wo(e,2))},a.min=function(t){return t&&t.length?In(t,uu,Qn):i},a.minBy=function(t,e){return t&&t.length?In(t,wo(e,2),Qn):i},a.stubArray=wu,a.stubFalse=_u,a.stubObject=function(){return{}},a.stubString=function(){return""},a.stubTrue=function(){return!0},a.multiply=ku,a.nth=function(t,e){return t&&t.length?ei(t,xs(e)):i},a.noConflict=function(){return Oe._===this&&(Oe._=Zt),this},a.noop=pu,a.now=La,a.pad=function(t,e,r){t=q(t);var n=(e=xs(e))?Or(t):0;if(!e||n>=e)return t;var u=(e-n)/2;return no(Ie(u),r)+t+no(ke(u),r)},a.padEnd=function(t,e,r){t=q(t);var n=(e=xs(e))?Or(t):0;return e&&n<e?t+no(e-n,r):t},a.padStart=function(t,e,r){t=q(t);var n=(e=xs(e))?Or(t):0;return e&&n<e?no(e-n,r)+t:t},a.parseInt=function(t,e,r){return r||null==e?e=0:e&&(e=+e),Tr(q(t).replace(yt,""),e||0)},a.random=function(t,e,r){if(r&&"boolean"!=typeof r&&Mo(t,e,r)&&(e=r=i),r===i&&("boolean"==typeof e?(r=e,e=i):"boolean"==typeof t&&(r=t,t=i)),t===i&&e===i?(t=0,e=1):(t=_s(t),e===i?(e=t,t=0):e=_s(e)),t>e){var n=t;t=e,e=n}if(r||t%1||e%1){var u=Lr();return Rr(t+u*(e-t+we("1e-"+((u+"").length-1))),e)}return ai(t,e)},a.reduce=function(t,e,r){var n=b(t)?Ve:or,u=arguments.length<3;return n(t,wo(e,4),r,u,An)},a.reduceRight=function(t,e,r){var n=b(t)?Ye:or,u=arguments.length<3;return n(t,wo(e,4),r,u,kn)},a.repeat=function(t,e,r){return e=(r?Mo(t,e,r):e===i)?1:xs(e),si(q(t),e)},a.replace=function(){var t=arguments,e=q(t[0]);return t.length<3?e:e.replace(t[1],t[2])},a.result=function(t,e,r){var n=-1,u=(e=Ri(e,t)).length;for(u||(u=1,t=i);++n<u;){var o=null==t?i:t[Jo(e[n])];o===i&&(n=u,o=r),t=os(o)?o.call(t):o}return t},a.round=Su,a.runInContext=M,a.sample=function(t){return(b(t)?fn:ci)(t)},a.size=function(t){if(null==t)return 0;if(ts(t))return vs(t)?Or(t):t.length;var e=ko(t);return e==j||e==U?t.size:Jn(t).length},a.snakeCase=Zs,a.some=function(t,e,r){var n=b(t)?Je:gi;return r&&Mo(t,e,r)&&(e=i),n(t,wo(e,3))},a.sortedIndex=function(t,e){return mi(t,e)},a.sortedIndexBy=function(t,e,r){return bi(t,e,wo(r,2))},a.sortedIndexOf=function(t,e){var r=null==t?0:t.length;if(r){var n=mi(t,e);if(n<r&&Wa(t[n],e))return n}return-1},a.sortedLastIndex=function(t,e){return mi(t,e,!0)},a.sortedLastIndexBy=function(t,e,r){return bi(t,e,wo(r,2),!0)},a.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var r=mi(t,e,!0)-1;if(Wa(t[r],e))return r}return-1},a.startCase=$s,a.startsWith=function(t,e,r){return t=q(t),r=null==r?0:wn(xs(r),0,t.length),e=xi(e),t.slice(r,r+e.length)==e},a.subtract=Iu,a.sum=function(t){return t&&t.length?ar(t,uu):0},a.sumBy=function(t,e){return t&&t.length?ar(t,wo(e,2)):0},a.template=function(t,e,r){var n=a.templateSettings;r&&Mo(t,e,r)&&(e=i),t=q(t),e=hr({},e,n,co);var o,c,u=hr({},e.imports,n.imports,co),f=Us(u),l=fr(u,f),h=0,d=e.interpolate||Rt,v="__p += '",y=Dt((e.escape||Rt).source+"|"+d.source+"|"+(d===ct?Ot:Rt).source+"|"+(e.evaluate||Rt).source+"|$","g"),m="//# sourceURL="+(Yt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ye+"]")+"\n";t.replace(y,(function(e,r,n,dt,f,l){return n||(n=dt),v+=t.slice(h,l).replace(Nt,gr),r&&(o=!0,v+="' +\n__e("+r+") +\n'"),f&&(c=!0,v+="';\n"+f+";\n__p += '"),n&&(v+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),h=l+e.length,e})),v+="';\n";var w=Yt.call(e,"variable")&&e.variable;if(w){if(xt.test(w))throw new Lt("Invalid `variable` option passed into `_.template`")}else v="with (obj) {\n"+v+"\n}\n";v=(c?v.replace($,""):v).replace(tt,"$1").replace(et,"$1;"),v="function("+(w||"obj")+") {\n"+(w?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(c?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+v+"return __p\n}";var _=nu((function(){return Ct(f,m+"return "+v).apply(i,l)}));if(_.source=v,is(_))throw _;return _},a.times=function(t,e){if((t=xs(t))<1||t>d)return[];var r=y,n=Rr(t,y);e=wo(e),t-=y;for(var u=sr(n,e);++r<t;)e(r);return u},a.toFinite=_s,a.toInteger=xs,a.toLength=Es,a.toLower=function(t){return q(t).toLowerCase()},a.toNumber=Os,a.toSafeInteger=function(t){return t?wn(xs(t),-d,d):0===t?t:0},a.toString=q,a.toUpper=function(t){return q(t).toUpperCase()},a.trim=function(t,e,r){if((t=q(t))&&(r||e===i))return ur(t);if(!t||!(e=xi(e)))return t;var n=Ar(t),u=Ar(e);return Ti(n,pr(n,u),dr(n,u)+1).join("")},a.trimEnd=function(t,e,r){if((t=q(t))&&(r||e===i))return t.slice(0,kr(t)+1);if(!t||!(e=xi(e)))return t;var n=Ar(t);return Ti(n,0,dr(n,Ar(e))+1).join("")},a.trimStart=function(t,e,r){if((t=q(t))&&(r||e===i))return t.replace(yt,"");if(!t||!(e=xi(e)))return t;var n=Ar(t);return Ti(n,pr(n,Ar(e))).join("")},a.truncate=function(t,e){var r=30,n="...";if(us(e)){var u="separator"in e?e.separator:u;r="length"in e?xs(e.length):r,n="omission"in e?xi(e.omission):n}var o=(t=q(t)).length;if(mr(t)){var c=Ar(t);o=c.length}if(r>=o)return t;var f=r-Or(n);if(f<1)return n;var l=c?Ti(c,0,f).join(""):t.slice(0,f);if(u===i)return l+n;if(c&&(f+=l.length-f),ps(u)){if(t.slice(f).search(u)){var h,d=l;for(u.global||(u=Dt(u.source,q(At.exec(u))+"g")),u.lastIndex=0;h=u.exec(d);)var v=h.index;l=l.slice(0,v===i?f:v)}}else if(t.indexOf(xi(u),f)!=f){var y=l.lastIndexOf(u);y>-1&&(l=l.slice(0,y))}return l+n},a.unescape=function(t){return(t=q(t))&&ot.test(t)?t.replace(nt,Sr):t},a.uniqueId=function(t){var e=++Jt;return q(t)+e},a.upperCase=tu,a.upperFirst=eu,a.each=Ia,a.eachRight=ja,a.first=na,hu(a,function(){var t={};return Nn(a,(function(e,r){Yt.call(a.prototype,r)||(t[r]=e)})),t}(),{chain:!1}),a.VERSION="4.17.21",Be(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){a[t].placeholder=a})),Be(["drop","take"],(function(t,e){rn.prototype[t]=function(r){r=r===i?1:Mr(xs(r),0);var n=this.__filtered__&&!e?new rn(this):this.clone();return n.__filtered__?n.__takeCount__=Rr(r,n.__takeCount__):n.__views__.push({size:Rr(r,y),type:t+(n.__dir__<0?"Right":"")}),n},rn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Be(["filter","map","takeWhile"],(function(t,e){var r=e+1,n=1==r||3==r;rn.prototype[t]=function(u){var t=this.clone();return t.__iteratees__.push({iteratee:wo(u,3),type:r}),t.__filtered__=t.__filtered__||n,t}})),Be(["head","last"],(function(t,e){var r="take"+(e?"Right":"");rn.prototype[t]=function(){return this[r](1).value()[0]}})),Be(["initial","tail"],(function(t,e){var r="drop"+(e?"":"Right");rn.prototype[t]=function(){return this.__filtered__?new rn(this):this[r](1)}})),rn.prototype.compact=function(){return this.filter(uu)},rn.prototype.find=function(t){return this.filter(t).head()},rn.prototype.findLast=function(t){return this.reverse().find(t)},rn.prototype.invokeMap=ui((function(t,e){return"function"==typeof t?new rn(this):this.map((function(r){return Fn(r,t,e)}))})),rn.prototype.reject=function(t){return this.filter(Ka(wo(t)))},rn.prototype.slice=function(t,e){t=xs(t);var r=this;return r.__filtered__&&(t>0||e<0)?new rn(r):(t<0?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==i&&(r=(e=xs(e))<0?r.dropRight(-e):r.take(e-t)),r)},rn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},rn.prototype.toArray=function(){return this.take(y)},Nn(rn.prototype,(function(t,e){var r=/^(?:filter|find|map|reject)|While$/.test(e),n=/^(?:head|last)$/.test(e),u=a[n?"take"+("last"==e?"Right":""):e],o=n||/^find/.test(e);u&&(a.prototype[e]=function(){var e=this.__wrapped__,c=n?[1]:arguments,f=e instanceof rn,l=c[0],h=f||b(e),d=function(t){var e=u.apply(a,Ge([t],c));return n&&v?e[0]:e};h&&r&&"function"==typeof l&&1!=l.length&&(f=h=!1);var v=this.__chain__,y=!!this.__actions__.length,m=o&&!v,w=f&&!y;if(!o&&h){e=w?e:new rn(this);var _=t.apply(e,c);return _.__actions__.push({func:Ea,args:[d],thisArg:i}),new en(_,v)}return m&&w?t.apply(this,c):(_=this.thru(d),m?n?_.value()[0]:_.value():_)})})),Be(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Ft[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:pop|shift)$/.test(t);a.prototype[t]=function(){var u=arguments;if(n&&!this.__chain__){var t=this.value();return e.apply(b(t)?t:[],u)}return this[r]((function(t){return e.apply(b(t)?t:[],u)}))}})),Nn(rn.prototype,(function(t,e){var r=a[e];if(r){var n=r.name+"";Yt.call(Kr,n)||(Kr[n]=[]),Kr[n].push({name:e,func:r})}})),Kr[$i(i,2).name]=[{name:"wrapper",func:i}],rn.prototype.clone=function(){var t=new rn(this.__wrapped__);return t.__actions__=Fi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Fi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Fi(this.__views__),t},rn.prototype.reverse=function(){if(this.__filtered__){var t=new rn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},rn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,r=b(t),n=e<0,u=r?t.length:0,o=function(t,e,r){for(var n=-1,u=r.length;++n<u;){var o=r[n],c=o.size;switch(o.type){case"drop":t+=c;break;case"dropRight":e-=c;break;case"take":e=Rr(e,t+c);break;case"takeRight":t=Mr(t,e-c)}}return{start:t,end:e}}(0,u,this.__views__),c=o.start,f=o.end,l=f-c,h=n?f:c-1,d=this.__iteratees__,v=d.length,y=0,m=Rr(l,this.__takeCount__);if(!r||!n&&u==l&&m==l)return Si(t,this.__actions__);var w=[];t:for(;l--&&y<m;){for(var _=-1,x=t[h+=e];++_<v;){var E=d[_],O=E.iteratee,dt=E.type,A=O(x);if(2==dt)x=A;else if(!A){if(1==dt)continue t;break t}}w[y++]=x}return w},a.prototype.at=Oa,a.prototype.chain=function(){return xa(this)},a.prototype.commit=function(){return new en(this.value(),this.__chain__)},a.prototype.next=function(){this.__values__===i&&(this.__values__=ws(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},a.prototype.plant=function(t){for(var e,r=this;r instanceof tn;){var n=Qo(r);n.__index__=0,n.__values__=i,e?u.__wrapped__=n:e=n;var u=n;r=r.__wrapped__}return u.__wrapped__=t,e},a.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof rn){var e=t;return this.__actions__.length&&(e=new rn(this)),(e=e.reverse()).__actions__.push({func:Ea,args:[la],thisArg:i}),new en(e,this.__chain__)}return this.thru(la)},a.prototype.toJSON=a.prototype.valueOf=a.prototype.value=function(){return Si(this.__wrapped__,this.__actions__)},a.prototype.first=a.prototype.head,le&&(a.prototype[le]=function(){return this}),a}();ke?((ke.exports=Ir)._=Ir,Ae._=Ir):Oe._=Ir}.call(C);var B=Object.defineProperty,D=Object.defineProperties,z=Object.getOwnPropertyDescriptors,F=Object.getOwnPropertySymbols,H=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable,G=function(t,s,i){return s in t?B(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i},V=function(t,s){for(var i in s||(s={}))H.call(s,i)&&G(t,i,s[i]);if(F){var e,r=S(F(s));try{for(r.s();!(e=r.n()).done;){i=e.value;K.call(s,i)&&G(t,i,s[i])}}catch(t){r.e(t)}finally{r.f()}}return t},Y=function(t,s){return D(t,z(s))};function J(t,s,i){var p,e=Object(o.ub)(t);return(null==(p=s.rpcMap)?void 0:p[e.reference])||"".concat("https://rpc.walletconnect.com/v1/","?chainId=").concat(e.namespace,":").concat(e.reference,"&projectId=").concat(i)}function W(t){return t.includes(":")?t.split(":")[1]:t}function Q(t){return t.map((function(s){return"".concat(s.split(":")[0],":").concat(s.split(":")[1])}))}function X(){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Z(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),p=Z(s);return U.exports.merge(i,p)}function Z(t){var s,i,p,e,r={};if(!Object(o.gb)(t))return r;for(var n=0,c=Object.entries(t);n<c.length;n++){var f=A(c[n],2),l=f[0],h=f[1],d=Object(o.M)(l)?[l]:h.chains,v=h.methods||[],y=h.events||[],m=h.rpcMap||{},w=Object(o.wb)(l);r[w]=Y(V(V({},r[w]),h),{chains:Object(o.rb)(d,null==(s=r[w])?void 0:s.chains),methods:Object(o.rb)(v,null==(i=r[w])?void 0:i.methods),events:Object(o.rb)(y,null==(p=r[w])?void 0:p.events),rpcMap:V(V({},m),null==(e=r[w])?void 0:e.rpcMap)})}return r}function $(t){return t.includes(":")?t.split(":")[2]:t}function tt(t){for(var s={},e=0,r=Object.entries(t);e<r.length;e++){var n=A(r[e],2),i=n[0],p=n[1],c=p.methods||[],f=p.events||[],l=p.accounts||[],h=Object(o.M)(i)?[i]:p.chains?p.chains:Q(p.accounts);s[i]={chains:h,methods:c,events:f,accounts:l}}return s}function et(t){return"number"==typeof t?t:t.includes("0x")?parseInt(t,16):(t=t.includes(":")?t.split(":")[1]:t,isNaN(Number(t))?t:Number(t))}var nt={},it=function(t){return nt[t]},ot=function(t,s){nt[t]=s},at=function(){return E((function t(s){_(this,t),this.name="polkadot",this.namespace=s.namespace,this.events=it("events"),this.client=it("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}),[{key:"updateNamespace",value:function(s){this.namespace=Object.assign(this.namespace,s)}},{key:"requestAccounts",value:function(){return this.getAccounts()}},{key:"getDefaultChain",value:function(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;var s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}},{key:"request",value:function(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider().request(s.request)}},{key:"setDefaultChain",value:function(s,i){this.httpProviders[s]||this.setHttpProvider(s,i),this.chainId=s,this.events.emit(L,"".concat(this.name,":").concat(s))}},{key:"getAccounts",value:function(){var t=this,s=this.namespace.accounts;return s&&s.filter((function(i){return i.split(":")[1]===t.chainId.toString()})).map((function(i){return i.split(":")[2]}))||[]}},{key:"createHttpProviders",value:function(){var t=this,s={};return this.namespace.chains.forEach((function(i){var p,e=W(i);s[e]=t.createHttpProvider(e,null==(p=t.namespace.rpcMap)?void 0:p[i])})),s}},{key:"getHttpProvider",value:function(){var s="".concat(this.name,":").concat(this.chainId),i=this.httpProviders[s];if(P(i)>"u")throw new Error("JSON-RPC provider for ".concat(s," not found"));return i}},{key:"setHttpProvider",value:function(s,i){var p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}},{key:"createHttpProvider",value:function(s,i){var p=i||J(s,this.namespace,this.client.core.projectId);if(!p)throw new Error("No RPC url provided for chainId: ".concat(s));return new l.a(new f.b(p,it("disableProviderPing")))}}])}(),st=Object.defineProperty,ut=Object.defineProperties,ct=Object.getOwnPropertyDescriptors,ft=Object.getOwnPropertySymbols,lt=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable,pt=function(t,s,i){return s in t?st(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i},vt=function(t,s){for(var i in s||(s={}))lt.call(s,i)&&pt(t,i,s[i]);if(ft){var e,r=S(ft(s));try{for(r.s();!(e=r.n()).done;){i=e.value;ht.call(s,i)&&pt(t,i,s[i])}}catch(t){r.e(t)}finally{r.f()}}return t},yt=function(t,s){return ut(t,ct(s))},gt=function(){return E((function t(s){_(this,t),this.name="eip155",this.namespace=s.namespace,this.events=it("events"),this.client=it("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}),[{key:"request",value:(r=w(y().mark((function t(s){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=s.request.method,t.next="eth_requestAccounts"===t.t0?3:"eth_accounts"===t.t0?4:"wallet_switchEthereumChain"===t.t0?5:"eth_chainId"===t.t0?8:"wallet_getCapabilities"===t.t0?9:12;break;case 3:case 4:return t.abrupt("return",this.getAccounts());case 5:return t.next=7,this.handleSwitchChain(s);case 7:return t.abrupt("return",t.sent);case 8:return t.abrupt("return",parseInt(this.getDefaultChain()));case 9:return t.next=11,this.getCapabilities(s);case 11:return t.abrupt("return",t.sent);case 12:if(!this.namespace.methods.includes(s.request.method)){t.next=18;break}return t.next=15,this.client.request(s);case 15:t.t1=t.sent,t.next=19;break;case 18:t.t1=this.getHttpProvider().request(s.request);case 19:return t.abrupt("return",t.t1);case 20:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"updateNamespace",value:function(s){this.namespace=Object.assign(this.namespace,s)}},{key:"setDefaultChain",value:function(s,i){this.httpProviders[s]||this.setHttpProvider(parseInt(s),i),this.chainId=parseInt(s),this.events.emit(L,"".concat(this.name,":").concat(s))}},{key:"requestAccounts",value:function(){return this.getAccounts()}},{key:"getDefaultChain",value:function(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;var s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}},{key:"createHttpProvider",value:function(s,i){var p=i||J("".concat(this.name,":").concat(s),this.namespace,this.client.core.projectId);if(!p)throw new Error("No RPC url provided for chainId: ".concat(s));return new l.a(new f.a(p,it("disableProviderPing")))}},{key:"setHttpProvider",value:function(s,i){var p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}},{key:"createHttpProviders",value:function(){var t=this,s={};return this.namespace.chains.forEach((function(i){var p,e=parseInt(W(i));s[e]=t.createHttpProvider(e,null==(p=t.namespace.rpcMap)?void 0:p[i])})),s}},{key:"getAccounts",value:function(){var t=this,s=this.namespace.accounts;return s?k(new Set(s.filter((function(i){return i.split(":")[1]===t.chainId.toString()})).map((function(i){return i.split(":")[2]})))):[]}},{key:"getHttpProvider",value:function(){var s=this.chainId,i=this.httpProviders[s];if(P(i)>"u")throw new Error("JSON-RPC provider for ".concat(s," not found"));return i}},{key:"handleSwitchChain",value:(e=w(y().mark((function t(s){var i,p,e,r;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=(e=s.request.params?null==(i=s.request.params[0])?void 0:i.chainId:"0x0").startsWith("0x")?e:"0x".concat(e),r=parseInt(e,16),!this.isChainApproved(r)){t.next=7;break}this.setDefaultChain("".concat(r)),t.next=14;break;case 7:if(!this.namespace.methods.includes("wallet_switchEthereumChain")){t.next=13;break}return t.next=10,this.client.request({topic:s.topic,request:{method:s.request.method,params:[{chainId:e}]},chainId:null==(p=this.namespace.chains)?void 0:p[0]});case 10:this.setDefaultChain("".concat(r)),t.next=14;break;case 13:throw new Error("Failed to switch to chain 'eip155:".concat(r,"'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method."));case 14:return t.abrupt("return",null);case 15:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"isChainApproved",value:function(s){return this.namespace.chains.includes("".concat(this.name,":").concat(s))}},{key:"getCapabilities",value:(t=w(y().mark((function t(s){var i,p,e,r,n,o,c;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null==(p=null==(i=s.request)?void 0:i.params)?void 0:p[0]){t.next=3;break}throw new Error("Missing address parameter in `wallet_getCapabilities` request");case 3:if(n=this.client.session.get(s.topic),null==(o=(null==(e=null==n?void 0:n.sessionProperties)?void 0:e.capabilities)||{})||!o[r]){t.next=6;break}return t.abrupt("return",null==o?void 0:o[r]);case 6:return t.next=8,this.client.request(s);case 8:return c=t.sent,t.prev=9,t.next=12,this.client.session.update(s.topic,{sessionProperties:yt(vt({},n.sessionProperties||{}),{capabilities:yt(vt({},o||{}),(f={},l=r,h=c,(l=O(l))in f?Object.defineProperty(f,l,{value:h,enumerable:!0,configurable:!0,writable:!0}):f[l]=h,f))})});case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(9),console.warn("Failed to update session with capabilities",t.t0);case 17:return t.abrupt("return",c);case 18:case"end":return t.stop()}var f,l,h}),t,this,[[9,14]])}))),function(e){return t.apply(this,arguments)})}]);var t,e,r}(),mt=function(){return E((function t(s){_(this,t),this.name="solana",this.namespace=s.namespace,this.events=it("events"),this.client=it("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}),[{key:"updateNamespace",value:function(s){this.namespace=Object.assign(this.namespace,s)}},{key:"requestAccounts",value:function(){return this.getAccounts()}},{key:"request",value:function(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider().request(s.request)}},{key:"setDefaultChain",value:function(s,i){this.httpProviders[s]||this.setHttpProvider(s,i),this.chainId=s,this.events.emit(L,"".concat(this.name,":").concat(s))}},{key:"getDefaultChain",value:function(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;var s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}},{key:"getAccounts",value:function(){var t=this,s=this.namespace.accounts;return s?k(new Set(s.filter((function(i){return i.split(":")[1]===t.chainId.toString()})).map((function(i){return i.split(":")[2]})))):[]}},{key:"createHttpProviders",value:function(){var t=this,s={};return this.namespace.chains.forEach((function(i){var p,e=W(i);s[e]=t.createHttpProvider(e,null==(p=t.namespace.rpcMap)?void 0:p[i])})),s}},{key:"getHttpProvider",value:function(){var s="".concat(this.name,":").concat(this.chainId),i=this.httpProviders[s];if(P(i)>"u")throw new Error("JSON-RPC provider for ".concat(s," not found"));return i}},{key:"setHttpProvider",value:function(s,i){var p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}},{key:"createHttpProvider",value:function(s,i){var p=i||J(s,this.namespace,this.client.core.projectId);if(!p)throw new Error("No RPC url provided for chainId: ".concat(s));return new l.a(new f.b(p,it("disableProviderPing")))}}])}(),bt=function(){return E((function t(s){_(this,t),this.name="cosmos",this.namespace=s.namespace,this.events=it("events"),this.client=it("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}),[{key:"updateNamespace",value:function(s){this.namespace=Object.assign(this.namespace,s)}},{key:"requestAccounts",value:function(){return this.getAccounts()}},{key:"getDefaultChain",value:function(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;var s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}},{key:"request",value:function(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider().request(s.request)}},{key:"setDefaultChain",value:function(s,i){this.httpProviders[s]||this.setHttpProvider(s,i),this.chainId=s,this.events.emit(L,"".concat(this.name,":").concat(this.chainId))}},{key:"getAccounts",value:function(){var t=this,s=this.namespace.accounts;return s?k(new Set(s.filter((function(i){return i.split(":")[1]===t.chainId.toString()})).map((function(i){return i.split(":")[2]})))):[]}},{key:"createHttpProviders",value:function(){var t=this,s={};return this.namespace.chains.forEach((function(i){var p,e=W(i);s[e]=t.createHttpProvider(e,null==(p=t.namespace.rpcMap)?void 0:p[i])})),s}},{key:"getHttpProvider",value:function(){var s="".concat(this.name,":").concat(this.chainId),i=this.httpProviders[s];if(P(i)>"u")throw new Error("JSON-RPC provider for ".concat(s," not found"));return i}},{key:"setHttpProvider",value:function(s,i){var p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}},{key:"createHttpProvider",value:function(s,i){var p=i||J(s,this.namespace,this.client.core.projectId);if(!p)throw new Error("No RPC url provided for chainId: ".concat(s));return new l.a(new f.b(p,it("disableProviderPing")))}}])}(),wt=function(){return E((function t(s){_(this,t),this.name="cip34",this.namespace=s.namespace,this.events=it("events"),this.client=it("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}),[{key:"updateNamespace",value:function(s){this.namespace=Object.assign(this.namespace,s)}},{key:"requestAccounts",value:function(){return this.getAccounts()}},{key:"getDefaultChain",value:function(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;var s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}},{key:"request",value:function(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider().request(s.request)}},{key:"setDefaultChain",value:function(s,i){this.httpProviders[s]||this.setHttpProvider(s,i),this.chainId=s,this.events.emit(L,"".concat(this.name,":").concat(this.chainId))}},{key:"getAccounts",value:function(){var t=this,s=this.namespace.accounts;return s?k(new Set(s.filter((function(i){return i.split(":")[1]===t.chainId.toString()})).map((function(i){return i.split(":")[2]})))):[]}},{key:"createHttpProviders",value:function(){var t=this,s={};return this.namespace.chains.forEach((function(i){var p=t.getCardanoRPCUrl(i),e=W(i);s[e]=t.createHttpProvider(e,p)})),s}},{key:"getHttpProvider",value:function(){var s="".concat(this.name,":").concat(this.chainId),i=this.httpProviders[s];if(P(i)>"u")throw new Error("JSON-RPC provider for ".concat(s," not found"));return i}},{key:"getCardanoRPCUrl",value:function(s){var i=this.namespace.rpcMap;if(i)return i[s]}},{key:"setHttpProvider",value:function(s,i){var p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}},{key:"createHttpProvider",value:function(s,i){var p=i||this.getCardanoRPCUrl(s);if(!p)throw new Error("No RPC url provided for chainId: ".concat(s));return new l.a(new f.b(p,it("disableProviderPing")))}}])}(),_t=function(){return E((function t(s){_(this,t),this.name="elrond",this.namespace=s.namespace,this.events=it("events"),this.client=it("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}),[{key:"updateNamespace",value:function(s){this.namespace=Object.assign(this.namespace,s)}},{key:"requestAccounts",value:function(){return this.getAccounts()}},{key:"request",value:function(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider().request(s.request)}},{key:"setDefaultChain",value:function(s,i){this.httpProviders[s]||this.setHttpProvider(s,i),this.chainId=s,this.events.emit(L,"".concat(this.name,":").concat(s))}},{key:"getDefaultChain",value:function(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;var s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}},{key:"getAccounts",value:function(){var t=this,s=this.namespace.accounts;return s?k(new Set(s.filter((function(i){return i.split(":")[1]===t.chainId.toString()})).map((function(i){return i.split(":")[2]})))):[]}},{key:"createHttpProviders",value:function(){var t=this,s={};return this.namespace.chains.forEach((function(i){var p,e=W(i);s[e]=t.createHttpProvider(e,null==(p=t.namespace.rpcMap)?void 0:p[i])})),s}},{key:"getHttpProvider",value:function(){var s="".concat(this.name,":").concat(this.chainId),i=this.httpProviders[s];if(P(i)>"u")throw new Error("JSON-RPC provider for ".concat(s," not found"));return i}},{key:"setHttpProvider",value:function(s,i){var p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}},{key:"createHttpProvider",value:function(s,i){var p=i||J(s,this.namespace,this.client.core.projectId);if(!p)throw new Error("No RPC url provided for chainId: ".concat(s));return new l.a(new f.b(p,it("disableProviderPing")))}}])}(),xt=function(){return E((function t(s){_(this,t),this.name="multiversx",this.namespace=s.namespace,this.events=it("events"),this.client=it("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}),[{key:"updateNamespace",value:function(s){this.namespace=Object.assign(this.namespace,s)}},{key:"requestAccounts",value:function(){return this.getAccounts()}},{key:"request",value:function(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider().request(s.request)}},{key:"setDefaultChain",value:function(s,i){this.httpProviders[s]||this.setHttpProvider(s,i),this.chainId=s,this.events.emit(L,"".concat(this.name,":").concat(s))}},{key:"getDefaultChain",value:function(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;var s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}},{key:"getAccounts",value:function(){var t=this,s=this.namespace.accounts;return s?k(new Set(s.filter((function(i){return i.split(":")[1]===t.chainId.toString()})).map((function(i){return i.split(":")[2]})))):[]}},{key:"createHttpProviders",value:function(){var t=this,s={};return this.namespace.chains.forEach((function(i){var p,e=W(i);s[e]=t.createHttpProvider(e,null==(p=t.namespace.rpcMap)?void 0:p[i])})),s}},{key:"getHttpProvider",value:function(){var s="".concat(this.name,":").concat(this.chainId),i=this.httpProviders[s];if(P(i)>"u")throw new Error("JSON-RPC provider for ".concat(s," not found"));return i}},{key:"setHttpProvider",value:function(s,i){var p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}},{key:"createHttpProvider",value:function(s,i){var p=i||J(s,this.namespace,this.client.core.projectId);if(!p)throw new Error("No RPC url provided for chainId: ".concat(s));return new l.a(new f.b(p,it("disableProviderPing")))}}])}(),Et=function(){return E((function t(s){_(this,t),this.name="near",this.namespace=s.namespace,this.events=it("events"),this.client=it("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}),[{key:"updateNamespace",value:function(s){this.namespace=Object.assign(this.namespace,s)}},{key:"requestAccounts",value:function(){return this.getAccounts()}},{key:"getDefaultChain",value:function(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;var s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}},{key:"request",value:function(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider().request(s.request)}},{key:"setDefaultChain",value:function(s,i){if(this.chainId=s,!this.httpProviders[s]){var p=i||J("".concat(this.name,":").concat(s),this.namespace);if(!p)throw new Error("No RPC url provided for chainId: ".concat(s));this.setHttpProvider(s,p)}this.events.emit(L,"".concat(this.name,":").concat(this.chainId))}},{key:"getAccounts",value:function(){var t=this,s=this.namespace.accounts;return s&&s.filter((function(i){return i.split(":")[1]===t.chainId.toString()})).map((function(i){return i.split(":")[2]}))||[]}},{key:"createHttpProviders",value:function(){var t=this,s={};return this.namespace.chains.forEach((function(i){var p;s[i]=t.createHttpProvider(i,null==(p=t.namespace.rpcMap)?void 0:p[i])})),s}},{key:"getHttpProvider",value:function(){var s="".concat(this.name,":").concat(this.chainId),i=this.httpProviders[s];if(P(i)>"u")throw new Error("JSON-RPC provider for ".concat(s," not found"));return i}},{key:"setHttpProvider",value:function(s,i){var p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}},{key:"createHttpProvider",value:function(s,i){var p=i||J(s,this.namespace);return P(p)>"u"?void 0:new l.a(new f.b(p,it("disableProviderPing")))}}])}(),Ot=function(){return E((function t(s){_(this,t),this.name=T,this.namespace=s.namespace,this.events=it("events"),this.client=it("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}),[{key:"updateNamespace",value:function(s){this.namespace.chains=k(new Set((this.namespace.chains||[]).concat(s.chains||[]))),this.namespace.accounts=k(new Set((this.namespace.accounts||[]).concat(s.accounts||[]))),this.namespace.methods=k(new Set((this.namespace.methods||[]).concat(s.methods||[]))),this.namespace.events=k(new Set((this.namespace.events||[]).concat(s.events||[]))),this.httpProviders=this.createHttpProviders()}},{key:"requestAccounts",value:function(){return this.getAccounts()}},{key:"request",value:function(s){return this.namespace.methods.includes(s.request.method)?this.client.request(s):this.getHttpProvider(s.chainId).request(s.request)}},{key:"setDefaultChain",value:function(s,i){this.httpProviders[s]||this.setHttpProvider(s,i),this.chainId=s,this.events.emit(L,"".concat(this.name,":").concat(s))}},{key:"getDefaultChain",value:function(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;var s=this.namespace.chains[0];if(!s)throw new Error("ChainId not found");return s.split(":")[1]}},{key:"getAccounts",value:function(){var t=this,s=this.namespace.accounts;return s?k(new Set(s.filter((function(i){return i.split(":")[1]===t.chainId.toString()})).map((function(i){return i.split(":")[2]})))):[]}},{key:"createHttpProviders",value:function(){var s,i,t=this,p={};return null==(i=null==(s=this.namespace)?void 0:s.accounts)||i.forEach((function(e){var r=Object(o.ub)(e);p["".concat(r.namespace,":").concat(r.reference)]=t.createHttpProvider(e)})),p}},{key:"getHttpProvider",value:function(s){var i=this.httpProviders[s];if(P(i)>"u")throw new Error("JSON-RPC provider for ".concat(s," not found"));return i}},{key:"setHttpProvider",value:function(s,i){var p=this.createHttpProvider(s,i);p&&(this.httpProviders[s]=p)}},{key:"createHttpProvider",value:function(s,i){var p=i||J(s,this.namespace,this.client.core.projectId);if(!p)throw new Error("No RPC url provided for chainId: ".concat(s));return new l.a(new f.b(p,it("disableProviderPing")))}}])}(),At=Object.defineProperty,kt=Object.defineProperties,St=Object.getOwnPropertyDescriptors,It=Object.getOwnPropertySymbols,jt=Object.prototype.hasOwnProperty,Pt=Object.prototype.propertyIsEnumerable,Mt=function(t,s,i){return s in t?At(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i},Rt=function(t,s){for(var i in s||(s={}))jt.call(s,i)&&Mt(t,i,s[i]);if(It){var e,r=S(It(s));try{for(r.s();!(e=r.n()).done;){i=e.value;Pt.call(s,i)&&Mt(t,i,s[i])}}catch(t){r.e(t)}finally{r.f()}}return t},Nt=function(t,s){return kt(t,St(s))},Tt=function(){function t(s){_(this,t),this.events=new d.a,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=s,this.logger=P(null==s?void 0:s.logger)<"u"&&"string"!=typeof(null==s?void 0:s.logger)?s.logger:Object(c.e)(Object(c.c)({level:(null==s?void 0:s.logger)||R})),this.disableProviderPing=(null==s?void 0:s.disableProviderPing)||!1}return E(t,[{key:"request",value:(B=w(y().mark((function t(s,i,p){var e,r,n,o;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.validateChain(i),r=A(e,2),n=r[0],o=r[1],this.session){t.next=3;break}throw new Error("Please call connect() before request()");case 3:return t.next=5,this.getProvider(n).request({request:Rt({},s),chainId:"".concat(n,":").concat(o),topic:this.session.topic,expiry:p});case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return B.apply(this,arguments)})},{key:"sendAsync",value:function(s,i,p,t){var e=(new Date).getTime();this.request(s,p,t).then((function(t){return i(null,Object(v.formatJsonRpcResult)(e,t))})).catch((function(t){return i(t,void 0)}))}},{key:"enable",value:(U=w(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.client){t.next=2;break}throw new Error("Sign Client not initialized");case 2:if(t.t0=this.session,t.t0){t.next=6;break}return t.next=6,this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});case 6:return t.next=8,this.requestAccounts();case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)}))),function(){return U.apply(this,arguments)})},{key:"disconnect",value:(C=w(y().mark((function t(){var s;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.session){t.next=2;break}throw new Error("Please call connect() before enable()");case 2:return t.next=4,this.client.disconnect({topic:null==(s=this.session)?void 0:s.topic,reason:Object(o.H)("USER_DISCONNECTED")});case 4:return t.next=6,this.cleanup();case 6:case"end":return t.stop()}}),t,this)}))),function(){return C.apply(this,arguments)})},{key:"connect",value:(M=w(y().mark((function t(s){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.client){t.next=2;break}throw new Error("Sign Client not initialized");case 2:return this.setNamespaces(s),t.next=5,this.cleanupPendingPairings();case 5:if(s.skipPairing){t.next=9;break}return t.next=8,this.pair(s.pairingTopic);case 8:return t.abrupt("return",t.sent);case 9:case"end":return t.stop()}}),t,this)}))),function(t){return M.apply(this,arguments)})},{key:"authenticate",value:(j=w(y().mark((function t(s){var e,i,p,r,n;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.client){t.next=2;break}throw new Error("Sign Client not initialized");case 2:return this.setNamespaces(s),t.next=5,this.cleanupPendingPairings();case 5:return t.next=7,this.client.authenticate(s);case 7:return e=t.sent,i=e.uri,p=e.response,i&&(this.uri=i,this.events.emit("display_uri",i)),t.next=13,p();case 13:return r=t.sent,this.session=r.session,this.session&&(n=tt(this.session.namespaces),this.namespaces=X(this.namespaces,n),this.persist("namespaces",this.namespaces),this.onConnect()),t.abrupt("return",r);case 16:case"end":return t.stop()}}),t,this)}))),function(t){return j.apply(this,arguments)})},{key:"on",value:function(s,i){this.events.on(s,i)}},{key:"once",value:function(s,i){this.events.once(s,i)}},{key:"removeListener",value:function(s,i){this.events.removeListener(s,i)}},{key:"off",value:function(s,i){this.events.off(s,i)}},{key:"isWalletConnect",get:function(){return!0}},{key:"pair",value:(I=w(y().mark((function t(s){var i,e,p,r,o=this;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.shouldAbortPairingAttempt=!1,i=0;case 2:if(!this.shouldAbortPairingAttempt){t.next=4;break}throw new Error("Pairing aborted");case 4:if(!(i>=this.maxPairingAttempts)){t.next=6;break}throw new Error("Max auto pairing attempts reached");case 6:return t.next=8,this.client.connect({pairingTopic:s,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});case 8:return e=t.sent,p=e.uri,r=e.approval,p&&(this.uri=p,this.events.emit("display_uri",p)),t.next=14,r().then((function(t){o.session=t;var e=tt(t.namespaces);o.namespaces=X(o.namespaces,e),o.persist("namespaces",o.namespaces)})).catch((function(t){if(t.message!==n.a)throw t;i++}));case 14:if(!this.session){t.next=2;break}case 15:return t.abrupt("return",(this.onConnect(),this.session));case 16:case"end":return t.stop()}}),t,this)}))),function(t){return I.apply(this,arguments)})},{key:"setDefaultChain",value:function(s,i){try{if(!this.session)return;var t=A(this.validateChain(s),2),p=t[0],e=t[1],r=this.getProvider(p);r.name===T?r.setDefaultChain("".concat(p,":").concat(e),i):r.setDefaultChain(e,i)}catch(p){if(!/Please call connect/.test(p.message))throw p}}},{key:"cleanupPendingPairings",value:(O=w(y().mark((function t(){var s,i,e,r,p,n=arguments;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=n.length>0&&void 0!==n[0]?n[0]:{},this.logger.info("Cleaning up inactive pairings..."),i=this.client.pairing.getAll(),!Object(o.X)(i)){t.next=26;break}e=S(i),t.prev=5,e.s();case 7:if((r=e.n()).done){t.next=17;break}if(p=r.value,!s.deletePairings){t.next=13;break}this.client.core.expirer.set(p.topic,0),t.next=15;break;case 13:return t.next=15,this.client.core.relayer.subscriber.unsubscribe(p.topic);case 15:t.next=7;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(5),e.e(t.t0);case 22:return t.prev=22,e.f(),t.finish(22);case 25:this.logger.info("Inactive pairings cleared: ".concat(i.length));case 26:case"end":return t.stop()}}),t,this,[[5,19,22,25]])}))),function(){return O.apply(this,arguments)})},{key:"abortPairingAttempt",value:function(){this.shouldAbortPairingAttempt=!0}},{key:"checkStorage",value:(x=w(y().mark((function t(){var s;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getFromStore("namespaces");case 2:return this.namespaces=t.sent,t.next=5,this.getFromStore("optionalNamespaces");case 5:if(t.t0=t.sent,t.t0){t.next=8;break}t.t0={};case 8:if(this.optionalNamespaces=t.t0,!this.client.session.length){t.next=12;break}s=this.client.session.keys.length-1,this.session=this.client.session.get(this.client.session.keys[s]),this.createProviders();case 12:case"end":return t.stop()}}),t,this)}))),function(){return x.apply(this,arguments)})},{key:"initialize",value:(m=w(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.logger.trace("Initialized"),t.next=3,this.createClient();case 3:return t.next=5,this.checkStorage();case 5:this.registerEventListeners();case 6:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)})},{key:"createClient",value:(h=w(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.providerOpts.client,t.t0){t.next=5;break}return t.next=4,n.b.init({logger:this.providerOpts.logger||R,relayUrl:this.providerOpts.relayUrl||"wss://relay.walletconnect.com",projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name});case 4:t.t0=t.sent;case 5:this.client=t.t0,this.logger.trace("SignClient Initialized");case 7:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"createProviders",value:function(){var t=this;if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");var s=k(new Set(Object.keys(this.session.namespaces).map((function(i){return Object(o.wb)(i)}))));ot("client",this.client),ot("events",this.events),ot("disableProviderPing",this.disableProviderPing),s.forEach((function(i){if(t.session){var p=function(t,s){var i=Object.keys(s.namespaces).filter((function(e){return e.includes(t)}));if(!i.length)return[];var p=[];return i.forEach((function(t){var e=s.namespaces[t].accounts;p.push.apply(p,k(e))})),p}(i,t.session),e=Q(p),r=X(t.namespaces,t.optionalNamespaces),n=Nt(Rt({},r[i]),{accounts:p,chains:e});switch(i){case"eip155":t.rpcProviders[i]=new gt({namespace:n});break;case"solana":t.rpcProviders[i]=new mt({namespace:n});break;case"cosmos":t.rpcProviders[i]=new bt({namespace:n});break;case"polkadot":t.rpcProviders[i]=new at({namespace:n});break;case"cip34":t.rpcProviders[i]=new wt({namespace:n});break;case"elrond":t.rpcProviders[i]=new _t({namespace:n});break;case"multiversx":t.rpcProviders[i]=new xt({namespace:n});break;case"near":t.rpcProviders[i]=new Et({namespace:n});break;default:t.rpcProviders[T]?t.rpcProviders[T].updateNamespace(n):t.rpcProviders[T]=new Ot({namespace:n})}}}))}},{key:"registerEventListeners",value:function(){var t=this;if(P(this.client)>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",(function(s){t.events.emit("session_ping",s)})),this.client.on("session_event",(function(s){var i=s.params,p=i.event;if("accountsChanged"===p.name){var e=p.data;e&&Object(o.X)(e)&&t.events.emit("accountsChanged",e.map($))}else if("chainChanged"===p.name){var r=i.chainId,n=i.event.data,c=Object(o.wb)(r),f=et(r)!==et(n)?"".concat(c,":").concat(et(n)):r;t.onChainChanged(f)}else t.events.emit(p.name,p.data);t.events.emit("session_event",s)})),this.client.on("session_update",(function(e){var p,s=e.topic,i=e.params,r=i.namespaces,n=null==(p=t.client)?void 0:p.session.get(s);t.session=Nt(Rt({},n),{namespaces:r}),t.onSessionUpdate(),t.events.emit("session_update",{topic:s,params:i})})),this.client.on("session_delete",function(){var e=w(y().mark((function e(s){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.cleanup();case 2:t.events.emit("session_delete",s),t.events.emit("disconnect",Nt(Rt({},Object(o.H)("USER_DISCONNECTED")),{data:s.topic}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.on(L,(function(s){t.onChainChanged(s,!0)}))}},{key:"getProvider",value:function(s){return this.rpcProviders[s]||this.rpcProviders[T]}},{key:"onSessionUpdate",value:function(){var t=this;Object.keys(this.rpcProviders).forEach((function(s){var i;t.getProvider(s).updateNamespace(null==(i=t.session)?void 0:i.namespaces[s])}))}},{key:"setNamespaces",value:function(s){var i=s.namespaces,p=s.optionalNamespaces,t=s.sessionProperties;i&&Object.keys(i).length&&(this.namespaces=i),p&&Object.keys(p).length&&(this.optionalNamespaces=p),this.sessionProperties=t,this.persist("namespaces",i),this.persist("optionalNamespaces",p)}},{key:"validateChain",value:function(s){var t=A((null==s?void 0:s.split(":"))||["",""],2),i=t[0],p=t[1];if(!this.namespaces||!Object.keys(this.namespaces).length)return[i,p];if(i&&!Object.keys(this.namespaces||{}).map((function(t){return Object(o.wb)(t)})).includes(i))throw new Error("Namespace '".concat(i,"' is not configured. Please call connect() first with namespace config."));if(i&&p)return[i,p];var e=Object(o.wb)(Object.keys(this.namespaces)[0]);return[e,this.rpcProviders[e].getDefaultChain()]}},{key:"requestAccounts",value:(l=w(y().mark((function t(){var e,r,s;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.validateChain(),r=A(e,1),s=r[0],t.next=3,this.getProvider(s).requestAccounts();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"onChainChanged",value:function(s){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.namespaces){var t=A(this.validateChain(s),2),p=t[0],e=t[1];e&&(i||this.getProvider(p).setDefaultChain(e),this.namespaces[p]?this.namespaces[p].defaultChain=e:this.namespaces["".concat(p,":").concat(e)]?this.namespaces["".concat(p,":").concat(e)].defaultChain=e:this.namespaces["".concat(p,":").concat(e)]={defaultChain:e},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",e))}}},{key:"onConnect",value:function(){this.createProviders(),this.events.emit("connect",{session:this.session})}},{key:"cleanup",value:(f=w(y().mark((function t(){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),t.next=9,this.cleanupPendingPairings({deletePairings:!0});case 9:case"end":return t.stop()}}),t,this)}))),function(){return f.apply(this,arguments)})},{key:"persist",value:function(s,i){this.client.core.storage.setItem("".concat(N,"/").concat(s),i)}},{key:"getFromStore",value:(r=w(y().mark((function t(s){return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.client.core.storage.getItem("".concat(N,"/").concat(s));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})}],[{key:"init",value:(e=w(y().mark((function e(s){var i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new t(s),e.next=3,i.initialize();case 3:return e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})}]);var e,r,f,l,h,m,x,O,I,j,M,C,U,B}(),Lt=Tt}).call(this,r(31))},function(t,e,r){"use strict";function n(t){try{return JSON.stringify(t)}catch(t){return'"[Circular]"'}}t.exports=function(t,e,r){var o=r&&r.stringify||n;if("object"==typeof t&&null!==t){var c=e.length+1;if(1===c)return t;var f=new Array(c);f[0]=o(t);for(var l=1;l<c;l++)f[l]=o(e[l]);return f.join(" ")}if("string"!=typeof t)return t;var h=e.length;if(0===h)return t;for(var d="",a=0,v=-1,y=t&&t.length||0,i=0;i<y;){if(37===t.charCodeAt(i)&&i+1<y){switch(v=v>-1?v:0,t.charCodeAt(i+1)){case 100:case 102:if(a>=h)break;if(null==e[a])break;v<i&&(d+=t.slice(v,i)),d+=Number(e[a]),v=i+2,i++;break;case 105:if(a>=h)break;if(null==e[a])break;v<i&&(d+=t.slice(v,i)),d+=Math.floor(Number(e[a])),v=i+2,i++;break;case 79:case 111:case 106:if(a>=h)break;if(void 0===e[a])break;v<i&&(d+=t.slice(v,i));var m=typeof e[a];if("string"===m){d+="'"+e[a]+"'",v=i+2,i++;break}if("function"===m){d+=e[a].name||"<anonymous>",v=i+2,i++;break}d+=o(e[a]),v=i+2,i++;break;case 115:if(a>=h)break;v<i&&(d+=t.slice(v,i)),d+=String(e[a]),v=i+2,i++;break;case 37:v<i&&(d+=t.slice(v,i)),d+="%",v=i+2,i++,a--}++a}++i}if(-1===v)return t;v<y&&(d+=t.slice(v));return d}},function(t,e,r){"use strict";r.d(e,"a",(function(){return R})),r.d(e,"b",(function(){return R}));var n=r(333),o=r(442),c=r.n(o),f=r(342),l=r(343);function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function d(){d=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof x?e:x,a=Object.create(i.prototype),c=new N(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function v(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var y="suspendedStart",m="suspendedYield",w="executing",s="completed",_={};function x(){}function E(){}function O(){}var p={};f(p,a,(function(){return this}));var A=Object.getPrototypeOf,k=A&&A(A(T([])));k&&k!==r&&n.call(k,a)&&(p=k);var g=O.prototype=x.prototype=Object.create(p);function S(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function r(o,c,i,a){var f=v(t[o],t,c);if("throw"!==f.type){var u=f.arg,l=u.value;return l&&"object"==h(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,a)}),(function(t){r("throw",t,i,a)})):e.resolve(l).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,a)}))}a(f.arg)}var c;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return c=c?c.then(o,o):o()}})}function j(e,r,n){var o=y;return function(i,a){if(o===w)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===_)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=w;var p=v(e,r,n);if("normal"===p.type){if(o=n.done?s:m,p.arg===_)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var i=v(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,_;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,_):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(h(e)+" is not iterable")}return E.prototype=O,o(g,"constructor",{value:O,configurable:!0}),o(O,"constructor",{value:E,configurable:!0}),E.displayName=f(O,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,O):(t.__proto__=O,f(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},S(I.prototype),f(I.prototype,c,(function(){return this})),e.AsyncIterator=I,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new I(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(g),f(g,u,"Generator"),f(g,a,(function(){return this})),f(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var c=this.tryEntries.length-1;c>=0;--c){var i=this.tryEntries[c],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var f=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(f&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(f){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),_}},e}function v(t,e,r,n,o,a,c){try{var i=t[a](c),u=i.value}catch(t){return void r(t)}i.done?e(u):Promise.resolve(u).then(n,o)}function y(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){v(a,n,o,c,f,"next",t)}function f(t){v(a,n,o,c,f,"throw",t)}c(void 0)}))}}function m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,w(n.key),n)}}function w(t){var i=function(t,e){if("object"!=h(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=h(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==h(i)?i:i+""}function _(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,a){if(t){if("string"==typeof t)return x(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?x(t,a):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,c=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw c}}}}function x(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,r=Array(a);e<a;e++)r[e]=t[e];return r}var E=Object.defineProperty,O=Object.defineProperties,A=Object.getOwnPropertyDescriptors,k=Object.getOwnPropertySymbols,S=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,j=function(t,e,r){return e in t?E(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},p=function(t,e){for(var r in e||(e={}))S.call(e,r)&&j(t,r,e[r]);if(k){var n,o=_(k(e));try{for(o.s();!(n=o.n()).done;){r=n.value;I.call(e,r)&&j(t,r,e[r])}}catch(t){o.e(t)}finally{o.f()}}return t},P=function(t,e){return O(t,A(e))},M={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"},R=function(){return t=function t(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.disableProviderPing=r,this.events=new n.EventEmitter,this.isAvailable=!1,this.registering=!1,!Object(l.isHttpUrl)(e))throw new Error("Provided URL is not compatible with HTTP connection: ".concat(e));this.url=e,this.disableProviderPing=r},e=[{key:"connected",get:function(){return this.isAvailable}},{key:"connecting",get:function(){return this.registering}},{key:"on",value:function(t,e){this.events.on(t,e)}},{key:"once",value:function(t,e){this.events.once(t,e)}},{key:"off",value:function(t,e){this.events.off(t,e)}},{key:"removeListener",value:function(t,e){this.events.removeListener(t,e)}},{key:"open",value:(_=y(d().mark((function t(){var e,r=arguments;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:this.url,t.next=3,this.register(e);case 3:case"end":return t.stop()}}),t,this)}))),function(){return _.apply(this,arguments)})},{key:"close",value:(w=y(d().mark((function t(){return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isAvailable){t.next=2;break}throw new Error("Connection already closed");case 2:this.onClose();case 3:case"end":return t.stop()}}),t,this)}))),function(){return w.apply(this,arguments)})},{key:"send",value:(v=y(d().mark((function t(e){var r,s;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.isAvailable,t.t0){t.next=4;break}return t.next=4,this.register();case 4:return t.prev=4,r=Object(f.b)(e),t.next=8,c()(this.url,P(p({},M),{body:r}));case 8:return t.next=10,t.sent.json();case 10:s=t.sent,this.onPayload({data:s}),t.next=17;break;case 14:t.prev=14,t.t1=t.catch(4),this.onError(e.id,t.t1);case 17:case"end":return t.stop()}}),t,this,[[4,14]])}))),function(t){return v.apply(this,arguments)})},{key:"register",value:(o=y(d().mark((function t(){var e,r,n,s,o=this,v=arguments;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=v.length>0&&void 0!==v[0]?v[0]:this.url,Object(l.isHttpUrl)(e)){t.next=3;break}throw new Error("Provided URL is not compatible with HTTP connection: ".concat(e));case 3:if(!this.registering){t.next=6;break}return r=this.events.getMaxListeners(),t.abrupt("return",((this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((function(s,i){o.events.once("register_error",(function(t){o.resetMaxListeners(),i(t)})),o.events.once("open",(function(){if(o.resetMaxListeners(),h(o.isAvailable)>"u")return i(new Error("HTTP connection is missing or invalid"));s()}))}))));case 6:if(this.url=e,this.registering=!0,t.prev=7,this.disableProviderPing){t.next=12;break}return n=Object(f.b)({id:1,jsonrpc:"2.0",method:"test",params:[]}),t.next=12,c()(e,P(p({},M),{body:n}));case 12:this.onOpen(),t.next=19;break;case 15:throw t.prev=15,t.t0=t.catch(7),s=this.parseError(t.t0),this.events.emit("register_error",s),this.onClose(),s;case 19:case"end":return t.stop()}}),t,this,[[7,15]])}))),function(){return o.apply(this,arguments)})},{key:"onOpen",value:function(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}},{key:"onClose",value:function(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}},{key:"onPayload",value:function(t){if(!(h(t.data)>"u")){var e="string"==typeof t.data?Object(f.a)(t.data):t.data;this.events.emit("payload",e)}}},{key:"onError",value:function(t,e){var s=this.parseError(e),i=s.message||s.toString(),r=Object(l.formatJsonRpcError)(t,i);this.events.emit("payload",r)}},{key:"parseError",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.url;return Object(l.parseConnectionError)(t,e,"HTTP")}},{key:"resetMaxListeners",value:function(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}}],e&&m(t.prototype,e),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,o,v,w,_}()},function(t,e){var r="undefined"!=typeof self?self:this,n=function(){function t(){this.fetch=!1,this.DOMException=r.DOMException}return t.prototype=r,new t}();!function(t){!function(e){var r="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,o="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),c="FormData"in t,f="ArrayBuffer"in t;if(f)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(t){return t&&l.indexOf(Object.prototype.toString.call(t))>-1};function d(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function v(t){return"string"!=typeof t&&(t=String(t)),t}function y(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function m(t){this.map={},t instanceof m?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(header){this.append(header[0],header[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function w(body){if(body.bodyUsed)return Promise.reject(new TypeError("Already read"));body.bodyUsed=!0}function _(t){return new Promise((function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}}))}function x(t){var e=new FileReader,r=_(e);return e.readAsArrayBuffer(t),r}function E(t){if(t.slice)return t.slice(0);var view=new Uint8Array(t.byteLength);return view.set(new Uint8Array(t)),view.buffer}function O(){return this.bodyUsed=!1,this._initBody=function(body){var t;this._bodyInit=body,body?"string"==typeof body?this._bodyText=body:o&&Blob.prototype.isPrototypeOf(body)?this._bodyBlob=body:c&&FormData.prototype.isPrototypeOf(body)?this._bodyFormData=body:r&&URLSearchParams.prototype.isPrototypeOf(body)?this._bodyText=body.toString():f&&o&&((t=body)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=E(body.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):f&&(ArrayBuffer.prototype.isPrototypeOf(body)||h(body))?this._bodyArrayBuffer=E(body):this._bodyText=body=Object.prototype.toString.call(body):this._bodyText="",this.headers.get("content-type")||("string"==typeof body?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(body)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var t=w(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?w(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(x)}),this.text=function(){var t,e,r,n=w(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,r=_(e),e.readAsText(t),r;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var view=new Uint8Array(t),e=new Array(view.length),i=0;i<view.length;i++)e[i]=String.fromCharCode(view[i]);return e.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c&&(this.formData=function(){return this.text().then(S)}),this.json=function(){return this.text().then(JSON.parse)},this}m.prototype.append=function(t,e){t=d(t),e=v(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},m.prototype.delete=function(t){delete this.map[d(t)]},m.prototype.get=function(t){return t=d(t),this.has(t)?this.map[t]:null},m.prototype.has=function(t){return this.map.hasOwnProperty(d(t))},m.prototype.set=function(t,e){this.map[d(t)]=v(e)},m.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},m.prototype.keys=function(){var t=[];return this.forEach((function(e,r){t.push(r)})),y(t)},m.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),y(t)},m.prototype.entries=function(){var t=[];return this.forEach((function(e,r){t.push([r,e])})),y(t)},n&&(m.prototype[Symbol.iterator]=m.prototype.entries);var A=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function k(input,t){var e,r,body=(t=t||{}).body;if(input instanceof k){if(input.bodyUsed)throw new TypeError("Already read");this.url=input.url,this.credentials=input.credentials,t.headers||(this.headers=new m(input.headers)),this.method=input.method,this.mode=input.mode,this.signal=input.signal,body||null==input._bodyInit||(body=input._bodyInit,input.bodyUsed=!0)}else this.url=String(input);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new m(t.headers)),this.method=(e=t.method||this.method||"GET",r=e.toUpperCase(),A.indexOf(r)>-1?r:e),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(body)}function S(body){var form=new FormData;return body.trim().split("&").forEach((function(t){if(t){var e=t.split("="),r=e.shift().replace(/\+/g," "),n=e.join("=").replace(/\+/g," ");form.append(decodeURIComponent(r),decodeURIComponent(n))}})),form}function I(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new m(e.headers),this.url=e.url||"",this._initBody(t)}k.prototype.clone=function(){return new k(this,{body:this._bodyInit})},O.call(k.prototype),O.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},I.error=function(){var t=new I(null,{status:0,statusText:""});return t.type="error",t};var j=[301,302,303,307,308];I.redirect=function(t,e){if(-1===j.indexOf(e))throw new RangeError("Invalid status code");return new I(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var r=Error(t);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function P(input,t){return new Promise((function(r,n){var c=new k(input,t);if(c.signal&&c.signal.aborted)return n(new e.DOMException("Aborted","AbortError"));var f=new XMLHttpRequest;function l(){f.abort()}f.onload=function(){var t,e,n={status:f.status,statusText:f.statusText,headers:(t=f.getAllResponseHeaders()||"",e=new m,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(line){var t=line.split(":"),r=t.shift().trim();if(r){var n=t.join(":").trim();e.append(r,n)}})),e)};n.url="responseURL"in f?f.responseURL:n.headers.get("X-Request-URL");var body="response"in f?f.response:f.responseText;r(new I(body,n))},f.onerror=function(){n(new TypeError("Network request failed"))},f.ontimeout=function(){n(new TypeError("Network request failed"))},f.onabort=function(){n(new e.DOMException("Aborted","AbortError"))},f.open(c.method,c.url,!0),"include"===c.credentials?f.withCredentials=!0:"omit"===c.credentials&&(f.withCredentials=!1),"responseType"in f&&o&&(f.responseType="blob"),c.headers.forEach((function(t,e){f.setRequestHeader(e,t)})),c.signal&&(c.signal.addEventListener("abort",l),f.onreadystatechange=function(){4===f.readyState&&c.signal.removeEventListener("abort",l)}),f.send(void 0===c._bodyInit?null:c._bodyInit)}))}P.polyfill=!0,t.fetch||(t.fetch=P,t.Headers=m,t.Request=k,t.Response=I),e.Headers=m,e.Request=k,e.Response=I,e.fetch=P,Object.defineProperty(e,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var o=n;(e=o.fetch).default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,t.exports=e},function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}r.r(e),r.d(e,"__extends",(function(){return c})),r.d(e,"__assign",(function(){return f})),r.d(e,"__rest",(function(){return l})),r.d(e,"__decorate",(function(){return h})),r.d(e,"__param",(function(){return d})),r.d(e,"__metadata",(function(){return v})),r.d(e,"__awaiter",(function(){return y})),r.d(e,"__generator",(function(){return m})),r.d(e,"__createBinding",(function(){return w})),r.d(e,"__exportStar",(function(){return _})),r.d(e,"__values",(function(){return x})),r.d(e,"__read",(function(){return E})),r.d(e,"__spread",(function(){return O})),r.d(e,"__spreadArrays",(function(){return A})),r.d(e,"__await",(function(){return k})),r.d(e,"__asyncGenerator",(function(){return S})),r.d(e,"__asyncDelegator",(function(){return I})),r.d(e,"__asyncValues",(function(){return j})),r.d(e,"__makeTemplateObject",(function(){return P})),r.d(e,"__importStar",(function(){return M})),r.d(e,"__importDefault",(function(){return R})),r.d(e,"__classPrivateFieldGet",(function(){return N})),r.d(e,"__classPrivateFieldSet",(function(){return T}));var o=function(t,b){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])},o(t,b)};function c(t,b){function e(){this.constructor=t}o(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}var f=function(){return f=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},f.apply(this,arguments)};function l(s,t){var e={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&t.indexOf(p)<0&&(e[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(p=Object.getOwnPropertySymbols(s);i<p.length;i++)t.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(e[p[i]]=s[p[i]])}return e}function h(t,e,r,desc){var o,c=arguments.length,f=c<3?e:null===desc?desc=Object.getOwnPropertyDescriptor(e,r):desc;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)f=Reflect.decorate(t,e,r,desc);else for(var i=t.length-1;i>=0;i--)(o=t[i])&&(f=(c<3?o(f):c>3?o(e,r,f):o(e,r))||f);return c>3&&f&&Object.defineProperty(e,r,f),f}function d(t,e){return function(r,n){e(r,n,t)}}function v(t,e){if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function y(t,e,r,n){return new(r||(r=Promise))((function(o,c){function f(t){try{h(n.next(t))}catch(t){c(t)}}function l(t){try{h(n.throw(t))}catch(t){c(t)}}function h(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(f,l)}h((n=n.apply(t,e||[])).next())}))}function m(t,body){var e,r,n,g,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return g={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function c(c){return function(f){return function(c){if(e)throw new TypeError("Generator is already executing.");for(;o;)try{if(e=1,r&&(n=2&c[0]?r.return:c[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,c[1])).done)return n;switch(r=0,n&&(c=[2&c[0],n.value]),c[0]){case 0:case 1:n=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(n=o.trys,(n=n.length>0&&n[n.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!n||c[1]>n[0]&&c[1]<n[3])){o.label=c[1];break}if(6===c[0]&&o.label<n[1]){o.label=n[1],n=c;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(c);break}n[2]&&o.ops.pop(),o.trys.pop();continue}c=body.call(t,o)}catch(t){c=[6,t],r=0}finally{e=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,f])}}}function w(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}function _(t,e){for(var p in t)"default"===p||e.hasOwnProperty(p)||(e[p]=t[p])}function x(t){var s="function"==typeof Symbol&&Symbol.iterator,e=s&&t[s],i=0;if(e)return e.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")}function E(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)c.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return c}function O(){for(var t=[],i=0;i<arguments.length;i++)t=t.concat(E(arguments[i]));return t}function A(){for(var s=0,i=0,t=arguments.length;i<t;i++)s+=arguments[i].length;var e=Array(s),r=0;for(i=0;i<t;i++)for(var a=arguments[i],n=0,o=a.length;n<o;n++,r++)e[r]=a[n];return e}function k(t){return this instanceof k?(this.v=t,this):new k(t)}function S(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,g=r.apply(t,e||[]),q=[];return i={},n("next"),n("throw"),n("return"),i[Symbol.asyncIterator]=function(){return this},i;function n(t){g[t]&&(i[t]=function(e){return new Promise((function(a,b){q.push([t,e,a,b])>1||o(t,e)}))})}function o(t,e){try{(r=g[t](e)).value instanceof k?Promise.resolve(r.value.v).then(c,f):l(q[0][2],r)}catch(t){l(q[0][3],t)}var r}function c(t){o("next",t)}function f(t){o("throw",t)}function l(t,e){t(e),q.shift(),q.length&&o(q[0][0],q[0][1])}}function I(t){var i,p;return i={},e("next"),e("throw",(function(t){throw t})),e("return"),i[Symbol.iterator]=function(){return this},i;function e(e,r){i[e]=t[e]?function(n){return(p=!p)?{value:k(t[e](n)),done:"return"===e}:r?r(n):n}:r}}function j(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,e=t[Symbol.asyncIterator];return e?e.call(t):(t=x(t),i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i);function r(e){i[e]=t[e]&&function(r){return new Promise((function(n,o){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,o,(r=t[e](r)).done,r.value)}))}}}function P(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function M(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function R(t){return t&&t.__esModule?t:{default:t}}function N(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function T(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}},function(t,e,r){"use strict";(function(t){function r(){return(null==t?void 0:t.crypto)||(null==t?void 0:t.msCrypto)||{}}function n(){var t=r();return t.subtle||t.webkitSubtle}Object.defineProperty(e,"__esModule",{value:!0}),e.isBrowserCryptoAvailable=e.getSubtleCrypto=e.getBrowerCrypto=void 0,e.getBrowerCrypto=r,e.getSubtleCrypto=n,e.isBrowserCryptoAvailable=function(){return!!r()&&!!n()}}).call(this,r(31))},function(t,e,r){"use strict";(function(t){function r(){return"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product}function n(){return void 0!==t&&void 0!==t.versions&&void 0!==t.versions.node}Object.defineProperty(e,"__esModule",{value:!0}),e.isBrowser=e.isNode=e.isReactNative=void 0,e.isReactNative=r,e.isNode=n,e.isBrowser=function(){return!r()&&!n()}}).call(this,r(164))},function(t,e,r){"use strict";(function(t){var n=r(447),o=r(448),c=r(449);function f(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function l(t,e){if(f()<e)throw new RangeError("Invalid typed array length");return h.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=h.prototype:(null===t&&(t=new h(e)),t.length=e),t}function h(t,e,r){if(!(h.TYPED_ARRAY_SUPPORT||this instanceof h))return new h(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return y(this,t)}return d(this,t,e,r)}function d(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n);h.TYPED_ARRAY_SUPPORT?(t=e).__proto__=h.prototype:t=m(t,e);return t}(t,e,r,n):"string"==typeof e?function(t,e,r){"string"==typeof r&&""!==r||(r="utf8");if(!h.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|_(e,r);t=l(t,n);var o=t.write(e,r);o!==n&&(t=t.slice(0,o));return t}(t,e,r):function(t,e){if(h.isBuffer(e)){var r=0|w(e.length);return 0===(t=l(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?l(t,0):m(t,e);if("Buffer"===e.type&&c(e.data))return m(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function v(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function y(t,e){if(v(e),t=l(t,e<0?0:0|w(e)),!h.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function m(t,e){var r=e.length<0?0:0|w(e.length);t=l(t,r);for(var i=0;i<r;i+=1)t[i]=255&e[i];return t}function w(t){if(t>=f())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f().toString(16)+" bytes");return 0|t}function _(t,e){if(h.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Q(t).length;default:if(n)return W(t).length;e=(""+e).toLowerCase(),n=!0}}function x(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return U(this,e,r);case"utf8":case"utf-8":return N(this,e,r);case"ascii":return L(this,e,r);case"latin1":case"binary":return C(this,e,r);case"base64":return R(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function E(b,t,e){var i=b[t];b[t]=b[e],b[e]=i}function O(t,e,r,n,o){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=o?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(o)return-1;r=t.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof e&&(e=h.from(e,n)),h.isBuffer(e))return 0===e.length?-1:A(t,e,r,n,o);if("number"==typeof e)return e&=255,h.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):A(t,[e],r,n,o);throw new TypeError("val must be string, number or Buffer")}function A(t,e,r,n,o){var i,c=1,f=t.length,l=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;c=2,f/=2,l/=2,r/=2}function h(t,i){return 1===c?t[i]:t.readUInt16BE(i*c)}if(o){var d=-1;for(i=r;i<f;i++)if(h(t,i)===h(e,-1===d?0:i-d)){if(-1===d&&(d=i),i-d+1===l)return d*c}else-1!==d&&(i-=i-d),d=-1}else for(r+l>f&&(r=f-l),i=r;i>=0;i--){for(var v=!0,y=0;y<l;y++)if(h(t,i+y)!==h(e,y)){v=!1;break}if(v)return i}return-1}function k(t,e,r,n){r=Number(r)||0;var o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;var c=e.length;if(c%2!=0)throw new TypeError("Invalid hex string");n>c/2&&(n=c/2);for(var i=0;i<n;++i){var f=parseInt(e.substr(2*i,2),16);if(isNaN(f))return i;t[r+i]=f}return i}function S(t,e,r,n){return X(W(e,t.length-r),t,r,n)}function I(t,e,r,n){return X(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,r,n)}function j(t,e,r,n){return I(t,e,r,n)}function P(t,e,r,n){return X(Q(e),t,r,n)}function M(t,e,r,n){return X(function(t,e){for(var r,n,o,c=[],i=0;i<t.length&&!((e-=2)<0);++i)n=(r=t.charCodeAt(i))>>8,o=r%256,c.push(o),c.push(n);return c}(e,t.length-r),t,r,n)}function R(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function N(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o,c,f,l,h=t[i],d=null,v=h>239?4:h>223?3:h>191?2:1;if(i+v<=r)switch(v){case 1:h<128&&(d=h);break;case 2:128==(192&(o=t[i+1]))&&(l=(31&h)<<6|63&o)>127&&(d=l);break;case 3:o=t[i+1],c=t[i+2],128==(192&o)&&128==(192&c)&&(l=(15&h)<<12|(63&o)<<6|63&c)>2047&&(l<55296||l>57343)&&(d=l);break;case 4:o=t[i+1],c=t[i+2],f=t[i+3],128==(192&o)&&128==(192&c)&&128==(192&f)&&(l=(15&h)<<18|(63&o)<<12|(63&c)<<6|63&f)>65535&&l<1114112&&(d=l)}null===d?(d=65533,v=1):d>65535&&(d-=65536,n.push(d>>>10&1023|55296),d=56320|1023&d),n.push(d),i+=v}return function(t){var e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);var r="",i=0;for(;i<e;)r+=String.fromCharCode.apply(String,t.slice(i,i+=T));return r}(n)}e.Buffer=h,e.SlowBuffer=function(t){+t!=t&&(t=0);return h.alloc(+t)},e.INSPECT_MAX_BYTES=50,h.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=f(),h.poolSize=8192,h._augment=function(t){return t.__proto__=h.prototype,t},h.from=function(t,e,r){return d(null,t,e,r)},h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0})),h.alloc=function(t,e,r){return function(t,e,r,n){return v(e),e<=0?l(t,e):void 0!==r?"string"==typeof n?l(t,e).fill(r,n):l(t,e).fill(r):l(t,e)}(null,t,e,r)},h.allocUnsafe=function(t){return y(null,t)},h.allocUnsafeSlow=function(t){return y(null,t)},h.isBuffer=function(b){return!(null==b||!b._isBuffer)},h.compare=function(a,b){if(!h.isBuffer(a)||!h.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var t=a.length,e=b.length,i=0,r=Math.min(t,e);i<r;++i)if(a[i]!==b[i]){t=a[i],e=b[i];break}return t<e?-1:e<t?1:0},h.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(t,e){if(!c(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return h.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var r=h.allocUnsafe(e),n=0;for(i=0;i<t.length;++i){var o=t[i];if(!h.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,n),n+=o.length}return r},h.byteLength=_,h.prototype._isBuffer=!0,h.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var i=0;i<t;i+=2)E(this,i,i+1);return this},h.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var i=0;i<t;i+=4)E(this,i,i+3),E(this,i+1,i+2);return this},h.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var i=0;i<t;i+=8)E(this,i,i+7),E(this,i+1,i+6),E(this,i+2,i+5),E(this,i+3,i+4);return this},h.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?N(this,0,t):x.apply(this,arguments)},h.prototype.equals=function(b){if(!h.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b||0===h.compare(this,b)},h.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},h.prototype.compare=function(t,e,r,n,o){if(!h.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),e<0||r>t.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&e>=r)return 0;if(n>=o)return-1;if(e>=r)return 1;if(this===t)return 0;for(var c=(o>>>=0)-(n>>>=0),f=(r>>>=0)-(e>>>=0),l=Math.min(c,f),d=this.slice(n,o),v=t.slice(e,r),i=0;i<l;++i)if(d[i]!==v[i]){c=d[i],f=v[i];break}return c<f?-1:f<c?1:0},h.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},h.prototype.indexOf=function(t,e,r){return O(this,t,e,r,!0)},h.prototype.lastIndexOf=function(t,e,r){return O(this,t,e,r,!1)},h.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var o=this.length-e;if((void 0===r||r>o)&&(r=o),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var c=!1;;)switch(n){case"hex":return k(this,t,e,r);case"utf8":case"utf-8":return S(this,t,e,r);case"ascii":return I(this,t,e,r);case"latin1":case"binary":return j(this,t,e,r);case"base64":return P(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,e,r);default:if(c)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),c=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var T=4096;function L(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function C(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function U(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var o="",i=e;i<r;++i)o+=J(t[i]);return o}function B(t,e,r){for(var n=t.slice(e,r),o="",i=0;i<n.length;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function D(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function z(t,e,r,n,o,c){if(!h.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<c)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function F(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function H(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function K(t,e,r,n,o,c){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function G(t,e,r,n,c){return c||K(t,0,r,4),o.write(t,e,r,n,23,4),r+4}function V(t,e,r,n,c){return c||K(t,0,r,8),o.write(t,e,r,n,52,8),r+8}h.prototype.slice=function(t,e){var r,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),h.TYPED_ARRAY_SUPPORT)(r=this.subarray(t,e)).__proto__=h.prototype;else{var o=e-t;r=new h(o,void 0);for(var i=0;i<o;++i)r[i]=this[i+t]}return r},h.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||D(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n},h.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||D(t,e,this.length);for(var n=this[t+--e],o=1;e>0&&(o*=256);)n+=this[t+--e]*o;return n},h.prototype.readUInt8=function(t,e){return e||D(t,1,this.length),this[t]},h.prototype.readUInt16LE=function(t,e){return e||D(t,2,this.length),this[t]|this[t+1]<<8},h.prototype.readUInt16BE=function(t,e){return e||D(t,2,this.length),this[t]<<8|this[t+1]},h.prototype.readUInt32LE=function(t,e){return e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},h.prototype.readUInt32BE=function(t,e){return e||D(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},h.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||D(t,e,this.length);for(var n=this[t],o=1,i=0;++i<e&&(o*=256);)n+=this[t+i]*o;return n>=(o*=128)&&(n-=Math.pow(2,8*e)),n},h.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||D(t,e,this.length);for(var i=e,n=1,o=this[t+--i];i>0&&(n*=256);)o+=this[t+--i]*n;return o>=(n*=128)&&(o-=Math.pow(2,8*e)),o},h.prototype.readInt8=function(t,e){return e||D(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},h.prototype.readInt16LE=function(t,e){e||D(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt16BE=function(t,e){e||D(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},h.prototype.readInt32LE=function(t,e){return e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},h.prototype.readInt32BE=function(t,e){return e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},h.prototype.readFloatLE=function(t,e){return e||D(t,4,this.length),o.read(this,t,!0,23,4)},h.prototype.readFloatBE=function(t,e){return e||D(t,4,this.length),o.read(this,t,!1,23,4)},h.prototype.readDoubleLE=function(t,e){return e||D(t,8,this.length),o.read(this,t,!0,52,8)},h.prototype.readDoubleBE=function(t,e){return e||D(t,8,this.length),o.read(this,t,!1,52,8)},h.prototype.writeUIntLE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||z(this,t,e,r,Math.pow(2,8*r)-1,0);var o=1,i=0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=t/o&255;return e+r},h.prototype.writeUIntBE=function(t,e,r,n){(t=+t,e|=0,r|=0,n)||z(this,t,e,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},h.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,1,255,0),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},h.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):F(this,t,e,!0),e+2},h.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):F(this,t,e,!1),e+2},h.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):H(this,t,e,!0),e+4},h.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):H(this,t,e,!1),e+4},h.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);z(this,t,e,r,o-1,-o)}var i=0,c=1,sub=0;for(this[e]=255&t;++i<r&&(c*=256);)t<0&&0===sub&&0!==this[e+i-1]&&(sub=1),this[e+i]=(t/c|0)-sub&255;return e+r},h.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var o=Math.pow(2,8*r-1);z(this,t,e,r,o-1,-o)}var i=r-1,c=1,sub=0;for(this[e+i]=255&t;--i>=0&&(c*=256);)t<0&&0===sub&&0!==this[e+i+1]&&(sub=1),this[e+i]=(t/c|0)-sub&255;return e+r},h.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,1,127,-128),h.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},h.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):F(this,t,e,!0),e+2},h.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):F(this,t,e,!1),e+2},h.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):H(this,t,e,!0),e+4},h.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||z(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),h.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):H(this,t,e,!1),e+4},h.prototype.writeFloatLE=function(t,e,r){return G(this,t,e,!0,r)},h.prototype.writeFloatBE=function(t,e,r){return G(this,t,e,!1,r)},h.prototype.writeDoubleLE=function(t,e,r){return V(this,t,e,!0,r)},h.prototype.writeDoubleBE=function(t,e,r){return V(this,t,e,!1,r)},h.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!h.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},h.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var code=t.charCodeAt(0);code<256&&(t=code)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!h.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;var i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var o=h.isBuffer(t)?t:W(new h(t,n).toString()),c=o.length;for(i=0;i<r-e;++i)this[i+e]=o[i%c]}return this};var Y=/[^+\/0-9A-Za-z-_]/g;function J(t){return t<16?"0"+t.toString(16):t.toString(16)}function W(t,e){var r;e=e||1/0;for(var n=t.length,o=null,c=[],i=0;i<n;++i){if((r=t.charCodeAt(i))>55295&&r<57344){if(!o){if(r>56319){(e-=3)>-1&&c.push(239,191,189);continue}if(i+1===n){(e-=3)>-1&&c.push(239,191,189);continue}o=r;continue}if(r<56320){(e-=3)>-1&&c.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(e-=3)>-1&&c.push(239,191,189);if(o=null,r<128){if((e-=1)<0)break;c.push(r)}else if(r<2048){if((e-=2)<0)break;c.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;c.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;c.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return c}function Q(t){return n.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(Y,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function X(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}}).call(this,r(31))},function(t,e,r){"use strict";e.byteLength=function(t){var e=f(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,i,r=f(t),n=r[0],l=r[1],h=new c(function(t,e,r){return 3*(e+r)/4-r}(0,n,l)),d=0,v=l>0?n-4:n;for(i=0;i<v;i+=4)e=o[t.charCodeAt(i)]<<18|o[t.charCodeAt(i+1)]<<12|o[t.charCodeAt(i+2)]<<6|o[t.charCodeAt(i+3)],h[d++]=e>>16&255,h[d++]=e>>8&255,h[d++]=255&e;2===l&&(e=o[t.charCodeAt(i)]<<2|o[t.charCodeAt(i+1)]>>4,h[d++]=255&e);1===l&&(e=o[t.charCodeAt(i)]<<10|o[t.charCodeAt(i+1)]<<4|o[t.charCodeAt(i+2)]>>2,h[d++]=e>>8&255,h[d++]=255&e);return h},e.fromByteArray=function(t){for(var e,r=t.length,o=r%3,c=[],f=16383,i=0,h=r-o;i<h;i+=f)c.push(l(t,i,i+f>h?h:i+f));1===o?(e=t[r-1],c.push(n[e>>2]+n[e<<4&63]+"==")):2===o&&(e=(t[r-2]<<8)+t[r-1],c.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return c.join("")};for(var n=[],o=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0;i<64;++i)n[i]=code[i],o[code.charCodeAt(i)]=i;function f(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function l(t,e,r){for(var o,c,output=[],i=e;i<r;i+=3)o=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(255&t[i+2]),output.push(n[(c=o)>>18&63]+n[c>>12&63]+n[c>>6&63]+n[63&c]);return output.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,o){var c,f,l=8*o-n-1,h=(1<<l)-1,d=h>>1,v=-7,i=r?o-1:0,y=r?-1:1,s=t[e+i];for(i+=y,c=s&(1<<-v)-1,s>>=-v,v+=l;v>0;c=256*c+t[e+i],i+=y,v-=8);for(f=c&(1<<-v)-1,c>>=-v,v+=n;v>0;f=256*f+t[e+i],i+=y,v-=8);if(0===c)c=1-d;else{if(c===h)return f?NaN:1/0*(s?-1:1);f+=Math.pow(2,n),c-=d}return(s?-1:1)*f*Math.pow(2,c-n)},e.write=function(t,e,r,n,o,c){var f,l,h,d=8*c-o-1,v=(1<<d)-1,y=v>>1,rt=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,i=n?0:c-1,m=n?1:-1,s=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(l=isNaN(e)?1:0,f=v):(f=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-f))<1&&(f--,h*=2),(e+=f+y>=1?rt/h:rt*Math.pow(2,1-y))*h>=2&&(f++,h/=2),f+y>=v?(l=0,f=v):f+y>=1?(l=(e*h-1)*Math.pow(2,o),f+=y):(l=e*Math.pow(2,y-1)*Math.pow(2,o),f=0));o>=8;t[r+i]=255&l,i+=m,l/=256,o-=8);for(f=f<<o|l,d+=o;d>0;t[r+i]=255&f,i+=m,f/=256,d-=8);t[r+i-m]|=128*s}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(359);n.__exportStar(r(451),e),n.__exportStar(r(452),e)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.delay=void 0,e.delay=function(t){return new Promise((function(e){setTimeout((function(){e(!0)}),t)}))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fromMiliseconds=e.toMiliseconds=void 0;var n=r(400);e.toMiliseconds=function(t){return t*n.ONE_THOUSAND},e.fromMiliseconds=function(t){return Math.floor(t/n.ONE_THOUSAND)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_THOUSAND=e.ONE_HUNDRED=void 0,e.ONE_HUNDRED=100,e.ONE_THOUSAND=1e3},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=5*e.ONE_MINUTE,e.TEN_MINUTES=10*e.ONE_MINUTE,e.THIRTY_MINUTES=30*e.ONE_MINUTE,e.SIXTY_MINUTES=60*e.ONE_MINUTE,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=3*e.ONE_HOUR,e.SIX_HOURS=6*e.ONE_HOUR,e.TWELVE_HOURS=12*e.ONE_HOUR,e.TWENTY_FOUR_HOURS=24*e.ONE_HOUR,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=3*e.ONE_DAY,e.FIVE_DAYS=5*e.ONE_DAY,e.SEVEN_DAYS=7*e.ONE_DAY,e.THIRTY_DAYS=30*e.ONE_DAY,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=2*e.ONE_WEEK,e.THREE_WEEKS=3*e.ONE_WEEK,e.FOUR_WEEKS=4*e.ONE_WEEK,e.ONE_YEAR=365*e.ONE_DAY},function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,c(n.key),n)}}function c(t){var i=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(i)?i:i+""}Object.defineProperty(e,"__esModule",{value:!0}),e.Watch=void 0;var f=function(){return t=function t(){!function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.timestamps=new Map},(e=[{key:"start",value:function(label){if(this.timestamps.has(label))throw new Error("Watch already started for label: ".concat(label));this.timestamps.set(label,{started:Date.now()})}},{key:"stop",value:function(label){var t=this.get(label);if(void 0!==t.elapsed)throw new Error("Watch already stopped for label: ".concat(label));var e=Date.now()-t.started;this.timestamps.set(label,{started:t.started,elapsed:e})}},{key:"get",value:function(label){var t=this.timestamps.get(label);if(void 0===t)throw new Error("No timestamp found for label: ".concat(label));return t}},{key:"elapsed",value:function(label){var t=this.get(label),e=t.elapsed||Date.now()-t.started;return e}}])&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();e.Watch=f,e.default=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),r(359).__exportStar(r(457),e)},function(t,e,r){"use strict";function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,f(n.key),n)}}function c(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){var i=function(t,e){if("object"!=n(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=n(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==n(i)?i:i+""}Object.defineProperty(e,"__esModule",{value:!0}),e.IWatch=void 0;var l=c((function t(){!function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t)}));e.IWatch=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getWindowMetadata=void 0;var n=r(401);e.getWindowMetadata=function(){var t,e;try{t=n.getDocumentOrThrow(),e=n.getLocationOrThrow()}catch(t){return null}function r(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(var o,c=t.getElementsByTagName("meta"),f=function(){var t=c[i],e=["itemprop","property","name"].map((function(e){return t.getAttribute(e)})).filter((function(t){return!!t&&r.includes(t)}));if(e.length&&e){var content=t.getAttribute("content");if(content)return{v:content}}},i=0;i<c.length;i++)if(o=f())return o.v;return""}var o=function(){var e=r("name","og:site_name","og:title","twitter:title");return e||(e=t.title),e}();return{description:r("description","og:description","twitter:description","keywords"),url:e.origin,icons:function(){for(var r=t.getElementsByTagName("link"),n=[],i=0;i<r.length;i++){var link=r[i],o=link.getAttribute("rel");if(o&&o.toLowerCase().indexOf("icon")>-1){var c=link.getAttribute("href");if(c)if(-1===c.toLowerCase().indexOf("https:")&&-1===c.toLowerCase().indexOf("http:")&&0!==c.indexOf("//")){var f=e.protocol+"//"+e.host;if(0===c.indexOf("/"))f+=c;else{var path=e.pathname.split("/");path.pop(),f+=path.join("/")+"/"+c}n.push(f)}else if(0===c.indexOf("//")){var l=e.protocol+c;n.push(l)}else n.push(c)}}return n}(),name:o}}},function(t,e,r){"use strict";const n=r(460),o=r(461),c=r(462),f=r(463),l=Symbol("encodeFragmentIdentifier");function h(t){if("string"!=typeof t||1!==t.length)throw new TypeError("arrayFormatSeparator must be single character string")}function d(t,e){return e.encode?e.strict?n(t):encodeURIComponent(t):t}function v(t,e){return e.decode?o(t):t}function y(input){return Array.isArray(input)?input.sort():"object"==typeof input?y(Object.keys(input)).sort(((a,b)=>Number(a)-Number(b))).map((t=>input[t])):input}function m(input){const t=input.indexOf("#");return-1!==t&&(input=input.slice(0,t)),input}function w(input){const t=(input=m(input)).indexOf("?");return-1===t?"":input.slice(t+1)}function _(t,e){return e.parseNumbers&&!Number.isNaN(Number(t))&&"string"==typeof t&&""!==t.trim()?t=Number(t):!e.parseBooleans||null===t||"true"!==t.toLowerCase()&&"false"!==t.toLowerCase()||(t="true"===t.toLowerCase()),t}function x(t,e){h((e=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},e)).arrayFormatSeparator);const r=function(t){let e;switch(t.arrayFormat){case"index":return(t,r,n)=>{e=/\[(\d*)\]$/.exec(t),t=t.replace(/\[\d*\]$/,""),e?(void 0===n[t]&&(n[t]={}),n[t][e[1]]=r):n[t]=r};case"bracket":return(t,r,n)=>{e=/(\[\])$/.exec(t),t=t.replace(/\[\]$/,""),e?void 0!==n[t]?n[t]=[].concat(n[t],r):n[t]=[r]:n[t]=r};case"colon-list-separator":return(t,r,n)=>{e=/(:list)$/.exec(t),t=t.replace(/:list$/,""),e?void 0!==n[t]?n[t]=[].concat(n[t],r):n[t]=[r]:n[t]=r};case"comma":case"separator":return(e,r,n)=>{const o="string"==typeof r&&r.includes(t.arrayFormatSeparator),c="string"==typeof r&&!o&&v(r,t).includes(t.arrayFormatSeparator);r=c?v(r,t):r;const f=o||c?r.split(t.arrayFormatSeparator).map((e=>v(e,t))):null===r?r:v(r,t);n[e]=f};case"bracket-separator":return(e,r,n)=>{const o=/(\[\])$/.test(e);if(e=e.replace(/\[\]$/,""),!o)return void(n[e]=r?v(r,t):r);const c=null===r?[]:r.split(t.arrayFormatSeparator).map((e=>v(e,t)));void 0!==n[e]?n[e]=[].concat(n[e],c):n[e]=c};default:return(t,e,r)=>{void 0!==r[t]?r[t]=[].concat(r[t],e):r[t]=e}}}(e),n=Object.create(null);if("string"!=typeof t)return n;if(!(t=t.trim().replace(/^[?#&]/,"")))return n;for(const param of t.split("&")){if(""===param)continue;let[t,o]=c(e.decode?param.replace(/\+/g," "):param,"=");o=void 0===o?null:["comma","separator","bracket-separator"].includes(e.arrayFormat)?o:v(o,e),r(v(t,e),o,n)}for(const t of Object.keys(n)){const r=n[t];if("object"==typeof r&&null!==r)for(const t of Object.keys(r))r[t]=_(r[t],e);else n[t]=_(r,e)}return!1===e.sort?n:(!0===e.sort?Object.keys(n).sort():Object.keys(n).sort(e.sort)).reduce(((t,e)=>{const r=n[e];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?t[e]=y(r):t[e]=r,t}),Object.create(null))}e.extract=w,e.parse=x,e.stringify=(object,t)=>{if(!object)return"";h((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);const e=e=>t.skipNull&&null==object[e]||t.skipEmptyString&&""===object[e],r=function(t){switch(t.arrayFormat){case"index":return e=>(r,n)=>{const o=r.length;return void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?r:null===n?[...r,[d(e,t),"[",o,"]"].join("")]:[...r,[d(e,t),"[",d(o,t),"]=",d(n,t)].join("")]};case"bracket":return e=>(r,n)=>void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?r:null===n?[...r,[d(e,t),"[]"].join("")]:[...r,[d(e,t),"[]=",d(n,t)].join("")];case"colon-list-separator":return e=>(r,n)=>void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?r:null===n?[...r,[d(e,t),":list="].join("")]:[...r,[d(e,t),":list=",d(n,t)].join("")];case"comma":case"separator":case"bracket-separator":{const e="bracket-separator"===t.arrayFormat?"[]=":"=";return r=>(n,o)=>void 0===o||t.skipNull&&null===o||t.skipEmptyString&&""===o?n:(o=null===o?"":o,0===n.length?[[d(r,t),e,d(o,t)].join("")]:[[n,d(o,t)].join(t.arrayFormatSeparator)])}default:return e=>(r,n)=>void 0===n||t.skipNull&&null===n||t.skipEmptyString&&""===n?r:null===n?[...r,d(e,t)]:[...r,[d(e,t),"=",d(n,t)].join("")]}}(t),n={};for(const t of Object.keys(object))e(t)||(n[t]=object[t]);const o=Object.keys(n);return!1!==t.sort&&o.sort(t.sort),o.map((e=>{const n=object[e];return void 0===n?"":null===n?d(e,t):Array.isArray(n)?0===n.length&&"bracket-separator"===t.arrayFormat?d(e,t)+"[]":n.reduce(r(e),[]).join("&"):d(e,t)+"="+d(n,t)})).filter((t=>t.length>0)).join("&")},e.parseUrl=(t,e)=>{e=Object.assign({decode:!0},e);const[r,n]=c(t,"#");return Object.assign({url:r.split("?")[0]||"",query:x(w(t),e)},e&&e.parseFragmentIdentifier&&n?{fragmentIdentifier:v(n,e)}:{})},e.stringifyUrl=(object,t)=>{t=Object.assign({encode:!0,strict:!0,[l]:!0},t);const r=m(object.url).split("?")[0]||"",n=e.extract(object.url),o=e.parse(n,{sort:!1}),c=Object.assign(o,object.query);let f=e.stringify(c,t);f&&(f=`?${f}`);let h=function(t){let e="";const r=t.indexOf("#");return-1!==r&&(e=t.slice(r)),e}(object.url);return object.fragmentIdentifier&&(h=`#${t[l]?d(object.fragmentIdentifier,t):object.fragmentIdentifier}`),`${r}${f}${h}`},e.pick=(input,filter,t)=>{t=Object.assign({parseFragmentIdentifier:!0,[l]:!1},t);const{url:r,query:n,fragmentIdentifier:o}=e.parseUrl(input,t);return e.stringifyUrl({url:r,query:f(n,filter),fragmentIdentifier:o},t)},e.exclude=(input,filter,t)=>{const r=Array.isArray(filter)?t=>!filter.includes(t):(t,e)=>!filter(t,e);return e.pick(input,r,t)}},function(t,e,r){"use strict";t.exports=t=>encodeURIComponent(t).replace(/[!'()*]/g,(t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`))},function(t,e,r){"use strict";var n="%[a-f0-9]{2}",o=new RegExp("("+n+")|([^%]+?)","gi"),c=new RegExp("("+n+")+","gi");function f(t,e){try{return[decodeURIComponent(t.join(""))]}catch(t){}if(1===t.length)return t;e=e||1;var r=t.slice(0,e),n=t.slice(e);return Array.prototype.concat.call([],f(r),f(n))}function l(input){try{return decodeURIComponent(input)}catch(e){for(var t=input.match(o)||[],i=1;i<t.length;i++)t=(input=f(t,i).join("")).match(o)||[];return input}}t.exports=function(t){if("string"!=typeof t)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof t+"`");try{return t=t.replace(/\+/g," "),decodeURIComponent(t)}catch(e){return function(input){for(var t={"%FE%FF":"","%FF%FE":""},e=c.exec(input);e;){try{t[e[0]]=decodeURIComponent(e[0])}catch(n){var r=l(e[0]);r!==e[0]&&(t[e[0]]=r)}e=c.exec(input)}t["%C2"]="";for(var n=Object.keys(t),i=0;i<n.length;i++){var o=n[i];input=input.replace(new RegExp(o,"g"),t[o])}return input}(t)}}},function(t,e,r){"use strict";t.exports=(t,e)=>{if("string"!=typeof t||"string"!=typeof e)throw new TypeError("Expected the arguments to be of type `string`");if(""===e)return[t];const r=t.indexOf(e);return-1===r?[t]:[t.slice(0,r),t.slice(r+e.length)]}},function(t,e,r){"use strict";t.exports=function(t,e){for(var r={},n=Object.keys(t),o=Array.isArray(e),i=0;i<n.length;i++){var c=n[i],f=t[c];(o?-1!==e.indexOf(c):e(c,f,t))&&(r[c]=f)}return r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(465),o=r(467),c=r(326),f=r(354),l=r(379);e.KEY_LENGTH=32,e.NONCE_LENGTH=12,e.TAG_LENGTH=16;var h=new Uint8Array(16),d=function(){function t(t){if(this.nonceLength=e.NONCE_LENGTH,this.tagLength=e.TAG_LENGTH,t.length!==e.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(t)}return t.prototype.seal=function(t,e,r,o){if(t.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var f=new Uint8Array(16);f.set(t,f.length-t.length);var l=new Uint8Array(32);n.stream(this._key,f,l,4);var h,d=e.length+this.tagLength;if(o){if(o.length!==d)throw new Error("ChaCha20Poly1305: incorrect destination length");h=o}else h=new Uint8Array(d);return n.streamXOR(this._key,f,e,h,4),this._authenticate(h.subarray(h.length-this.tagLength,h.length),l,h.subarray(0,h.length-this.tagLength),r),c.wipe(f),h},t.prototype.open=function(t,e,r,o){if(t.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(e.length<this.tagLength)return null;var f=new Uint8Array(16);f.set(t,f.length-t.length);var h=new Uint8Array(32);n.stream(this._key,f,h,4);var d=new Uint8Array(this.tagLength);if(this._authenticate(d,h,e.subarray(0,e.length-this.tagLength),r),!l.equal(d,e.subarray(e.length-this.tagLength,e.length)))return null;var v,y=e.length-this.tagLength;if(o){if(o.length!==y)throw new Error("ChaCha20Poly1305: incorrect destination length");v=o}else v=new Uint8Array(y);return n.streamXOR(this._key,f,e.subarray(0,e.length-this.tagLength),v,4),c.wipe(f),v},t.prototype.clean=function(){return c.wipe(this._key),this},t.prototype._authenticate=function(t,e,r,n){var l=new o.Poly1305(e);n&&(l.update(n),n.length%16>0&&l.update(h.subarray(n.length%16))),l.update(r),r.length%16>0&&l.update(h.subarray(r.length%16));var d=new Uint8Array(8);n&&f.writeUint64LE(n.length,d),l.update(d),f.writeUint64LE(r.length,d),l.update(d);for(var v=l.digest(),i=0;i<v.length;i++)t[i]=v[i];l.clean(),c.wipe(v),c.wipe(d)},t}();e.ChaCha20Poly1305=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(354),o=r(326),c=20;function f(t,input,e){for(var r=1634760805,o=857760878,f=2036477234,l=1797285236,h=e[3]<<24|e[2]<<16|e[1]<<8|e[0],d=e[7]<<24|e[6]<<16|e[5]<<8|e[4],v=e[11]<<24|e[10]<<16|e[9]<<8|e[8],y=e[15]<<24|e[14]<<16|e[13]<<8|e[12],m=e[19]<<24|e[18]<<16|e[17]<<8|e[16],w=e[23]<<24|e[22]<<16|e[21]<<8|e[20],_=e[27]<<24|e[26]<<16|e[25]<<8|e[24],x=e[31]<<24|e[30]<<16|e[29]<<8|e[28],E=input[3]<<24|input[2]<<16|input[1]<<8|input[0],O=input[7]<<24|input[6]<<16|input[5]<<8|input[4],A=input[11]<<24|input[10]<<16|input[9]<<8|input[8],k=input[15]<<24|input[14]<<16|input[13]<<8|input[12],S=r,I=o,j=f,P=l,M=h,R=d,N=v,T=y,L=m,C=w,U=_,B=x,D=E,z=O,F=A,H=k,i=0;i<c;i+=2)M=(M^=L=L+(D=(D^=S=S+M|0)>>>16|D<<16)|0)>>>20|M<<12,R=(R^=C=C+(z=(z^=I=I+R|0)>>>16|z<<16)|0)>>>20|R<<12,N=(N^=U=U+(F=(F^=j=j+N|0)>>>16|F<<16)|0)>>>20|N<<12,T=(T^=B=B+(H=(H^=P=P+T|0)>>>16|H<<16)|0)>>>20|T<<12,N=(N^=U=U+(F=(F^=j=j+N|0)>>>24|F<<8)|0)>>>25|N<<7,T=(T^=B=B+(H=(H^=P=P+T|0)>>>24|H<<8)|0)>>>25|T<<7,R=(R^=C=C+(z=(z^=I=I+R|0)>>>24|z<<8)|0)>>>25|R<<7,M=(M^=L=L+(D=(D^=S=S+M|0)>>>24|D<<8)|0)>>>25|M<<7,R=(R^=U=U+(H=(H^=S=S+R|0)>>>16|H<<16)|0)>>>20|R<<12,N=(N^=B=B+(D=(D^=I=I+N|0)>>>16|D<<16)|0)>>>20|N<<12,T=(T^=L=L+(z=(z^=j=j+T|0)>>>16|z<<16)|0)>>>20|T<<12,M=(M^=C=C+(F=(F^=P=P+M|0)>>>16|F<<16)|0)>>>20|M<<12,T=(T^=L=L+(z=(z^=j=j+T|0)>>>24|z<<8)|0)>>>25|T<<7,M=(M^=C=C+(F=(F^=P=P+M|0)>>>24|F<<8)|0)>>>25|M<<7,N=(N^=B=B+(D=(D^=I=I+N|0)>>>24|D<<8)|0)>>>25|N<<7,R=(R^=U=U+(H=(H^=S=S+R|0)>>>24|H<<8)|0)>>>25|R<<7;n.writeUint32LE(S+r|0,t,0),n.writeUint32LE(I+o|0,t,4),n.writeUint32LE(j+f|0,t,8),n.writeUint32LE(P+l|0,t,12),n.writeUint32LE(M+h|0,t,16),n.writeUint32LE(R+d|0,t,20),n.writeUint32LE(N+v|0,t,24),n.writeUint32LE(T+y|0,t,28),n.writeUint32LE(L+m|0,t,32),n.writeUint32LE(C+w|0,t,36),n.writeUint32LE(U+_|0,t,40),n.writeUint32LE(B+x|0,t,44),n.writeUint32LE(D+E|0,t,48),n.writeUint32LE(z+O|0,t,52),n.writeUint32LE(F+A|0,t,56),n.writeUint32LE(H+k|0,t,60)}function l(t,e,r,n,c){if(void 0===c&&(c=0),32!==t.length)throw new Error("ChaCha: key size must be 32 bytes");if(n.length<r.length)throw new Error("ChaCha: destination is shorter than source");var l,d;if(0===c){if(8!==e.length&&12!==e.length)throw new Error("ChaCha nonce must be 8 or 12 bytes");d=(l=new Uint8Array(16)).length-e.length,l.set(e,d)}else{if(16!==e.length)throw new Error("ChaCha nonce with counter must be 16 bytes");l=e,d=c}for(var v=new Uint8Array(64),i=0;i<r.length;i+=64){f(v,l,t);for(var y=i;y<i+64&&y<r.length;y++)n[y]=r[y]^v[y-i];h(l,0,d)}return o.wipe(v),0===c&&o.wipe(l),n}function h(t,e,r){for(var n=1;r--;)n=n+(255&t[e])|0,t[e]=255&n,n>>>=8,e++;if(n>0)throw new Error("ChaCha: counter overflow")}e.streamXOR=l,e.stream=function(t,e,r,n){return void 0===n&&(n=0),o.wipe(r),l(t,e,r,r,n)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mul=Math.imul||function(a,b){var t=65535&a,e=65535&b;return t*e+((a>>>16&65535)*e+t*(b>>>16&65535)<<16>>>0)|0},e.add=function(a,b){return a+b|0},e.sub=function(a,b){return a-b|0},e.rotl=function(t,e){return t<<e|t>>>32-e},e.rotr=function(t,e){return t<<32-e|t>>>e},e.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(t){return e.isInteger(t)&&t>=-e.MAX_SAFE_INTEGER&&t<=e.MAX_SAFE_INTEGER}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(379),o=r(326);e.DIGEST_LENGTH=16;var c=function(){function t(t){this.digestLength=e.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var r=t[0]|t[1]<<8;this._r[0]=8191&r;var n=t[2]|t[3]<<8;this._r[1]=8191&(r>>>13|n<<3);var o=t[4]|t[5]<<8;this._r[2]=7939&(n>>>10|o<<6);var c=t[6]|t[7]<<8;this._r[3]=8191&(o>>>7|c<<9);var f=t[8]|t[9]<<8;this._r[4]=255&(c>>>4|f<<12),this._r[5]=f>>>1&8190;var l=t[10]|t[11]<<8;this._r[6]=8191&(f>>>14|l<<2);var h=t[12]|t[13]<<8;this._r[7]=8065&(l>>>11|h<<5);var d=t[14]|t[15]<<8;this._r[8]=8191&(h>>>8|d<<8),this._r[9]=d>>>5&127,this._pad[0]=t[16]|t[17]<<8,this._pad[1]=t[18]|t[19]<<8,this._pad[2]=t[20]|t[21]<<8,this._pad[3]=t[22]|t[23]<<8,this._pad[4]=t[24]|t[25]<<8,this._pad[5]=t[26]|t[27]<<8,this._pad[6]=t[28]|t[29]<<8,this._pad[7]=t[30]|t[31]<<8}return t.prototype._blocks=function(t,e,r){for(var n=this._fin?0:2048,o=this._h[0],h1=this._h[1],h2=this._h[2],h3=this._h[3],h4=this._h[4],h5=this._h[5],h6=this._h[6],c=this._h[7],f=this._h[8],l=this._h[9],h=this._r[0],d=this._r[1],v=this._r[2],y=this._r[3],m=this._r[4],w=this._r[5],_=this._r[6],x=this._r[7],E=this._r[8],O=this._r[9];r>=16;){var A=t[e+0]|t[e+1]<<8;o+=8191&A;var k=t[e+2]|t[e+3]<<8;h1+=8191&(A>>>13|k<<3);var S=t[e+4]|t[e+5]<<8;h2+=8191&(k>>>10|S<<6);var I=t[e+6]|t[e+7]<<8;h3+=8191&(S>>>7|I<<9);var j=t[e+8]|t[e+9]<<8;h4+=8191&(I>>>4|j<<12),h5+=j>>>1&8191;var P=t[e+10]|t[e+11]<<8;h6+=8191&(j>>>14|P<<2);var M=t[e+12]|t[e+13]<<8;c+=8191&(P>>>11|M<<5);var R=t[e+14]|t[e+15]<<8,N=0,T=N;T+=o*h,T+=h1*(5*O),T+=h2*(5*E),T+=h3*(5*x),N=(T+=h4*(5*_))>>>13,T&=8191,T+=h5*(5*w),T+=h6*(5*m),T+=c*(5*y),T+=(f+=8191&(M>>>8|R<<8))*(5*v);var L=N+=(T+=(l+=R>>>5|n)*(5*d))>>>13;L+=o*d,L+=h1*h,L+=h2*(5*O),L+=h3*(5*E),N=(L+=h4*(5*x))>>>13,L&=8191,L+=h5*(5*_),L+=h6*(5*w),L+=c*(5*m),L+=f*(5*y),N+=(L+=l*(5*v))>>>13,L&=8191;var C=N;C+=o*v,C+=h1*d,C+=h2*h,C+=h3*(5*O),N=(C+=h4*(5*E))>>>13,C&=8191,C+=h5*(5*x),C+=h6*(5*_),C+=c*(5*w),C+=f*(5*m);var U=N+=(C+=l*(5*y))>>>13;U+=o*y,U+=h1*v,U+=h2*d,U+=h3*h,N=(U+=h4*(5*O))>>>13,U&=8191,U+=h5*(5*E),U+=h6*(5*x),U+=c*(5*_),U+=f*(5*w);var B=N+=(U+=l*(5*m))>>>13;B+=o*m,B+=h1*y,B+=h2*v,B+=h3*d,N=(B+=h4*h)>>>13,B&=8191,B+=h5*(5*O),B+=h6*(5*E),B+=c*(5*x),B+=f*(5*_);var D=N+=(B+=l*(5*w))>>>13;D+=o*w,D+=h1*m,D+=h2*y,D+=h3*v,N=(D+=h4*d)>>>13,D&=8191,D+=h5*h,D+=h6*(5*O),D+=c*(5*E),D+=f*(5*x);var z=N+=(D+=l*(5*_))>>>13;z+=o*_,z+=h1*w,z+=h2*m,z+=h3*y,N=(z+=h4*v)>>>13,z&=8191,z+=h5*d,z+=h6*h,z+=c*(5*O),z+=f*(5*E);var F=N+=(z+=l*(5*x))>>>13;F+=o*x,F+=h1*_,F+=h2*w,F+=h3*m,N=(F+=h4*y)>>>13,F&=8191,F+=h5*v,F+=h6*d,F+=c*h,F+=f*(5*O);var H=N+=(F+=l*(5*E))>>>13;H+=o*E,H+=h1*x,H+=h2*_,H+=h3*w,N=(H+=h4*m)>>>13,H&=8191,H+=h5*y,H+=h6*v,H+=c*d,H+=f*h;var K=N+=(H+=l*(5*O))>>>13;K+=o*O,K+=h1*E,K+=h2*x,K+=h3*_,N=(K+=h4*w)>>>13,K&=8191,K+=h5*m,K+=h6*y,K+=c*v,K+=f*d,o=T=8191&(N=(N=((N+=(K+=l*h)>>>13)<<2)+N|0)+(T&=8191)|0),h1=L+=N>>>=13,h2=C&=8191,h3=U&=8191,h4=B&=8191,h5=D&=8191,h6=z&=8191,c=F&=8191,f=H&=8191,l=K&=8191,e+=16,r-=16}this._h[0]=o,this._h[1]=h1,this._h[2]=h2,this._h[3]=h3,this._h[4]=h4,this._h[5]=h5,this._h[6]=h6,this._h[7]=c,this._h[8]=f,this._h[9]=l},t.prototype.finish=function(t,e){void 0===e&&(e=0);var r,mask,n,i,g=new Uint16Array(10);if(this._leftover){for(i=this._leftover,this._buffer[i++]=1;i<16;i++)this._buffer[i]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(r=this._h[1]>>>13,this._h[1]&=8191,i=2;i<10;i++)this._h[i]+=r,r=this._h[i]>>>13,this._h[i]&=8191;for(this._h[0]+=5*r,r=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=r,r=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=r,g[0]=this._h[0]+5,r=g[0]>>>13,g[0]&=8191,i=1;i<10;i++)g[i]=this._h[i]+r,r=g[i]>>>13,g[i]&=8191;for(g[9]-=8192,mask=(1^r)-1,i=0;i<10;i++)g[i]&=mask;for(mask=~mask,i=0;i<10;i++)this._h[i]=this._h[i]&mask|g[i];for(this._h[0]=65535&(this._h[0]|this._h[1]<<13),this._h[1]=65535&(this._h[1]>>>3|this._h[2]<<10),this._h[2]=65535&(this._h[2]>>>6|this._h[3]<<7),this._h[3]=65535&(this._h[3]>>>9|this._h[4]<<4),this._h[4]=65535&(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14),this._h[5]=65535&(this._h[6]>>>2|this._h[7]<<11),this._h[6]=65535&(this._h[7]>>>5|this._h[8]<<8),this._h[7]=65535&(this._h[8]>>>8|this._h[9]<<5),n=this._h[0]+this._pad[0],this._h[0]=65535&n,i=1;i<8;i++)n=(this._h[i]+this._pad[i]|0)+(n>>>16)|0,this._h[i]=65535&n;return t[e+0]=this._h[0]>>>0,t[e+1]=this._h[0]>>>8,t[e+2]=this._h[1]>>>0,t[e+3]=this._h[1]>>>8,t[e+4]=this._h[2]>>>0,t[e+5]=this._h[2]>>>8,t[e+6]=this._h[3]>>>0,t[e+7]=this._h[3]>>>8,t[e+8]=this._h[4]>>>0,t[e+9]=this._h[4]>>>8,t[e+10]=this._h[5]>>>0,t[e+11]=this._h[5]>>>8,t[e+12]=this._h[6]>>>0,t[e+13]=this._h[6]>>>8,t[e+14]=this._h[7]>>>0,t[e+15]=this._h[7]>>>8,this._finished=!0,this},t.prototype.update=function(t){var e,r=0,n=t.length;if(this._leftover){(e=16-this._leftover)>n&&(e=n);for(var i=0;i<e;i++)this._buffer[this._leftover+i]=t[r+i];if(n-=e,r+=e,this._leftover+=e,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(n>=16&&(e=n-n%16,this._blocks(t,r,e),r+=e,n-=e),n){for(i=0;i<n;i++)this._buffer[this._leftover+i]=t[r+i];this._leftover+=n}return this},t.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var t=new Uint8Array(16);return this.finish(t),t},t.prototype.clean=function(){return o.wipe(this._buffer),o.wipe(this._r),o.wipe(this._h),o.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},t}();e.Poly1305=c,e.oneTimeAuth=function(t,data){var e=new c(t);e.update(data);var r=e.digest();return e.clean(),r},e.equal=function(a,b){return a.length===e.DIGEST_LENGTH&&b.length===e.DIGEST_LENGTH&&n.equal(a,b)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(469),o=r(326),c=function(){function t(t,e,r,o){void 0===r&&(r=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=o;var c=n.hmac(this._hash,r,e);this._hmac=new n.HMAC(t,c),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return t.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(0===t)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},t.prototype.expand=function(t){for(var e=new Uint8Array(t),i=0;i<e.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),e[i]=this._buffer[this._bufpos++];return e},t.prototype.clean=function(){this._hmac.clean(),o.wipe(this._buffer),o.wipe(this._counter),this._bufpos=0},t}();e.HKDF=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(470),o=r(379),c=r(326),f=function(){function t(t,e){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var r=new Uint8Array(this.blockSize);e.length>this.blockSize?this._inner.update(e).finish(r).clean():r.set(e);for(var i=0;i<r.length;i++)r[i]^=54;this._inner.update(r);for(i=0;i<r.length;i++)r[i]^=106;this._outer.update(r),n.isSerializableHash(this._inner)&&n.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),c.wipe(r)}return t.prototype.reset=function(){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.clean=function(){n.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),n.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},t.prototype.update=function(data){return this._inner.update(data),this},t.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t.prototype.saveState=function(){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},t.prototype.restoreState=function(t){if(!n.isSerializableHash(this._inner)||!n.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},t.prototype.cleanSavedState=function(t){if(!n.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},t}();e.HMAC=f,e.hmac=function(t,e,data){var r=new f(t,e);r.update(data);var n=r.digest();return r.clean(),n},e.equal=o.equal},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isSerializableHash=function(t){return void 0!==t.saveState&&void 0!==t.restoreState&&void 0!==t.cleanSavedState}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SystemRandomSource=void 0;const n=r(472),o=r(473);e.SystemRandomSource=class{constructor(){return this.isAvailable=!1,this.name="",this._source=new n.BrowserRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Browser")):(this._source=new o.NodeRandomSource,this._source.isAvailable?(this.isAvailable=!0,void(this.name="Node")):void 0)}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BrowserRandomSource=void 0;e.BrowserRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const t="undefined"!=typeof self?self.crypto||self.msCrypto:null;t&&void 0!==t.getRandomValues&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const e=new Uint8Array(t);for(let i=0;i<e.length;i+=65536)this._crypto.getRandomValues(e.subarray(i,i+Math.min(e.length-i,65536)));return e}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NodeRandomSource=void 0;const n=r(326);e.NodeRandomSource=class{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{const t=r(474);t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let e=this._crypto.randomBytes(t);if(e.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");const r=new Uint8Array(t);for(let i=0;i<r.length;i++)r[i]=e[i];return(0,n.wipe)(e),r}}},,function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(354),o=r(326);e.DIGEST_LENGTH=32,e.BLOCK_SIZE=64;var c=function(){function t(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){o.wipe(this._buffer),o.wipe(this._temp),this.reset()},t.prototype.update=function(data,t){if(void 0===t&&(t=data.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var e=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&t>0;)this._buffer[this._bufferLength++]=data[e++],t--;this._bufferLength===this.blockSize&&(l(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(e=l(this._temp,this._state,data,e,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=data[e++],t--;return this},t.prototype.finish=function(t){if(!this._finished){var e=this._bytesHashed,r=this._bufferLength,o=e/536870912|0,c=e<<3,f=e%64<56?64:128;this._buffer[r]=128;for(var i=r+1;i<f-8;i++)this._buffer[i]=0;n.writeUint32BE(o,this._buffer,f-8),n.writeUint32BE(c,this._buffer,f-4),l(this._temp,this._state,this._buffer,0,f),this._finished=!0}for(i=0;i<this.digestLength/4;i++)n.writeUint32BE(this._state[i],t,4*i);return this},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(t){return this._state.set(t.state),this._bufferLength=t.bufferLength,t.buffer&&this._buffer.set(t.buffer),this._bytesHashed=t.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(t){o.wipe(t.state),t.buffer&&o.wipe(t.buffer),t.bufferLength=0,t.bytesHashed=0},t}();e.SHA256=c;var f=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function l(t,e,p,r,o){for(;o>=64;){for(var a=e[0],b=e[1],c=e[2],l=e[3],h=e[4],d=e[5],g=e[6],v=e[7],i=0;i<16;i++){var y=r+4*i;t[i]=n.readUint32BE(p,y)}for(i=16;i<64;i++){var u=t[i-2],m=(u>>>17|u<<15)^(u>>>19|u<<13)^u>>>10,w=((u=t[i-15])>>>7|u<<25)^(u>>>18|u<<14)^u>>>3;t[i]=(m+t[i-7]|0)+(w+t[i-16]|0)}for(i=0;i<64;i++){m=(((h>>>6|h<<26)^(h>>>11|h<<21)^(h>>>25|h<<7))+(h&d^~h&g)|0)+(v+(f[i]+t[i]|0)|0)|0,w=((a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10))+(a&b^a&c^b&c)|0;v=g,g=d,d=h,h=l+m|0,l=c,c=b,b=a,a=m+w|0}e[0]+=a,e[1]+=b,e[2]+=c,e[3]+=l,e[4]+=h,e[5]+=d,e[6]+=g,e[7]+=v,r+=64,o-=64}return r}e.hash=function(data){var t=new c;t.update(data);var e=t.digest();return t.clean(),e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sharedKey=e.generateKeyPair=e.generateKeyPairFromSeed=e.scalarMultBase=e.scalarMult=e.SHARED_KEY_LENGTH=e.SECRET_KEY_LENGTH=e.PUBLIC_KEY_LENGTH=void 0;const n=r(360),o=r(326);function c(t){const e=new Float64Array(16);if(t)for(let i=0;i<t.length;i++)e[i]=t[i];return e}e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=32,e.SHARED_KEY_LENGTH=32;const f=new Uint8Array(32);f[0]=9;const l=c([56129,1]);function h(t){let e=1;for(let i=0;i<16;i++){let r=t[i]+e+65535;e=Math.floor(r/65536),t[i]=r-65536*e}t[0]+=e-1+37*(e-1)}function d(p,q,b){const t=~(b-1);for(let i=0;i<16;i++){const e=t&(p[i]^q[i]);p[i]^=e,q[i]^=e}}function v(t,a,b){for(let i=0;i<16;i++)t[i]=a[i]+b[i]}function sub(t,a,b){for(let i=0;i<16;i++)t[i]=a[i]-b[i]}function y(t,a,b){let e,r,n=0,o=0,c=0,f=0,l=0,h=0,d=0,v=0,y=0,m=0,w=0,_=0,x=0,E=0,O=0,A=0,k=0,S=0,I=0,j=0,P=0,M=0,R=0,N=0,T=0,L=0,C=0,U=0,B=0,D=0,z=0,F=b[0],H=b[1],K=b[2],G=b[3],V=b[4],Y=b[5],J=b[6],W=b[7],Q=b[8],X=b[9],Z=b[10],$=b[11],tt=b[12],et=b[13],nt=b[14],it=b[15];e=a[0],n+=e*F,o+=e*H,c+=e*K,f+=e*G,l+=e*V,h+=e*Y,d+=e*J,v+=e*W,y+=e*Q,m+=e*X,w+=e*Z,_+=e*$,x+=e*tt,E+=e*et,O+=e*nt,A+=e*it,e=a[1],o+=e*F,c+=e*H,f+=e*K,l+=e*G,h+=e*V,d+=e*Y,v+=e*J,y+=e*W,m+=e*Q,w+=e*X,_+=e*Z,x+=e*$,E+=e*tt,O+=e*et,A+=e*nt,k+=e*it,e=a[2],c+=e*F,f+=e*H,l+=e*K,h+=e*G,d+=e*V,v+=e*Y,y+=e*J,m+=e*W,w+=e*Q,_+=e*X,x+=e*Z,E+=e*$,O+=e*tt,A+=e*et,k+=e*nt,S+=e*it,e=a[3],f+=e*F,l+=e*H,h+=e*K,d+=e*G,v+=e*V,y+=e*Y,m+=e*J,w+=e*W,_+=e*Q,x+=e*X,E+=e*Z,O+=e*$,A+=e*tt,k+=e*et,S+=e*nt,I+=e*it,e=a[4],l+=e*F,h+=e*H,d+=e*K,v+=e*G,y+=e*V,m+=e*Y,w+=e*J,_+=e*W,x+=e*Q,E+=e*X,O+=e*Z,A+=e*$,k+=e*tt,S+=e*et,I+=e*nt,j+=e*it,e=a[5],h+=e*F,d+=e*H,v+=e*K,y+=e*G,m+=e*V,w+=e*Y,_+=e*J,x+=e*W,E+=e*Q,O+=e*X,A+=e*Z,k+=e*$,S+=e*tt,I+=e*et,j+=e*nt,P+=e*it,e=a[6],d+=e*F,v+=e*H,y+=e*K,m+=e*G,w+=e*V,_+=e*Y,x+=e*J,E+=e*W,O+=e*Q,A+=e*X,k+=e*Z,S+=e*$,I+=e*tt,j+=e*et,P+=e*nt,M+=e*it,e=a[7],v+=e*F,y+=e*H,m+=e*K,w+=e*G,_+=e*V,x+=e*Y,E+=e*J,O+=e*W,A+=e*Q,k+=e*X,S+=e*Z,I+=e*$,j+=e*tt,P+=e*et,M+=e*nt,R+=e*it,e=a[8],y+=e*F,m+=e*H,w+=e*K,_+=e*G,x+=e*V,E+=e*Y,O+=e*J,A+=e*W,k+=e*Q,S+=e*X,I+=e*Z,j+=e*$,P+=e*tt,M+=e*et,R+=e*nt,N+=e*it,e=a[9],m+=e*F,w+=e*H,_+=e*K,x+=e*G,E+=e*V,O+=e*Y,A+=e*J,k+=e*W,S+=e*Q,I+=e*X,j+=e*Z,P+=e*$,M+=e*tt,R+=e*et,N+=e*nt,T+=e*it,e=a[10],w+=e*F,_+=e*H,x+=e*K,E+=e*G,O+=e*V,A+=e*Y,k+=e*J,S+=e*W,I+=e*Q,j+=e*X,P+=e*Z,M+=e*$,R+=e*tt,N+=e*et,T+=e*nt,L+=e*it,e=a[11],_+=e*F,x+=e*H,E+=e*K,O+=e*G,A+=e*V,k+=e*Y,S+=e*J,I+=e*W,j+=e*Q,P+=e*X,M+=e*Z,R+=e*$,N+=e*tt,T+=e*et,L+=e*nt,C+=e*it,e=a[12],x+=e*F,E+=e*H,O+=e*K,A+=e*G,k+=e*V,S+=e*Y,I+=e*J,j+=e*W,P+=e*Q,M+=e*X,R+=e*Z,N+=e*$,T+=e*tt,L+=e*et,C+=e*nt,U+=e*it,e=a[13],E+=e*F,O+=e*H,A+=e*K,k+=e*G,S+=e*V,I+=e*Y,j+=e*J,P+=e*W,M+=e*Q,R+=e*X,N+=e*Z,T+=e*$,L+=e*tt,C+=e*et,U+=e*nt,B+=e*it,e=a[14],O+=e*F,A+=e*H,k+=e*K,S+=e*G,I+=e*V,j+=e*Y,P+=e*J,M+=e*W,R+=e*Q,N+=e*X,T+=e*Z,L+=e*$,C+=e*tt,U+=e*et,B+=e*nt,D+=e*it,e=a[15],A+=e*F,k+=e*H,S+=e*K,I+=e*G,j+=e*V,P+=e*Y,M+=e*J,R+=e*W,N+=e*Q,T+=e*X,L+=e*Z,C+=e*$,U+=e*tt,B+=e*et,D+=e*nt,z+=e*it,n+=38*k,o+=38*S,c+=38*I,f+=38*j,l+=38*P,h+=38*M,d+=38*R,v+=38*N,y+=38*T,m+=38*L,w+=38*C,_+=38*U,x+=38*B,E+=38*D,O+=38*z,r=1,e=n+r+65535,r=Math.floor(e/65536),n=e-65536*r,e=o+r+65535,r=Math.floor(e/65536),o=e-65536*r,e=c+r+65535,r=Math.floor(e/65536),c=e-65536*r,e=f+r+65535,r=Math.floor(e/65536),f=e-65536*r,e=l+r+65535,r=Math.floor(e/65536),l=e-65536*r,e=h+r+65535,r=Math.floor(e/65536),h=e-65536*r,e=d+r+65535,r=Math.floor(e/65536),d=e-65536*r,e=v+r+65535,r=Math.floor(e/65536),v=e-65536*r,e=y+r+65535,r=Math.floor(e/65536),y=e-65536*r,e=m+r+65535,r=Math.floor(e/65536),m=e-65536*r,e=w+r+65535,r=Math.floor(e/65536),w=e-65536*r,e=_+r+65535,r=Math.floor(e/65536),_=e-65536*r,e=x+r+65535,r=Math.floor(e/65536),x=e-65536*r,e=E+r+65535,r=Math.floor(e/65536),E=e-65536*r,e=O+r+65535,r=Math.floor(e/65536),O=e-65536*r,e=A+r+65535,r=Math.floor(e/65536),A=e-65536*r,n+=r-1+37*(r-1),r=1,e=n+r+65535,r=Math.floor(e/65536),n=e-65536*r,e=o+r+65535,r=Math.floor(e/65536),o=e-65536*r,e=c+r+65535,r=Math.floor(e/65536),c=e-65536*r,e=f+r+65535,r=Math.floor(e/65536),f=e-65536*r,e=l+r+65535,r=Math.floor(e/65536),l=e-65536*r,e=h+r+65535,r=Math.floor(e/65536),h=e-65536*r,e=d+r+65535,r=Math.floor(e/65536),d=e-65536*r,e=v+r+65535,r=Math.floor(e/65536),v=e-65536*r,e=y+r+65535,r=Math.floor(e/65536),y=e-65536*r,e=m+r+65535,r=Math.floor(e/65536),m=e-65536*r,e=w+r+65535,r=Math.floor(e/65536),w=e-65536*r,e=_+r+65535,r=Math.floor(e/65536),_=e-65536*r,e=x+r+65535,r=Math.floor(e/65536),x=e-65536*r,e=E+r+65535,r=Math.floor(e/65536),E=e-65536*r,e=O+r+65535,r=Math.floor(e/65536),O=e-65536*r,e=A+r+65535,r=Math.floor(e/65536),A=e-65536*r,n+=r-1+37*(r-1),t[0]=n,t[1]=o,t[2]=c,t[3]=f,t[4]=l,t[5]=h,t[6]=d,t[7]=v,t[8]=y,t[9]=m,t[10]=w,t[11]=_,t[12]=x,t[13]=E,t[14]=O,t[15]=A}function m(t,a){y(t,a,a)}function w(t,p){const e=new Uint8Array(32),r=new Float64Array(80),a=c(),b=c(),n=c(),o=c(),f=c(),w=c();for(let i=0;i<31;i++)e[i]=t[i];e[31]=127&t[31]|64,e[0]&=248,function(t,e){for(let i=0;i<16;i++)t[i]=e[2*i]+(e[2*i+1]<<8);t[15]&=32767}(r,p);for(let i=0;i<16;i++)b[i]=r[i];a[0]=o[0]=1;for(let i=254;i>=0;--i){const t=e[i>>>3]>>>(7&i)&1;d(a,b,t),d(n,o,t),v(f,a,n),sub(a,a,n),v(n,b,o),sub(b,b,o),m(o,f),m(w,a),y(a,n,a),y(n,b,f),v(f,a,n),sub(a,a,n),m(b,a),sub(n,o,w),y(a,n,l),v(a,a,o),y(n,n,a),y(a,o,w),y(o,b,r),m(b,f),d(a,b,t),d(n,o,t)}for(let i=0;i<16;i++)r[i+16]=a[i],r[i+32]=n[i],r[i+48]=b[i],r[i+64]=o[i];const _=r.subarray(32),x=r.subarray(16);!function(t,e){const r=c();for(let i=0;i<16;i++)r[i]=e[i];for(let i=253;i>=0;i--)m(r,r),2!==i&&4!==i&&y(r,r,e);for(let i=0;i<16;i++)t[i]=r[i]}(_,_),y(x,x,_);const q=new Uint8Array(32);return function(t,e){const r=c(),n=c();for(let i=0;i<16;i++)n[i]=e[i];h(n),h(n),h(n);for(let t=0;t<2;t++){r[0]=n[0]-65517;for(let i=1;i<15;i++)r[i]=n[i]-65535-(r[i-1]>>16&1),r[i-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);const b=r[15]>>16&1;r[14]&=65535,d(n,r,1-b)}for(let i=0;i<16;i++)t[2*i]=255&n[i],t[2*i+1]=n[i]>>8}(q,x),q}function _(t){return w(t,f)}function x(t){if(t.length!==e.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${e.SECRET_KEY_LENGTH} bytes`);const r=new Uint8Array(t);return{publicKey:_(r),secretKey:r}}e.scalarMult=w,e.scalarMultBase=_,e.generateKeyPairFromSeed=x,e.generateKeyPair=function(t){const e=(0,n.randomBytes)(32,t),r=x(e);return(0,o.wipe)(e),r},e.sharedKey=function(t,r,n=!1){if(t.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(r.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const o=w(t,r);if(n){let t=0;for(let i=0;i<o.length;i++)t|=o[i];if(0===t)throw new Error("X25519: invalid shared key")}return o}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.compare=function(a,b){for(let i=0;i<a.byteLength;i++){if(a[i]<b[i])return-1;if(a[i]>b[i])return 1}return a.byteLength>b.byteLength?1:a.byteLength<b.byteLength?-1:0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(380);e.concat=function(t,e){e||(e=t.reduce(((t,e)=>t+e.length),0));const output=n.allocUnsafe(e);let r=0;for(const e of t)output.set(e,r),r+=e.length;return output}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.equals=function(a,b){if(a===b)return!0;if(a.byteLength!==b.byteLength)return!1;for(let i=0;i<a.byteLength;i++)if(a[i]!==b[i])return!1;return!0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(403);e.fromString=function(t,e="utf8"){const base=n[e];if(!base)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?base.decoder.decode(`${base.prefix}${t}`):globalThis.Buffer.from(t,"utf8")}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var base=r(328),n=r(336);const o=base.from({prefix:"\0",name:"identity",encode:t=>n.toString(t),decode:t=>n.fromString(t)});e.identity=o},function(t,e,r){"use strict";var n=function(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<t.length;i++){var o=t.charAt(i),c=o.charCodeAt(0);if(255!==r[c])throw new TypeError(o+" is ambiguous");r[c]=i}var f=t.length,l=t.charAt(0),h=Math.log(f)/Math.log(256),d=Math.log(256)/Math.log(f);function v(source){if("string"!=typeof source)throw new TypeError("Expected String");if(0===source.length)return new Uint8Array;var t=0;if(" "!==source[t]){for(var e=0,n=0;source[t]===l;)e++,t++;for(var o=(source.length-t)*h+1>>>0,c=new Uint8Array(o);source[t];){var d=r[source.charCodeAt(t)];if(255===d)return;for(var i=0,v=o-1;(0!==d||i<n)&&-1!==v;v--,i++)d+=f*c[v]>>>0,c[v]=d%256>>>0,d=d/256>>>0;if(0!==d)throw new Error("Non-zero carry");n=i,t++}if(" "!==source[t]){for(var y=o-n;y!==o&&0===c[y];)y++;for(var m=new Uint8Array(e+(o-y)),w=e;y!==o;)m[w++]=c[y++];return m}}}return{encode:function(source){if(source instanceof Uint8Array||(ArrayBuffer.isView(source)?source=new Uint8Array(source.buffer,source.byteOffset,source.byteLength):Array.isArray(source)&&(source=Uint8Array.from(source))),!(source instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===source.length)return"";for(var e=0,r=0,n=0,o=source.length;n!==o&&0===source[n];)n++,e++;for(var c=(o-n)*d+1>>>0,h=new Uint8Array(c);n!==o;){for(var v=source[n],i=0,y=c-1;(0!==v||i<r)&&-1!==y;y--,i++)v+=256*h[y]>>>0,h[y]=v%f>>>0,v=v/f>>>0;if(0!==v)throw new Error("Non-zero carry");r=i,n++}for(var m=c-r;m!==c&&0===h[m];)m++;for(var w=l.repeat(e);m<c;++m)w+=t.charAt(h[m]);return w},decodeUnsafe:v,decode:function(t){var r=v(t);if(r)return r;throw new Error(`Non-${e} character`)}}};t.exports=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(328).rfc4648({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});e.base2=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(328).rfc4648({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});e.base8=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(328).baseX({prefix:"9",name:"base10",alphabet:"0123456789"});e.base10=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var base=r(328);const n=base.rfc4648({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),o=base.rfc4648({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});e.base16=n,e.base16upper=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var base=r(328);const n=base.baseX({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),o=base.baseX({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});e.base36=n,e.base36upper=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var base=r(328);const n=base.rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),o=base.rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),c=base.rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),f=base.rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});e.base64=n,e.base64pad=o,e.base64url=c,e.base64urlpad=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var base=r(328);const n=Array.from(""),o=n.reduce(((p,t,i)=>(p[i]=t,p)),[]),c=n.reduce(((p,t,i)=>(p[t.codePointAt(0)]=i,p)),[]);const f=base.from({prefix:"",name:"base256emoji",encode:function(data){return data.reduce(((p,t)=>p+=o[t]),"")},decode:function(t){const e=[];for(const r of t){const t=c[r.codePointAt(0)];if(void 0===t)throw new Error(`Non-base256emoji character: ${r}`);e.push(t)}return new Uint8Array(e)}});e.base256emoji=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(381);const o=t=>async data=>new Uint8Array(await crypto.subtle.digest(t,data)),c=n.from({name:"sha2-256",code:18,encode:o("SHA-256")}),f=n.from({name:"sha2-512",code:19,encode:o("SHA-512")});e.sha256=c,e.sha512=f},function(t,e,r){"use strict";var n=function t(e,r,n){r=r||[];var l=n=n||0;for(;e>=f;)r[n++]=255&e|o,e/=128;for(;e&c;)r[n++]=255&e|o,e>>>=7;return r[n]=0|e,t.bytes=n-l+1,r},o=128,c=-128,f=Math.pow(2,31);var l=function t(e,r){var b,n=0,o=0,c=r=r||0,f=e.length;do{if(c>=f)throw t.bytes=0,new RangeError("Could not decode varint");b=e[c++],n+=o<28?(b&d)<<o:(b&d)*Math.pow(2,o),o+=7}while(b>=h);return t.bytes=c-r,n},h=128,d=127;var v=Math.pow(2,7),y=Math.pow(2,14),m=Math.pow(2,21),w=Math.pow(2,28),_=Math.pow(2,35),x=Math.pow(2,42),E=Math.pow(2,49),O=Math.pow(2,56),A=Math.pow(2,63),k={encode:n,decode:l,encodingLength:function(t){return t<v?1:t<y?2:t<m?3:t<w?4:t<_?5:t<x?6:t<E?7:t<O?8:t<A?9:10}};t.exports=k},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(336),o=r(355);const c=n.coerce,f={code:0,name:"identity",encode:c,digest:input=>o.create(0,c(input))};e.identity=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(336);e.code=85,e.decode=data=>n.coerce(data),e.encode=t=>n.coerce(t),e.name="raw"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=new TextEncoder,o=new TextDecoder;e.code=512,e.decode=data=>JSON.parse(o.decode(data)),e.encode=t=>n.encode(JSON.stringify(t)),e.name="json"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(407),o=r(361),c=r(336),f=r(381),l=r(355);e.CID=n.CID,e.varint=o,e.bytes=c,e.hasher=f,e.digest=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(403);e.toString=function(t,e="utf8"){const base=n[e];if(!base)throw new Error(`Unsupported encoding "${e}"`);return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?base.encoder.encode(t).substring(1):globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8")}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(380);e.xor=function(a,b){if(a.length!==b.length)throw new Error("Inputs should have the same length");const t=n.allocUnsafe(a.length);for(let i=0;i<a.length;i++)t[i]=a[i]^b[i];return t}},function(t,e,r){"use strict";r.d(e,"a",(function(){return n}));var n={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe",batchFetchMessages:"waku_batchFetchMessages"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe",batchFetchMessages:"irn_batchFetchMessages"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe",batchFetchMessages:"iridium_batchFetchMessages"}}},function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return w}));var n=function(t,e,r){if(r||2===arguments.length)for(var n,i=0,o=e.length;i<o;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))},o=function(t,e,r){this.name=t,this.version=e,this.os=r,this.type="browser"},c=function(e){this.version=e,this.type="node",this.name="node",this.os=t.platform},f=function(t,e,r,n){this.name=t,this.version=e,this.os=r,this.bot=n,this.type="bot-device"},l=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},h=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},d=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,v=3,y=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],m=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function w(e){return e?x(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new h:"undefined"!=typeof navigator?x(navigator.userAgent):void 0!==t&&t.version?new c(t.version.slice(1)):null}function _(t){return""!==t&&y.reduce((function(e,r){var n=r[0],o=r[1];if(e)return e;var c=o.exec(t);return!!c&&[n,c]}),!1)}function x(t){var e=_(t);if(!e)return null;var r=e[0],c=e[1];if("searchbot"===r)return new l;var h=c[1]&&c[1].split(".").join("_").split("_").slice(0,3);h?h.length<v&&(h=n(n([],h,!0),function(t){for(var output=[],e=0;e<t;e++)output.push("0");return output}(v-h.length),!0)):h=[];var y=h.join("."),w=function(t){for(var e=0,r=m.length;e<r;e++){var n=m[e],o=n[0];if(n[1].exec(t))return o}return null}(t),x=d.exec(t);return x&&x[1]?new f(r,y,w,x[1]):new o(r,y,w)}}).call(this,r(164))},function(t,e,r){"use strict";r.d(e,"a",(function(){return z})),r.d(e,"b",(function(){return vt}));var n=r(501),o=r(375),c=r(413),f=r(358),l=r(333),h=r.n(l),d=r(353),v=r(343);function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function m(t){return function(t){if(Array.isArray(t))return T(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||N(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(){w=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof x?e:x,a=Object.create(i.prototype),c=new N(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",v="suspendedYield",m="executing",s="completed",_={};function x(){}function E(){}function O(){}var p={};f(p,a,(function(){return this}));var A=Object.getPrototypeOf,k=A&&A(A(T([])));k&&k!==r&&n.call(k,a)&&(p=k);var g=O.prototype=x.prototype=Object.create(p);function S(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function r(o,c,i,a){var f=h(t[o],t,c);if("throw"!==f.type){var u=f.arg,l=u.value;return l&&"object"==y(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,a)}),(function(t){r("throw",t,i,a)})):e.resolve(l).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,a)}))}a(f.arg)}var c;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return c=c?c.then(o,o):o()}})}function j(e,r,n){var o=d;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===_)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var p=h(e,r,n);if("normal"===p.type){if(o=n.done?s:v,p.arg===_)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,_;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,_):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(y(e)+" is not iterable")}return E.prototype=O,o(g,"constructor",{value:O,configurable:!0}),o(O,"constructor",{value:E,configurable:!0}),E.displayName=f(O,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,O):(t.__proto__=O,f(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},S(I.prototype),f(I.prototype,c,(function(){return this})),e.AsyncIterator=I,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new I(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(g),f(g,u,"Generator"),f(g,a,(function(){return this})),f(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var c=this.tryEntries.length-1;c>=0;--c){var i=this.tryEntries[c],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var f=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(f&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(f){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),_}},e}function _(t,e,r,n,o,a,c){try{var i=t[a](c),u=i.value}catch(t){return void r(t)}i.done?e(u):Promise.resolve(u).then(n,o)}function x(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){_(a,n,o,c,f,"next",t)}function f(t){_(a,n,o,c,f,"throw",t)}c(void 0)}))}}function E(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function O(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,k(n.key),n)}}function A(t,e,r){return e&&O(t.prototype,e),r&&O(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function k(t){var i=function(t,e){if("object"!=y(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=y(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==y(i)?i:i+""}function S(t,e,r){return e=j(e),function(t,e){if(e&&("object"==y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,I()?Reflect.construct(e,r||[],j(t).constructor):e.apply(t,r))}function I(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(I=function(){return!!t})()}function j(t){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},j(t)}function P(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M(t,e)}function M(t,e){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},M(t,e)}function R(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=N(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,c=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw c}}}}function N(t,a){if(t){if("string"==typeof t)return T(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?T(t,a):void 0}}function T(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,r=Array(a);e<a;e++)r[e]=t[e];return r}var L="client",C="".concat("wc","@").concat(2,":").concat(L,":"),U=L,B="error",D="WALLETCONNECT_DEEPLINK_CHOICE",z=(d.THIRTY_DAYS,"Proposal expired"),F=d.SEVEN_DAYS,H={wc_sessionPropose:{req:{ttl:d.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:d.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:d.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:d.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:d.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:d.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:d.ONE_DAY,prompt:!1,tag:1104},res:{ttl:d.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:d.ONE_DAY,prompt:!1,tag:1106},res:{ttl:d.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:d.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:d.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:d.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:d.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:d.ONE_DAY,prompt:!1,tag:1112},res:{ttl:d.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:d.ONE_DAY,prompt:!1,tag:1114},res:{ttl:d.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:d.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:d.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:d.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:d.FIVE_MINUTES,prompt:!1,tag:1119}}},K={min:d.FIVE_MINUTES,max:d.SEVEN_DAYS},G="IDLE",V="ACTIVE",Y=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],J="".concat("wc","@",1.5,":").concat("auth",":"),W="".concat(J,":PUB_KEY"),Q=Object.defineProperty,X=Object.defineProperties,Z=Object.getOwnPropertyDescriptors,$=Object.getOwnPropertySymbols,tt=Object.prototype.hasOwnProperty,et=Object.prototype.propertyIsEnumerable,nt=function(t,e,r){return e in t?Q(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},it=function(t,e){for(var r in e||(e={}))tt.call(e,r)&&nt(t,r,e[r]);if($){var n,o=R($(e));try{for(o.s();!(n=o.n()).done;){r=n.value;et.call(e,r)&&nt(t,r,e[r])}}catch(t){o.e(t)}finally{o.f()}}return t},ot=function(t,e){return X(t,Z(e))},at=function(t){function e(t){var r;return E(this,e),(r=S(this,e,[t])).name="engine",r.events=new h.a,r.initialized=!1,r.requestQueue={state:G,queue:[]},r.sessionRequestQueue={state:G,queue:[]},r.requestQueueDelay=d.ONE_SECOND,r.expectedPairingMethodMap=new Map,r.recentlyDeletedMap=new Map,r.recentlyDeletedLimit=200,r.relayMessageCache=[],r.init=x(w().mark((function t(){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=r.initialized,t.t0){t.next=10;break}return t.next=4,r.cleanup();case 4:r.registerRelayerEvents(),r.registerExpirerEvents(),r.registerPairingEvents(),r.client.core.pairing.register({methods:Object.keys(H)}),r.initialized=!0,setTimeout((function(){r.sessionRequestQueue.queue=r.getPendingSessionRequests(),r.processSessionRequestQueue()}),Object(d.toMiliseconds)(r.requestQueueDelay));case 10:case"end":return t.stop()}}),t)}))),r.connect=function(){var t=x(w().mark((function t(e){var o,s,i,c,l,a,h,v,y,m,_,E,O,A,u,p,k,S,I,j,P,M,R;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.isInitialized();case 2:return o=ot(it({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}}),t.next=5,r.isValidConnect(o);case 5:s=o.pairingTopic,i=o.requiredNamespaces,c=o.optionalNamespaces,l=o.sessionProperties,a=o.relays,h=s,y=!1,t.prev=7,h&&(y=r.client.core.pairing.pairings.get(h).active),t.next=14;break;case 11:throw t.prev=11,t.t0=t.catch(7),r.client.logger.error("connect() -> pairing.get(".concat(h,") failed")),t.t0;case 14:if(h&&y){t.next=21;break}return t.next=17,r.client.core.pairing.create();case 17:m=t.sent,_=m.topic,E=m.uri,h=_,v=E;case 21:if(h){t.next=24;break}throw O=Object(f.B)("NO_MATCHING_KEY","connect() pairing topic: ".concat(h)),A=O.message,new Error(A);case 24:return t.next=26,r.client.core.crypto.generateKeyPair();case 26:return u=t.sent,p=H.wc_sessionPropose.req.ttl||d.FIVE_MINUTES,k=Object(f.e)(p),S=it({requiredNamespaces:i,optionalNamespaces:c,relays:null!=a?a:[{protocol:n.d}],proposer:{publicKey:u,metadata:r.client.metadata},expiryTimestamp:k,pairingTopic:h},l&&{sessionProperties:l}),I=Object(f.f)(p,z),j=I.reject,P=I.resolve,M=I.done,r.events.once(Object(f.n)("session_connect"),function(){var t=x(w().mark((function t(e){var n,o,c;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.error,o=e.session,!n){t.next=5;break}j(n),t.next=18;break;case 5:if(!o){t.next=18;break}return o.self.publicKey=u,c=ot(it({},o),{pairingTopic:S.pairingTopic,requiredNamespaces:S.requiredNamespaces,optionalNamespaces:S.optionalNamespaces}),t.next=10,r.client.session.set(o.topic,c);case 10:return t.next=12,r.setExpiry(o.topic,o.expiry);case 12:if(t.t0=h,!t.t0){t.next=16;break}return t.next=16,r.client.core.pairing.updateMetadata({topic:h,metadata:o.peer.metadata});case 16:r.cleanupDuplicatePairings(c),P(c);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),t.next=37,r.sendRequest({topic:h,method:"wc_sessionPropose",params:S,throwOnFailedPublish:!0});case 37:return R=t.sent,t.next=40,r.setProposal(R,it({id:R},S));case 40:return t.abrupt("return",{uri:v,approval:M});case 41:case"end":return t.stop()}}),t,null,[[7,11]])})));return function(e){return t.apply(this,arguments)}}(),r.pair=function(){var t=x(w().mark((function t(e){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.isInitialized();case 2:return t.prev=2,t.next=5,r.client.core.pairing.pair(e);case 5:return t.abrupt("return",t.sent);case 8:throw t.prev=8,t.t0=t.catch(2),r.client.logger.error("pair() failed"),t.t0;case 11:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}(),r.approve=function(){var t=x(w().mark((function t(e){var n,s,i,o,c,a,l,h,d,v,u,p,y,m,_,x;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.isInitialized();case 2:return t.prev=2,t.next=5,r.isValidApprove(e);case 5:t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(2),r.client.logger.error("approve() -> isValidApprove() failed"),t.t0;case 10:n=e.id,s=e.relayProtocol,i=e.namespaces,o=e.sessionProperties,c=e.sessionConfig,t.prev=11,a=r.client.proposal.get(n),t.next=18;break;case 15:throw t.prev=15,t.t1=t.catch(11),r.client.logger.error("approve() -> proposal.get(".concat(n,") failed")),t.t1;case 18:return h=(l=a).pairingTopic,d=l.proposer,v=l.requiredNamespaces,u=l.optionalNamespaces,t.next=25,r.client.core.crypto.generateKeyPair();case 25:return p=t.sent,y=d.publicKey,t.next=29,r.client.core.crypto.generateSharedKey(p,y);case 29:return m=t.sent,_=it(it({relay:{protocol:null!=s?s:"irn"},namespaces:i,controller:{publicKey:p,metadata:r.client.metadata},expiry:Object(f.e)(F)},o&&{sessionProperties:o}),c&&{sessionConfig:c}),t.next=33,r.client.core.relayer.subscribe(m);case 33:return x=ot(it({},_),{topic:m,requiredNamespaces:v,optionalNamespaces:u,pairingTopic:h,acknowledged:!1,self:_.controller,peer:{publicKey:d.publicKey,metadata:d.metadata},controller:p}),t.next=36,r.client.session.set(m,x);case 36:return t.prev=36,t.next=39,r.sendResult({id:n,topic:h,result:{relay:{protocol:null!=s?s:"irn"},responderPublicKey:p},throwOnFailedPublish:!0});case 39:return t.next=41,r.sendRequest({topic:m,method:"wc_sessionSettle",params:_,throwOnFailedPublish:!0});case 41:t.next=50;break;case 43:return t.prev=43,t.t2=t.catch(36),r.client.logger.error(t.t2),r.client.session.delete(m,Object(f.H)("USER_DISCONNECTED")),t.next=49,r.client.core.relayer.unsubscribe(m);case 49:throw t.t2;case 50:return t.next=52,r.client.core.pairing.updateMetadata({topic:h,metadata:d.metadata});case 52:return t.next=54,r.client.proposal.delete(n,Object(f.H)("USER_DISCONNECTED"));case 54:return t.next=56,r.client.core.pairing.activate({topic:h});case 56:return t.next=58,r.setExpiry(m,Object(f.e)(F));case 58:return t.abrupt("return",{topic:m,acknowledged:function(){return new Promise((function(t){return setTimeout((function(){return t(r.client.session.get(m))}),500)}))}});case 59:case"end":return t.stop()}}),t,null,[[2,7],[11,15],[36,43]])})));return function(e){return t.apply(this,arguments)}}(),r.reject=function(){var t=x(w().mark((function t(e){var n,s,i;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.isInitialized();case 2:return t.prev=2,t.next=5,r.isValidReject(e);case 5:t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(2),r.client.logger.error("reject() -> isValidReject() failed"),t.t0;case 10:n=e.id,s=e.reason,t.prev=11,i=r.client.proposal.get(n).pairingTopic,t.next=18;break;case 15:throw t.prev=15,t.t1=t.catch(11),r.client.logger.error("reject() -> proposal.get(".concat(n,") failed")),t.t1;case 18:if(t.t2=i,!t.t2){t.next=24;break}return t.next=22,r.sendError({id:n,topic:i,error:s,rpcOpts:H.wc_sessionPropose.reject});case 22:return t.next=24,r.client.proposal.delete(n,Object(f.H)("USER_DISCONNECTED"));case 24:case"end":return t.stop()}}),t,null,[[2,7],[11,15]])})));return function(e){return t.apply(this,arguments)}}(),r.update=function(){var t=x(w().mark((function t(e){var n,s,o,i,c,l,a,h,d;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.isInitialized();case 2:return t.prev=2,t.next=5,r.isValidUpdate(e);case 5:t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(2),r.client.logger.error("update() -> isValidUpdate() failed"),t.t0;case 10:return n=e.topic,s=e.namespaces,o=Object(f.f)(),i=o.done,c=o.resolve,l=o.reject,a=Object(v.payloadId)(),h=Object(v.getBigIntRpcId)().toString(),d=r.client.session.get(n).namespaces,r.events.once(Object(f.n)("session_update",a),(function(t){var e=t.error;e?l(e):c()})),t.next=14,r.client.session.update(n,{namespaces:s});case 14:return t.next=16,r.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:a,relayRpcId:h}).catch((function(t){r.client.logger.error(t),r.client.session.update(n,{namespaces:d}),l(t)}));case 16:return t.abrupt("return",{acknowledged:i});case 17:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),r.extend=function(){var t=x(w().mark((function t(e){var n,s,o,i,c,l;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.isInitialized();case 2:return t.prev=2,t.next=5,r.isValidExtend(e);case 5:t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(2),r.client.logger.error("extend() -> isValidExtend() failed"),t.t0;case 10:return n=e.topic,s=Object(v.payloadId)(),o=Object(f.f)(),i=o.done,c=o.resolve,l=o.reject,r.events.once(Object(f.n)("session_extend",s),(function(t){var a=t.error;a?l(a):c()})),t.next=14,r.setExpiry(n,Object(f.e)(F));case 14:return r.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch((function(a){l(a)})),t.abrupt("return",{acknowledged:i});case 16:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),r.request=function(){var t=x(w().mark((function t(e){var n,s,i,o,c,l,a,h,d,y,m,u;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.isInitialized();case 2:return t.prev=2,t.next=5,r.isValidRequest(e);case 5:t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(2),r.client.logger.error("request() -> isValidRequest() failed"),t.t0;case 10:return n=e.chainId,s=e.request,i=e.topic,o=e.expiry,c=void 0===o?H.wc_sessionRequest.req.ttl:o,l=r.client.session.get(i),a=Object(v.payloadId)(),h=Object(v.getBigIntRpcId)().toString(),d=Object(f.f)(c,"Request expired. Please try again."),y=d.done,m=d.resolve,u=d.reject,r.events.once(Object(f.n)("session_request",a),(function(t){var p=t.error,e=t.result;p?u(p):m(e)})),t.next=14,Promise.all([new Promise(function(){var t=x(w().mark((function t(p){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.sendRequest({clientRpcId:a,relayRpcId:h,topic:i,method:"wc_sessionRequest",params:{request:ot(it({},s),{expiryTimestamp:Object(f.e)(c)}),chainId:n},expiry:c,throwOnFailedPublish:!0}).catch((function(t){return u(t)}));case 2:r.client.events.emit("session_request_sent",{topic:i,request:s,chainId:n,id:a}),p();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),new Promise(function(){var t=x(w().mark((function t(p){var e,n;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(e=l.sessionConfig)&&e.disableDeepLink){t.next=5;break}return t.next=3,Object(f.z)(r.client.core.storage,D);case 3:n=t.sent,Object(f.I)({id:a,topic:i,wcDeepLink:n});case 5:p();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),y()]).then((function(p){return p[2]}));case 14:return t.abrupt("return",t.sent);case 15:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),r.respond=function(){var t=x(w().mark((function t(e){var n,s,i;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.isInitialized();case 2:return t.next=4,r.isValidRespond(e);case 4:if(n=e.topic,s=e.response,i=s.id,!Object(v.isJsonRpcResult)(s)){t.next=10;break}return t.next=8,r.sendResult({id:i,topic:n,result:s.result,throwOnFailedPublish:!0});case 8:t.next=14;break;case 10:if(t.t0=Object(v.isJsonRpcError)(s),!t.t0){t.next=14;break}return t.next=14,r.sendError({id:i,topic:n,error:s.error});case 14:r.cleanupAfterResponse(e);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.ping=function(){var t=x(w().mark((function t(e){var n,s,i,o,c,l,a;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.isInitialized();case 2:return t.prev=2,t.next=5,r.isValidPing(e);case 5:t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(2),r.client.logger.error("ping() -> isValidPing() failed"),t.t0;case 10:if(n=e.topic,!r.client.session.keys.includes(n)){t.next=18;break}return s=Object(v.payloadId)(),i=Object(v.getBigIntRpcId)().toString(),o=Object(f.f)(),c=o.done,l=o.resolve,a=o.reject,r.events.once(Object(f.n)("session_ping",s),(function(t){var e=t.error;e?a(e):l()})),t.next=16,Promise.all([r.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:i}),c()]);case 16:t.next=22;break;case 18:if(t.t1=r.client.core.pairing.pairings.keys.includes(n),!t.t1){t.next=22;break}return t.next=22,r.client.core.pairing.ping({topic:n});case 22:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}(),r.emit=function(){var t=x(w().mark((function t(e){var n,s,i,o;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.isInitialized();case 2:return t.next=4,r.isValidEmit(e);case 4:return n=e.topic,s=e.event,i=e.chainId,o=Object(v.getBigIntRpcId)().toString(),t.next=7,r.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:s,chainId:i},throwOnFailedPublish:!0,relayRpcId:o});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.disconnect=function(){var t=x(w().mark((function t(e){var n,o,s;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.isInitialized();case 2:return t.next=4,r.isValidDisconnect(e);case 4:if(n=e.topic,!r.client.session.keys.includes(n)){t.next=12;break}return t.next=8,r.sendRequest({topic:n,method:"wc_sessionDelete",params:Object(f.H)("USER_DISCONNECTED"),throwOnFailedPublish:!0});case 8:return t.next=10,r.deleteSession({topic:n,emitEvent:!1});case 10:case 15:t.next=19;break;case 12:if(!r.client.core.pairing.pairings.keys.includes(n)){t.next=17;break}return t.next=15,r.client.core.pairing.disconnect({topic:n});case 17:throw o=Object(f.B)("MISMATCHED_TOPIC","Session or pairing topic not found: ".concat(n)),s=o.message,new Error(s);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.find=function(t){return r.isInitialized(),r.client.session.getAll().filter((function(e){return Object(f.T)(e,t)}))},r.getPendingSessionRequests=function(){return r.client.pendingRequest.getAll()},r.authenticate=function(){var t=x(w().mark((function t(e){var n,o,s,i,c,l,a,h,d,y,_,u,p,E,O,A,k,S,I,j,P,M,N,T,L,C,U,B,D,z,K,G,V;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.isInitialized(),r.isValidAuthenticate(e),n=e.chains,o=e.statement,s=void 0===o?"":o,i=e.uri,c=e.domain,l=e.nonce,a=e.type,h=e.exp,d=e.nbf,y=e.methods,_=void 0===y?[]:y,u=e.expiry,p=m(e.resources||[]),t.next=16,r.client.core.pairing.create({methods:["wc_sessionAuthenticate"]});case 16:return E=t.sent,O=E.topic,A=E.uri,r.client.logger.info({message:"Generated new pairing",pairing:{topic:O,uri:A}}),t.next=22,r.client.core.crypto.generateKeyPair();case 22:return k=t.sent,S=Object(f.J)(k),t.next=26,Promise.all([r.client.auth.authKeys.set(W,{responseTopic:S,publicKey:k}),r.client.auth.pairingTopics.set(S,{topic:S,pairingTopic:O})]);case 26:return t.next=28,r.client.core.relayer.subscribe(S);case 28:if(r.client.logger.info("sending request to new pairing topic: ".concat(O)),!(_.length>0)){t.next=33;break}I=Object(f.ub)(n[0]),j=I.namespace,P=Object(f.g)(j,"request",_),Object(f.E)(p)&&(P=Object(f.sb)(P,p.pop())),p.push(P);case 33:return M=u&&u>H.wc_sessionAuthenticate.req.ttl?u:H.wc_sessionAuthenticate.req.ttl,N={authPayload:{type:null!=a?a:"caip122",chains:n,statement:s,aud:i,domain:c,version:"1",nonce:l,iat:(new Date).toISOString(),exp:h,nbf:d,resources:p},requester:{publicKey:k,metadata:r.client.metadata},expiryTimestamp:Object(f.e)(M)},T={eip155:{chains:n,methods:m(new Set(["personal_sign"].concat(m(_)))),events:["chainChanged","accountsChanged"]}},L={requiredNamespaces:{},optionalNamespaces:T,relays:[{protocol:"irn"}],pairingTopic:O,proposer:{publicKey:k,metadata:r.client.metadata},expiryTimestamp:Object(f.e)(H.wc_sessionPropose.req.ttl)},C=Object(f.f)(M,"Request expired"),U=C.done,B=C.resolve,D=C.reject,z=function(){var t=x(w().mark((function t(e){var n,o,c;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.error,o=e.session,r.events.off(Object(f.n)("session_request",G),K),!n){t.next=5;break}D(n),t.next=19;break;case 5:if(!o){t.next=19;break}return o.self.publicKey=k,t.next=9,r.client.session.set(o.topic,o);case 9:return t.next=11,r.setExpiry(o.topic,o.expiry);case 11:if(t.t0=O,!t.t0){t.next=15;break}return t.next=15,r.client.core.pairing.updateMetadata({topic:O,metadata:o.peer.metadata});case 15:return c=r.client.session.get(o.topic),t.next=18,r.deleteProposal(V);case 18:B({session:c});case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),K=function(){var t=x(w().mark((function t(e){var n,o,c,l,h,d,v,y,_,x,E,A,S,I,j,P,M,N,T,L;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.deletePendingAuthRequest(G,{message:"fulfilled",code:0});case 2:if(!e.error){t.next=5;break}return n=Object(f.H)("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate"),t.abrupt("return",e.error.code===n.code?void 0:(r.events.off(Object(f.n)("session_connect"),z),D(e.error.message)));case 5:return t.next=7,r.deleteProposal(V);case 7:r.events.off(Object(f.n)("session_connect"),z),o=e.result,c=o.cacaos,l=o.responder,h=[],d=[],v=R(c),t.prev=10,v.s();case 12:if((y=v.n()).done){t.next=24;break}return _=y.value,t.next=16,Object(f.Bb)({cacao:_,projectId:r.client.core.projectId});case 16:if(t.t0=t.sent,t.t0){t.next=19;break}r.client.logger.error(_,"Signature verification failed"),D(Object(f.H)("SESSION_SETTLEMENT_FAILED","Signature verification failed"));case 19:for(x=_.p,E=Object(f.E)(x.resources),A=[Object(f.D)(x.iss)],S=Object(f.A)(x.iss),E&&(I=Object(f.C)(E),j=Object(f.y)(E),h.push.apply(h,m(I)),A.push.apply(A,m(j))),P=0,M=A;P<M.length;P++)N=M[P],d.push("".concat(N,":").concat(S));case 22:t.next=12;break;case 24:t.next=29;break;case 26:t.prev=26,t.t1=t.catch(10),v.e(t.t1);case 29:return t.prev=29,v.f(),t.finish(29);case 32:return t.next=34,r.client.core.crypto.generateSharedKey(k,l.publicKey);case 34:if(T=t.sent,t.t2=h.length>0,!t.t2){t.next=47;break}return L={topic:T,acknowledged:!0,self:{publicKey:k,metadata:r.client.metadata},peer:l,controller:l.publicKey,expiry:Object(f.e)(F),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:O,namespaces:Object(f.d)(m(new Set(h)),m(new Set(d)))},t.next=40,r.client.core.relayer.subscribe(T);case 40:return t.next=42,r.client.session.set(T,L);case 42:if(t.t3=O,!t.t3){t.next=46;break}return t.next=46,r.client.core.pairing.updateMetadata({topic:O,metadata:l.metadata});case 46:L=r.client.session.get(T);case 47:B({auths:c,session:L});case 48:case"end":return t.stop()}}),t,null,[[10,26,29,32]])})));return function(e){return t.apply(this,arguments)}}(),G=Object(v.payloadId)(),V=Object(v.payloadId)(),r.events.once(Object(f.n)("session_connect"),z),r.events.once(Object(f.n)("session_request",G),K),t.prev=35,t.next=38,Promise.all([r.sendRequest({topic:O,method:"wc_sessionAuthenticate",params:N,expiry:e.expiry,throwOnFailedPublish:!0,clientRpcId:G}),r.sendRequest({topic:O,method:"wc_sessionPropose",params:L,expiry:H.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:V})]);case 38:t.next=43;break;case 40:throw t.prev=40,t.t0=t.catch(35),r.events.off(Object(f.n)("session_connect"),z),r.events.off(Object(f.n)("session_request",G),K),t.t0;case 43:return t.next=45,r.setProposal(V,it({id:V},L));case 45:return t.next=47,r.setAuthRequest(G,{request:ot(it({},N),{verifyContext:{}}),pairingTopic:O});case 47:return t.abrupt("return",{uri:A,response:U});case 48:case"end":return t.stop()}}),t,null,[[35,40]])})));return function(e){return t.apply(this,arguments)}}(),r.approveSessionAuthenticate=function(){var t=x(w().mark((function t(e){var n,s,i,o,c,a,l,h,d,v,y,_,x,E,O,A,k,S,I,j,P,M,u,p;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.isInitialized(),n=e.id,s=e.auths,i=r.getPendingAuthRequest(n)){t.next=4;break}throw new Error("Could not find pending auth request with id ".concat(n));case 4:return o=i.requester.publicKey,t.next=7,r.client.core.crypto.generateKeyPair();case 7:c=t.sent,a=Object(f.J)(o),l={type:f.c,receiverPublicKey:o,senderPublicKey:c},h=[],d=[],v=R(s),t.prev=13,v.s();case 15:if((y=v.n()).done){t.next=29;break}return _=y.value,t.next=19,Object(f.Bb)({cacao:_,projectId:r.client.core.projectId});case 19:if(t.sent){t.next=24;break}return x=Object(f.H)("SESSION_SETTLEMENT_FAILED","Signature verification failed"),t.next=23,r.sendError({id:n,topic:a,error:x,encodeOpts:l});case 23:throw new Error(x.message);case 24:for(E=_.p,O=Object(f.E)(E.resources),A=[Object(f.D)(E.iss)],k=Object(f.A)(E.iss),O&&(S=Object(f.C)(O),I=Object(f.y)(O),h.push.apply(h,m(S)),A.push.apply(A,m(I))),j=0,P=A;j<P.length;j++)M=P[j],d.push("".concat(M,":").concat(k));case 27:t.next=15;break;case 29:t.next=34;break;case 31:t.prev=31,t.t0=t.catch(13),v.e(t.t0);case 34:return t.prev=34,v.f(),t.finish(34);case 37:return t.next=39,r.client.core.crypto.generateSharedKey(c,o);case 39:if(u=t.sent,t.t1=(null==h?void 0:h.length)>0,!t.t1){t.next=49;break}return p={topic:u,acknowledged:!0,self:{publicKey:c,metadata:r.client.metadata},peer:{publicKey:o,metadata:i.requester.metadata},controller:o,expiry:Object(f.e)(F),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:i.pairingTopic,namespaces:Object(f.d)(m(new Set(h)),m(new Set(d)))},t.next=45,r.client.core.relayer.subscribe(u);case 45:return t.next=47,r.client.session.set(u,p);case 47:return t.next=49,r.client.core.pairing.updateMetadata({topic:i.pairingTopic,metadata:i.requester.metadata});case 49:return t.next=51,r.sendResult({topic:a,id:n,result:{cacaos:s,responder:{publicKey:c,metadata:r.client.metadata}},encodeOpts:l,throwOnFailedPublish:!0});case 51:return t.next=53,r.client.auth.requests.delete(n,{message:"fulfilled",code:0});case 53:return t.next=55,r.client.core.pairing.activate({topic:i.pairingTopic});case 55:return t.abrupt("return",{session:p});case 56:case"end":return t.stop()}}),t,null,[[13,31,34,37]])})));return function(e){return t.apply(this,arguments)}}(),r.rejectSessionAuthenticate=function(){var t=x(w().mark((function t(e){var n,s,i,o,c,a,l;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.isInitialized();case 2:if(n=e.id,s=e.reason,i=r.getPendingAuthRequest(n)){t.next=5;break}throw new Error("Could not find pending auth request with id ".concat(n));case 5:return o=i.requester.publicKey,t.next=8,r.client.core.crypto.generateKeyPair();case 8:return c=t.sent,a=Object(f.J)(o),l={type:f.c,receiverPublicKey:o,senderPublicKey:c},t.next=13,r.sendError({id:n,topic:a,error:s,encodeOpts:l,rpcOpts:H.wc_sessionAuthenticate.reject});case 13:return t.next=15,r.client.auth.requests.delete(n,{message:"rejected",code:0});case 15:return t.next=17,r.client.proposal.delete(n,Object(f.H)("USER_DISCONNECTED"));case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.formatAuthMessage=function(t){r.isInitialized();var e=t.request,s=t.iss;return Object(f.p)(e,s)},r.processRelayMessageCache=function(){setTimeout(x(w().mark((function t(){var e;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===r.relayMessageCache.length){t.next=15;break}case 1:if(!(r.relayMessageCache.length>0)){t.next=15;break}if(t.prev=2,e=r.relayMessageCache.shift(),t.t0=e,!t.t0){t.next=8;break}return t.next=8,r.onRelayMessage(e);case 8:t.next=13;break;case 10:t.prev=10,t.t1=t.catch(2),r.client.logger.error(t.t1);case 13:t.next=1;break;case 15:case"end":return t.stop()}}),t,null,[[2,10]])}))),50)},r.cleanupDuplicatePairings=function(){var t=x(w().mark((function t(e){var n,s;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.pairingTopic){t.next=14;break}if(t.prev=1,n=r.client.core.pairing.pairings.get(e.pairingTopic),0!==(s=r.client.core.pairing.pairings.getAll().filter((function(i){var t,r;return(null==(t=i.peerMetadata)?void 0:t.url)&&(null==(r=i.peerMetadata)?void 0:r.url)===e.peer.metadata.url&&i.topic&&i.topic!==n.topic}))).length){t.next=5;break}return t.abrupt("return");case 5:return r.client.logger.info("Cleaning up ".concat(s.length," duplicate pairing(s)")),t.next=8,Promise.all(s.map((function(i){return r.client.core.pairing.disconnect({topic:i.topic})})));case 8:r.client.logger.info("Duplicate pairings clean up finished"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),r.client.logger.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}(),r.deleteSession=function(){var t=x(w().mark((function t(e){var n,s,o,i,c,l,h,d,v,a;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.topic,o=e.expirerHasDeleted,i=void 0!==o&&o,c=e.emitEvent,l=void 0===c||c,h=e.id,d=void 0===h?0:h,v=r.client.session.get(s),a=v.self,t.next=3,r.client.core.relayer.unsubscribe(s);case 3:return t.next=5,r.client.session.delete(s,Object(f.H)("USER_DISCONNECTED"));case 5:if(r.addToRecentlyDeleted(s,"session"),t.t0=r.client.core.crypto.keychain.has(a.publicKey),!t.t0){t.next=10;break}return t.next=10,r.client.core.crypto.deleteKeyPair(a.publicKey);case 10:if(t.t1=r.client.core.crypto.keychain.has(s),!t.t1){t.next=14;break}return t.next=14,r.client.core.crypto.deleteSymKey(s);case 14:i||r.client.core.expirer.del(s),r.client.core.storage.removeItem(D).catch((function(t){return r.client.logger.warn(t)})),r.getPendingSessionRequests().forEach((function(t){t.topic===s&&r.deletePendingSessionRequest(t.id,Object(f.H)("USER_DISCONNECTED"))})),s===(null==(n=r.sessionRequestQueue.queue[0])?void 0:n.topic)&&(r.sessionRequestQueue.state=G),l&&r.client.events.emit("session_delete",{id:d,topic:s});case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.deleteProposal=function(){var t=x(w().mark((function t(e,n){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([r.client.proposal.delete(e,Object(f.H)("USER_DISCONNECTED")),n?Promise.resolve():r.client.core.expirer.del(e)]);case 2:r.addToRecentlyDeleted(e,"proposal");case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),r.deletePendingSessionRequest=function(){var t=x(w().mark((function t(e,n){var s,o=arguments;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=o.length>2&&void 0!==o[2]&&o[2],t.next=3,Promise.all([r.client.pendingRequest.delete(e,n),s?Promise.resolve():r.client.core.expirer.del(e)]);case 3:r.addToRecentlyDeleted(e,"request"),r.sessionRequestQueue.queue=r.sessionRequestQueue.queue.filter((function(i){return i.id!==e})),s&&(r.sessionRequestQueue.state=G,r.client.events.emit("session_request_expire",{id:e}));case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),r.deletePendingAuthRequest=function(){var t=x(w().mark((function t(e,n){var s,o=arguments;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=o.length>2&&void 0!==o[2]&&o[2],t.next=3,Promise.all([r.client.auth.requests.delete(e,n),s?Promise.resolve():r.client.core.expirer.del(e)]);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),r.setExpiry=function(){var t=x(w().mark((function t(e,n){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=r.client.session.keys.includes(e),!t.t0){t.next=5;break}return r.client.core.expirer.set(e,n),t.next=5,r.client.session.update(e,{expiry:n});case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),r.setProposal=function(){var t=x(w().mark((function t(e,n){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.client.core.expirer.set(e,Object(f.e)(H.wc_sessionPropose.req.ttl)),t.next=3,r.client.proposal.set(e,n);case 3:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),r.setAuthRequest=function(){var t=x(w().mark((function t(e,n){var s,i;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=n.request,i=n.pairingTopic,r.client.core.expirer.set(e,s.expiryTimestamp),t.next=4,r.client.auth.requests.set(e,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:e,pairingTopic:i,verifyContext:s.verifyContext});case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),r.setPendingSessionRequest=function(){var t=x(w().mark((function t(e){var n,s,i,o,c;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,s=e.topic,i=e.params,o=e.verifyContext,c=i.request.expiryTimestamp||Object(f.e)(H.wc_sessionRequest.req.ttl),r.client.core.expirer.set(n,c),t.next=4,r.client.pendingRequest.set(n,{id:n,topic:s,params:i,verifyContext:o});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.sendRequest=function(){var t=x(w().mark((function t(e){var n,s,i,o,c,a,l,h,p,d,u;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.topic,s=e.method,i=e.params,o=e.expiry,c=e.relayRpcId,a=e.clientRpcId,l=e.throwOnFailedPublish,h=Object(v.formatJsonRpcRequest)(s,i,a),Object(f.L)()&&Y.includes(s)&&(p=Object(f.K)(JSON.stringify(h)),r.client.core.verify.register({attestationId:p})),t.prev=2,t.next=5,r.client.core.crypto.encode(n,h);case 5:d=t.sent,t.next=14;break;case 8:return t.prev=8,t.t0=t.catch(2),t.next=12,r.cleanup();case 12:throw r.client.logger.error("sendRequest() -> core.crypto.encode() for topic ".concat(n," failed")),t.t0;case 14:if(u=H[s].req,o&&(u.ttl=o),c&&(u.id=c),r.client.core.history.set(n,h),!l){t.next=24;break}return u.internal=ot(it({},u.internal),{throwOnFailedPublish:!0}),t.next=22,r.client.core.relayer.publish(n,d,u);case 22:t.next=25;break;case 24:r.client.core.relayer.publish(n,d,u).catch((function(p){return r.client.logger.error(p)}));case 25:return t.abrupt("return",h.id);case 26:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}(),r.sendResult=function(){var t=x(w().mark((function t(e){var n,s,i,o,c,a,f,l,h;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,s=e.topic,i=e.result,o=e.throwOnFailedPublish,c=e.encodeOpts,a=Object(v.formatJsonRpcResult)(n,i),t.prev=1,t.next=4,r.client.core.crypto.encode(s,a,c);case 4:f=t.sent,t.next=13;break;case 7:return t.prev=7,t.t0=t.catch(1),t.next=11,r.cleanup();case 11:throw r.client.logger.error("sendResult() -> core.crypto.encode() for topic ".concat(s," failed")),t.t0;case 13:return t.prev=13,t.next=16,r.client.core.history.get(s,n);case 16:l=t.sent,t.next=22;break;case 19:throw t.prev=19,t.t1=t.catch(13),r.client.logger.error("sendResult() -> history.get(".concat(s,", ").concat(n,") failed")),t.t1;case 22:if(h=H[l.request.method].res,!o){t.next=29;break}return h.internal=ot(it({},h.internal),{throwOnFailedPublish:!0}),t.next=27,r.client.core.relayer.publish(s,f,h);case 27:t.next=30;break;case 29:r.client.core.relayer.publish(s,f,h).catch((function(u){return r.client.logger.error(u)}));case 30:return t.next=32,r.client.core.history.resolve(a);case 32:case"end":return t.stop()}}),t,null,[[1,7],[13,19]])})));return function(e){return t.apply(this,arguments)}}(),r.sendError=function(){var t=x(w().mark((function t(e){var n,s,i,o,c,a,f,l,h;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.id,s=e.topic,i=e.error,o=e.encodeOpts,c=e.rpcOpts,a=Object(v.formatJsonRpcError)(n,i),t.prev=1,t.next=4,r.client.core.crypto.encode(s,a,o);case 4:f=t.sent,t.next=13;break;case 7:return t.prev=7,t.t0=t.catch(1),t.next=11,r.cleanup();case 11:throw r.client.logger.error("sendError() -> core.crypto.encode() for topic ".concat(s," failed")),t.t0;case 13:return t.prev=13,t.next=16,r.client.core.history.get(s,n);case 16:l=t.sent,t.next=22;break;case 19:throw t.prev=19,t.t1=t.catch(13),r.client.logger.error("sendError() -> history.get(".concat(s,", ").concat(n,") failed")),t.t1;case 22:return h=c||H[l.request.method].res,r.client.core.relayer.publish(s,f,h),t.next=26,r.client.core.history.resolve(a);case 26:case"end":return t.stop()}}),t,null,[[1,7],[13,19]])})));return function(e){return t.apply(this,arguments)}}(),r.cleanup=x(w().mark((function t(){var e,n;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],n=[],r.client.session.getAll().forEach((function(s){var i=!1;Object(f.O)(s.expiry)&&(i=!0),r.client.core.crypto.keychain.has(s.topic)||(i=!0),i&&e.push(s.topic)})),r.client.proposal.getAll().forEach((function(s){Object(f.O)(s.expiryTimestamp)&&n.push(s.id)})),t.next=5,Promise.all([].concat(m(e.map((function(s){return r.deleteSession({topic:s})}))),m(n.map((function(s){return r.deleteProposal(s)})))));case 5:case"end":return t.stop()}}),t)}))),r.onRelayEventRequest=function(){var t=x(w().mark((function t(e){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.requestQueue.queue.push(e),t.next=3,r.processRequestsQueue();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.processRequestsQueue=x(w().mark((function t(){var e;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.requestQueue.state!==V){t.next=3;break}return r.client.logger.info("Request queue already active, skipping..."),t.abrupt("return");case 3:r.client.logger.info("Request queue starting with ".concat(r.requestQueue.queue.length," requests"));case 4:if(!(r.requestQueue.queue.length>0)){t.next=18;break}if(r.requestQueue.state=V,!(e=r.requestQueue.queue.shift())){t.next=16;break}return t.prev=8,t.next=11,r.processRequest(e);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(8),r.client.logger.warn(t.t0);case 16:t.next=4;break;case 18:r.requestQueue.state=G;case 19:case"end":return t.stop()}}),t,null,[[8,13]])}))),r.processRequest=function(){var t=x(w().mark((function t(e){var n,s,i;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.topic,s=e.payload,i=s.method,r.shouldIgnorePairingRequest({topic:n,requestMethod:i})){t.next=33;break}t.t0=i,t.next="wc_sessionPropose"===t.t0?5:"wc_sessionSettle"===t.t0?8:"wc_sessionUpdate"===t.t0?11:"wc_sessionExtend"===t.t0?14:"wc_sessionPing"===t.t0?17:"wc_sessionDelete"===t.t0?20:"wc_sessionRequest"===t.t0?23:"wc_sessionEvent"===t.t0?26:"wc_sessionAuthenticate"===t.t0?29:32;break;case 5:return t.next=7,r.onSessionProposeRequest(n,s);case 7:case 10:case 13:case 16:case 19:case 22:case 25:case 28:case 31:return t.abrupt("return",t.sent);case 8:return t.next=10,r.onSessionSettleRequest(n,s);case 11:return t.next=13,r.onSessionUpdateRequest(n,s);case 14:return t.next=16,r.onSessionExtendRequest(n,s);case 17:return t.next=19,r.onSessionPingRequest(n,s);case 20:return t.next=22,r.onSessionDeleteRequest(n,s);case 23:return t.next=25,r.onSessionRequest(n,s);case 26:return t.next=28,r.onSessionEventRequest(n,s);case 29:return t.next=31,r.onSessionAuthenticateRequest(n,s);case 32:return t.abrupt("return",r.client.logger.info("Unsupported request method ".concat(i)));case 33:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.onRelayEventResponse=function(){var t=x(w().mark((function t(e){var n,s,i;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.topic,s=e.payload,t.next=4,r.client.core.history.get(n,s.id);case 4:i=t.sent.request.method,t.t0=i,t.next="wc_sessionPropose"===t.t0?8:"wc_sessionSettle"===t.t0?9:"wc_sessionUpdate"===t.t0?10:"wc_sessionExtend"===t.t0?11:"wc_sessionPing"===t.t0?12:"wc_sessionRequest"===t.t0?13:"wc_sessionAuthenticate"===t.t0?14:15;break;case 8:return t.abrupt("return",r.onSessionProposeResponse(n,s));case 9:return t.abrupt("return",r.onSessionSettleResponse(n,s));case 10:return t.abrupt("return",r.onSessionUpdateResponse(n,s));case 11:return t.abrupt("return",r.onSessionExtendResponse(n,s));case 12:return t.abrupt("return",r.onSessionPingResponse(n,s));case 13:return t.abrupt("return",r.onSessionRequestResponse(n,s));case 14:return t.abrupt("return",r.onSessionAuthenticateResponse(n,s));case 15:return t.abrupt("return",r.client.logger.info("Unsupported response method ".concat(i)));case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.onRelayEventUnknownPayload=function(t){var e=t.topic,s=Object(f.B)("MISSING_OR_INVALID","Decoded payload on topic ".concat(e," is not identifiable as a JSON-RPC request or a response.")).message;throw new Error(s)},r.shouldIgnorePairingRequest=function(t){var e=t.topic,s=t.requestMethod,i=r.expectedPairingMethodMap.get(e);return!(!i||i.includes(s))&&!!(i.includes("wc_sessionAuthenticate")&&r.client.events.listenerCount("session_authenticate")>0)},r.onSessionProposeRequest=function(){var t=x(w().mark((function t(e,n){var s,i,o,c,a,l;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=n.params,i=n.id,t.prev=1,r.isValidConnect(it({},n.params)),o=s.expiryTimestamp||Object(f.e)(H.wc_sessionPropose.req.ttl),c=it({id:i,pairingTopic:e,expiryTimestamp:o},s),t.next=6,r.setProposal(i,c);case 6:return a=Object(f.K)(JSON.stringify(n)),t.next=9,r.getVerifyContext(a,c.proposer.metadata);case 9:l=t.sent,r.client.events.emit("session_proposal",{id:i,params:c,verifyContext:l}),t.next=18;break;case 13:return t.prev=13,t.t0=t.catch(1),t.next=17,r.sendError({id:i,topic:e,error:t.t0,rpcOpts:H.wc_sessionPropose.autoReject});case 17:r.client.logger.error(t.t0);case 18:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e,r){return t.apply(this,arguments)}}(),r.onSessionProposeResponse=function(){var t=x(w().mark((function t(e,n){var s,i,o,c,a,l,h,d;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=n.id,!Object(v.isJsonRpcResult)(n)){t.next=22;break}return i=n.result,r.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:i}),o=r.client.proposal.get(s),r.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:o}),c=o.proposer.publicKey,r.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:c}),a=i.responderPublicKey,r.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:a}),t.next=12,r.client.core.crypto.generateSharedKey(c,a);case 12:return l=t.sent,r.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:l}),t.next=16,r.client.core.relayer.subscribe(l);case 16:return h=t.sent,r.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:h}),t.next=20,r.client.core.pairing.activate({topic:e});case 20:t.next=29;break;case 22:if(!Object(v.isJsonRpcError)(n)){t.next=29;break}return t.next=25,r.client.proposal.delete(s,Object(f.H)("USER_DISCONNECTED"));case 25:if(d=Object(f.n)("session_connect"),0!==r.events.listenerCount(d)){t.next=28;break}throw new Error("emitting ".concat(d," without any listeners, 954"));case 28:r.events.emit(Object(f.n)("session_connect"),{error:n.error});case 29:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),r.onSessionSettleRequest=function(){var t=x(w().mark((function t(e,n){var s,i,o,c,l,a,h,d,v,u,p;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=n.id,i=n.params,t.prev=1,r.isValidSessionSettleRequest(i),o=n.params,c=o.relay,l=o.controller,a=o.expiry,h=o.namespaces,d=o.sessionProperties,v=o.sessionConfig,u=it(it({topic:e,relay:c,expiry:a,namespaces:h,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:l.publicKey,self:{publicKey:"",metadata:r.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}},d&&{sessionProperties:d}),v&&{sessionConfig:v}),t.next=6,r.sendResult({id:n.id,topic:e,result:!0,throwOnFailedPublish:!0});case 6:if(p=Object(f.n)("session_connect"),0!==r.events.listenerCount(p)){t.next=9;break}throw new Error("emitting ".concat(p," without any listeners 997"));case 9:r.events.emit(Object(f.n)("session_connect"),{session:u}),t.next=17;break;case 12:return t.prev=12,t.t0=t.catch(1),t.next=16,r.sendError({id:s,topic:e,error:t.t0});case 16:r.client.logger.error(t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,12]])})));return function(e,r){return t.apply(this,arguments)}}(),r.onSessionSettleResponse=function(){var t=x(w().mark((function t(e,n){var s;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=n.id,!Object(v.isJsonRpcResult)(n)){t.next=7;break}return t.next=4,r.client.session.update(e,{acknowledged:!0});case 4:r.events.emit(Object(f.n)("session_approve",s),{}),t.next=12;break;case 7:if(t.t0=Object(v.isJsonRpcError)(n),!t.t0){t.next=12;break}return t.next=11,r.client.session.delete(e,Object(f.H)("USER_DISCONNECTED"));case 11:r.events.emit(Object(f.n)("session_approve",s),{error:n.error});case 12:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),r.onSessionUpdateRequest=function(){var t=x(w().mark((function t(e,n){var s,i,o,c;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=n.params,i=n.id,t.prev=1,o="".concat(e,"_session_update"),!(c=f.b.get(o))||!r.isRequestOutOfSync(c,i)){t.next=6;break}return r.client.logger.info("Discarding out of sync request - ".concat(i)),r.sendError({id:i,topic:e,error:Object(f.H)("INVALID_UPDATE_REQUEST")}),t.abrupt("return");case 6:return r.isValidUpdate(it({topic:e},s)),t.prev=7,f.b.set(o,i),t.next=11,r.client.session.update(e,{namespaces:s.namespaces});case 11:return t.next=13,r.sendResult({id:i,topic:e,result:!0,throwOnFailedPublish:!0});case 13:t.next=18;break;case 15:throw t.prev=15,t.t0=t.catch(7),f.b.delete(o),t.t0;case 18:r.client.events.emit("session_update",{id:i,topic:e,params:s}),t.next=26;break;case 21:return t.prev=21,t.t1=t.catch(1),t.next=25,r.sendError({id:i,topic:e,error:t.t1});case 25:r.client.logger.error(t.t1);case 26:case"end":return t.stop()}}),t,null,[[1,21],[7,15]])})));return function(e,r){return t.apply(this,arguments)}}(),r.isRequestOutOfSync=function(t,e){return parseInt(e.toString().slice(0,-3))<=parseInt(t.toString().slice(0,-3))},r.onSessionUpdateResponse=function(t,e){var s=e.id,i=Object(f.n)("session_update",s);if(0===r.events.listenerCount(i))throw new Error("emitting ".concat(i," without any listeners"));Object(v.isJsonRpcResult)(e)?r.events.emit(Object(f.n)("session_update",s),{}):Object(v.isJsonRpcError)(e)&&r.events.emit(Object(f.n)("session_update",s),{error:e.error})},r.onSessionExtendRequest=function(){var t=x(w().mark((function t(e,n){var s;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=n.id,t.prev=1,r.isValidExtend({topic:e}),t.next=5,r.setExpiry(e,Object(f.e)(F));case 5:return t.next=7,r.sendResult({id:s,topic:e,result:!0,throwOnFailedPublish:!0});case 7:r.client.events.emit("session_extend",{id:s,topic:e}),t.next=15;break;case 10:return t.prev=10,t.t0=t.catch(1),t.next=14,r.sendError({id:s,topic:e,error:t.t0});case 14:r.client.logger.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,r){return t.apply(this,arguments)}}(),r.onSessionExtendResponse=function(t,e){var s=e.id,i=Object(f.n)("session_extend",s);if(0===r.events.listenerCount(i))throw new Error("emitting ".concat(i," without any listeners"));Object(v.isJsonRpcResult)(e)?r.events.emit(Object(f.n)("session_extend",s),{}):Object(v.isJsonRpcError)(e)&&r.events.emit(Object(f.n)("session_extend",s),{error:e.error})},r.onSessionPingRequest=function(){var t=x(w().mark((function t(e,n){var s;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=n.id,t.prev=1,r.isValidPing({topic:e}),t.next=5,r.sendResult({id:s,topic:e,result:!0,throwOnFailedPublish:!0});case 5:r.client.events.emit("session_ping",{id:s,topic:e}),t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(1),t.next=12,r.sendError({id:s,topic:e,error:t.t0});case 12:r.client.logger.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,r){return t.apply(this,arguments)}}(),r.onSessionPingResponse=function(t,e){var s=e.id,i=Object(f.n)("session_ping",s);if(0===r.events.listenerCount(i))throw new Error("emitting ".concat(i," without any listeners"));setTimeout((function(){Object(v.isJsonRpcResult)(e)?r.events.emit(Object(f.n)("session_ping",s),{}):Object(v.isJsonRpcError)(e)&&r.events.emit(Object(f.n)("session_ping",s),{error:e.error})}),500)},r.onSessionDeleteRequest=function(){var t=x(w().mark((function t(e,o){var s;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=o.id,t.prev=1,r.isValidDisconnect({topic:e,reason:o.params}),t.next=5,Promise.all([new Promise((function(i){r.client.core.relayer.once(n.e.publish,x(w().mark((function t(){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=i,t.next=3,r.deleteSession({topic:e,id:s});case 3:t.t1=t.sent,(0,t.t0)(t.t1);case 5:case"end":return t.stop()}}),t)}))))})),r.sendResult({id:s,topic:e,result:!0,throwOnFailedPublish:!0}),r.cleanupPendingSentRequestsForTopic({topic:e,error:Object(f.H)("USER_DISCONNECTED")})]);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),r.client.logger.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,r){return t.apply(this,arguments)}}(),r.onSessionRequest=function(){var t=x(w().mark((function t(e,n){var s,i,o,c,a,l,h;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.id,o=n.params,t.prev=1,t.next=4,r.isValidRequest(it({topic:e},o));case 4:return c=Object(f.K)(JSON.stringify(Object(v.formatJsonRpcRequest)("wc_sessionRequest",o,i))),a=r.client.session.get(e),t.next=8,r.getVerifyContext(c,a.peer.metadata);case 8:return l=t.sent,h={id:i,topic:e,params:o,verifyContext:l},t.next=12,r.setPendingSessionRequest(h);case 12:null!=(s=r.client.signConfig)&&s.disableRequestQueue?r.emitSessionRequest(h):(r.addSessionRequestToSessionRequestQueue(h),r.processSessionRequestQueue()),t.next=20;break;case 15:return t.prev=15,t.t0=t.catch(1),t.next=19,r.sendError({id:i,topic:e,error:t.t0});case 19:r.client.logger.error(t.t0);case 20:case"end":return t.stop()}}),t,null,[[1,15]])})));return function(e,r){return t.apply(this,arguments)}}(),r.onSessionRequestResponse=function(t,e){var s=e.id,i=Object(f.n)("session_request",s);if(0===r.events.listenerCount(i))throw new Error("emitting ".concat(i," without any listeners"));Object(v.isJsonRpcResult)(e)?r.events.emit(Object(f.n)("session_request",s),{result:e.result}):Object(v.isJsonRpcError)(e)&&r.events.emit(Object(f.n)("session_request",s),{error:e.error})},r.onSessionEventRequest=function(){var t=x(w().mark((function t(e,n){var s,i,o,c;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=n.id,i=n.params,t.prev=1,o="".concat(e,"_session_event_").concat(i.event.name),!(c=f.b.get(o))||!r.isRequestOutOfSync(c,s)){t.next=6;break}return r.client.logger.info("Discarding out of sync request - ".concat(s)),t.abrupt("return");case 6:r.isValidEmit(it({topic:e},i)),r.client.events.emit("session_event",{id:s,topic:e,params:i}),f.b.set(o,s),t.next=14;break;case 9:return t.prev=9,t.t0=t.catch(1),t.next=13,r.sendError({id:s,topic:e,error:t.t0});case 13:r.client.logger.error(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,r){return t.apply(this,arguments)}}(),r.onSessionAuthenticateResponse=function(t,e){var s=e.id;r.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:t,payload:e}),Object(v.isJsonRpcResult)(e)?r.events.emit(Object(f.n)("session_request",s),{result:e.result}):Object(v.isJsonRpcError)(e)&&r.events.emit(Object(f.n)("session_request",s),{error:e.error})},r.onSessionAuthenticateRequest=function(){var t=x(w().mark((function t(e,n){var o,s,i,c,l,a,h,d,v,y;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=n.params,s=o.requester,i=o.authPayload,c=o.expiryTimestamp,l=Object(f.K)(JSON.stringify(n)),t.next=8,r.getVerifyContext(l,r.client.metadata);case 8:return a=t.sent,h={requester:s,pairingTopic:e,id:n.id,authPayload:i,verifyContext:a,expiryTimestamp:c},t.next=12,r.setAuthRequest(n.id,{request:h,pairingTopic:e});case 12:r.client.events.emit("session_authenticate",{topic:e,params:n.params,id:n.id,verifyContext:a}),t.next=25;break;case 15:return t.prev=15,t.t0=t.catch(0),r.client.logger.error(t.t0),d=n.params.requester.publicKey,t.next=21,r.client.core.crypto.generateKeyPair();case 21:return v=t.sent,y={type:f.c,receiverPublicKey:d,senderPublicKey:v},t.next=25,r.sendError({id:n.id,topic:e,error:t.t0,encodeOpts:y,rpcOpts:H.wc_sessionAuthenticate.autoReject});case 25:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e,r){return t.apply(this,arguments)}}(),r.addSessionRequestToSessionRequestQueue=function(t){r.sessionRequestQueue.queue.push(t)},r.cleanupAfterResponse=function(t){r.deletePendingSessionRequest(t.response.id,{message:"fulfilled",code:0}),setTimeout((function(){r.sessionRequestQueue.state=G,r.processSessionRequestQueue()}),Object(d.toMiliseconds)(r.requestQueueDelay))},r.cleanupPendingSentRequestsForTopic=function(t){var e=t.topic,n=t.error,s=r.client.core.history.pending;s.length>0&&s.filter((function(i){return i.topic===e&&"wc_sessionRequest"===i.request.method})).forEach((function(i){var t=i.request.id,e=Object(f.n)("session_request",t);if(0===r.events.listenerCount(e))throw new Error("emitting ".concat(e," without any listeners"));r.events.emit(Object(f.n)("session_request",i.request.id),{error:n})}))},r.processSessionRequestQueue=function(){if(r.sessionRequestQueue.state!==V){var t=r.sessionRequestQueue.queue[0];if(t)try{r.sessionRequestQueue.state=V,r.emitSessionRequest(t)}catch(t){r.client.logger.error(t)}else r.client.logger.info("session request queue is empty.")}else r.client.logger.info("session request queue is already active.")},r.emitSessionRequest=function(t){r.client.events.emit("session_request",t)},r.onPairingCreated=function(t){if(t.methods&&r.expectedPairingMethodMap.set(t.topic,t.methods),!t.active){var e=r.client.proposal.getAll().find((function(s){return s.pairingTopic===t.topic}));e&&r.onSessionProposeRequest(t.topic,Object(v.formatJsonRpcRequest)("wc_sessionPropose",{requiredNamespaces:e.requiredNamespaces,optionalNamespaces:e.optionalNamespaces,relays:e.relays,proposer:e.proposer,sessionProperties:e.sessionProperties},e.id))}},r.isValidConnect=function(){var t=x(w().mark((function t(e){var n,a,o,s,i,c,l,h,d;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(f.hb)(e)){t.next=3;break}throw n=Object(f.B)("MISSING_OR_INVALID","connect() params: ".concat(JSON.stringify(e))),a=n.message,new Error(a);case 3:if(o=e.pairingTopic,s=e.requiredNamespaces,i=e.optionalNamespaces,c=e.sessionProperties,l=e.relays,t.t0=Object(f.W)(o),t.t0){t.next=8;break}return t.next=8,r.isValidPairingTopic(o);case 8:if(Object(f.jb)(l,!0)){t.next=11;break}throw h=Object(f.B)("MISSING_OR_INVALID","connect() relays: ".concat(l)),d=h.message,new Error(d);case 11:!Object(f.W)(s)&&0!==Object(f.gb)(s)&&r.validateNamespaces(s,"requiredNamespaces"),!Object(f.W)(i)&&0!==Object(f.gb)(i)&&r.validateNamespaces(i,"optionalNamespaces"),Object(f.W)(c)||r.validateSessionProps(c,"sessionProperties");case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.validateNamespaces=function(t,e){var s=Object(f.mb)(t,"connect()",e);if(s)throw new Error(s.message)},r.isValidApprove=function(){var t=x(w().mark((function t(e){var n,s,i,o,c,a,l,h,d;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(f.hb)(e)){t.next=2;break}throw new Error(Object(f.B)("MISSING_OR_INVALID","approve() params: ".concat(e)).message);case 2:return n=e.id,s=e.namespaces,i=e.relayProtocol,o=e.sessionProperties,r.checkRecentlyDeleted(n),t.next=6,r.isValidProposalId(n);case 6:if(c=r.client.proposal.get(n),!(a=Object(f.cb)(s,"approve()"))){t.next=9;break}throw new Error(a.message);case 9:if(!(l=Object(f.N)(c.requiredNamespaces,s,"approve()"))){t.next=12;break}throw new Error(l.message);case 12:if(Object(f.ob)(i,!0)){t.next=15;break}throw h=Object(f.B)("MISSING_OR_INVALID","approve() relayProtocol: ".concat(i)),d=h.message,new Error(d);case 15:Object(f.W)(o)||r.validateSessionProps(o,"sessionProperties");case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.isValidReject=function(){var t=x(w().mark((function t(e){var n,i,o,s,c,l;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(f.hb)(e)){t.next=3;break}throw n=Object(f.B)("MISSING_OR_INVALID","reject() params: ".concat(e)),i=n.message,new Error(i);case 3:return o=e.id,s=e.reason,r.checkRecentlyDeleted(o),t.next=7,r.isValidProposalId(o);case 7:if(Object(f.Z)(s)){t.next=10;break}throw c=Object(f.B)("MISSING_OR_INVALID","reject() reason: ".concat(JSON.stringify(s))),l=c.message,new Error(l);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.isValidSessionSettleRequest=function(t){if(!Object(f.hb)(t)){var e=Object(f.B)("MISSING_OR_INVALID","onSessionSettleRequest() params: ".concat(t)).message;throw new Error(e)}var r=t.relay,s=t.controller,i=t.namespaces,n=t.expiry;if(!Object(f.ib)(r)){var o=Object(f.B)("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string").message;throw new Error(o)}var c=Object(f.Y)(s,"onSessionSettleRequest()");if(c)throw new Error(c.message);var a=Object(f.cb)(i,"onSessionSettleRequest()");if(a)throw new Error(a.message);if(Object(f.O)(n)){var l=Object(f.B)("EXPIRED","onSessionSettleRequest()").message;throw new Error(l)}},r.isValidUpdate=function(){var t=x(w().mark((function t(e){var n,a,o,s,i,c,l;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(f.hb)(e)){t.next=3;break}throw n=Object(f.B)("MISSING_OR_INVALID","update() params: ".concat(e)),a=n.message,new Error(a);case 3:return o=e.topic,s=e.namespaces,r.checkRecentlyDeleted(o),t.next=7,r.isValidSessionTopic(o);case 7:if(i=r.client.session.get(o),!(c=Object(f.cb)(s,"update()"))){t.next=10;break}throw new Error(c.message);case 10:if(!(l=Object(f.N)(i.requiredNamespaces,s,"update()"))){t.next=13;break}throw new Error(l.message);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.isValidExtend=function(){var t=x(w().mark((function t(e){var n,s,o;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(f.hb)(e)){t.next=3;break}throw n=Object(f.B)("MISSING_OR_INVALID","extend() params: ".concat(e)),s=n.message,new Error(s);case 3:return o=e.topic,r.checkRecentlyDeleted(o),t.next=7,r.isValidSessionTopic(o);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.isValidRequest=function(){var t=x(w().mark((function t(e){var n,a,o,s,i,c,l,h,d,v,y,m,_,x,E,O;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(f.hb)(e)){t.next=3;break}throw n=Object(f.B)("MISSING_OR_INVALID","request() params: ".concat(e)),a=n.message,new Error(a);case 3:return o=e.topic,s=e.request,i=e.chainId,c=e.expiry,r.checkRecentlyDeleted(o),t.next=7,r.isValidSessionTopic(o);case 7:if(l=r.client.session.get(o),h=l.namespaces,Object(f.db)(h,i)){t.next=11;break}throw d=Object(f.B)("MISSING_OR_INVALID","request() chainId: ".concat(i)),v=d.message,new Error(v);case 11:if(Object(f.kb)(s)){t.next=14;break}throw y=Object(f.B)("MISSING_OR_INVALID","request() ".concat(JSON.stringify(s))),m=y.message,new Error(m);case 14:if(Object(f.fb)(h,i,s.method)){t.next=17;break}throw _=Object(f.B)("MISSING_OR_INVALID","request() method: ".concat(s.method)),x=_.message,new Error(x);case 17:if(!c||Object(f.lb)(c,K)){t.next=20;break}throw E=Object(f.B)("MISSING_OR_INVALID","request() expiry: ".concat(c,". Expiry must be a number (in seconds) between ").concat(K.min," and ").concat(K.max)),O=E.message,new Error(O);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.isValidRespond=function(){var t=x(w().mark((function t(e){var n,o,c,s,i,l,h;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(f.hb)(e)){t.next=3;break}throw o=Object(f.B)("MISSING_OR_INVALID","respond() params: ".concat(e)),c=o.message,new Error(c);case 3:return s=e.topic,i=e.response,t.prev=4,t.next=7,r.isValidSessionTopic(s);case 7:t.next=12;break;case 9:throw t.prev=9,t.t0=t.catch(4),null!=(n=null==e?void 0:e.response)&&n.id&&r.cleanupAfterResponse(e),t.t0;case 12:if(Object(f.nb)(i)){t.next=15;break}throw l=Object(f.B)("MISSING_OR_INVALID","respond() response: ".concat(JSON.stringify(i))),h=l.message,new Error(h);case 15:case"end":return t.stop()}}),t,null,[[4,9]])})));return function(e){return t.apply(this,arguments)}}(),r.isValidPing=function(){var t=x(w().mark((function t(e){var n,s,o;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(f.hb)(e)){t.next=3;break}throw n=Object(f.B)("MISSING_OR_INVALID","ping() params: ".concat(e)),s=n.message,new Error(s);case 3:return o=e.topic,t.next=6,r.isValidSessionOrPairingTopic(o);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.isValidEmit=function(){var t=x(w().mark((function t(e){var n,o,c,s,i,l,h,d,v,y,m,_,x;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(f.hb)(e)){t.next=3;break}throw n=Object(f.B)("MISSING_OR_INVALID","emit() params: ".concat(e)),o=n.message,new Error(o);case 3:return c=e.topic,s=e.event,i=e.chainId,t.next=6,r.isValidSessionTopic(c);case 6:if(l=r.client.session.get(c),h=l.namespaces,Object(f.db)(h,i)){t.next=10;break}throw d=Object(f.B)("MISSING_OR_INVALID","emit() chainId: ".concat(i)),v=d.message,new Error(v);case 10:if(Object(f.ab)(s)){t.next=13;break}throw y=Object(f.B)("MISSING_OR_INVALID","emit() event: ".concat(JSON.stringify(s))),m=y.message,new Error(m);case 13:if(Object(f.eb)(h,i,s.name)){t.next=16;break}throw _=Object(f.B)("MISSING_OR_INVALID","emit() event: ".concat(JSON.stringify(s))),x=_.message,new Error(x);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.isValidDisconnect=function(){var t=x(w().mark((function t(e){var n,s,o;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(f.hb)(e)){t.next=3;break}throw n=Object(f.B)("MISSING_OR_INVALID","disconnect() params: ".concat(e)),s=n.message,new Error(s);case 3:return o=e.topic,t.next=6,r.isValidSessionOrPairingTopic(o);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r.isValidAuthenticate=function(t){var e=t.chains,s=t.uri,i=t.domain,r=t.nonce;if(!Array.isArray(e)||0===e.length)throw new Error("chains is required and must be a non-empty array");if(!Object(f.ob)(s,!1))throw new Error("uri is required parameter");if(!Object(f.ob)(i,!1))throw new Error("domain is required parameter");if(!Object(f.ob)(r,!1))throw new Error("nonce is required parameter");if(m(new Set(e.map((function(a){return Object(f.ub)(a).namespace})))).length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");if("eip155"!==Object(f.ub)(e[0]).namespace)throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},r.getVerifyContext=function(){var t=x(w().mark((function t(e,o){var s,i;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s={verified:{verifyUrl:o.verifyUrl||n.g,validation:"UNKNOWN",origin:o.url||""}},t.prev=1,t.next=4,r.client.core.verify.resolve({attestationId:e,verifyUrl:o.verifyUrl});case 4:(i=t.sent)&&(s.verified.origin=i.origin,s.verified.isScam=i.isScam,s.verified.validation=i.origin===new URL(o.url).origin?"VALID":"INVALID"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),r.client.logger.info(t.t0);case 11:return t.abrupt("return",(r.client.logger.info("Verify context: ".concat(JSON.stringify(s))),s));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,r){return t.apply(this,arguments)}}(),r.validateSessionProps=function(t,e){Object.values(t).forEach((function(s){if(!Object(f.ob)(s,!1)){var i=Object(f.B)("MISSING_OR_INVALID","".concat(e," must be in Record<string, string> format. Received: ").concat(JSON.stringify(s))).message;throw new Error(i)}}))},r.getPendingAuthRequest=function(t){var e=r.client.auth.requests.get(t);return"object"==y(e)?e:void 0},r.addToRecentlyDeleted=function(t,e){if(r.recentlyDeletedMap.set(t,e),r.recentlyDeletedMap.size>=r.recentlyDeletedLimit){var n,s=0,i=r.recentlyDeletedLimit/2,o=R(r.recentlyDeletedMap.keys());try{for(o.s();!(n=o.n()).done;){var c=n.value;if(s++>=i)break;r.recentlyDeletedMap.delete(c)}}catch(t){o.e(t)}finally{o.f()}}},r.checkRecentlyDeleted=function(t){var e=r.recentlyDeletedMap.get(t);if(e){var s=Object(f.B)("MISSING_OR_INVALID","Record was recently deleted - ".concat(e,": ").concat(t)).message;throw new Error(s)}},r}return P(e,t),A(e,[{key:"isInitialized",value:(_=x(w().mark((function t(){var e,r;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.initialized){t.next=3;break}throw e=Object(f.B)("NOT_INITIALIZED",this.name),r=e.message,new Error(r);case 3:return t.next=5,this.client.core.relayer.confirmOnlineStateOrThrow();case 5:case"end":return t.stop()}}),t,this)}))),function(){return _.apply(this,arguments)})},{key:"registerRelayerEvents",value:function(){var t=this;this.client.core.relayer.on(n.e.message,(function(e){!t.initialized||t.relayMessageCache.length>0?t.relayMessageCache.push(e):t.onRelayMessage(e)}))}},{key:"onRelayMessage",value:(l=x(w().mark((function t(e){var r,n,o,s,i;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.topic,n=e.message,o=this.client.auth.authKeys.keys.includes(W)?this.client.auth.authKeys.get(W):{responseTopic:void 0,publicKey:void 0},s=o.publicKey,t.next=6,this.client.core.crypto.decode(r,n,{receiverPublicKey:s});case 6:if(i=t.sent,t.prev=7,!Object(v.isJsonRpcRequest)(i)){t.next=12;break}this.client.core.history.set(r,i),this.onRelayEventRequest({topic:r,payload:i}),t.next=21;break;case 12:if(!Object(v.isJsonRpcResponse)(i)){t.next=20;break}return t.next=15,this.client.core.history.resolve(i);case 15:return t.next=17,this.onRelayEventResponse({topic:r,payload:i});case 17:this.client.core.history.delete(r,i.id),t.next=21;break;case 20:this.onRelayEventUnknownPayload({topic:r,payload:i});case 21:t.next=26;break;case 23:t.prev=23,t.t0=t.catch(7),this.client.logger.error(t.t0);case 26:case"end":return t.stop()}}),t,this,[[7,23]])}))),function(t){return l.apply(this,arguments)})},{key:"registerExpirerEvents",value:function(){var t=this;this.client.core.expirer.on(n.b.expired,function(){var e=x(w().mark((function e(r){var n,o,c;return w().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(f.vb)(r.target),o=n.topic,!(c=n.id)||!t.client.pendingRequest.keys.includes(c)){e.next=5;break}return e.next=4,t.deletePendingSessionRequest(c,Object(f.B)("EXPIRED"),!0);case 4:return e.abrupt("return",e.sent);case 5:if(!c||!t.client.auth.requests.keys.includes(c)){e.next=9;break}return e.next=8,t.deletePendingAuthRequest(c,Object(f.B)("EXPIRED"),!0);case 8:return e.abrupt("return",e.sent);case 9:if(!o){e.next=17;break}if(e.t0=t.client.session.keys.includes(o),!e.t0){e.next=15;break}return e.next=14,t.deleteSession({topic:o,expirerHasDeleted:!0});case 14:t.client.events.emit("session_expire",{topic:o});case 15:e.next=22;break;case 17:if(e.t1=c,!e.t1){e.next=22;break}return e.next=21,t.deleteProposal(c,!0);case 21:t.client.events.emit("proposal_expire",{id:c});case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"registerPairingEvents",value:function(){var t=this;this.client.core.pairing.events.on(n.c.create,(function(e){return t.onPairingCreated(e)})),this.client.core.pairing.events.on(n.c.delete,(function(e){t.addToRecentlyDeleted(e.topic,"pairing")}))}},{key:"isValidPairingTopic",value:function(t){if(!Object(f.ob)(t,!1)){var e=Object(f.B)("MISSING_OR_INVALID","pairing topic should be a string: ".concat(t)).message;throw new Error(e)}if(!this.client.core.pairing.pairings.keys.includes(t)){var r=Object(f.B)("NO_MATCHING_KEY","pairing topic doesn't exist: ".concat(t)).message;throw new Error(r)}if(Object(f.O)(this.client.core.pairing.pairings.get(t).expiry)){var n=Object(f.B)("EXPIRED","pairing topic: ".concat(t)).message;throw new Error(n)}}},{key:"isValidSessionTopic",value:(c=x(w().mark((function t(e){var r,n,o,c,l,h,d,v;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(f.ob)(e,!1)){t.next=3;break}throw r=Object(f.B)("MISSING_OR_INVALID","session topic should be a string: ".concat(e)),n=r.message,new Error(n);case 3:if(this.checkRecentlyDeleted(e),this.client.session.keys.includes(e)){t.next=6;break}throw o=Object(f.B)("NO_MATCHING_KEY","session topic doesn't exist: ".concat(e)),c=o.message,new Error(c);case 6:if(!Object(f.O)(this.client.session.get(e).expiry)){t.next=11;break}return t.next=9,this.deleteSession({topic:e});case 9:throw l=Object(f.B)("EXPIRED","session topic: ".concat(e)),h=l.message,new Error(h);case 11:if(this.client.core.crypto.keychain.has(e)){t.next=16;break}return d=Object(f.B)("MISSING_OR_INVALID","session topic does not exist in keychain: ".concat(e)),v=d.message,t.next=15,this.deleteSession({topic:e});case 15:throw new Error(v);case 16:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"isValidSessionOrPairingTopic",value:(o=x(w().mark((function t(e){var r,n,o,c;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.checkRecentlyDeleted(e),!this.client.session.keys.includes(e)){t.next=5;break}return t.next=3,this.isValidSessionTopic(e);case 3:t.next=16;break;case 5:if(!this.client.core.pairing.pairings.keys.includes(e)){t.next=9;break}this.isValidPairingTopic(e),t.next=16;break;case 9:if(!Object(f.ob)(e,!1)){t.next=14;break}throw r=Object(f.B)("NO_MATCHING_KEY","session or pairing topic doesn't exist: ".concat(e)),n=r.message,new Error(n);case 14:throw o=Object(f.B)("MISSING_OR_INVALID","session or pairing topic should be a string: ".concat(e)),c=o.message,new Error(c);case 16:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"isValidProposalId",value:(r=x(w().mark((function t(e){var r,n,o,c,l,h;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(f.bb)(e)){t.next=3;break}throw r=Object(f.B)("MISSING_OR_INVALID","proposal id should be a number: ".concat(e)),n=r.message,new Error(n);case 3:if(this.client.proposal.keys.includes(e)){t.next=6;break}throw o=Object(f.B)("NO_MATCHING_KEY","proposal id doesn't exist: ".concat(e)),c=o.message,new Error(c);case 6:if(!Object(f.O)(this.client.proposal.get(e).expiryTimestamp)){t.next=11;break}return t.next=9,this.deleteProposal(e);case 9:throw l=Object(f.B)("EXPIRED","proposal id: ".concat(e)),h=l.message,new Error(h);case 11:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})}]);var r,o,c,l,_}(c.c),st=function(t){function e(t,r){var n;return E(this,e),(n=S(this,e,[t,r,"proposal",C])).core=t,n.logger=r,n}return P(e,t),A(e)}(n.f),ut=function(t){function e(t,r){var n;return E(this,e),(n=S(this,e,[t,r,"session",C])).core=t,n.logger=r,n}return P(e,t),A(e)}(n.f),ct=function(t){function e(t,r){var n;return E(this,e),(n=S(this,e,[t,r,"request",C,function(t){return t.id}])).core=t,n.logger=r,n}return P(e,t),A(e)}(n.f),ft=function(t){function e(t,r){var n;return E(this,e),(n=S(this,e,[t,r,"authKeys",J,function(){return W}])).core=t,n.logger=r,n}return P(e,t),A(e)}(n.f),lt=function(t){function e(t,r){var n;return E(this,e),(n=S(this,e,[t,r,"pairingTopics",J])).core=t,n.logger=r,n}return P(e,t),A(e)}(n.f),ht=function(t){function e(t,r){var n;return E(this,e),(n=S(this,e,[t,r,"requests",J,function(t){return t.id}])).core=t,n.logger=r,n}return P(e,t),A(e)}(n.f),pt=function(){return A((function t(e,r){E(this,t),this.core=e,this.logger=r,this.authKeys=new ft(this.core,this.logger),this.pairingTopics=new lt(this.core,this.logger),this.requests=new ht(this.core,this.logger)}),[{key:"init",value:(t=x(w().mark((function t(){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.authKeys.init();case 2:return t.next=4,this.pairingTopics.init();case 4:return t.next=6,this.requests.init();case 6:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})}]);var t}(),vt=function(t){function e(t){var r;E(this,e),(r=S(this,e,[t])).protocol="wc",r.version=2,r.name=U,r.events=new l.EventEmitter,r.on=function(t,s){return r.events.on(t,s)},r.once=function(t,s){return r.events.once(t,s)},r.off=function(t,s){return r.events.off(t,s)},r.removeListener=function(t,s){return r.events.removeListener(t,s)},r.removeAllListeners=function(t){return r.events.removeAllListeners(t)},r.connect=function(){var t=x(w().mark((function t(e){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.engine.connect(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),r.logger.error(t.t0.message),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),r.pair=function(){var t=x(w().mark((function t(e){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.engine.pair(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),r.logger.error(t.t0.message),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),r.approve=function(){var t=x(w().mark((function t(e){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.engine.approve(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),r.logger.error(t.t0.message),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),r.reject=function(){var t=x(w().mark((function t(e){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.engine.reject(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),r.logger.error(t.t0.message),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),r.update=function(){var t=x(w().mark((function t(e){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.engine.update(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),r.logger.error(t.t0.message),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),r.extend=function(){var t=x(w().mark((function t(e){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.engine.extend(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),r.logger.error(t.t0.message),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),r.request=function(){var t=x(w().mark((function t(e){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.engine.request(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),r.logger.error(t.t0.message),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),r.respond=function(){var t=x(w().mark((function t(e){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.engine.respond(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),r.logger.error(t.t0.message),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),r.ping=function(){var t=x(w().mark((function t(e){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.engine.ping(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),r.logger.error(t.t0.message),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),r.emit=function(){var t=x(w().mark((function t(e){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.engine.emit(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),r.logger.error(t.t0.message),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),r.disconnect=function(){var t=x(w().mark((function t(e){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.engine.disconnect(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),r.logger.error(t.t0.message),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),r.find=function(t){try{return r.engine.find(t)}catch(t){throw r.logger.error(t.message),t}},r.getPendingSessionRequests=function(){try{return r.engine.getPendingSessionRequests()}catch(t){throw r.logger.error(t.message),t}},r.authenticate=function(){var t=x(w().mark((function t(e){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.engine.authenticate(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),r.logger.error(t.t0.message),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),r.formatAuthMessage=function(t){try{return r.engine.formatAuthMessage(t)}catch(t){throw r.logger.error(t.message),t}},r.approveSessionAuthenticate=function(){var t=x(w().mark((function t(e){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.engine.approveSessionAuthenticate(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),r.logger.error(t.t0.message),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),r.rejectSessionAuthenticate=function(){var t=x(w().mark((function t(e){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.engine.rejectSessionAuthenticate(e);case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),r.logger.error(t.t0.message),t.t0;case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}(),r.name=(null==t?void 0:t.name)||U,r.metadata=(null==t?void 0:t.metadata)||Object(f.w)(),r.signConfig=null==t?void 0:t.signConfig;var c=y(null==t?void 0:t.logger)<"u"&&"string"!=typeof(null==t?void 0:t.logger)?t.logger:Object(o.e)(Object(o.c)({level:(null==t?void 0:t.logger)||B}));return r.core=(null==t?void 0:t.core)||new n.a(t),r.logger=Object(o.a)(c,r.name),r.session=new ut(r.core,r.logger),r.proposal=new st(r.core,r.logger),r.pendingRequest=new ct(r.core,r.logger),r.engine=new at(r),r.auth=new pt(r.core,r.logger),r}return P(e,t),A(e,[{key:"context",get:function(){return Object(o.d)(this.logger)}},{key:"pairing",get:function(){return this.core.pairing.pairings}},{key:"initialize",value:(c=x(w().mark((function t(){return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.logger.trace("Initialized"),t.prev=1,t.next=4,this.core.start();case 4:return t.next=6,this.session.init();case 6:return t.next=8,this.proposal.init();case 8:return t.next=10,this.pendingRequest.init();case 10:return t.next=12,this.engine.init();case 12:return t.next=14,this.auth.init();case 14:this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success"),this.engine.processRelayMessageCache(),t.next=22;break;case 19:throw t.prev=19,t.t0=t.catch(1),this.logger.info("SignClient Initialization Failure"),this.logger.error(t.t0.message),t.t0;case 22:case"end":return t.stop()}}),t,this,[[1,19]])}))),function(){return c.apply(this,arguments)})}],[{key:"init",value:(r=x(w().mark((function t(r){var n;return w().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new e(r),t.next=3,n.initialize();case 3:return t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)})}]);var r,c}(c.i)},function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return Kr})),r.d(e,"b",(function(){return We})),r.d(e,"c",(function(){return q})),r.d(e,"d",(function(){return Re})),r.d(e,"e",(function(){return Te})),r.d(e,"f",(function(){return Mr})),r.d(e,"g",(function(){return Ze}));var n=r(333),o=r.n(n),c=r(502),f=r(506),l=r(375),h=r(413),d=r(342),v=r(507),y=r(358),m=r(402),w=r(353),_=r(399),x=r(343),E=r(513),O=r(515),A=r.n(O),k=r(516),S=r.n(k);function I(t){return function(t){if(Array.isArray(t))return z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||D(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e,r){return e=R(e),function(t,e){if(e&&("object"==G(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return P(t)}(t,M()?Reflect.construct(e,r||[],R(t).constructor):e.apply(t,r))}function P(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function M(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(M=function(){return!!t})()}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}function N(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function L(){L=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof w?e:w,a=Object.create(i.prototype),c=new M(n||[]);return o(a,"_invoke",{value:S(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",v="suspendedYield",y="executing",s="completed",m={};function w(){}function _(){}function x(){}var p={};f(p,a,(function(){return this}));var E=Object.getPrototypeOf,O=E&&E(E(R([])));O&&O!==r&&n.call(O,a)&&(p=O);var g=x.prototype=w.prototype=Object.create(p);function A(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,c,i,a){var f=h(t[o],t,c);if("throw"!==f.type){var u=f.arg,l=u.value;return l&&"object"==G(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,a)}),(function(t){r("throw",t,i,a)})):e.resolve(l).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,a)}))}a(f.arg)}var c;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return c=c?c.then(o,o):o()}})}function S(e,r,n){var o=d;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=I(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var p=h(e,r,n);if("normal"===p.type){if(o=n.done?s:v,p.arg===m)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function I(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,I(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function M(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function R(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(G(e)+" is not iterable")}return _.prototype=x,o(g,"constructor",{value:x,configurable:!0}),o(x,"constructor",{value:_,configurable:!0}),_.displayName=f(x,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,f(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},A(k.prototype),f(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},A(g),f(g,u,"Generator"),f(g,a,(function(){return this})),f(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=R,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var c=this.tryEntries.length-1;c>=0;--c){var i=this.tryEntries[c],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var f=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(f&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(f){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),P(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;P(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:R(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function C(t,e,r,n,o,a,c){try{var i=t[a](c),u=i.value}catch(t){return void r(t)}i.done?e(u):Promise.resolve(u).then(n,o)}function U(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){C(a,n,o,c,f,"next",t)}function f(t){C(a,n,o,c,f,"throw",t)}c(void 0)}))}}function B(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=D(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,c=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw c}}}}function D(t,a){if(t){if("string"==typeof t)return z(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?z(t,a):void 0}}function z(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,r=Array(a);e<a;e++)r[e]=t[e];return r}function F(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function H(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?F(Object(r),!0).forEach((function(e){K(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function K(t,e,r){return(e=W(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function G(t){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G(t)}function V(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,W(n.key),n)}}function J(t,e,r){return e&&Y(t.prototype,e),r&&Y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function W(t){var i=function(t,e){if("object"!=G(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=G(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==G(i)?i:i+""}var Q=function(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var s=0;s<t.length;s++){var n=t.charAt(s),o=n.charCodeAt(0);if(255!==r[o])throw new TypeError(n+" is ambiguous");r[o]=s}var a=t.length,c=t.charAt(0),f=Math.log(a)/Math.log(256),l=Math.log(256)/Math.log(a);function h(u){if("string"!=typeof u)throw new TypeError("Expected String");if(0===u.length)return new Uint8Array;var p=0;if(" "!==u[p]){for(var t=0,e=0;u[p]===c;)t++,p++;for(var n=(u.length-p)*f+1>>>0,o=new Uint8Array(n);u[p];){var l=r[u.charCodeAt(p)];if(255===l)return;for(var h=0,d=n-1;(0!==l||h<e)&&-1!==d;d--,h++)l+=a*o[d]>>>0,o[d]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");e=h,p++}if(" "!==u[p]){for(var v=n-e;v!==n&&0===o[v];)v++;for(var y=new Uint8Array(t+(n-v)),m=t;v!==n;)y[m++]=o[v++];return y}}}return{encode:function(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===u.length)return"";for(var p=0,e=0,r=0,n=u.length;r!==n&&0===u[r];)r++,p++;for(var o=(n-r)*l+1>>>0,f=new Uint8Array(o);r!==n;){for(var h=u[r],d=0,v=o-1;(0!==h||d<e)&&-1!==v;v--,d++)h+=256*f[v]>>>0,f[v]=h%a>>>0,h=h/a>>>0;if(0!==h)throw new Error("Non-zero carry");e=d,r++}for(var y=o-e;y!==o&&0===f[y];)y++;for(var m=c.repeat(p);y<o;++y)m+=t.charAt(f[y]);return m},decodeUnsafe:h,decode:function(u){var p=h(u);if(p)return p;throw new Error("Non-".concat(e," character"))}}},X=function(t){if(t instanceof Uint8Array&&"Uint8Array"===t.constructor.name)return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},Z=function(){return J((function t(e,r,i){V(this,t),this.name=e,this.prefix=r,this.baseEncode=i}),[{key:"encode",value:function(t){if(t instanceof Uint8Array)return"".concat(this.prefix).concat(this.baseEncode(t));throw Error("Unknown type, must be binary type")}}])}(),$=function(){return J((function t(e,r,i){if(V(this,t),this.name=e,this.prefix=r,void 0===r.codePointAt(0))throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}),[{key:"decode",value:function(t){if("string"==typeof t){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error("Unable to decode multibase string ".concat(JSON.stringify(t),", ").concat(this.name," decoder only supports inputs prefixed with ").concat(this.prefix));return this.baseDecode(t.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}},{key:"or",value:function(t){return et(this,t)}}])}(),tt=function(){return J((function t(e){V(this,t),this.decoders=e}),[{key:"or",value:function(t){return et(this,t)}},{key:"decode",value:function(t){var e=t[0],i=this.decoders[e];if(i)return i.decode(t);throw RangeError("Unable to decode multibase string ".concat(JSON.stringify(t),", only inputs prefixed with ").concat(Object.keys(this.decoders)," are supported"))}}])}(),et=function(t,e){return new tt(H(H({},t.decoders||K({},t.prefix,t)),e.decoders||K({},e.prefix,e)))},nt=function(){return J((function t(e,r,i,s){V(this,t),this.name=e,this.prefix=r,this.baseEncode=i,this.baseDecode=s,this.encoder=new Z(e,r,i),this.decoder=new $(e,r,s)}),[{key:"encode",value:function(t){return this.encoder.encode(t)}},{key:"decode",value:function(t){return this.decoder.decode(t)}}])}(),it=function(t){var e=t.name,r=t.prefix,n=t.encode,i=t.decode;return new nt(e,r,n,i)},ot=function(t){var e=t.prefix,r=t.name,n=t.alphabet,o=Q(n,r),i=o.encode,s=o.decode;return it({prefix:e,name:r,encode:i,decode:function(t){return X(s(t))}})},at=function(t){var e=t.name,r=t.prefix,n=t.bitsPerChar,i=t.alphabet;return it({prefix:r,name:e,encode:function(s){return function(t,e,r){for(var i="="===e[e.length-1],s=(1<<r)-1,n="",o=0,a=0,c=0;c<t.length;++c)for(a=a<<8|t[c],o+=8;o>r;)n+=e[s&a>>(o-=r)];if(o&&(n+=e[s&a<<r-o]),i)for(;n.length*r&7;)n+="=";return n}(s,i,n)},decode:function(s){return function(t,e,r,i){for(var s={},n=0;n<e.length;++n)s[e[n]]=n;for(var o=t.length;"="===t[o-1];)--o;for(var c=new Uint8Array(o*r/8|0),a=0,f=0,l=0,h=0;h<o;++h){var g=s[t[h]];if(void 0===g)throw new SyntaxError("Non-".concat(i," character"));f=f<<r|g,(a+=r)>=8&&(a-=8,c[l++]=255&f>>a)}if(a>=r||255&f<<8-a)throw new SyntaxError("Unexpected end of data");return c}(s,i,n,e)}})},st=it({prefix:"\0",name:"identity",encode:function(t){return function(t){return(new TextDecoder).decode(t)}(t)},decode:function(t){return function(t){return(new TextEncoder).encode(t)}(t)}}),ut=Object.freeze({__proto__:null,identity:st}),ct=at({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),ft=Object.freeze({__proto__:null,base2:ct}),lt=at({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),ht=Object.freeze({__proto__:null,base8:lt}),pt=ot({prefix:"9",name:"base10",alphabet:"0123456789"}),vt=Object.freeze({__proto__:null,base10:pt}),yt=at({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),gt=at({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),mt=Object.freeze({__proto__:null,base16:yt,base16upper:gt}),bt=at({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),wt=at({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),_t=at({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),xt=at({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Et=at({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ot=at({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),At=at({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),kt=at({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),St=at({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),It=Object.freeze({__proto__:null,base32:bt,base32upper:wt,base32pad:_t,base32padupper:xt,base32hex:Et,base32hexupper:Ot,base32hexpad:At,base32hexpadupper:kt,base32z:St}),jt=ot({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Pt=ot({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),Mt=Object.freeze({__proto__:null,base36:jt,base36upper:Pt}),Rt=ot({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Nt=ot({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),Tt=Object.freeze({__proto__:null,base58btc:Rt,base58flickr:Nt}),Lt=at({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Ct=at({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ut=at({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Bt=at({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Dt=Object.freeze({__proto__:null,base64:Lt,base64pad:Ct,base64url:Ut,base64urlpad:Bt}),qt=Array.from(""),zt=qt.reduce((function(t,e,r){return t[r]=e,t}),[]),Ft=qt.reduce((function(t,e,r){return t[e.codePointAt(0)]=r,t}),[]);var Ht=it({prefix:"",name:"base256emoji",encode:function(t){return t.reduce((function(t,e){return t+=zt[e]}),"")},decode:function(t){var e,r=[],n=B(t);try{for(n.s();!(e=n.n()).done;){var o=e.value,i=Ft[o.codePointAt(0)];if(void 0===i)throw new Error("Non-base256emoji character: ".concat(o));r.push(i)}}catch(t){n.e(t)}finally{n.f()}return new Uint8Array(r)}}),Kt=Object.freeze({__proto__:null,base256emoji:Ht}),Gt=function t(e,r,n){r=r||[];for(var i=n=n||0;e>=Jt;)r[n++]=255&e|Vt,e/=128;for(;e&Yt;)r[n++]=255&e|Vt,e>>>=7;return r[n]=0|e,t.bytes=n-i+1,r},Vt=128,Yt=-128,Jt=Math.pow(2,31);var Wt=function t(e,i){var r,n=0,s=0,o=i=i||0,a=e.length;do{if(o>=a)throw t.bytes=0,new RangeError("Could not decode varint");r=e[o++],n+=s<28?(r&Xt)<<s:(r&Xt)*Math.pow(2,s),s+=7}while(r>=Qt);return t.bytes=o-i,n},Qt=128,Xt=127;var Zt=Math.pow(2,7),$t=Math.pow(2,14),te=Math.pow(2,21),ee=Math.pow(2,28),re=Math.pow(2,35),ne=Math.pow(2,42),ie=Math.pow(2,49),tr=Math.pow(2,56),oe=Math.pow(2,63),ae={encode:Gt,decode:Wt,encodingLength:function(t){return t<Zt?1:t<$t?2:t<te?3:t<ee?4:t<re?5:t<ne?6:t<ie?7:t<tr?8:t<oe?9:10}},se=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ae.encode(t,e,r),e},ue=function(t){return ae.encodingLength(t)},ce=function(t,e){var r=e.byteLength,i=ue(t),s=i+ue(r),n=new Uint8Array(s+r);return se(t,n,0),se(r,n,i),n.set(e,s),new fe(t,r,e,n)},fe=J((function t(e,r,i,s){V(this,t),this.code=e,this.size=r,this.digest=i,this.bytes=s})),le=function(t){var e=t.name,r=t.code,n=t.encode;return new he(e,r,n)},he=function(){return J((function t(e,r,i){V(this,t),this.name=e,this.code=r,this.encode=i}),[{key:"digest",value:function(t){var e=this;if(t instanceof Uint8Array){var r=this.encode(t);return r instanceof Uint8Array?ce(this.code,r):r.then((function(i){return ce(e.code,i)}))}throw Error("Unknown type, must be binary type")}}])}(),pe=function(t){return function(){var e=U(L().mark((function e(r){return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,crypto.subtle.digest(t,r);case 3:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},de=le({name:"sha2-256",code:18,encode:pe("SHA-256")}),hr=le({name:"sha2-512",code:19,encode:pe("SHA-512")}),ve=Object.freeze({__proto__:null,sha256:de,sha512:hr}),ye=X,ge={code:0,name:"identity",encode:ye,digest:function(t){return ce(0,ye(t))}},me=Object.freeze({__proto__:null,identity:ge});new TextEncoder,new TextDecoder;var be=H(H(H(H(H(H(H(H(H(H({},ut),ft),ht),vt),mt),It),Mt),Tt),Dt),Kt);function we(t,e,r,i){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:i}}}H(H({},ve),me);var _e=we("utf8","u",(function(t){return"u"+new TextDecoder("utf8").decode(t)}),(function(t){return(new TextEncoder).encode(t.substring(1))})),xe=we("ascii","a",(function(t){for(var e="a",r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e}),(function(t){for(var e=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null!=globalThis.Buffer&&null!=globalThis.Buffer.allocUnsafe?globalThis.Buffer.allocUnsafe(t):new Uint8Array(t)}((t=t.substring(1)).length),r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e})),Ee=H({utf8:_e,"utf-8":_e,hex:be.base16,latin1:xe,ascii:xe,binary:xe},be);function Oe(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",r=Ee[e];if(!r)throw new Error('Unsupported encoding "'.concat(e,'"'));return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?r.decoder.decode("".concat(r.prefix).concat(t)):globalThis.Buffer.from(t,"utf8")}var Ae="core",ke="".concat("wc","@2:").concat(Ae,":"),Se="error",Ie={database:":memory:"},je="client_ed25519_seed",Pe=w.ONE_DAY,Me=w.SIX_HOURS,Re="irn",Ne="wss://relay.walletconnect.org",Te={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Le="payload",Ce="connect",Ue="disconnect",Be="error",De="subscription_created",qe="subscription_deleted",ze="subscription_sync",Fe="subscription_resubscribed",He=(w.THIRTY_DAYS,1e3*w.FIVE_SECONDS),Ke=(w.THIRTY_DAYS,{wc_pairingDelete:{req:{ttl:w.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:w.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:w.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:w.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:w.ONE_DAY,prompt:!1,tag:0},res:{ttl:w.ONE_DAY,prompt:!1,tag:0}}}),q={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Ge="history_created",Ve="history_updated",Ye="history_deleted",Je="history_sync",We={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Qe=(w.ONE_DAY,"verify-api"),Xe="https://verify.walletconnect.org",Ze=Xe,$e=["https://verify.walletconnect.com",Xe],er=function(){return J((function t(e,r){var n=this;V(this,t),this.core=e,this.logger=r,this.keychain=new Map,this.name="keychain",this.version="0.3",this.initialized=!1,this.storagePrefix=ke,this.init=U(L().mark((function t(){var i;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.initialized){t.next=5;break}return t.next=3,n.getKeyChain();case 3:G(i=t.sent)<"u"&&(n.keychain=i),n.initialized=!0;case 5:case"end":return t.stop()}}),t)}))),this.has=function(i){return n.isInitialized(),n.keychain.has(i)},this.set=function(){var t=U(L().mark((function t(i,s){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.isInitialized(),n.keychain.set(i,s),t.next=4,n.persist();case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),this.get=function(i){n.isInitialized();var s=n.keychain.get(i);if(G(s)>"u"){var t=Object(y.B)("NO_MATCHING_KEY","".concat(n.name,": ").concat(i)).message;throw new Error(t)}return s},this.del=function(){var t=U(L().mark((function t(i){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.isInitialized(),n.keychain.delete(i),t.next=4,n.persist();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.core=e,this.logger=Object(l.a)(r,this.name)}),[{key:"context",get:function(){return Object(l.d)(this.logger)}},{key:"storageKey",get:function(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}},{key:"setKeyChain",value:(r=U(L().mark((function t(e){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.core.storage.setItem(this.storageKey,Object(y.qb)(e));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"getKeyChain",value:(e=U(L().mark((function t(){var e;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.core.storage.getItem(this.storageKey);case 2:return e=t.sent,t.abrupt("return",G(e)<"u"?Object(y.tb)(e):void 0);case 4:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"persist",value:(t=U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setKeyChain(this.keychain);case 2:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})},{key:"isInitialized",value:function(){if(!this.initialized){var t=Object(y.B)("NOT_INITIALIZED",this.name).message;throw new Error(t)}}}]);var t,e,r}(),rr=function(){return J((function t(e,r,i){var n=this;V(this,t),this.core=e,this.logger=r,this.name="crypto",this.randomSessionIdentifier=Object(y.u)(),this.initialized=!1,this.init=U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n.initialized,t.t0){t.next=5;break}return t.next=4,n.keychain.init();case 4:n.initialized=!0;case 5:case"end":return t.stop()}}),t)}))),this.hasKeys=function(s){return n.isInitialized(),n.keychain.has(s)},this.getClientId=U(L().mark((function t(){var s,e;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.isInitialized(),t.next=3,n.getClientSeed();case 3:return s=t.sent,e=v.generateKeyPair(s),t.abrupt("return",v.encodeIss(e.publicKey));case 6:case"end":return t.stop()}}),t)}))),this.generateKeyPair=function(){n.isInitialized();var s=Object(y.t)();return n.setPrivateKey(s.publicKey,s.privateKey)},this.signJWT=function(){var t=U(L().mark((function t(s){var e,r,a,o;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.isInitialized(),t.next=3,n.getClientSeed();case 3:return e=t.sent,r=v.generateKeyPair(e),a=n.randomSessionIdentifier,o=Pe,t.next=9,v.signJWT(a,s,o,r);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.generateSharedKey=function(s,t,e){n.isInitialized();var a=n.getPrivateKey(s),r=Object(y.k)(a,t);return n.setSymKey(r,e)},this.setSymKey=function(){var t=U(L().mark((function t(s,e){var r;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.isInitialized(),r=e||Object(y.J)(s),t.next=4,n.keychain.set(r,s);case 4:return t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),this.deleteKeyPair=function(){var t=U(L().mark((function t(s){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.isInitialized(),t.next=3,n.keychain.del(s);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.deleteSymKey=function(){var t=U(L().mark((function t(s){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.isInitialized(),t.next=3,n.keychain.del(s);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.encode=function(){var t=U(L().mark((function t(s,e,r){var a,o,c,f,l,h,g;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.isInitialized(),a=Object(y.Ab)(r),o=Object(d.b)(e),!Object(y.V)(a)){t.next=7;break}return c=a.senderPublicKey,f=a.receiverPublicKey,t.next=6,n.generateSharedKey(c,f);case 6:s=t.sent;case 7:return l=n.getSymKey(s),h=a.type,g=a.senderPublicKey,t.abrupt("return",Object(y.m)({type:h,symKey:l,message:o,senderPublicKey:g}));case 9:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),this.decode=function(){var t=U(L().mark((function t(s,e,r){var a,o,c,f,l;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.isInitialized(),a=Object(y.zb)(e,r),!Object(y.V)(a)){t.next=7;break}return o=a.receiverPublicKey,c=a.senderPublicKey,t.next=6,n.generateSharedKey(o,c);case 6:s=t.sent;case 7:return t.prev=7,f=n.getSymKey(s),l=Object(y.j)({symKey:f,encoded:e}),t.abrupt("return",Object(d.a)(l));case 12:return t.prev=12,t.t0=t.catch(7),t.t1=n.logger,t.t2="Failed to decode message from topic: '".concat(s,"', clientId: '"),t.next=18,n.getClientId();case 18:t.t3=t.sent,t.t4=t.t2.concat.call(t.t2,t.t3,"'"),t.t1.error.call(t.t1,t.t4),n.logger.error(t.t0);case 22:case"end":return t.stop()}}),t,null,[[7,12]])})));return function(e,r,n){return t.apply(this,arguments)}}(),this.getPayloadType=function(s){var t=Object(y.l)(s);return Object(y.i)(t.type)},this.getPayloadSenderPublicKey=function(s){var t=Object(y.l)(s);return t.senderPublicKey?Object(m.toString)(t.senderPublicKey,y.a):void 0},this.core=e,this.logger=Object(l.a)(r,this.name),this.keychain=i||new er(this.core,this.logger)}),[{key:"context",get:function(){return Object(l.d)(this.logger)}},{key:"setPrivateKey",value:(e=U(L().mark((function t(e,r){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.keychain.set(e,r);case 2:return t.abrupt("return",e);case 3:case"end":return t.stop()}}),t,this)}))),function(t,r){return e.apply(this,arguments)})},{key:"getPrivateKey",value:function(t){return this.keychain.get(t)}},{key:"getClientSeed",value:(t=U(L().mark((function t(){var e;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e="",t.prev=1,e=this.keychain.get(je),t.next=10;break;case 5:return t.prev=5,t.t0=t.catch(1),e=Object(y.u)(),t.next=10,this.keychain.set(je,e);case 10:return t.abrupt("return",Oe(e,"base16"));case 11:case"end":return t.stop()}}),t,this,[[1,5]])}))),function(){return t.apply(this,arguments)})},{key:"getSymKey",value:function(t){return this.keychain.get(t)}},{key:"isInitialized",value:function(){if(!this.initialized){var t=Object(y.B)("NOT_INITIALIZED",this.name).message;throw new Error(t)}}}]);var t,e}(),nr=function(t){function e(t,r){var n;return V(this,e),(n=j(this,e,[t,r])).logger=t,n.core=r,n.messages=new Map,n.name="messages",n.version="0.3",n.initialized=!1,n.storagePrefix=ke,n.init=U(L().mark((function t(){var i;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.initialized){t.next=15;break}return n.logger.trace("Initialized"),t.prev=2,t.next=5,n.getRelayerMessages();case 5:G(i=t.sent)<"u"&&(n.messages=i),n.logger.debug("Successfully Restored records for ".concat(n.name)),n.logger.trace({type:"method",method:"restore",size:n.messages.size}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),n.logger.debug("Failed to Restore records for ".concat(n.name)),n.logger.error(t.t0);case 12:return t.prev=12,n.initialized=!0,t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,9,12,15]])}))),n.set=function(){var t=U(L().mark((function t(i,s){var e,r;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.isInitialized(),e=Object(y.K)(s),G(r=n.messages.get(i))>"u"&&(r={}),t.t0=G(r[e])<"u",t.t0){t.next=10;break}return r[e]=s,n.messages.set(i,r),t.next=10,n.persist();case 10:return t.abrupt("return",e);case 11:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),n.get=function(i){n.isInitialized();var s=n.messages.get(i);return G(s)>"u"&&(s={}),s},n.has=function(i,s){return n.isInitialized(),G(n.get(i)[Object(y.K)(s)])<"u"},n.del=function(){var t=U(L().mark((function t(i){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.isInitialized(),n.messages.delete(i),t.next=4,n.persist();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.logger=Object(l.a)(t,n.name),n.core=r,n}return N(e,t),J(e,[{key:"context",get:function(){return Object(l.d)(this.logger)}},{key:"storageKey",get:function(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}},{key:"setRelayerMessages",value:(o=U(L().mark((function t(e){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.core.storage.setItem(this.storageKey,Object(y.qb)(e));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"getRelayerMessages",value:(n=U(L().mark((function t(){var e;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.core.storage.getItem(this.storageKey);case 2:return e=t.sent,t.abrupt("return",G(e)<"u"?Object(y.tb)(e):void 0);case 4:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"persist",value:(r=U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setRelayerMessages(this.messages);case 2:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"isInitialized",value:function(){if(!this.initialized){var t=Object(y.B)("NOT_INITIALIZED",this.name).message;throw new Error(t)}}}]);var r,n,o}(h.f),ir=function(t){function e(t,r){var o;return V(this,e),(o=j(this,e,[t,r])).relayer=t,o.logger=r,o.events=new n.EventEmitter,o.name="publisher",o.queue=new Map,o.publishTimeout=Object(w.toMiliseconds)(w.ONE_MINUTE),o.failedPublishTimeout=Object(w.toMiliseconds)(w.ONE_SECOND),o.needsTransportRestart=!1,o.publish=function(){var t=U(L().mark((function t(i,s,e){var r,a,n,c,f,g,l,h,u,p,d;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.logger.debug("Publishing Payload"),o.logger.trace({type:"method",method:"publish",params:{topic:i,message:s,opts:e}}),a=(null==e?void 0:e.ttl)||Me,n=Object(y.G)(e),c=(null==e?void 0:e.prompt)||!1,f=(null==e?void 0:e.tag)||0,g=(null==e?void 0:e.id)||Object(x.getBigIntRpcId)().toString(),l={topic:i,message:s,opts:{ttl:a,relay:n,prompt:c,tag:f,id:g}},h="Failed to publish payload, please try again. id:".concat(g," tag:").concat(f),u=Date.now(),d=1,t.prev=3;case 4:if(void 0!==p){t.next=20;break}if(!(Date.now()-u>o.publishTimeout)){t.next=7;break}throw new Error(h);case 7:return o.logger.trace({id:g,attempts:d},"publisher.publish - attempt ".concat(d)),t.next=10,Object(y.h)(o.rpcPublish(i,s,a,n,c,f,g).catch((function(t){return o.logger.warn(t)})),o.publishTimeout,h);case 10:return t.next=12,t.sent;case 12:if(p=t.sent,d++,t.t0=p,t.t0){t.next=18;break}return t.next=18,new Promise((function(t){return setTimeout(t,o.failedPublishTimeout)}));case 18:t.next=4;break;case 20:o.relayer.events.emit(Te.publish,l),o.logger.debug("Successfully Published Payload"),o.logger.trace({type:"method",method:"publish",params:{id:g,topic:i,message:s,opts:e}}),t.next=28;break;case 23:if(t.prev=23,t.t1=t.catch(3),o.logger.debug("Failed to Publish Payload"),o.logger.error(t.t1),null==(r=null==e?void 0:e.internal)||!r.throwOnFailedPublish){t.next=27;break}throw t.t1;case 27:o.queue.set(g,l);case 28:case"end":return t.stop()}}),t,null,[[3,23]])})));return function(e,r,n){return t.apply(this,arguments)}}(),o.on=function(i,s){o.events.on(i,s)},o.once=function(i,s){o.events.once(i,s)},o.off=function(i,s){o.events.off(i,s)},o.removeListener=function(i,s){o.events.removeListener(i,s)},o.relayer=t,o.logger=Object(l.a)(r,o.name),o.registerEventListeners(),o}return N(e,t),J(e,[{key:"context",get:function(){return Object(l.d)(this.logger)}},{key:"rpcPublish",value:function(t,e,i,s,r,n,a){var o,c,f,g,l={method:Object(y.F)(s.protocol).publish,params:{topic:t,message:e,ttl:i,prompt:r,tag:n},id:a};return Object(y.W)(null==(o=l.params)?void 0:o.prompt)&&(null==(c=l.params)||delete c.prompt),Object(y.W)(null==(f=l.params)?void 0:f.tag)&&(null==(g=l.params)||delete g.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:l}),this.relayer.request(l)}},{key:"removeRequestFromQueue",value:function(t){this.queue.delete(t)}},{key:"checkQueue",value:function(){var t=this;this.queue.forEach(function(){var e=U(L().mark((function e(r){var n,i,s;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.topic,i=r.message,s=r.opts,e.next=3,t.publish(n,i,s);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"registerEventListeners",value:function(){var t=this;this.relayer.core.heartbeat.on(f.a.pulse,(function(){if(t.needsTransportRestart)return t.needsTransportRestart=!1,void t.relayer.events.emit(Te.connection_stalled);t.checkQueue()})),this.relayer.on(Te.message_ack,(function(e){t.removeRequestFromQueue(e.id.toString())}))}}])}(h.g),or=function(){return J((function t(){var e=this;V(this,t),this.map=new Map,this.set=function(t,r){var i=e.get(t);e.exists(t,r)||e.map.set(t,[].concat(I(i),[r]))},this.get=function(t){return e.map.get(t)||[]},this.exists=function(t,r){return e.get(t).includes(r)},this.delete=function(t,r){if(G(r)>"u")e.map.delete(t);else if(e.map.has(t)){var i=e.get(t);if(e.exists(t,r)){var s=i.filter((function(t){return t!==r}));s.length?e.map.set(t,s):e.map.delete(t)}}},this.clear=function(){e.map.clear()}}),[{key:"topics",get:function(){return Array.from(this.map.keys())}}])}(),ar=Object.defineProperty,sr=Object.defineProperties,ur=Object.getOwnPropertyDescriptors,cr=Object.getOwnPropertySymbols,fr=Object.prototype.hasOwnProperty,lr=Object.prototype.propertyIsEnumerable,pr=function(t,e,r){return e in t?ar(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},dr=function(t,e){for(var r in e||(e={}))fr.call(e,r)&&pr(t,r,e[r]);if(cr){var n,o=B(cr(e));try{for(o.s();!(n=o.n()).done;){r=n.value;lr.call(e,r)&&pr(t,r,e[r])}}catch(t){o.e(t)}finally{o.f()}}return t},vr=function(t,e){return sr(t,ur(e))},yr=function(t){function e(t,r){var o;return V(this,e),(o=j(this,e,[t,r])).relayer=t,o.logger=r,o.subscriptions=new Map,o.topicMap=new or,o.events=new n.EventEmitter,o.name="subscription",o.version="0.3",o.pending=new Map,o.cached=[],o.initialized=!1,o.pendingSubscriptionWatchLabel="pending_sub_watch_label",o.pollingInterval=20,o.storagePrefix=ke,o.subscribeTimeout=Object(w.toMiliseconds)(w.ONE_MINUTE),o.restartInProgress=!1,o.batchSubscribeTopicsLimit=500,o.pendingBatchMessages=[],o.init=U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=o.initialized,t.t0){t.next=7;break}return o.logger.trace("Initialized"),o.registerEventListeners(),t.next=6,o.relayer.core.crypto.getClientId();case 6:o.clientId=t.sent;case 7:case"end":return t.stop()}}),t)}))),o.subscribe=function(){var t=U(L().mark((function t(i,s){var e,r,a;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.restartToComplete();case 2:return o.isInitialized(),o.logger.debug("Subscribing Topic"),o.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}}),t.prev=5,e=Object(y.G)(s),r={topic:i,relay:e},o.pending.set(i,r),t.next=10,o.rpcSubscribe(i,e);case 10:return a=t.sent,t.abrupt("return",("string"==typeof a&&(o.onSubscribe(a,r),o.logger.debug("Successfully Subscribed Topic"),o.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}})),a));case 14:throw t.prev=14,t.t0=t.catch(5),o.logger.debug("Failed to Subscribe Topic"),o.logger.error(t.t0),t.t0;case 17:case"end":return t.stop()}}),t,null,[[5,14]])})));return function(e,r){return t.apply(this,arguments)}}(),o.unsubscribe=function(){var t=U(L().mark((function t(i,s){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.restartToComplete();case 2:if(o.isInitialized(),!(G(null==s?void 0:s.id)<"u")){t.next=8;break}return t.next=6,o.unsubscribeById(i,s.id,s);case 6:t.next=10;break;case 8:return t.next=10,o.unsubscribeByTopic(i,s);case 10:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),o.isSubscribed=function(){var t=U(L().mark((function t(i){var s;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o.topics.includes(i)){t.next=2;break}return t.abrupt("return",!0);case 2:return s="".concat(o.pendingSubscriptionWatchLabel,"_").concat(i),t.next=5,new Promise((function(t,e){var a=new w.Watch;a.start(s);var r=setInterval((function(){!o.pending.has(i)&&o.topics.includes(i)&&(clearInterval(r),a.stop(s),t(!0)),a.elapsed(s)>=He&&(clearInterval(r),a.stop(s),e(new Error("Subscription resolution timeout")))}),o.pollingInterval)})).catch((function(){return!1}));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.on=function(i,s){o.events.on(i,s)},o.once=function(i,s){o.events.once(i,s)},o.off=function(i,s){o.events.off(i,s)},o.removeListener=function(i,s){o.events.removeListener(i,s)},o.start=U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.onConnect();case 2:case"end":return t.stop()}}),t)}))),o.stop=U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.onDisconnect();case 2:case"end":return t.stop()}}),t)}))),o.restart=U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.restartInProgress=!0,t.next=3,o.restore();case 3:return t.next=5,o.reset();case 5:o.restartInProgress=!1;case 6:case"end":return t.stop()}}),t)}))),o.relayer=t,o.logger=Object(l.a)(r,o.name),o.clientId="",o}return N(e,t),J(e,[{key:"context",get:function(){return Object(l.d)(this.logger)}},{key:"storageKey",get:function(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}},{key:"length",get:function(){return this.subscriptions.size}},{key:"ids",get:function(){return Array.from(this.subscriptions.keys())}},{key:"values",get:function(){return Array.from(this.subscriptions.values())}},{key:"topics",get:function(){return this.topicMap.topics}},{key:"hasSubscription",value:function(t,e){var i=!1;try{i=this.getSubscription(t).topic===e}catch(t){}return i}},{key:"onEnable",value:function(){this.cached=[],this.initialized=!0}},{key:"onDisable",value:function(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}},{key:"unsubscribeByTopic",value:(P=U(L().mark((function t(e,r){var i,n=this;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.topicMap.get(e),t.next=3,Promise.all(i.map(function(){var t=U(L().mark((function t(s){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.unsubscribeById(e,s,r);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return P.apply(this,arguments)})},{key:"unsubscribeById",value:(I=U(L().mark((function t(e,r,i){var s,n;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:i}}),t.prev=1,s=Object(y.G)(i),t.next=5,this.rpcUnsubscribe(e,r,s);case 5:return n=Object(y.H)("USER_DISCONNECTED","".concat(this.name,", ").concat(e)),t.next=8,this.onUnsubscribe(e,r,n);case 8:this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:i}}),t.next=15;break;case 12:throw t.prev=12,t.t0=t.catch(1),this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(t.t0),t.t0;case 15:case"end":return t.stop()}}),t,this,[[1,12]])}))),function(t,e,r){return I.apply(this,arguments)})},{key:"rpcSubscribe",value:(S=U(L().mark((function t(e,r){var i,n=this;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={method:Object(y.F)(r.protocol).subscribe,params:{topic:e}},this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),t.prev=2,t.next=5,Object(y.h)(this.relayer.request(i).catch((function(s){return n.logger.warn(s)})),this.subscribeTimeout);case 5:return t.next=7,t.sent;case 7:if(!t.sent){t.next=11;break}t.t0=Object(y.K)(e+this.clientId),t.next=12;break;case 11:t.t0=null;case 12:return t.abrupt("return",t.t0);case 15:t.prev=15,t.t1=t.catch(2),this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Te.connection_stalled);case 18:return t.abrupt("return",null);case 19:case"end":return t.stop()}}),t,this,[[2,15]])}))),function(t,e){return S.apply(this,arguments)})},{key:"rpcBatchSubscribe",value:(k=U(L().mark((function t(e){var r,i,n=this;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.length){t.next=2;break}return t.abrupt("return");case 2:return r=e[0].relay,i={method:Object(y.F)(r.protocol).batchSubscribe,params:{topics:e.map((function(s){return s.topic}))}},this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),t.prev=4,t.next=7,Object(y.h)(this.relayer.request(i).catch((function(s){return n.logger.warn(s)})),this.subscribeTimeout);case 7:return t.next=9,t.sent;case 9:return t.abrupt("return",t.sent);case 12:t.prev=12,t.t0=t.catch(4),this.relayer.events.emit(Te.connection_stalled);case 15:case"end":return t.stop()}}),t,this,[[4,12]])}))),function(t){return k.apply(this,arguments)})},{key:"rpcBatchFetchMessages",value:(A=U(L().mark((function t(e){var r,i,s,n=this;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.length){t.next=2;break}return t.abrupt("return");case 2:return r=e[0].relay,i={method:Object(y.F)(r.protocol).batchFetchMessages,params:{topics:e.map((function(t){return t.topic}))}},this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i}),t.prev=4,t.next=7,Object(y.h)(this.relayer.request(i).catch((function(t){return n.logger.warn(t)})),this.subscribeTimeout);case 7:return t.next=9,t.sent;case 9:s=t.sent,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),this.relayer.events.emit(Te.connection_stalled);case 15:return t.abrupt("return",s);case 16:case"end":return t.stop()}}),t,this,[[4,12]])}))),function(t){return A.apply(this,arguments)})},{key:"rpcUnsubscribe",value:function(t,e,i){var s={method:Object(y.F)(i.protocol).unsubscribe,params:{topic:t,id:e}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}},{key:"onSubscribe",value:function(t,e){this.setSubscription(t,vr(dr({},e),{id:t})),this.pending.delete(e.topic)}},{key:"onBatchSubscribe",value:function(t){var e=this;t.length&&t.forEach((function(t){e.setSubscription(t.id,dr({},t)),e.pending.delete(t.topic)}))}},{key:"onUnsubscribe",value:(O=U(L().mark((function t(e,r,i){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,i),t.next=4,this.relayer.messages.del(e);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return O.apply(this,arguments)})},{key:"setRelayerSubscriptions",value:(E=U(L().mark((function t(e){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.relayer.core.storage.setItem(this.storageKey,e);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return E.apply(this,arguments)})},{key:"getRelayerSubscriptions",value:(x=U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.relayer.core.storage.getItem(this.storageKey);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return x.apply(this,arguments)})},{key:"setSubscription",value:function(t,e){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:e}),this.addSubscription(t,e)}},{key:"addSubscription",value:function(t,e){this.subscriptions.set(t,dr({},e)),this.topicMap.set(e.topic,t),this.events.emit(De,e)}},{key:"getSubscription",value:function(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});var e=this.subscriptions.get(t);if(!e){var i=Object(y.B)("NO_MATCHING_KEY","".concat(this.name,": ").concat(t)).message;throw new Error(i)}return e}},{key:"deleteSubscription",value:function(t,e){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:e});var i=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(i.topic,t),this.events.emit(qe,vr(dr({},i),{reason:e}))}},{key:"persist",value:(_=U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setRelayerSubscriptions(this.values);case 2:this.events.emit(ze);case 3:case"end":return t.stop()}}),t,this)}))),function(){return _.apply(this,arguments)})},{key:"reset",value:(m=U(L().mark((function t(){var e,r,i;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.cached.length){t.next=12;break}e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit),r=0;case 3:if(!(r<e)){t.next=12;break}return i=this.cached.splice(0,this.batchSubscribeTopicsLimit),t.next=7,this.batchFetchMessages(i);case 7:return t.next=9,this.batchSubscribe(i);case 9:r++,t.next=3;break;case 12:this.events.emit(Fe);case 13:case"end":return t.stop()}}),t,this)}))),function(){return m.apply(this,arguments)})},{key:"restore",value:(v=U(L().mark((function t(){var e,r,n;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getRelayerSubscriptions();case 3:if(!(G(e=t.sent)>"u")&&e.length){t.next=6;break}return t.abrupt("return");case 6:if(!this.subscriptions.size){t.next=9;break}throw r=Object(y.B)("RESTORE_WILL_OVERRIDE",this.name),n=r.message,this.logger.error(n),this.logger.error("".concat(this.name,": ").concat(JSON.stringify(this.values))),new Error(n);case 9:this.cached=e,this.logger.debug("Successfully Restored subscriptions for ".concat(this.name)),this.logger.trace({type:"method",method:"restore",subscriptions:this.values}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),this.logger.debug("Failed to Restore subscriptions for ".concat(this.name)),this.logger.error(t.t0);case 15:case"end":return t.stop()}}),t,this,[[0,12]])}))),function(){return v.apply(this,arguments)})},{key:"batchSubscribe",value:(d=U(L().mark((function t(e){var r;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.length){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.rpcBatchSubscribe(e);case 4:r=t.sent,Object(y.X)(r)&&this.onBatchSubscribe(r.map((function(i,s){return vr(dr({},e[s]),{id:i})})));case 6:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"batchFetchMessages",value:(h=U(L().mark((function t(e){var r;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.length){t.next=2;break}return t.abrupt("return");case 2:return this.logger.trace("Fetching batch messages for ".concat(e.length," subscriptions")),t.next=5,this.rpcBatchFetchMessages(e);case 5:(r=t.sent)&&r.messages&&(this.pendingBatchMessages=this.pendingBatchMessages.concat(r.messages));case 7:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"onConnect",value:(c=U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.restart();case 2:this.onEnable();case 3:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"onDisconnect",value:function(){this.onDisable()}},{key:"checkPending",value:(o=U(L().mark((function t(){var e;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.initialized&&this.relayer.connected){t.next=2;break}return t.abrupt("return");case 2:return e=[],this.pending.forEach((function(t){e.push(t)})),t.next=6,this.batchSubscribe(e);case 6:if(t.t0=this.pendingBatchMessages.length,!t.t0){t.next=11;break}return t.next=10,this.relayer.handleBatchMessageEvents(this.pendingBatchMessages);case 10:this.pendingBatchMessages=[];case 11:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"registerEventListeners",value:function(){var t=this;this.relayer.core.heartbeat.on(f.a.pulse,U(L().mark((function e(){return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.checkPending();case 2:case"end":return e.stop()}}),e)})))),this.events.on(De,function(){var e=U(L().mark((function e(r){var n;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=De,t.logger.info("Emitting ".concat(n)),t.logger.debug({type:"event",event:n,data:r}),e.next=5,t.persist();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.events.on(qe,function(){var e=U(L().mark((function e(r){var n;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=qe,t.logger.info("Emitting ".concat(n)),t.logger.debug({type:"event",event:n,data:r}),e.next=5,t.persist();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"isInitialized",value:function(){if(!this.initialized){var t=Object(y.B)("NOT_INITIALIZED",this.name).message;throw new Error(t)}}},{key:"restartToComplete",value:(r=U(L().mark((function t(){var e=this;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.restartInProgress,!t.t0){t.next=4;break}return t.next=4,new Promise((function(t){var r=setInterval((function(){e.restartInProgress||(clearInterval(r),t())}),e.pollingInterval)}));case 4:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})}]);var r,o,c,h,d,v,m,_,x,E,O,A,k,S,I,P}(h.k),gr=Object.defineProperty,mr=Object.getOwnPropertySymbols,wr=Object.prototype.hasOwnProperty,_r=Object.prototype.propertyIsEnumerable,xr=function(t,e,r){return e in t?gr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},Er=function(t,e){for(var r in e||(e={}))wr.call(e,r)&&xr(t,r,e[r]);if(mr){var n,o=B(mr(e));try{for(o.s();!(n=o.n()).done;){r=n.value;_r.call(e,r)&&xr(t,r,e[r])}}catch(t){o.e(t)}finally{o.f()}}return t},Or=function(t){function e(t){var r;return V(this,e),(r=j(this,e,[t])).protocol="wc",r.version=2,r.events=new n.EventEmitter,r.name="relayer",r.transportExplicitlyClosed=!1,r.initialized=!1,r.connectionAttemptInProgress=!1,r.connectionStatusPollingInterval=20,r.staleConnectionErrors=["socket hang up","stalled","interrupted"],r.hasExperiencedNetworkDisruption=!1,r.requestsInFlight=new Map,r.heartBeatTimeout=Object(w.toMiliseconds)(w.THIRTY_SECONDS+w.ONE_SECOND),r.request=function(){var t=U(L().mark((function t(e){var i,s,n,o,a;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.logger.debug("Publishing Request Payload"),n=e.id||Object(x.getBigIntRpcId)().toString(),t.next=4,r.toEstablishConnection();case 4:return t.prev=4,o=r.provider.request(e),r.requestsInFlight.set(n,{promise:o,request:e}),r.logger.trace({id:n,method:e.method,topic:null==(i=e.params)?void 0:i.topic},"relayer.request - attempt to publish..."),t.next=9,new Promise(function(){var t=U(L().mark((function t(e,c){var f,g;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f=function(){c(new Error("relayer.request - publish interrupted, id: ".concat(n)))},r.provider.on(Ue,f),t.next=4,o;case 4:g=t.sent,r.provider.off(Ue,f),e(g);case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}());case 9:return a=t.sent,t.abrupt("return",(r.logger.trace({id:n,method:e.method,topic:null==(s=e.params)?void 0:s.topic},"relayer.request - published"),a));case 13:throw t.prev=13,t.t0=t.catch(4),r.logger.debug("Failed to Publish Request: ".concat(n)),t.t0;case 16:return t.prev=16,r.requestsInFlight.delete(n),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[4,13,16,19]])})));return function(e){return t.apply(this,arguments)}}(),r.resetPingTimeout=function(){if(Object(y.P)())try{clearTimeout(r.pingTimeout),r.pingTimeout=setTimeout((function(){var t,i,s;null==(s=null==(i=null==(t=r.provider)?void 0:t.connection)?void 0:i.socket)||s.terminate()}),r.heartBeatTimeout)}catch(t){r.logger.warn(t)}},r.onPayloadHandler=function(t){r.onProviderPayload(t),r.resetPingTimeout()},r.onConnectHandler=function(){r.logger.trace("relayer connected"),r.startPingTimeout(),r.events.emit(Te.connect)},r.onDisconnectHandler=function(){r.logger.trace("relayer disconnected"),r.onProviderDisconnect()},r.onProviderErrorHandler=function(t){r.logger.error(t),r.events.emit(Te.error,t),r.logger.info("Fatal socket error received, closing transport"),r.transportClose()},r.registerProviderListeners=function(){r.provider.on(Le,r.onPayloadHandler),r.provider.on(Ce,r.onConnectHandler),r.provider.on(Ue,r.onDisconnectHandler),r.provider.on(Be,r.onProviderErrorHandler)},r.core=t.core,r.logger=G(t.logger)<"u"&&"string"!=typeof t.logger?Object(l.a)(t.logger,r.name):Object(l.e)(Object(l.c)({level:t.logger||"error"})),r.messages=new nr(r.logger,t.core),r.subscriber=new yr(P(r),r.logger),r.publisher=new ir(P(r),r.logger),r.relayUrl=(null==t?void 0:t.relayUrl)||Ne,r.projectId=t.projectId,r.bundleId=Object(y.x)(),r.provider={},r}return N(e,t),J(e,[{key:"init",value:(z=U(L().mark((function t(){var e=this;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.logger.trace("Initialized"),this.registerEventListeners(),t.next=4,Promise.all([this.messages.init(),this.subscriber.init()]);case 4:return t.next=6,this.transportOpen();case 6:this.initialized=!0,setTimeout(U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=0===e.subscriber.topics.length&&0===e.subscriber.pending.size,!t.t0){t.next=6;break}return e.logger.info("No topics subscribed to after init, closing transport"),t.next=5,e.transportClose();case 5:e.transportExplicitlyClosed=!1;case 6:case"end":return t.stop()}}),t)}))),1e4);case 8:case"end":return t.stop()}}),t,this)}))),function(){return z.apply(this,arguments)})},{key:"context",get:function(){return Object(l.d)(this.logger)}},{key:"connected",get:function(){var t,e,i;return 1===(null==(i=null==(e=null==(t=this.provider)?void 0:t.connection)?void 0:e.socket)?void 0:i.readyState)}},{key:"connecting",get:function(){var t,e,i;return 0===(null==(i=null==(e=null==(t=this.provider)?void 0:t.connection)?void 0:e.socket)?void 0:i.readyState)}},{key:"publish",value:(D=U(L().mark((function t(e,r,i){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isInitialized(),t.next=3,this.publisher.publish(e,r,i);case 3:return t.next=5,this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()});case 5:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return D.apply(this,arguments)})},{key:"subscribe",value:(C=U(L().mark((function t(e,r){var i,s,n,o,c=this;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isInitialized(),s=(null==(i=this.subscriber.topicMap.get(e))?void 0:i[0])||"",o=function(a){a.topic===e&&(c.subscriber.off(De,o),n())},t.next=5,Promise.all([new Promise((function(a){n=a,c.subscriber.on(De,o)})),new Promise(function(){var t=U(L().mark((function t(a){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.subscriber.subscribe(e,r);case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=s;case 5:s=t.t0,a();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())]);case 5:return t.abrupt("return",s);case 6:case"end":return t.stop()}}),t,this)}))),function(t,e){return C.apply(this,arguments)})},{key:"unsubscribe",value:(T=U(L().mark((function t(e,r){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.isInitialized(),t.next=3,this.subscriber.unsubscribe(e,r);case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return T.apply(this,arguments)})},{key:"on",value:function(t,e){this.events.on(t,e)}},{key:"once",value:function(t,e){this.events.once(t,e)}},{key:"off",value:function(t,e){this.events.off(t,e)}},{key:"removeListener",value:function(t,e){this.events.removeListener(t,e)}},{key:"transportDisconnect",value:(R=U(L().mark((function t(){var e=this;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(!this.hasExperiencedNetworkDisruption&&this.connected&&this.requestsInFlight.size>0)){t.next=9;break}return t.prev=1,t.next=4,Promise.all(Array.from(this.requestsInFlight.values()).map((function(t){return t.promise})));case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),this.logger.warn(t.t0);case 9:if(!this.hasExperiencedNetworkDisruption&&!this.connected){t.next=14;break}return t.next=12,Object(y.h)(this.provider.disconnect(),2e3,"provider.disconnect()").catch((function(){return e.onProviderDisconnect()}));case 12:t.next=15;break;case 14:this.onProviderDisconnect();case 15:case"end":return t.stop()}}),t,this,[[1,6]])}))),function(){return R.apply(this,arguments)})},{key:"transportClose",value:(M=U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.transportExplicitlyClosed=!0,t.next=3,this.transportDisconnect();case 3:case"end":return t.stop()}}),t,this)}))),function(){return M.apply(this,arguments)})},{key:"transportOpen",value:(I=U(L().mark((function t(e){var i,r=this;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.confirmOnlineStateOrThrow();case 2:if(t.t0=e&&e!==this.relayUrl,!t.t0){t.next=7;break}return this.relayUrl=e,t.next=7,this.transportDisconnect();case 7:return t.next=9,this.createProvider();case 9:return this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1,t.prev=11,t.next=14,new Promise(function(){var t=U(L().mark((function t(e,i){var n;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=function(){r.provider.off(Ue,n),i(new Error("Connection interrupted while trying to subscribe"))},r.provider.on(Ue,n),t.next=4,Object(y.h)(r.provider.connect(),Object(w.toMiliseconds)(w.ONE_MINUTE),"Socket stalled when trying to connect to ".concat(r.relayUrl)).catch((function(t){i(t)}));case 4:r.subscriber.start().catch((function(t){r.logger.error(t),r.onDisconnectHandler()})),r.hasExperiencedNetworkDisruption=!1,e();case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}());case 14:t.next=22;break;case 16:if(t.prev=16,t.t1=t.catch(11),this.logger.error(t.t1),i=t.t1,this.hasExperiencedNetworkDisruption=!0,this.isConnectionStalled(i.message)){t.next=22;break}throw t.t1;case 22:return t.prev=22,this.connectionAttemptInProgress=!1,t.finish(22);case 25:case"end":return t.stop()}}),t,this,[[11,16,22,25]])}))),function(t){return I.apply(this,arguments)})},{key:"restartTransport",value:(S=U(L().mark((function t(e){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.connectionAttemptInProgress,t.t0){t.next=9;break}return this.relayUrl=e||this.relayUrl,t.next=5,this.confirmOnlineStateOrThrow();case 5:return t.next=7,this.transportClose();case 7:return t.next=9,this.transportOpen();case 9:case"end":return t.stop()}}),t,this)}))),function(t){return S.apply(this,arguments)})},{key:"confirmOnlineStateOrThrow",value:(k=U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(y.Q)();case 2:if(t.sent){t.next=4;break}throw new Error("No internet connection detected. Please restart your network and try again.");case 4:case"end":return t.stop()}}),t)}))),function(){return k.apply(this,arguments)})},{key:"handleBatchMessageEvents",value:(A=U(L().mark((function t(e){var r,n,o,i;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==(null==e?void 0:e.length)){t.next=3;break}return this.logger.trace("Batch message events is empty. Ignoring..."),t.abrupt("return");case 3:r=e.sort((function(i,s){return i.publishedAt-s.publishedAt})),this.logger.trace("Batch of ".concat(r.length," message events sorted")),n=B(r),t.prev=6,n.s();case 8:if((o=n.n()).done){t.next=20;break}return i=o.value,t.prev=10,t.next=13,this.onMessageEvent(i);case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(10),this.logger.warn(t.t0);case 18:t.next=8;break;case 20:t.next=25;break;case 22:t.prev=22,t.t1=t.catch(6),n.e(t.t1);case 25:return t.prev=25,n.f(),t.finish(25);case 28:this.logger.trace("Batch of ".concat(r.length," message events processed"));case 29:case"end":return t.stop()}}),t,this,[[6,22,25,28],[10,15]])}))),function(t){return A.apply(this,arguments)})},{key:"startPingTimeout",value:function(){var t,e,i,s,r,n=this;if(Object(y.P)())try{null!=(e=null==(t=this.provider)?void 0:t.connection)&&e.socket&&(null==(r=null==(s=null==(i=this.provider)?void 0:i.connection)?void 0:s.socket)||r.once("ping",(function(){n.resetPingTimeout()}))),this.resetPingTimeout()}catch(t){this.logger.warn(t)}}},{key:"isConnectionStalled",value:function(t){return this.staleConnectionErrors.some((function(e){return t.includes(e)}))}},{key:"createProvider",value:(O=U(L().mark((function t(){var e;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.provider.connection&&this.unregisterProviderListeners(),t.next=3,this.core.crypto.signJWT(this.relayUrl);case 3:e=t.sent,this.provider=new _.a(new E.a(Object(y.q)({sdkVersion:"2.14.0",protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners();case 5:case"end":return t.stop()}}),t,this)}))),function(){return O.apply(this,arguments)})},{key:"recordMessageEvent",value:(m=U(L().mark((function t(e){var r,i;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.topic,i=e.message,t.next=3,this.messages.set(r,i);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return m.apply(this,arguments)})},{key:"shouldIgnoreMessageEvent",value:(v=U(L().mark((function t(e){var r,i,s;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.topic,(i=e.message)&&0!==i.length){t.next=3;break}return t.abrupt("return",(this.logger.debug("Ignoring invalid/empty message: ".concat(i)),!0));case 3:return t.next=5,this.subscriber.isSubscribed(r);case 5:if(t.sent){t.next=7;break}return t.abrupt("return",(this.logger.debug("Ignoring message for non-subscribed topic ".concat(r)),!0));case 7:return s=this.messages.has(r,i),t.abrupt("return",(s&&this.logger.debug("Ignoring duplicate message: ".concat(i)),s));case 9:case"end":return t.stop()}}),t,this)}))),function(t){return v.apply(this,arguments)})},{key:"onProviderPayload",value:(d=U(L().mark((function t(e){var r,n,i,s,o,c;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),!Object(x.isJsonRpcRequest)(e)){t.next=13;break}if(e.method.endsWith("_subscription")){t.next=3;break}return t.abrupt("return");case 3:return r=e.params,n=r.data,i=n.topic,s=n.message,o=n.publishedAt,c={topic:i,message:s,publishedAt:o},this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Er({type:"event",event:r.id},c)),this.events.emit(r.id,c),t.next=9,this.acknowledgePayload(e);case 9:return t.next=11,this.onMessageEvent(c);case 11:t.next=14;break;case 13:Object(x.isJsonRpcResponse)(e)&&this.events.emit(Te.message_ack,e);case 14:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"onMessageEvent",value:(h=U(L().mark((function t(e){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.shouldIgnoreMessageEvent(e);case 2:if(t.t0=t.sent,t.t0){t.next=7;break}return this.events.emit(Te.message,e),t.next=7,this.recordMessageEvent(e);case 7:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"acknowledgePayload",value:(f=U(L().mark((function t(e){var r;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(x.formatJsonRpcResult)(e.id,!0),t.next=3,this.provider.connection.send(r);case 3:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)})},{key:"unregisterProviderListeners",value:function(){this.provider.off(Le,this.onPayloadHandler),this.provider.off(Ce,this.onConnectHandler),this.provider.off(Ue,this.onDisconnectHandler),this.provider.off(Be,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}},{key:"registerEventListeners",value:(c=U(L().mark((function t(){var e,r=this;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(y.Q)();case 2:e=t.sent,Object(y.yb)(function(){var t=U(L().mark((function t(n){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e!==n,!t.t0){t.next=12;break}if(e=n,!n){t.next=8;break}return t.next=6,r.restartTransport().catch((function(i){return r.logger.error(i)}));case 6:t.next=12;break;case 8:return r.hasExperiencedNetworkDisruption=!0,t.next=11,r.transportDisconnect();case 11:r.transportExplicitlyClosed=!1;case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}}),t)}))),function(){return c.apply(this,arguments)})},{key:"onProviderDisconnect",value:(o=U(L().mark((function t(){var e=this;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.subscriber.stop();case 2:this.requestsInFlight.clear(),clearTimeout(this.pingTimeout),this.events.emit(Te.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&setTimeout(U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.transportOpen().catch((function(t){return e.logger.error(t)}));case 2:case"end":return t.stop()}}),t)}))),Object(w.toMiliseconds)(.1));case 7:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"isInitialized",value:function(){if(!this.initialized){var t=Object(y.B)("NOT_INITIALIZED",this.name).message;throw new Error(t)}}},{key:"toEstablishConnection",value:(r=U(L().mark((function t(){var e=this;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.confirmOnlineStateOrThrow();case 2:if(t.t0=!this.connected,!t.t0){t.next=10;break}if(t.t1=this.connectionAttemptInProgress,!t.t1){t.next=8;break}return t.next=8,new Promise((function(t){var r=setInterval((function(){e.connected&&(clearInterval(r),t())}),e.connectionStatusPollingInterval)}));case 8:return t.next=10,this.transportOpen();case 10:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})}]);var r,o,c,f,h,d,v,m,O,A,k,S,I,M,R,T,C,D,z}(h.h),Ar=Object.defineProperty,kr=Object.getOwnPropertySymbols,Sr=Object.prototype.hasOwnProperty,Ir=Object.prototype.propertyIsEnumerable,jr=function(t,e,r){return e in t?Ar(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},Pr=function(t,e){for(var r in e||(e={}))Sr.call(e,r)&&jr(t,r,e[r]);if(kr){var n,o=B(kr(e));try{for(o.s();!(n=o.n()).done;){r=n.value;Ir.call(e,r)&&jr(t,r,e[r])}}catch(t){o.e(t)}finally{o.f()}}return t},Mr=function(t){function e(t,r,i){var n,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ke,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;return V(this,e),(n=j(this,e,[t,r,i,s])).core=t,n.logger=r,n.name=i,n.map=new Map,n.version="0.3",n.cached=[],n.initialized=!1,n.storagePrefix=ke,n.recentlyDeleted=[],n.recentlyDeletedLimit=200,n.init=U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n.initialized,t.t0){t.next=8;break}return n.logger.trace("Initialized"),t.next=5,n.restore();case 5:n.cached.forEach((function(t){n.getKey&&null!==t&&!Object(y.W)(t)?n.map.set(n.getKey(t),t):Object(y.R)(t)?n.map.set(t.id,t):Object(y.U)(t)&&n.map.set(t.topic,t)})),n.cached=[],n.initialized=!0;case 8:case"end":return t.stop()}}),t)}))),n.set=function(){var t=U(L().mark((function t(e,a){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.isInitialized(),!n.map.has(e)){t.next=6;break}return t.next=4,n.update(e,a);case 4:t.next=11;break;case 6:return n.logger.debug("Setting value"),n.logger.trace({type:"method",method:"set",key:e,value:a}),n.map.set(e,a),t.next=11,n.persist();case 11:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),n.get=function(t){return n.isInitialized(),n.logger.debug("Getting value"),n.logger.trace({type:"method",method:"get",key:t}),n.getData(t)},n.getAll=function(t){return n.isInitialized(),t?n.values.filter((function(a){return Object.keys(t).every((function(e){return A()(a[e],t[e])}))})):n.values},n.update=function(){var t=U(L().mark((function t(e,a){var r;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.isInitialized(),n.logger.debug("Updating value"),n.logger.trace({type:"method",method:"update",key:e,update:a}),r=Pr(Pr({},n.getData(e)),a),n.map.set(e,r),t.next=5,n.persist();case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),n.delete=function(){var t=U(L().mark((function t(e,a){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.isInitialized(),t.t0=n.map.has(e),!t.t0){t.next=9;break}return n.logger.debug("Deleting value"),n.logger.trace({type:"method",method:"delete",key:e,reason:a}),n.map.delete(e),n.addToRecentlyDeleted(e),t.next=9,n.persist();case 9:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),n.logger=Object(l.a)(r,n.name),n.storagePrefix=s,n.getKey=o,n}return N(e,t),J(e,[{key:"context",get:function(){return Object(l.d)(this.logger)}},{key:"storageKey",get:function(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}},{key:"length",get:function(){return this.map.size}},{key:"keys",get:function(){return Array.from(this.map.keys())}},{key:"values",get:function(){return Array.from(this.map.values())}},{key:"addToRecentlyDeleted",value:function(t){this.recentlyDeleted.push(t),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}},{key:"setDataStore",value:(c=U(L().mark((function t(e){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.core.storage.setItem(this.storageKey,e);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"getDataStore",value:(o=U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.core.storage.getItem(this.storageKey);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"getData",value:function(t){var e=this.map.get(t);if(!e){if(this.recentlyDeleted.includes(t)){var s=Object(y.B)("MISSING_OR_INVALID","Record was recently deleted - ".concat(this.name,": ").concat(t)).message;throw this.logger.error(s),new Error(s)}var i=Object(y.B)("NO_MATCHING_KEY","".concat(this.name,": ").concat(t)).message;throw this.logger.error(i),new Error(i)}return e}},{key:"persist",value:(n=U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setDataStore(this.values);case 2:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"restore",value:(r=U(L().mark((function t(){var e,r,n;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getDataStore();case 3:if(!(G(e=t.sent)>"u")&&e.length){t.next=6;break}return t.abrupt("return");case 6:if(!this.map.size){t.next=9;break}throw r=Object(y.B)("RESTORE_WILL_OVERRIDE",this.name),n=r.message,this.logger.error(n),new Error(n);case 9:this.cached=e,this.logger.debug("Successfully Restored value for ".concat(this.name)),this.logger.trace({type:"method",method:"restore",value:this.values}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),this.logger.debug("Failed to Restore value for ".concat(this.name)),this.logger.error(t.t0);case 15:case"end":return t.stop()}}),t,this,[[0,12]])}))),function(){return r.apply(this,arguments)})},{key:"isInitialized",value:function(){if(!this.initialized){var t=Object(y.B)("NOT_INITIALIZED",this.name).message;throw new Error(t)}}}]);var r,n,o,c}(h.j),Rr=function(){return J((function t(e,r){var n=this;V(this,t),this.core=e,this.logger=r,this.name="pairing",this.version="0.3",this.events=new o.a,this.initialized=!1,this.storagePrefix=ke,this.ignoredPayloadTypes=[y.c],this.registeredMethods=[],this.init=U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n.initialized,t.t0){t.next=10;break}return t.next=4,n.pairings.init();case 4:return t.next=6,n.cleanup();case 6:n.registerRelayerEvents(),n.registerExpirerEvents(),n.initialized=!0,n.logger.trace("Initialized");case 10:case"end":return t.stop()}}),t)}))),this.register=function(t){var i=t.methods;n.isInitialized(),n.registeredMethods=I(new Set([].concat(I(n.registeredMethods),I(i))))},this.create=function(){var t=U(L().mark((function t(i){var s,e,r,a,o,c;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.isInitialized(),s=Object(y.u)(),t.next=4,n.core.crypto.setSymKey(s);case 4:return e=t.sent,r=Object(y.e)(w.FIVE_MINUTES),o={topic:e,expiry:r,relay:a={protocol:Re},active:!1},c=Object(y.s)({protocol:n.core.protocol,version:n.core.version,topic:e,symKey:s,relay:a,expiryTimestamp:r,methods:null==i?void 0:i.methods}),n.core.expirer.set(e,r),t.next=12,n.pairings.set(e,o);case 12:return t.next=14,n.core.relayer.subscribe(e);case 14:return t.abrupt("return",{topic:e,uri:c});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.pair=function(){var t=U(L().mark((function t(i){var e,s,r,o,a,c,f,g;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.isInitialized(),n.isValidPair(i),e=Object(y.xb)(i.uri),s=e.topic,r=e.symKey,o=e.relay,a=e.expiryTimestamp,c=e.methods,!n.pairings.keys.includes(s)||!n.pairings.get(s).active){t.next=4;break}throw new Error("Pairing already exists: ".concat(s,". Please try again with a new connection URI."));case 4:return f=a||Object(y.e)(w.FIVE_MINUTES),g={topic:s,relay:o,expiry:f,active:!1,methods:c},n.core.expirer.set(s,f),t.next=8,n.pairings.set(s,g);case 8:if(t.t0=i.activatePairing,!t.t0){t.next=12;break}return t.next=12,n.activate({topic:s});case 12:if(n.events.emit(q.create,g),t.t1=n.core.crypto.keychain.has(s),t.t1){t.next=17;break}return t.next=17,n.core.crypto.setSymKey(r,s);case 17:return t.next=19,n.core.relayer.subscribe(s,{relay:o});case 19:return t.abrupt("return",g);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.activate=function(){var t=U(L().mark((function t(e){var i,s;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.topic,n.isInitialized(),s=Object(y.e)(w.THIRTY_DAYS),n.core.expirer.set(i,s),t.next=6,n.pairings.update(i,{active:!0,expiry:s});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.ping=function(){var t=U(L().mark((function t(i){var s,e,r,o,a,c;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.isInitialized(),t.next=3,n.isValidPing(i);case 3:if(s=i.topic,!n.pairings.keys.includes(s)){t.next=15;break}return t.next=7,n.sendRequest(s,"wc_pairingPing",{});case 7:return e=t.sent,r=Object(y.f)(),o=r.done,a=r.resolve,c=r.reject,n.events.once(Object(y.n)("pairing_ping",e),(function(t){var e=t.error;e?c(e):a()})),t.next=15,o();case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.updateExpiry=function(){var t=U(L().mark((function t(e){var i,s;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.topic,s=e.expiry,n.isInitialized(),t.next=4,n.pairings.update(i,{expiry:s});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.updateMetadata=function(){var t=U(L().mark((function t(e){var i,s;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.topic,s=e.metadata,n.isInitialized(),t.next=4,n.pairings.update(i,{peerMetadata:s});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.getPairings=function(){return n.isInitialized(),n.pairings.values},this.disconnect=function(){var t=U(L().mark((function t(i){var s;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.isInitialized(),t.next=3,n.isValidDisconnect(i);case 3:if(s=i.topic,t.t0=n.pairings.keys.includes(s),!t.t0){t.next=10;break}return t.next=8,n.sendRequest(s,"wc_pairingDelete",Object(y.H)("USER_DISCONNECTED"));case 8:return t.next=10,n.deletePairing(s);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.sendRequest=function(){var t=U(L().mark((function t(i,s,e){var r,a,o;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(x.formatJsonRpcRequest)(s,e),t.next=3,n.core.crypto.encode(i,r);case 3:return a=t.sent,o=Ke[s].req,t.abrupt("return",(n.core.history.set(i,r),n.core.relayer.publish(i,a,o),r.id));case 6:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),this.sendResult=function(){var t=U(L().mark((function t(i,s,e){var r,a,o,c;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(x.formatJsonRpcResult)(i,e),t.next=3,n.core.crypto.encode(s,r);case 3:return a=t.sent,t.next=6,n.core.history.get(s,i);case 6:return o=t.sent,c=Ke[o.request.method].res,t.next=10,n.core.relayer.publish(s,a,c);case 10:return t.next=12,n.core.history.resolve(r);case 12:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),this.sendError=function(){var t=U(L().mark((function t(i,s,e){var r,a,o,c;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(x.formatJsonRpcError)(i,e),t.next=3,n.core.crypto.encode(s,r);case 3:return a=t.sent,t.next=6,n.core.history.get(s,i);case 6:return o=t.sent,c=Ke[o.request.method]?Ke[o.request.method].res:Ke.unregistered_method.res,t.next=10,n.core.relayer.publish(s,a,c);case 10:return t.next=12,n.core.history.resolve(r);case 12:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),this.deletePairing=function(){var t=U(L().mark((function t(i,s){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.core.relayer.unsubscribe(i);case 2:return t.next=4,Promise.all([n.pairings.delete(i,Object(y.H)("USER_DISCONNECTED")),n.core.crypto.deleteSymKey(i),s?Promise.resolve():n.core.expirer.del(i)]);case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),this.cleanup=U(L().mark((function t(){var i;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.pairings.getAll().filter((function(s){return Object(y.O)(s.expiry)})),t.next=3,Promise.all(i.map((function(s){return n.deletePairing(s.topic)})));case 3:case"end":return t.stop()}}),t)}))),this.onRelayEventRequest=function(i){var s=i.topic,t=i.payload;switch(t.method){case"wc_pairingPing":return n.onPairingPingRequest(s,t);case"wc_pairingDelete":return n.onPairingDeleteRequest(s,t);default:return n.onUnknownRpcMethodRequest(s,t)}},this.onRelayEventResponse=function(){var t=U(L().mark((function t(i){var s,e,r;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=i.topic,e=i.payload,t.next=4,n.core.history.get(s,e.id);case 4:r=t.sent.request.method,t.t0=r,t.next="wc_pairingPing"===t.t0?8:9;break;case 8:return t.abrupt("return",n.onPairingPingResponse(s,e));case 9:return t.abrupt("return",n.onUnknownRpcMethodResponse(r));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.onPairingPingRequest=function(){var t=U(L().mark((function t(i,s){var e;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=s.id,t.prev=1,n.isValidPing({topic:i}),t.next=5,n.sendResult(e,i,!0);case 5:n.events.emit(q.ping,{id:e,topic:i}),t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(1),t.next=12,n.sendError(e,i,t.t0);case 12:n.logger.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,r){return t.apply(this,arguments)}}(),this.onPairingPingResponse=function(i,s){var t=s.id;setTimeout((function(){Object(x.isJsonRpcResult)(s)?n.events.emit(Object(y.n)("pairing_ping",t),{}):Object(x.isJsonRpcError)(s)&&n.events.emit(Object(y.n)("pairing_ping",t),{error:s.error})}),500)},this.onPairingDeleteRequest=function(){var t=U(L().mark((function t(i,s){var e;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=s.id,t.prev=1,n.isValidDisconnect({topic:i}),t.next=5,n.deletePairing(i);case 5:n.events.emit(q.delete,{id:e,topic:i}),t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(1),t.next=12,n.sendError(e,i,t.t0);case 12:n.logger.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,r){return t.apply(this,arguments)}}(),this.onUnknownRpcMethodRequest=function(){var t=U(L().mark((function t(i,s){var e,r,a;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=s.id,r=s.method,t.prev=1,!n.registeredMethods.includes(r)){t.next=4;break}return t.abrupt("return");case 4:return a=Object(y.H)("WC_METHOD_UNSUPPORTED",r),t.next=7,n.sendError(e,i,a);case 7:n.logger.error(a),t.next=15;break;case 10:return t.prev=10,t.t0=t.catch(1),t.next=14,n.sendError(e,i,t.t0);case 14:n.logger.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,r){return t.apply(this,arguments)}}(),this.onUnknownRpcMethodResponse=function(i){n.registeredMethods.includes(i)||n.logger.error(Object(y.H)("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=function(i){var s;if(!Object(y.hb)(i)){var t=Object(y.B)("MISSING_OR_INVALID","pair() params: ".concat(i)).message;throw new Error(t)}if(!Object(y.pb)(i.uri)){var e=Object(y.B)("MISSING_OR_INVALID","pair() uri: ".concat(i.uri)).message;throw new Error(e)}var r=Object(y.xb)(i.uri);if(null==(s=null==r?void 0:r.relay)||!s.protocol){var n=Object(y.B)("MISSING_OR_INVALID","pair() uri#relay-protocol").message;throw new Error(n)}if(null==r||!r.symKey){var o=Object(y.B)("MISSING_OR_INVALID","pair() uri#symKey").message;throw new Error(o)}if(null!=r&&r.expiryTimestamp&&Object(w.toMiliseconds)(null==r?void 0:r.expiryTimestamp)<Date.now()){var c=Object(y.B)("EXPIRED","pair() URI has expired. Please try again with a new connection URI.").message;throw new Error(c)}},this.isValidPing=function(){var t=U(L().mark((function t(i){var e,r,s;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(y.hb)(i)){t.next=3;break}throw e=Object(y.B)("MISSING_OR_INVALID","ping() params: ".concat(i)),r=e.message,new Error(r);case 3:return s=i.topic,t.next=6,n.isValidPairingTopic(s);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.isValidDisconnect=function(){var t=U(L().mark((function t(i){var e,r,s;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(y.hb)(i)){t.next=3;break}throw e=Object(y.B)("MISSING_OR_INVALID","disconnect() params: ".concat(i)),r=e.message,new Error(r);case 3:return s=i.topic,t.next=6,n.isValidPairingTopic(s);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.isValidPairingTopic=function(){var t=U(L().mark((function t(i){var e,s,r,o,c,f;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(y.ob)(i,!1)){t.next=3;break}throw e=Object(y.B)("MISSING_OR_INVALID","pairing topic should be a string: ".concat(i)),s=e.message,new Error(s);case 3:if(n.pairings.keys.includes(i)){t.next=6;break}throw r=Object(y.B)("NO_MATCHING_KEY","pairing topic doesn't exist: ".concat(i)),o=r.message,new Error(o);case 6:if(!Object(y.O)(n.pairings.get(i).expiry)){t.next=11;break}return t.next=9,n.deletePairing(i);case 9:throw c=Object(y.B)("EXPIRED","pairing topic: ".concat(i)),f=c.message,new Error(f);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.core=e,this.logger=Object(l.a)(r,this.name),this.pairings=new Mr(this.core,this.logger,this.name,this.storagePrefix)}),[{key:"context",get:function(){return Object(l.d)(this.logger)}},{key:"isInitialized",value:function(){if(!this.initialized){var t=Object(y.B)("NOT_INITIALIZED",this.name).message;throw new Error(t)}}},{key:"registerRelayerEvents",value:function(){var t=this;this.core.relayer.on(Te.message,function(){var e=U(L().mark((function e(r){var n,i,s;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.topic,i=r.message,t.pairings.keys.includes(n)&&!t.ignoredPayloadTypes.includes(t.core.crypto.getPayloadType(i))){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t.core.crypto.decode(n,i);case 5:if(s=e.sent,e.prev=6,!Object(x.isJsonRpcRequest)(s)){e.next=11;break}t.core.history.set(n,s),t.onRelayEventRequest({topic:n,payload:s}),e.next=18;break;case 11:if(e.t0=Object(x.isJsonRpcResponse)(s),!e.t0){e.next=18;break}return e.next=15,t.core.history.resolve(s);case 15:return e.next=17,t.onRelayEventResponse({topic:n,payload:s});case 17:t.core.history.delete(n,s.id);case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(6),t.logger.error(e.t1);case 23:case"end":return e.stop()}}),e,null,[[6,20]])})));return function(t){return e.apply(this,arguments)}}())}},{key:"registerExpirerEvents",value:function(){var t=this;this.core.expirer.on(We.expired,function(){var e=U(L().mark((function e(r){var n,o;return L().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(y.vb)(r.target),o=n.topic,e.t0=o&&t.pairings.keys.includes(o),!e.t0){e.next=6;break}return e.next=5,t.deletePairing(o,!0);case 5:t.events.emit(q.expire,{topic:o});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}])}(),Nr=function(t){function e(t,r){var o;return V(this,e),(o=j(this,e,[t,r])).core=t,o.logger=r,o.records=new Map,o.events=new n.EventEmitter,o.name="history",o.version="0.3",o.cached=[],o.initialized=!1,o.storagePrefix=ke,o.init=U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=o.initialized,t.t0){t.next=9;break}return o.logger.trace("Initialized"),t.next=5,o.restore();case 5:o.cached.forEach((function(i){return o.records.set(i.id,i)})),o.cached=[],o.registerEventListeners(),o.initialized=!0;case 9:case"end":return t.stop()}}),t)}))),o.set=function(i,s,t){if(o.isInitialized(),o.logger.debug("Setting JSON-RPC request history record"),o.logger.trace({type:"method",method:"set",topic:i,request:s,chainId:t}),!o.records.has(s.id)){var e={id:s.id,topic:i,request:{method:s.method,params:s.params||null},chainId:t,expiry:Object(y.e)(w.THIRTY_DAYS)};o.records.set(e.id,e),o.persist(),o.events.emit(Ge,e)}},o.resolve=function(){var t=U(L().mark((function t(i){var s;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.isInitialized(),o.logger.debug("Updating JSON-RPC response history record"),o.logger.trace({type:"method",method:"update",response:i}),o.records.has(i.id)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,o.getRecord(i.id);case 4:G((s=t.sent).response)>"u"&&(s.response=Object(x.isJsonRpcError)(i)?{error:i.error}:{result:i.result},o.records.set(s.id,s),o.persist(),o.events.emit(Ve,s));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.get=function(){var t=U(L().mark((function t(i,s){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.isInitialized(),o.logger.debug("Getting record"),o.logger.trace({type:"method",method:"get",topic:i,id:s}),t.next=5,o.getRecord(s);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),o.delete=function(i,s){o.isInitialized(),o.logger.debug("Deleting record"),o.logger.trace({type:"method",method:"delete",id:s}),o.values.forEach((function(t){if(t.topic===i){if(G(s)<"u"&&t.id!==s)return;o.records.delete(t.id),o.events.emit(Ye,t)}})),o.persist()},o.exists=function(){var t=U(L().mark((function t(i,s){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o.isInitialized(),!o.records.has(s)){t.next=9;break}return t.next=4,o.getRecord(s);case 4:t.t1=t.sent.topic,t.t2=i,t.t0=t.t1===t.t2,t.next=10;break;case 9:t.t0=!1;case 10:return t.abrupt("return",t.t0);case 11:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),o.on=function(i,s){o.events.on(i,s)},o.once=function(i,s){o.events.once(i,s)},o.off=function(i,s){o.events.off(i,s)},o.removeListener=function(i,s){o.events.removeListener(i,s)},o.logger=Object(l.a)(r,o.name),o}return N(e,t),J(e,[{key:"context",get:function(){return Object(l.d)(this.logger)}},{key:"storageKey",get:function(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}},{key:"size",get:function(){return this.records.size}},{key:"keys",get:function(){return Array.from(this.records.keys())}},{key:"values",get:function(){return Array.from(this.records.values())}},{key:"pending",get:function(){var t=[];return this.values.forEach((function(e){if(!(G(e.response)<"u")){var i={topic:e.topic,request:Object(x.formatJsonRpcRequest)(e.request.method,e.request.params,e.id),chainId:e.chainId};return t.push(i)}})),t}},{key:"setJsonRpcRecords",value:(h=U(L().mark((function t(e){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.core.storage.setItem(this.storageKey,e);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"getJsonRpcRecords",value:(c=U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.core.storage.getItem(this.storageKey);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"getRecord",value:function(t){this.isInitialized();var e=this.records.get(t);if(!e){var i=Object(y.B)("NO_MATCHING_KEY","".concat(this.name,": ").concat(t)).message;throw new Error(i)}return e}},{key:"persist",value:(o=U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setJsonRpcRecords(this.values);case 2:this.events.emit(Je);case 3:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"restore",value:(r=U(L().mark((function t(){var e,r,n;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getJsonRpcRecords();case 3:if(!(G(e=t.sent)>"u")&&e.length){t.next=6;break}return t.abrupt("return");case 6:if(!this.records.size){t.next=9;break}throw r=Object(y.B)("RESTORE_WILL_OVERRIDE",this.name),n=r.message,this.logger.error(n),new Error(n);case 9:this.cached=e,this.logger.debug("Successfully Restored records for ".concat(this.name)),this.logger.trace({type:"method",method:"restore",records:this.values}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),this.logger.debug("Failed to Restore records for ".concat(this.name)),this.logger.error(t.t0);case 15:case"end":return t.stop()}}),t,this,[[0,12]])}))),function(){return r.apply(this,arguments)})},{key:"registerEventListeners",value:function(){var t=this;this.events.on(Ge,(function(e){var r=Ge;t.logger.info("Emitting ".concat(r)),t.logger.debug({type:"event",event:r,record:e})})),this.events.on(Ve,(function(e){var r=Ve;t.logger.info("Emitting ".concat(r)),t.logger.debug({type:"event",event:r,record:e})})),this.events.on(Ye,(function(e){var r=Ye;t.logger.info("Emitting ".concat(r)),t.logger.debug({type:"event",event:r,record:e})})),this.core.heartbeat.on(f.a.pulse,(function(){t.cleanup()}))}},{key:"cleanup",value:function(){var t=this;try{this.isInitialized();var e=!1;this.records.forEach((function(r){Object(w.toMiliseconds)(r.expiry||0)-Date.now()<=0&&(t.logger.info("Deleting expired history log: ".concat(r.id)),t.records.delete(r.id),t.events.emit(Ye,r,!1),e=!0)})),e&&this.persist()}catch(t){this.logger.warn(t)}}},{key:"isInitialized",value:function(){if(!this.initialized){var t=Object(y.B)("NOT_INITIALIZED",this.name).message;throw new Error(t)}}}]);var r,o,c,h}(h.e),Tr=function(t){function e(t,r){var o;return V(this,e),(o=j(this,e,[t,r])).core=t,o.logger=r,o.expirations=new Map,o.events=new n.EventEmitter,o.name="expirer",o.version="0.3",o.cached=[],o.initialized=!1,o.storagePrefix=ke,o.init=U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=o.initialized,t.t0){t.next=9;break}return o.logger.trace("Initialized"),t.next=5,o.restore();case 5:o.cached.forEach((function(i){return o.expirations.set(i.target,i)})),o.cached=[],o.registerEventListeners(),o.initialized=!0;case 9:case"end":return t.stop()}}),t)}))),o.has=function(i){try{var s=o.formatTarget(i);return G(o.getExpiration(s))<"u"}catch(t){return!1}},o.set=function(i,s){o.isInitialized();var t=o.formatTarget(i),e={target:t,expiry:s};o.expirations.set(t,e),o.checkExpiry(t,e),o.events.emit(We.created,{target:t,expiration:e})},o.get=function(i){o.isInitialized();var s=o.formatTarget(i);return o.getExpiration(s)},o.del=function(i){if(o.isInitialized(),o.has(i)){var s=o.formatTarget(i),t=o.getExpiration(s);o.expirations.delete(s),o.events.emit(We.deleted,{target:s,expiration:t})}},o.on=function(i,s){o.events.on(i,s)},o.once=function(i,s){o.events.once(i,s)},o.off=function(i,s){o.events.off(i,s)},o.removeListener=function(i,s){o.events.removeListener(i,s)},o.logger=Object(l.a)(r,o.name),o}return N(e,t),J(e,[{key:"context",get:function(){return Object(l.d)(this.logger)}},{key:"storageKey",get:function(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}},{key:"length",get:function(){return this.expirations.size}},{key:"keys",get:function(){return Array.from(this.expirations.keys())}},{key:"values",get:function(){return Array.from(this.expirations.values())}},{key:"formatTarget",value:function(t){if("string"==typeof t)return Object(y.r)(t);if("number"==typeof t)return Object(y.o)(t);var e=Object(y.B)("UNKNOWN_TYPE","Target type: ".concat(G(t))).message;throw new Error(e)}},{key:"setExpirations",value:(h=U(L().mark((function t(e){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.core.storage.setItem(this.storageKey,e);case 2:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"getExpirations",value:(c=U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.core.storage.getItem(this.storageKey);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"persist",value:(o=U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.setExpirations(this.values);case 2:this.events.emit(We.sync);case 3:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"restore",value:(r=U(L().mark((function t(){var e,r,n;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getExpirations();case 3:if(!(G(e=t.sent)>"u")&&e.length){t.next=6;break}return t.abrupt("return");case 6:if(!this.expirations.size){t.next=9;break}throw r=Object(y.B)("RESTORE_WILL_OVERRIDE",this.name),n=r.message,this.logger.error(n),new Error(n);case 9:this.cached=e,this.logger.debug("Successfully Restored expirations for ".concat(this.name)),this.logger.trace({type:"method",method:"restore",expirations:this.values}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),this.logger.debug("Failed to Restore expirations for ".concat(this.name)),this.logger.error(t.t0);case 15:case"end":return t.stop()}}),t,this,[[0,12]])}))),function(){return r.apply(this,arguments)})},{key:"getExpiration",value:function(t){var e=this.expirations.get(t);if(!e){var i=Object(y.B)("NO_MATCHING_KEY","".concat(this.name,": ").concat(t)).message;throw this.logger.warn(i),new Error(i)}return e}},{key:"checkExpiry",value:function(t,e){var i=e.expiry;Object(w.toMiliseconds)(i)-Date.now()<=0&&this.expire(t,e)}},{key:"expire",value:function(t,e){this.expirations.delete(t),this.events.emit(We.expired,{target:t,expiration:e})}},{key:"checkExpirations",value:function(){var t=this;this.core.relayer.connected&&this.expirations.forEach((function(e,r){return t.checkExpiry(r,e)}))}},{key:"registerEventListeners",value:function(){var t=this;this.core.heartbeat.on(f.a.pulse,(function(){return t.checkExpirations()})),this.events.on(We.created,(function(e){var r=We.created;t.logger.info("Emitting ".concat(r)),t.logger.debug({type:"event",event:r,data:e}),t.persist()})),this.events.on(We.expired,(function(e){var r=We.expired;t.logger.info("Emitting ".concat(r)),t.logger.debug({type:"event",event:r,data:e}),t.persist()})),this.events.on(We.deleted,(function(e){var r=We.deleted;t.logger.info("Emitting ".concat(r)),t.logger.debug({type:"event",event:r,data:e}),t.persist()}))}},{key:"isInitialized",value:function(){if(!this.initialized){var t=Object(y.B)("NOT_INITIALIZED",this.name).message;throw new Error(t)}}}]);var r,o,c,h}(h.d),Lr=function(e){function r(e,n){var o;return V(this,r),(o=j(this,r,[e,n])).projectId=e,o.logger=n,o.name=Qe,o.initialized=!1,o.queue=[],o.verifyDisabled=!1,o.init=function(){var t=U(L().mark((function t(i){var s;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o.verifyDisabled&&!Object(y.S)()&&Object(y.L)()){t.next=2;break}return t.abrupt("return");case 2:return s=o.getVerifyUrl(null==i?void 0:i.verifyUrl),o.verifyUrl!==s&&o.removeIframe(),o.verifyUrl=s,t.prev=4,t.next=7,o.createIframe();case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(4),o.logger.info("Verify iframe failed to load: ".concat(o.verifyUrl)),o.logger.info(t.t0),o.verifyDisabled=!0;case 12:case"end":return t.stop()}}),t,null,[[4,9]])})));return function(e){return t.apply(this,arguments)}}(),o.register=function(){var t=U(L().mark((function t(i){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o.initialized){t.next=4;break}o.sendPost(i.attestationId),t.next=7;break;case 4:return o.addToQueue(i.attestationId),t.next=7,o.init();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.resolve=function(){var t=U(L().mark((function t(i){var s;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o.isDevEnv){t.next=2;break}return t.abrupt("return","");case 2:return s=o.getVerifyUrl(null==i?void 0:i.verifyUrl),t.abrupt("return",o.fetchAttestation(i.attestationId,s));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o.fetchAttestation=function(){var t=U(L().mark((function t(i,s){var e,r;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.logger.info("resolving attestation: ".concat(i," from url: ").concat(s)),e=o.startAbortTimer(5*w.ONE_SECOND),t.next=4,fetch("".concat(s,"/attestation/").concat(i),{signal:o.abortController.signal});case 4:if(r=t.sent,clearTimeout(e),200!==r.status){t.next=12;break}return t.next=9,r.json();case 9:t.t0=t.sent,t.next=13;break;case 12:t.t0=void 0;case 13:return t.abrupt("return",t.t0);case 14:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),o.addToQueue=function(i){o.queue.push(i)},o.processQueue=function(){0!==o.queue.length&&(o.queue.forEach((function(i){return o.sendPost(i)})),o.queue=[])},o.sendPost=function(i){var s;try{if(!o.iframe)return;null==(s=o.iframe.contentWindow)||s.postMessage(i,"*"),o.logger.info("postMessage sent: ".concat(i," ").concat(o.verifyUrl))}catch(t){}},o.createIframe=U(L().mark((function t(){var i,e;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=function(t){"verify_ready"===t.data&&(o.onInit(),window.removeEventListener("message",e),i())},t.next=3,Promise.race([new Promise((function(t){var r=document.getElementById(Qe);if(r)return o.iframe=r,o.onInit(),t();window.addEventListener("message",e);var a=document.createElement("iframe");a.id=Qe,a.src="".concat(o.verifyUrl,"/").concat(o.projectId),a.style.display="none",document.body.append(a),o.iframe=a,i=t})),new Promise((function(t,r){return setTimeout((function(){window.removeEventListener("message",e),r("verify iframe load timeout")}),Object(w.toMiliseconds)(w.FIVE_SECONDS))}))]);case 3:case"end":return t.stop()}}),t)}))),o.onInit=function(){o.initialized=!0,o.processQueue()},o.removeIframe=function(){o.iframe&&(o.iframe.remove(),o.iframe=void 0,o.initialized=!1)},o.getVerifyUrl=function(i){var s=i||Ze;return $e.includes(s)||(o.logger.info("verify url: ".concat(s,", not included in trusted list, assigning default: ").concat(Ze)),s=Ze),s},o.logger=Object(l.a)(n,o.name),o.verifyUrl=Ze,o.abortController=new AbortController,o.isDevEnv=Object(y.P)()&&t.env.IS_VITEST,o}return N(r,e),J(r,[{key:"context",get:function(){return Object(l.d)(this.logger)}},{key:"startAbortTimer",value:function(t){var e=this;return this.abortController=new AbortController,setTimeout((function(){return e.abortController.abort()}),Object(w.toMiliseconds)(t))}}])}(h.l),Cr=function(t){function e(t,r){var n;return V(this,e),(n=j(this,e,[t,r])).projectId=t,n.logger=r,n.context="echo",n.registerDeviceToken=function(){var t=U(L().mark((function t(i){var s,e,r,o,a,c;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=i.clientId,e=i.token,r=i.notificationType,o=i.enableEncrypted,a=void 0!==o&&o,c="".concat("https://echo.walletconnect.com","/").concat(n.projectId,"/clients"),t.next=3,S()(c,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:r,token:e,always_raw:a})});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),n.logger=Object(l.a)(r,n.context),n}return N(e,t),J(e)}(h.b),Ur=Object.defineProperty,Br=Object.getOwnPropertySymbols,Dr=Object.prototype.hasOwnProperty,qr=Object.prototype.propertyIsEnumerable,zr=function(t,e,r){return e in t?Ur(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},Fr=function(t,e){for(var r in e||(e={}))Dr.call(e,r)&&zr(t,r,e[r]);if(Br){var n,o=B(Br(e));try{for(o.s();!(n=o.n()).done;){r=n.value;qr.call(e,r)&&zr(t,r,e[r])}}catch(t){o.e(t)}finally{o.f()}}return t},Hr=function(t){function e(t){var r,o;V(this,e),(r=j(this,e,[t])).protocol="wc",r.version=2,r.name=Ae,r.events=new n.EventEmitter,r.initialized=!1,r.on=function(t,a){return r.events.on(t,a)},r.once=function(t,a){return r.events.once(t,a)},r.off=function(t,a){return r.events.off(t,a)},r.removeListener=function(t,a){return r.events.removeListener(t,a)},r.projectId=null==t?void 0:t.projectId,r.relayUrl=(null==t?void 0:t.relayUrl)||Ne,r.customStoragePrefix=null!=t&&t.customStoragePrefix?":".concat(t.customStoragePrefix):"";var i=Object(l.c)({level:"string"==typeof(null==t?void 0:t.logger)&&t.logger?t.logger:Se}),h=Object(l.b)({opts:i,maxSizeInBytes:null==t?void 0:t.maxLogBlobSizeInBytes,loggerOverride:null==t?void 0:t.logger}),s=h.logger,d=h.chunkLoggerController;return r.logChunkController=d,null!=(o=r.logChunkController)&&o.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=U(L().mark((function t(){var e,a;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null!=(e=r.logChunkController)&&e.downloadLogsBlobInBrowser,!t.t0){t.next=10;break}if(t.t1=null==(a=r.logChunkController),t.t1){t.next=10;break}return t.t2=a,t.next=7,r.crypto.getClientId();case 7:t.t3=t.sent,t.t4={clientId:t.t3},t.t2.downloadLogsBlobInBrowser.call(t.t2,t.t4);case 10:case"end":return t.stop()}}),t)})))),r.logger=Object(l.a)(s,r.name),r.heartbeat=new f.b,r.crypto=new rr(r,r.logger,null==t?void 0:t.keychain),r.history=new Nr(r,r.logger),r.expirer=new Tr(r,r.logger),r.storage=null!=t&&t.storage?t.storage:new c.a(Fr(Fr({},Ie),null==t?void 0:t.storageOptions)),r.relayer=new Or({core:r,logger:r.logger,relayUrl:r.relayUrl,projectId:r.projectId}),r.pairing=new Rr(r,r.logger),r.verify=new Lr(r.projectId||"",r.logger),r.echoClient=new Cr(r.projectId||"",r.logger),r}return N(e,t),J(e,[{key:"context",get:function(){return Object(l.d)(this.logger)}},{key:"start",value:(d=U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.initialized,t.t0){t.next=4;break}return t.next=4,this.initialize();case 4:case"end":return t.stop()}}),t,this)}))),function(){return d.apply(this,arguments)})},{key:"getLogsBlob",value:(h=U(L().mark((function t(){var e;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(e=this.logChunkController)){t.next=4;break}t.t0=void 0,t.next=10;break;case 4:return t.t1=e,t.next=7,this.crypto.getClientId();case 7:t.t2=t.sent,t.t3={clientId:t.t2},t.t0=t.t1.logsToBlob.call(t.t1,t.t3);case 10:return t.abrupt("return",t.t0);case 11:case"end":return t.stop()}}),t,this)}))),function(){return h.apply(this,arguments)})},{key:"initialize",value:(o=U(L().mark((function t(){return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.logger.trace("Initialized"),t.prev=1,t.next=4,this.crypto.init();case 4:return t.next=6,this.history.init();case 6:return t.next=8,this.expirer.init();case 8:return t.next=10,this.relayer.init();case 10:return t.next=12,this.heartbeat.init();case 12:return t.next=14,this.pairing.init();case 14:this.initialized=!0,this.logger.info("Core Initialization Success"),t.next=21;break;case 18:throw t.prev=18,t.t0=t.catch(1),this.logger.warn("Core Initialization Failure at epoch ".concat(Date.now()),t.t0),this.logger.error(t.t0.message),t.t0;case 21:case"end":return t.stop()}}),t,this,[[1,18]])}))),function(){return o.apply(this,arguments)})}],[{key:"init",value:(r=U(L().mark((function t(r){var n,i;return L().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new e(r),t.next=3,n.initialize();case 3:return t.next=5,n.crypto.getClientId();case 5:return i=t.sent,t.next=8,n.storage.setItem("WALLETCONNECT_CLIENT_ID",i);case 8:return t.abrupt("return",n);case 9:case"end":return t.stop()}}),t)}))),function(t){return r.apply(this,arguments)})}]);var r,o,h,d}(h.a),Kr=Hr}).call(this,r(164))},function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return j}));var n=r(550),o=r(503),c=r(342);function f(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,d(n.key),n)}}function h(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(t){var i=function(t,e){if("object"!=y(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=y(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==y(i)?i:i+""}function v(){v=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof x?e:x,a=Object.create(i.prototype),c=new N(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",m="suspendedYield",w="executing",s="completed",_={};function x(){}function E(){}function O(){}var p={};f(p,a,(function(){return this}));var A=Object.getPrototypeOf,k=A&&A(A(T([])));k&&k!==r&&n.call(k,a)&&(p=k);var g=O.prototype=x.prototype=Object.create(p);function S(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function r(o,c,i,a){var f=h(t[o],t,c);if("throw"!==f.type){var u=f.arg,l=u.value;return l&&"object"==y(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,a)}),(function(t){r("throw",t,i,a)})):e.resolve(l).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,a)}))}a(f.arg)}var c;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return c=c?c.then(o,o):o()}})}function j(e,r,n){var o=d;return function(i,a){if(o===w)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===_)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=w;var p=h(e,r,n);if("normal"===p.type){if(o=n.done?s:m,p.arg===_)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,_;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,_):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(y(e)+" is not iterable")}return E.prototype=O,o(g,"constructor",{value:O,configurable:!0}),o(O,"constructor",{value:E,configurable:!0}),E.displayName=f(O,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,O):(t.__proto__=O,f(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},S(I.prototype),f(I.prototype,c,(function(){return this})),e.AsyncIterator=I,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new I(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(g),f(g,u,"Generator"),f(g,a,(function(){return this})),f(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var c=this.tryEntries.length-1;c>=0;--c){var i=this.tryEntries[c],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var f=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(f&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(f){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),_}},e}function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function m(t,e,r,n,o,a,c){try{var i=t[a](c),u=i.value}catch(t){return void r(t)}i.done?e(u):Promise.resolve(u).then(n,o)}function w(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){m(a,n,o,c,f,"next",t)}function f(t){m(a,n,o,c,f,"throw",t)}c(void 0)}))}}var _=function(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=i.base&&i.base.length>0?"".concat(i.base,":"):"",r=function(s){return e+s};return i.dbName&&i.storeName&&(t=Object(o.b)(i.dbName,i.storeName)),{name:"idb-keyval",options:i,hasItem:function(s){return w(v().mark((function e(){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=y,e.next=3,Object(o.d)(r(s),t);case 3:return e.t1=e.sent,e.t2=(0,e.t0)(e.t1),e.abrupt("return",!(e.t2>"u"));case 6:case"end":return e.stop()}}),e)})))()},getItem:function(s){return w(v().mark((function e(){var n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.d)(r(s),t);case 2:if(e.t1=n=e.sent,e.t0=null!==e.t1,!e.t0){e.next=6;break}e.t0=void 0!==n;case 6:if(!e.t0){e.next=10;break}e.t2=n,e.next=11;break;case 10:e.t2=null;case 11:return e.abrupt("return",e.t2);case 12:case"end":return e.stop()}}),e)})))()},setItem:function(s,a){return Object(o.f)(r(s),a,t)},removeItem:function(s){return Object(o.c)(r(s),t)},getKeys:function(){return Object(o.e)(t)},clear:function(){return Object(o.a)(t)}}},x=function(){return h((function t(){f(this,t),this.indexedDb=Object(n.a)({driver:_({dbName:"WALLET_CONNECT_V2_INDEXED_DB",storeName:"keyvaluestorage"})})}),[{key:"getKeys",value:(l=w(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.indexedDb.getKeys());case 1:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"getEntries",value:(o=w(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this.indexedDb,t.next=3,this.indexedDb.getKeys();case 3:return t.t1=t.sent,t.next=6,t.t0.getItems.call(t.t0,t.t1);case 6:return t.abrupt("return",t.sent.map((function(t){return[t.key,t.value]})));case 7:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"getItem",value:(r=w(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.indexedDb.getItem(e);case 2:if(null===(r=t.sent)){t.next=5;break}return t.abrupt("return",r);case 5:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"setItem",value:(e=w(v().mark((function t(e,r){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.indexedDb.setItem(e,Object(c.b)(r));case 2:case"end":return t.stop()}}),t,this)}))),function(t,r){return e.apply(this,arguments)})},{key:"removeItem",value:(t=w(v().mark((function t(e){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.indexedDb.removeItem(e);case 2:case"end":return t.stop()}}),t,this)}))),function(e){return t.apply(this,arguments)})}]);var t,e,r,o,l}(),E=("undefined"==typeof globalThis?"undefined":y(globalThis))<"u"?globalThis:("undefined"==typeof window?"undefined":y(window))<"u"?window:(void 0===t?"undefined":y(t))<"u"?t:("undefined"==typeof self?"undefined":y(self))<"u"?self:{},O={exports:{}};function A(i){var t;return[i[0],Object(c.a)(null!=(t=i[1])?t:"")]}!function(){var i;function t(){}(i=t).prototype.getItem=function(t){return this.hasOwnProperty(t)?String(this[t]):null},i.prototype.setItem=function(t,e){this[t]=String(e)},i.prototype.removeItem=function(t){delete this[t]},i.prototype.clear=function(){var t=this;Object.keys(t).forEach((function(e){t[e]=void 0,delete t[e]}))},i.prototype.key=function(t){return t=t||0,Object.keys(this)[t]},i.prototype.__defineGetter__("length",(function(){return Object.keys(this).length})),y(E)<"u"&&E.localStorage?O.exports=E.localStorage:("undefined"==typeof window?"undefined":y(window))<"u"&&window.localStorage?O.exports=window.localStorage:O.exports=new t}();var k=function(){return h((function t(){f(this,t),this.localStorage=O.exports}),[{key:"getKeys",value:(o=w(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object.keys(this.localStorage));case 1:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"getEntries",value:(n=w(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object.entries(this.localStorage).map(A));case 1:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)})},{key:"getItem",value:(r=w(v().mark((function t(e){var r;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(r=this.localStorage.getItem(e))){t.next=3;break}return t.abrupt("return",Object(c.a)(r));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return r.apply(this,arguments)})},{key:"setItem",value:(e=w(v().mark((function t(e,r){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.localStorage.setItem(e,Object(c.b)(r));case 1:case"end":return t.stop()}}),t,this)}))),function(t,r){return e.apply(this,arguments)})},{key:"removeItem",value:(t=w(v().mark((function t(e){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.localStorage.removeItem(e);case 1:case"end":return t.stop()}}),t,this)}))),function(e){return t.apply(this,arguments)})}]);var t,e,r,n,o}(),S=function(){var t=w(v().mark((function t(i,e,r){var n,s,a,o,c,f,l;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="wc_storage_version",t.next=3,e.getItem(n);case 3:if(!((s=t.sent)&&s>=1)){t.next=7;break}return r(e),t.abrupt("return");case 7:return t.next=9,i.getKeys();case 9:if((a=t.sent).length){t.next=13;break}return r(e),t.abrupt("return");case 13:o=[];case 14:if(!a.length){t.next=28;break}if(c=a.shift()){t.next=18;break}return t.abrupt("continue",26);case 18:if(!((f=c.toLowerCase()).includes("wc@")||f.includes("walletconnect")||f.includes("wc_")||f.includes("wallet_connect"))){t.next=26;break}return t.next=22,i.getItem(c);case 22:return l=t.sent,t.next=25,e.setItem(c,l);case 25:o.push(c);case 26:t.next=14;break;case 28:return t.next=30,e.setItem(n,1);case 30:r(e),I(i,o);case 32:case"end":return t.stop()}}),t)})));return function(e,r,n){return t.apply(this,arguments)}}(),I=function(){var t=w(v().mark((function t(i,e){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.length&&e.forEach(function(){var t=w(v().mark((function t(e){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.removeItem(e);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),j=function(){return h((function t(){var e=this;f(this,t),this.initialized=!1,this.setInitialized=function(t){e.storage=t,e.initialized=!0};var r=new k;this.storage=r;try{var n=new x;S(r,n,this.setInitialized)}catch(t){this.initialized=!0}}),[{key:"getKeys",value:(c=w(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initialize();case 2:return t.abrupt("return",this.storage.getKeys());case 3:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"getEntries",value:(o=w(v().mark((function t(){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initialize();case 2:return t.abrupt("return",this.storage.getEntries());case 3:case"end":return t.stop()}}),t,this)}))),function(){return o.apply(this,arguments)})},{key:"getItem",value:(n=w(v().mark((function t(e){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initialize();case 2:return t.abrupt("return",this.storage.getItem(e));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return n.apply(this,arguments)})},{key:"setItem",value:(r=w(v().mark((function t(e,r){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initialize();case 2:return t.abrupt("return",this.storage.setItem(e,r));case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return r.apply(this,arguments)})},{key:"removeItem",value:(e=w(v().mark((function t(e){return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initialize();case 2:return t.abrupt("return",this.storage.removeItem(e));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return e.apply(this,arguments)})},{key:"initialize",value:(t=w(v().mark((function t(){var e=this;return v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=this.initialized,t.t0){t.next=4;break}return t.next=4,new Promise((function(t){var r=setInterval((function(){e.initialized&&(clearInterval(r),t())}),20)}));case 4:case"end":return t.stop()}}),t,this)}))),function(){return t.apply(this,arguments)})}]);var t,e,r,n,o,c}()}).call(this,r(31))},function(t,e,r){"use strict";function n(t){return new Promise((function(e,r){t.oncomplete=t.onsuccess=function(){return e(t.result)},t.onabort=t.onerror=function(){return r(t.error)}}))}function o(t,e){var r=indexedDB.open(t);r.onupgradeneeded=function(){return r.result.createObjectStore(e)};var o=n(r);return function(t,r){return o.then((function(n){return r(n.transaction(e,t).objectStore(e))}))}}var c;function f(){return c||(c=o("keyval-store","keyval")),c}function l(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:f())("readonly",(function(e){return n(e.get(t))}))}function h(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:f())("readwrite",(function(r){return r.put(e,t),n(r.transaction)}))}function del(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:f())("readwrite",(function(e){return e.delete(t),n(e.transaction)}))}function d(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:f())("readwrite",(function(t){return t.clear(),n(t.transaction)}))}function v(t,e){return t.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},n(t.transaction)}function y(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:f())("readonly",(function(t){if(t.getAllKeys)return n(t.getAllKeys());var e=[];return v(t,(function(cursor){return e.push(cursor.key)})).then((function(){return e}))}))}r.d(e,"a",(function(){return d})),r.d(e,"b",(function(){return o})),r.d(e,"c",(function(){return del})),r.d(e,"d",(function(){return l})),r.d(e,"e",(function(){return y})),r.d(e,"f",(function(){return h}))},function(t,e,r){const{destr:n,safeDestr:o}=r(505);n.destr=n,n.safeDestr=o,t.exports=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,o=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,c=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function f(t,e){if(!("__proto__"===t||"constructor"===t&&e&&"object"==typeof e&&"prototype"in e))return e;!function(t){console.warn(`[destr] Dropping "${t}" key to prevent prototype pollution.`)}(t)}function l(t,e={}){if("string"!=typeof t)return t;const r=t.trim();if('"'===t[0]&&t.endsWith('"')&&!t.includes("\\"))return r.slice(1,-1);if(r.length<=9){const t=r.toLowerCase();if("true"===t)return!0;if("false"===t)return!1;if("undefined"===t)return;if("null"===t)return null;if("nan"===t)return Number.NaN;if("infinity"===t)return Number.POSITIVE_INFINITY;if("-infinity"===t)return Number.NEGATIVE_INFINITY}if(!c.test(t)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return t}try{if(n.test(t)||o.test(t)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(t,f)}return JSON.parse(t)}catch(r){if(e.strict)throw r;return t}}e.default=l,e.destr=l,e.safeDestr=function(t,e={}){return l(t,{...e,strict:!0})}},function(t,e,r){"use strict";r.d(e,"a",(function(){return k})),r.d(e,"b",(function(){return i}));var n=r(333),o=r(353);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function f(){f=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function h(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,r){return t[e]=r}}function d(t,e,r,n){var i=e&&e.prototype instanceof x?e:x,a=Object.create(i.prototype),c=new N(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function v(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var y="suspendedStart",m="suspendedYield",w="executing",s="completed",_={};function x(){}function E(){}function O(){}var p={};h(p,a,(function(){return this}));var A=Object.getPrototypeOf,k=A&&A(A(T([])));k&&k!==r&&n.call(k,a)&&(p=k);var g=O.prototype=x.prototype=Object.create(p);function S(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function r(o,f,i,a){var l=v(t[o],t,f);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==c(h)&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,i,a)}),(function(t){r("throw",t,i,a)})):e.resolve(h).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,a)}))}a(l.arg)}var f;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return f=f?f.then(o,o):o()}})}function j(e,r,n){var o=y;return function(i,a){if(o===w)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===_)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===y)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=w;var p=v(e,r,n);if("normal"===p.type){if(o=n.done?s:m,p.arg===_)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var i=v(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,_;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,_):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(c(e)+" is not iterable")}return E.prototype=O,o(g,"constructor",{value:O,configurable:!0}),o(O,"constructor",{value:E,configurable:!0}),E.displayName=h(O,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,O):(t.__proto__=O,h(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},S(I.prototype),h(I.prototype,l,(function(){return this})),e.AsyncIterator=I,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new I(d(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(g),h(g,u,"Generator"),h(g,a,(function(){return this})),h(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var c=this.tryEntries.length-1;c>=0;--c){var i=this.tryEntries[c],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var f=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(f&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(f){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),_}},e}function l(t,e,r,n,o,a,c){try{var i=t[a](c),u=i.value}catch(t){return void r(t)}i.done?e(u):Promise.resolve(u).then(n,o)}function h(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){l(a,n,o,c,f,"next",t)}function f(t){l(a,n,o,c,f,"throw",t)}c(void 0)}))}}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,y(n.key),n)}}function v(t,e,r){return e&&d(t.prototype,e),r&&d(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t){var i=function(t,e){if("object"!=c(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=c(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==c(i)?i:i+""}function m(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}function w(t,e,r){return e=x(e),function(t,e){if(e&&("object"==c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,_()?Reflect.construct(e,r||[],x(t).constructor):e.apply(t,r))}function _(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_=function(){return!!t})()}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}function E(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O(t,e)}function O(t,e){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},O(t,e)}var A=function(t){function e(t){return m(this,e),w(this,e)}return E(e,t),v(e)}(r(429).a),s=o.FIVE_SECONDS,k={pulse:"heartbeat_pulse"},i=function(t){function i(t){var e;return m(this,i),(e=w(this,i,[t])).events=new n.EventEmitter,e.interval=s,e.interval=(null==t?void 0:t.interval)||s,e}return E(i,t),v(i,[{key:"init",value:(c=h(f().mark((function t(){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.initialize();case 2:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"stop",value:function(){clearInterval(this.intervalRef)}},{key:"on",value:function(t,e){this.events.on(t,e)}},{key:"once",value:function(t,e){this.events.once(t,e)}},{key:"off",value:function(t,e){this.events.off(t,e)}},{key:"removeListener",value:function(t,e){this.events.removeListener(t,e)}},{key:"initialize",value:(r=h(f().mark((function t(){var e=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.intervalRef=setInterval((function(){return e.pulse()}),Object(o.toMiliseconds)(this.interval));case 1:case"end":return t.stop()}}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"pulse",value:function(){this.events.emit(k.pulse)}}],[{key:"init",value:(e=h(f().mark((function t(e){var r;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new i(e),t.next=3,r.init();case 3:return t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)}))),function(t){return e.apply(this,arguments)})}]);var e,r,c}(A)},function(t,e,r){"use strict";var n=r(408);r.d(e,"generateKeyPair",(function(){return n.a})),r.d(e,"signJWT",(function(){return n.b}));r(362);var o=r(411);r.o(o,"encodeIss")&&r.d(e,"encodeIss",(function(){return o.encodeIss}));var c=r(382);r.d(e,"encodeIss",(function(){return c.d}))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.convertSecretKeyToX25519=e.convertPublicKeyToX25519=e.verify=e.sign=e.extractPublicKeyFromSecretKey=e.generateKeyPair=e.generateKeyPairFromSeed=e.SEED_LENGTH=e.SECRET_KEY_LENGTH=e.PUBLIC_KEY_LENGTH=e.SIGNATURE_LENGTH=void 0;const n=r(360),o=r(509),c=r(326);function f(t){const e=new Float64Array(16);if(t)for(let i=0;i<t.length;i++)e[i]=t[i];return e}e.SIGNATURE_LENGTH=64,e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=64,e.SEED_LENGTH=32;new Uint8Array(32)[0]=9;const l=f(),h=f([1]),d=f([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),v=f([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),y=f([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),m=f([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),w=f([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function _(t,a){for(let i=0;i<16;i++)t[i]=0|a[i]}function x(t){let e=1;for(let i=0;i<16;i++){let r=t[i]+e+65535;e=Math.floor(r/65536),t[i]=r-65536*e}t[0]+=e-1+37*(e-1)}function E(p,q,b){const t=~(b-1);for(let i=0;i<16;i++){const e=t&(p[i]^q[i]);p[i]^=e,q[i]^=e}}function O(t,e){const r=f(),n=f();for(let i=0;i<16;i++)n[i]=e[i];x(n),x(n),x(n);for(let t=0;t<2;t++){r[0]=n[0]-65517;for(let i=1;i<15;i++)r[i]=n[i]-65535-(r[i-1]>>16&1),r[i-1]&=65535;r[15]=n[15]-32767-(r[14]>>16&1);const b=r[15]>>16&1;r[14]&=65535,E(n,r,1-b)}for(let i=0;i<16;i++)t[2*i]=255&n[i],t[2*i+1]=n[i]>>8}function A(t,e){let r=0;for(let i=0;i<32;i++)r|=t[i]^e[i];return(1&r-1>>>8)-1}function k(a,b){const t=new Uint8Array(32),e=new Uint8Array(32);return O(t,a),O(e,b),A(t,e)}function S(a){const t=new Uint8Array(32);return O(t,a),1&t[0]}function I(t,a,b){for(let i=0;i<16;i++)t[i]=a[i]+b[i]}function sub(t,a,b){for(let i=0;i<16;i++)t[i]=a[i]-b[i]}function j(t,a,b){let e,r,n=0,o=0,c=0,f=0,l=0,h=0,d=0,v=0,y=0,m=0,w=0,_=0,x=0,E=0,O=0,A=0,k=0,S=0,I=0,j=0,P=0,M=0,R=0,N=0,T=0,L=0,C=0,U=0,B=0,D=0,z=0,F=b[0],H=b[1],K=b[2],G=b[3],V=b[4],Y=b[5],J=b[6],W=b[7],Q=b[8],X=b[9],Z=b[10],$=b[11],tt=b[12],et=b[13],nt=b[14],it=b[15];e=a[0],n+=e*F,o+=e*H,c+=e*K,f+=e*G,l+=e*V,h+=e*Y,d+=e*J,v+=e*W,y+=e*Q,m+=e*X,w+=e*Z,_+=e*$,x+=e*tt,E+=e*et,O+=e*nt,A+=e*it,e=a[1],o+=e*F,c+=e*H,f+=e*K,l+=e*G,h+=e*V,d+=e*Y,v+=e*J,y+=e*W,m+=e*Q,w+=e*X,_+=e*Z,x+=e*$,E+=e*tt,O+=e*et,A+=e*nt,k+=e*it,e=a[2],c+=e*F,f+=e*H,l+=e*K,h+=e*G,d+=e*V,v+=e*Y,y+=e*J,m+=e*W,w+=e*Q,_+=e*X,x+=e*Z,E+=e*$,O+=e*tt,A+=e*et,k+=e*nt,S+=e*it,e=a[3],f+=e*F,l+=e*H,h+=e*K,d+=e*G,v+=e*V,y+=e*Y,m+=e*J,w+=e*W,_+=e*Q,x+=e*X,E+=e*Z,O+=e*$,A+=e*tt,k+=e*et,S+=e*nt,I+=e*it,e=a[4],l+=e*F,h+=e*H,d+=e*K,v+=e*G,y+=e*V,m+=e*Y,w+=e*J,_+=e*W,x+=e*Q,E+=e*X,O+=e*Z,A+=e*$,k+=e*tt,S+=e*et,I+=e*nt,j+=e*it,e=a[5],h+=e*F,d+=e*H,v+=e*K,y+=e*G,m+=e*V,w+=e*Y,_+=e*J,x+=e*W,E+=e*Q,O+=e*X,A+=e*Z,k+=e*$,S+=e*tt,I+=e*et,j+=e*nt,P+=e*it,e=a[6],d+=e*F,v+=e*H,y+=e*K,m+=e*G,w+=e*V,_+=e*Y,x+=e*J,E+=e*W,O+=e*Q,A+=e*X,k+=e*Z,S+=e*$,I+=e*tt,j+=e*et,P+=e*nt,M+=e*it,e=a[7],v+=e*F,y+=e*H,m+=e*K,w+=e*G,_+=e*V,x+=e*Y,E+=e*J,O+=e*W,A+=e*Q,k+=e*X,S+=e*Z,I+=e*$,j+=e*tt,P+=e*et,M+=e*nt,R+=e*it,e=a[8],y+=e*F,m+=e*H,w+=e*K,_+=e*G,x+=e*V,E+=e*Y,O+=e*J,A+=e*W,k+=e*Q,S+=e*X,I+=e*Z,j+=e*$,P+=e*tt,M+=e*et,R+=e*nt,N+=e*it,e=a[9],m+=e*F,w+=e*H,_+=e*K,x+=e*G,E+=e*V,O+=e*Y,A+=e*J,k+=e*W,S+=e*Q,I+=e*X,j+=e*Z,P+=e*$,M+=e*tt,R+=e*et,N+=e*nt,T+=e*it,e=a[10],w+=e*F,_+=e*H,x+=e*K,E+=e*G,O+=e*V,A+=e*Y,k+=e*J,S+=e*W,I+=e*Q,j+=e*X,P+=e*Z,M+=e*$,R+=e*tt,N+=e*et,T+=e*nt,L+=e*it,e=a[11],_+=e*F,x+=e*H,E+=e*K,O+=e*G,A+=e*V,k+=e*Y,S+=e*J,I+=e*W,j+=e*Q,P+=e*X,M+=e*Z,R+=e*$,N+=e*tt,T+=e*et,L+=e*nt,C+=e*it,e=a[12],x+=e*F,E+=e*H,O+=e*K,A+=e*G,k+=e*V,S+=e*Y,I+=e*J,j+=e*W,P+=e*Q,M+=e*X,R+=e*Z,N+=e*$,T+=e*tt,L+=e*et,C+=e*nt,U+=e*it,e=a[13],E+=e*F,O+=e*H,A+=e*K,k+=e*G,S+=e*V,I+=e*Y,j+=e*J,P+=e*W,M+=e*Q,R+=e*X,N+=e*Z,T+=e*$,L+=e*tt,C+=e*et,U+=e*nt,B+=e*it,e=a[14],O+=e*F,A+=e*H,k+=e*K,S+=e*G,I+=e*V,j+=e*Y,P+=e*J,M+=e*W,R+=e*Q,N+=e*X,T+=e*Z,L+=e*$,C+=e*tt,U+=e*et,B+=e*nt,D+=e*it,e=a[15],A+=e*F,k+=e*H,S+=e*K,I+=e*G,j+=e*V,P+=e*Y,M+=e*J,R+=e*W,N+=e*Q,T+=e*X,L+=e*Z,C+=e*$,U+=e*tt,B+=e*et,D+=e*nt,z+=e*it,n+=38*k,o+=38*S,c+=38*I,f+=38*j,l+=38*P,h+=38*M,d+=38*R,v+=38*N,y+=38*T,m+=38*L,w+=38*C,_+=38*U,x+=38*B,E+=38*D,O+=38*z,r=1,e=n+r+65535,r=Math.floor(e/65536),n=e-65536*r,e=o+r+65535,r=Math.floor(e/65536),o=e-65536*r,e=c+r+65535,r=Math.floor(e/65536),c=e-65536*r,e=f+r+65535,r=Math.floor(e/65536),f=e-65536*r,e=l+r+65535,r=Math.floor(e/65536),l=e-65536*r,e=h+r+65535,r=Math.floor(e/65536),h=e-65536*r,e=d+r+65535,r=Math.floor(e/65536),d=e-65536*r,e=v+r+65535,r=Math.floor(e/65536),v=e-65536*r,e=y+r+65535,r=Math.floor(e/65536),y=e-65536*r,e=m+r+65535,r=Math.floor(e/65536),m=e-65536*r,e=w+r+65535,r=Math.floor(e/65536),w=e-65536*r,e=_+r+65535,r=Math.floor(e/65536),_=e-65536*r,e=x+r+65535,r=Math.floor(e/65536),x=e-65536*r,e=E+r+65535,r=Math.floor(e/65536),E=e-65536*r,e=O+r+65535,r=Math.floor(e/65536),O=e-65536*r,e=A+r+65535,r=Math.floor(e/65536),A=e-65536*r,n+=r-1+37*(r-1),r=1,e=n+r+65535,r=Math.floor(e/65536),n=e-65536*r,e=o+r+65535,r=Math.floor(e/65536),o=e-65536*r,e=c+r+65535,r=Math.floor(e/65536),c=e-65536*r,e=f+r+65535,r=Math.floor(e/65536),f=e-65536*r,e=l+r+65535,r=Math.floor(e/65536),l=e-65536*r,e=h+r+65535,r=Math.floor(e/65536),h=e-65536*r,e=d+r+65535,r=Math.floor(e/65536),d=e-65536*r,e=v+r+65535,r=Math.floor(e/65536),v=e-65536*r,e=y+r+65535,r=Math.floor(e/65536),y=e-65536*r,e=m+r+65535,r=Math.floor(e/65536),m=e-65536*r,e=w+r+65535,r=Math.floor(e/65536),w=e-65536*r,e=_+r+65535,r=Math.floor(e/65536),_=e-65536*r,e=x+r+65535,r=Math.floor(e/65536),x=e-65536*r,e=E+r+65535,r=Math.floor(e/65536),E=e-65536*r,e=O+r+65535,r=Math.floor(e/65536),O=e-65536*r,e=A+r+65535,r=Math.floor(e/65536),A=e-65536*r,n+=r-1+37*(r-1),t[0]=n,t[1]=o,t[2]=c,t[3]=f,t[4]=l,t[5]=h,t[6]=d,t[7]=v,t[8]=y,t[9]=m,t[10]=w,t[11]=_,t[12]=x,t[13]=E,t[14]=O,t[15]=A}function P(t,a){j(t,a,a)}function M(t,i){const e=f();let a;for(a=0;a<16;a++)e[a]=i[a];for(a=253;a>=0;a--)P(e,e),2!==a&&4!==a&&j(e,e,i);for(a=0;a<16;a++)t[a]=e[a]}function R(p,q){const a=f(),b=f(),t=f(),e=f(),r=f(),n=f(),g=f(),o=f(),c=f();sub(a,p[1],p[0]),sub(c,q[1],q[0]),j(a,a,c),I(b,p[0],p[1]),I(c,q[0],q[1]),j(b,b,c),j(t,p[3],q[3]),j(t,t,v),j(e,p[2],q[2]),I(e,e,e),sub(r,b,a),sub(n,e,t),I(g,e,t),I(o,b,a),j(p[0],r,n),j(p[1],o,g),j(p[2],g,n),j(p[3],r,o)}function N(p,q,b){for(let i=0;i<4;i++)E(p[i],q[i],b)}function T(t,p){const e=f(),r=f(),n=f();M(n,p[2]),j(e,p[0],n),j(r,p[1],n),O(t,r),t[31]^=S(e)<<7}function L(p,q,s){_(p[0],l),_(p[1],h),_(p[2],h),_(p[3],l);for(let i=255;i>=0;--i){const b=s[i/8|0]>>(7&i)&1;N(p,q,b),R(q,p),R(p,p),N(p,q,b)}}function C(p,s){const q=[f(),f(),f(),f()];_(q[0],y),_(q[1],m),_(q[2],h),j(q[3],y,m),L(p,q,s)}function U(t){if(t.length!==e.SEED_LENGTH)throw new Error(`ed25519: seed must be ${e.SEED_LENGTH} bytes`);const r=(0,o.hash)(t);r[0]&=248,r[31]&=127,r[31]|=64;const n=new Uint8Array(32),p=[f(),f(),f(),f()];C(p,r),T(n,p);const c=new Uint8Array(64);return c.set(t),c.set(n,32),{publicKey:n,secretKey:c}}e.generateKeyPairFromSeed=U,e.generateKeyPair=function(t){const e=(0,n.randomBytes)(32,t),r=U(e);return(0,c.wipe)(e),r},e.extractPublicKeyFromSecretKey=function(t){if(t.length!==e.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${e.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(t.subarray(32))};const B=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function D(t,e){let r,i,n,o;for(i=63;i>=32;--i){for(r=0,n=i-32,o=i-12;n<o;++n)e[n]+=r-16*e[i]*B[n-(i-32)],r=Math.floor((e[n]+128)/256),e[n]-=256*r;e[n]+=r,e[i]=0}for(r=0,n=0;n<32;n++)e[n]+=r-(e[31]>>4)*B[n],r=e[n]>>8,e[n]&=255;for(n=0;n<32;n++)e[n]-=r*B[n];for(i=0;i<32;i++)e[i+1]+=e[i]>>8,t[i]=255&e[i]}function z(t){const e=new Float64Array(64);for(let i=0;i<64;i++)e[i]=t[i];for(let i=0;i<64;i++)t[i]=0;D(t,e)}function F(t,p){const e=f(),r=f(),n=f(),o=f(),c=f(),v=f(),y=f();return _(t[2],h),function(t,e){for(let i=0;i<16;i++)t[i]=e[2*i]+(e[2*i+1]<<8);t[15]&=32767}(t[1],p),P(n,t[1]),j(o,n,d),sub(n,n,t[2]),I(o,t[2],o),P(c,o),P(v,c),j(y,v,c),j(e,y,n),j(e,e,o),function(t,i){const e=f();let a;for(a=0;a<16;a++)e[a]=i[a];for(a=250;a>=0;a--)P(e,e),1!==a&&j(e,e,i);for(a=0;a<16;a++)t[a]=e[a]}(e,e),j(e,e,n),j(e,e,o),j(e,e,o),j(t[0],e,o),P(r,t[0]),j(r,r,o),k(r,n)&&j(t[0],t[0],w),P(r,t[0]),j(r,r,o),k(r,n)?-1:(S(t[0])===p[31]>>7&&sub(t[0],l,t[0]),j(t[3],t[0],t[1]),0)}e.sign=function(t,e){const r=new Float64Array(64),p=[f(),f(),f(),f()],n=(0,o.hash)(t.subarray(0,32));n[0]&=248,n[31]&=127,n[31]|=64;const c=new Uint8Array(64);c.set(n.subarray(32),32);const l=new o.SHA512;l.update(c.subarray(32)),l.update(e);const h=l.digest();l.clean(),z(h),C(p,h),T(c,p),l.reset(),l.update(c.subarray(0,32)),l.update(t.subarray(32)),l.update(e);const d=l.digest();z(d);for(let i=0;i<32;i++)r[i]=h[i];for(let i=0;i<32;i++)for(let t=0;t<32;t++)r[i+t]+=d[i]*n[t];return D(c.subarray(32),r),c},e.verify=function(t,r,n){const c=new Uint8Array(32),p=[f(),f(),f(),f()],q=[f(),f(),f(),f()];if(n.length!==e.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${e.SIGNATURE_LENGTH} bytes`);if(F(q,t))return!1;const l=new o.SHA512;l.update(n.subarray(0,32)),l.update(t),l.update(r);const h=l.digest();return z(h),L(p,q,h),C(q,n.subarray(32)),R(p,q),T(c,p),!A(n,c)},e.convertPublicKeyToX25519=function(t){let q=[f(),f(),f(),f()];if(F(q,t))throw new Error("Ed25519: invalid public key");let a=f(),b=f(),e=q[1];I(a,h,e),sub(b,h,e),M(b,b),j(a,a,b);let r=new Uint8Array(32);return O(r,a),r},e.convertSecretKeyToX25519=function(t){const e=(0,o.hash)(t.subarray(0,32));e[0]&=248,e[31]&=127,e[31]|=64;const r=new Uint8Array(e.subarray(0,32));return(0,c.wipe)(e),r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(354),o=r(326);e.DIGEST_LENGTH=64,e.BLOCK_SIZE=128;var c=function(){function t(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return t.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},t.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},t.prototype.clean=function(){o.wipe(this._buffer),o.wipe(this._tempHi),o.wipe(this._tempLo),this.reset()},t.prototype.update=function(data,t){if(void 0===t&&(t=data.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var r=0;if(this._bytesHashed+=t,this._bufferLength>0){for(;this._bufferLength<e.BLOCK_SIZE&&t>0;)this._buffer[this._bufferLength++]=data[r++],t--;this._bufferLength===this.blockSize&&(l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(t>=this.blockSize&&(r=l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,data,r,t),t%=this.blockSize);t>0;)this._buffer[this._bufferLength++]=data[r++],t--;return this},t.prototype.finish=function(t){if(!this._finished){var e=this._bytesHashed,r=this._bufferLength,o=e/536870912|0,c=e<<3,f=e%128<112?128:256;this._buffer[r]=128;for(var i=r+1;i<f-8;i++)this._buffer[i]=0;n.writeUint32BE(o,this._buffer,f-8),n.writeUint32BE(c,this._buffer,f-4),l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,f),this._finished=!0}for(i=0;i<this.digestLength/8;i++)n.writeUint32BE(this._stateHi[i],t,8*i),n.writeUint32BE(this._stateLo[i],t,8*i+4);return this},t.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},t.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},t.prototype.restoreState=function(t){return this._stateHi.set(t.stateHi),this._stateLo.set(t.stateLo),this._bufferLength=t.bufferLength,t.buffer&&this._buffer.set(t.buffer),this._bytesHashed=t.bytesHashed,this._finished=!1,this},t.prototype.cleanSavedState=function(t){o.wipe(t.stateHi),o.wipe(t.stateLo),t.buffer&&o.wipe(t.buffer),t.bufferLength=0,t.bytesHashed=0},t}();e.SHA512=c;var f=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function l(t,e,r,o,c,l,h){for(var d,v,th,y,a,b,m,w,_=r[0],x=r[1],E=r[2],O=r[3],A=r[4],k=r[5],S=r[6],I=r[7],j=o[0],P=o[1],M=o[2],R=o[3],N=o[4],T=o[5],L=o[6],C=o[7];h>=128;){for(var i=0;i<16;i++){var U=8*i+l;t[i]=n.readUint32BE(c,U),e[i]=n.readUint32BE(c,U+4)}for(i=0;i<80;i++){var B,D,z=_,F=x,H=E,K=O,G=A,V=k,Y=S,J=j,W=P,Q=M,X=R,Z=N,$=T,tt=L;if(a=65535&(v=C),b=v>>>16,m=65535&(d=I),w=d>>>16,a+=65535&(v=(N>>>14|A<<18)^(N>>>18|A<<14)^(A>>>9|N<<23)),b+=v>>>16,m+=65535&(d=(A>>>14|N<<18)^(A>>>18|N<<14)^(N>>>9|A<<23)),w+=d>>>16,a+=65535&(v=N&T^~N&L),b+=v>>>16,m+=65535&(d=A&k^~A&S),w+=d>>>16,d=f[2*i],a+=65535&(v=f[2*i+1]),b+=v>>>16,m+=65535&d,w+=d>>>16,d=t[i%16],b+=(v=e[i%16])>>>16,m+=65535&d,w+=d>>>16,m+=(b+=(a+=65535&v)>>>16)>>>16,a=65535&(v=y=65535&a|b<<16),b=v>>>16,m=65535&(d=th=65535&m|(w+=m>>>16)<<16),w=d>>>16,a+=65535&(v=(j>>>28|_<<4)^(_>>>2|j<<30)^(_>>>7|j<<25)),b+=v>>>16,m+=65535&(d=(_>>>28|j<<4)^(j>>>2|_<<30)^(j>>>7|_<<25)),w+=d>>>16,b+=(v=j&P^j&M^P&M)>>>16,m+=65535&(d=_&x^_&E^x&E),w+=d>>>16,B=65535&(m+=(b+=(a+=65535&v)>>>16)>>>16)|(w+=m>>>16)<<16,D=65535&a|b<<16,a=65535&(v=X),b=v>>>16,m=65535&(d=K),w=d>>>16,b+=(v=y)>>>16,m+=65535&(d=th),w+=d>>>16,x=z,E=F,O=H,A=K=65535&(m+=(b+=(a+=65535&v)>>>16)>>>16)|(w+=m>>>16)<<16,k=G,S=V,I=Y,_=B,P=J,M=W,R=Q,N=X=65535&a|b<<16,T=Z,L=$,C=tt,j=D,i%16==15)for(U=0;U<16;U++)d=t[U],a=65535&(v=e[U]),b=v>>>16,m=65535&d,w=d>>>16,d=t[(U+9)%16],a+=65535&(v=e[(U+9)%16]),b+=v>>>16,m+=65535&d,w+=d>>>16,th=t[(U+1)%16],a+=65535&(v=((y=e[(U+1)%16])>>>1|th<<31)^(y>>>8|th<<24)^(y>>>7|th<<25)),b+=v>>>16,m+=65535&(d=(th>>>1|y<<31)^(th>>>8|y<<24)^th>>>7),w+=d>>>16,th=t[(U+14)%16],b+=(v=((y=e[(U+14)%16])>>>19|th<<13)^(th>>>29|y<<3)^(y>>>6|th<<26))>>>16,m+=65535&(d=(th>>>19|y<<13)^(y>>>29|th<<3)^th>>>6),w+=d>>>16,w+=(m+=(b+=(a+=65535&v)>>>16)>>>16)>>>16,t[U]=65535&m|w<<16,e[U]=65535&a|b<<16}a=65535&(v=j),b=v>>>16,m=65535&(d=_),w=d>>>16,d=r[0],b+=(v=o[0])>>>16,m+=65535&d,w+=d>>>16,w+=(m+=(b+=(a+=65535&v)>>>16)>>>16)>>>16,r[0]=_=65535&m|w<<16,o[0]=j=65535&a|b<<16,a=65535&(v=P),b=v>>>16,m=65535&(d=x),w=d>>>16,d=r[1],b+=(v=o[1])>>>16,m+=65535&d,w+=d>>>16,w+=(m+=(b+=(a+=65535&v)>>>16)>>>16)>>>16,r[1]=x=65535&m|w<<16,o[1]=P=65535&a|b<<16,a=65535&(v=M),b=v>>>16,m=65535&(d=E),w=d>>>16,d=r[2],b+=(v=o[2])>>>16,m+=65535&d,w+=d>>>16,w+=(m+=(b+=(a+=65535&v)>>>16)>>>16)>>>16,r[2]=E=65535&m|w<<16,o[2]=M=65535&a|b<<16,a=65535&(v=R),b=v>>>16,m=65535&(d=O),w=d>>>16,d=r[3],b+=(v=o[3])>>>16,m+=65535&d,w+=d>>>16,w+=(m+=(b+=(a+=65535&v)>>>16)>>>16)>>>16,r[3]=O=65535&m|w<<16,o[3]=R=65535&a|b<<16,a=65535&(v=N),b=v>>>16,m=65535&(d=A),w=d>>>16,d=r[4],b+=(v=o[4])>>>16,m+=65535&d,w+=d>>>16,w+=(m+=(b+=(a+=65535&v)>>>16)>>>16)>>>16,r[4]=A=65535&m|w<<16,o[4]=N=65535&a|b<<16,a=65535&(v=T),b=v>>>16,m=65535&(d=k),w=d>>>16,d=r[5],b+=(v=o[5])>>>16,m+=65535&d,w+=d>>>16,w+=(m+=(b+=(a+=65535&v)>>>16)>>>16)>>>16,r[5]=k=65535&m|w<<16,o[5]=T=65535&a|b<<16,a=65535&(v=L),b=v>>>16,m=65535&(d=S),w=d>>>16,d=r[6],b+=(v=o[6])>>>16,m+=65535&d,w+=d>>>16,w+=(m+=(b+=(a+=65535&v)>>>16)>>>16)>>>16,r[6]=S=65535&m|w<<16,o[6]=L=65535&a|b<<16,a=65535&(v=C),b=v>>>16,m=65535&(d=I),w=d>>>16,d=r[7],b+=(v=o[7])>>>16,m+=65535&d,w+=d>>>16,w+=(m+=(b+=(a+=65535&v)>>>16)>>>16)>>>16,r[7]=I=65535&m|w<<16,o[7]=C=65535&a|b<<16,l+=128,h-=128}return l}e.hash=function(data){var t=new c;t.update(data);var e=t.digest();return t.clean(),e}},function(t,e,r){"use strict";function n(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,a){if(t){if("string"==typeof t)return o(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?o(t,a):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,c=function(){};return{s:c,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,f=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw f}}}}function o(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,r=Array(a);e<a;e++)r[e]=t[e];return r}Object.defineProperty(e,"__esModule",{value:!0});var c=r(409),f=r(383);e.concat=function(t,e){e||(e=t.reduce((function(t,e){return t+e.length}),0));var r,output=c.allocUnsafe(e),o=0,l=n(t);try{for(l.s();!(r=l.n()).done;){var h=r.value;output.set(h,o),o+=h.length}}catch(t){l.e(t)}finally{l.f()}return f.asUint8Array(output)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(410);e.toString=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",base=n[e];if(!base)throw new Error('Unsupported encoding "'.concat(e,'"'));return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?base.encoder.encode(t).substring(1):globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8")}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(410),o=r(383);e.fromString=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8",base=n[e];if(!base)throw new Error('Unsupported encoding "'.concat(e,'"'));return"utf8"!==e&&"utf-8"!==e||null==globalThis.Buffer||null==globalThis.Buffer.from?base.decoder.decode("".concat(base.prefix).concat(t)):o.asUint8Array(globalThis.Buffer.from(t,"utf-8"))}},function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return w}));var n=r(333),o=r(342),c=r(343);function f(){f=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var i=e&&e.prototype instanceof x?e:x,a=Object.create(i.prototype),c=new N(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=h;var v="suspendedStart",m="suspendedYield",w="executing",s="completed",_={};function x(){}function E(){}function O(){}var p={};l(p,a,(function(){return this}));var A=Object.getPrototypeOf,k=A&&A(A(T([])));k&&k!==r&&n.call(k,a)&&(p=k);var g=O.prototype=x.prototype=Object.create(p);function S(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function r(o,c,i,a){var f=d(t[o],t,c);if("throw"!==f.type){var u=f.arg,l=u.value;return l&&"object"==y(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,a)}),(function(t){r("throw",t,i,a)})):e.resolve(l).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,a)}))}a(f.arg)}var c;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return c=c?c.then(o,o):o()}})}function j(e,r,n){var o=v;return function(i,a){if(o===w)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===_)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===v)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=w;var p=d(e,r,n);if("normal"===p.type){if(o=n.done?s:m,p.arg===_)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),_;var i=d(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,_;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,_):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,_)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(y(e)+" is not iterable")}return E.prototype=O,o(g,"constructor",{value:O,configurable:!0}),o(O,"constructor",{value:E,configurable:!0}),E.displayName=l(O,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===E||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,O):(t.__proto__=O,l(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},S(I.prototype),l(I.prototype,c,(function(){return this})),e.AsyncIterator=I,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new I(h(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(g),l(g,u,"Generator"),l(g,a,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var c=this.tryEntries.length-1;c>=0;--c){var i=this.tryEntries[c],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var f=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(f&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(f){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),_}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),_}},e}function l(t,e,r,n,o,a,c){try{var i=t[a](c),u=i.value}catch(t){return void r(t)}i.done?e(u):Promise.resolve(u).then(n,o)}function h(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){l(a,n,o,c,f,"next",t)}function f(t){l(a,n,o,c,f,"throw",t)}c(void 0)}))}}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,v(n.key),n)}}function v(t){var i=function(t,e){if("object"!=y(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=y(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==y(i)?i:i+""}function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}var a=function(t){return t.split("?")[0]},m=("undefined"==typeof WebSocket?"undefined":y(WebSocket))<"u"?WebSocket:(void 0===t?"undefined":y(t))<"u"&&y(t.WebSocket)<"u"?t.WebSocket:("undefined"==typeof window?"undefined":y(window))<"u"&&y(window.WebSocket)<"u"?window.WebSocket:("undefined"==typeof self?"undefined":y(self))<"u"&&y(self.WebSocket)<"u"?self.WebSocket:r(514),w=function(){return e=function t(e){if(function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.events=new n.EventEmitter,this.registering=!1,!Object(c.isWsUrl)(e))throw new Error("Provided URL is not compatible with WebSocket connection: ".concat(e));this.url=e},r=[{key:"connected",get:function(){return y(this.socket)<"u"}},{key:"connecting",get:function(){return this.registering}},{key:"on",value:function(t,e){this.events.on(t,e)}},{key:"once",value:function(t,e){this.events.once(t,e)}},{key:"off",value:function(t,e){this.events.off(t,e)}},{key:"removeListener",value:function(t,e){this.events.removeListener(t,e)}},{key:"open",value:(_=h(f().mark((function t(){var e,r=arguments;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:this.url,t.next=3,this.register(e);case 3:case"end":return t.stop()}}),t,this)}))),function(){return _.apply(this,arguments)})},{key:"close",value:(w=h(f().mark((function t(){var e=this;return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){y(e.socket)>"u"?r(new Error("Connection already closed")):(e.socket.onclose=function(r){e.onClose(r),t()},e.socket.close())})));case 1:case"end":return t.stop()}}),t)}))),function(){return w.apply(this,arguments)})},{key:"send",value:(v=h(f().mark((function t(e){return f().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=y(this.socket)>"u",!t.t0){t.next=5;break}return t.next=4,this.register();case 4:this.socket=t.sent;case 5:try{this.socket.send(Object(o.b)(e))}catch(t){this.onError(e.id,t)}case 6:case"end":return t.stop()}}),t,this)}))),function(t){return v.apply(this,arguments)})},{key:"register",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.url;if(!Object(c.isWsUrl)(r))throw new Error("Provided URL is not compatible with WebSocket connection: ".concat(r));if(this.registering){var n=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=n||this.events.listenerCount("open")>=n)&&this.events.setMaxListeners(n+1),new Promise((function(t,r){e.events.once("register_error",(function(s){e.resetMaxListeners(),r(s)})),e.events.once("open",(function(){if(e.resetMaxListeners(),y(e.socket)>"u")return r(new Error("WebSocket connection is missing or invalid"));t(e.socket)}))}))}return this.url=r,this.registering=!0,new Promise((function(n,o){var f=new URLSearchParams(r).get("origin"),s=Object(c.isReactNative)()?{headers:{origin:f}}:{rejectUnauthorized:!Object(c.isLocalhostUrl)(r)},i=new m(r,[],s);("undefined"==typeof WebSocket?"undefined":y(WebSocket))<"u"||(void 0===t?"undefined":y(t))<"u"&&y(t.WebSocket)<"u"||("undefined"==typeof window?"undefined":y(window))<"u"&&y(window.WebSocket)<"u"||("undefined"==typeof self?"undefined":y(self))<"u"&&y(self.WebSocket)<"u"?i.onerror=function(t){var r=t;o(e.emitError(r.error))}:i.on("error",(function(t){o(e.emitError(t))})),i.onopen=function(){e.onOpen(i),n(i)}}))}},{key:"onOpen",value:function(t){var e=this;t.onmessage=function(t){return e.onPayload(t)},t.onclose=function(t){return e.onClose(t)},this.socket=t,this.registering=!1,this.events.emit("open")}},{key:"onClose",value:function(t){this.socket=void 0,this.registering=!1,this.events.emit("close",t)}},{key:"onPayload",value:function(t){if(!(y(t.data)>"u")){var e="string"==typeof t.data?Object(o.a)(t.data):t.data;this.events.emit("payload",e)}}},{key:"onError",value:function(t,e){var r=this.parseError(e),n=r.message||r.toString(),s=Object(c.formatJsonRpcError)(t,n);this.events.emit("payload",s)}},{key:"parseError",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.url;return Object(c.parseConnectionError)(t,a(e),"WS")}},{key:"resetMaxListeners",value:function(){this.events.getMaxListeners()>10&&this.events.setMaxListeners(10)}},{key:"emitError",value:function(t){var e=this.parseError(new Error((null==t?void 0:t.message)||"WebSocket connection failed for host: ".concat(a(this.url))));return this.events.emit("register_error",e),e}}],r&&d(e.prototype,r),l&&d(e,l),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,l,v,w,_}()}).call(this,r(31))},function(t,e,r){"use strict";t.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},function(t,e,r){(function(t,r){var n="__lodash_hash_undefined__",o=1,c=2,f=9007199254740991,l="[object Arguments]",h="[object Array]",d="[object AsyncFunction]",v="[object Boolean]",y="[object Date]",m="[object Error]",w="[object Function]",_="[object GeneratorFunction]",x="[object Map]",E="[object Number]",O="[object Null]",A="[object Object]",k="[object Promise]",S="[object Proxy]",I="[object RegExp]",j="[object Set]",P="[object String]",M="[object Symbol]",R="[object Undefined]",N="[object WeakMap]",T="[object ArrayBuffer]",L="[object DataView]",C=/^\[object .+?Constructor\]$/,U=/^(?:0|[1-9]\d*)$/,B={};B["[object Float32Array]"]=B["[object Float64Array]"]=B["[object Int8Array]"]=B["[object Int16Array]"]=B["[object Int32Array]"]=B["[object Uint8Array]"]=B["[object Uint8ClampedArray]"]=B["[object Uint16Array]"]=B["[object Uint32Array]"]=!0,B[l]=B[h]=B[T]=B[v]=B[L]=B[y]=B[m]=B[w]=B[x]=B[E]=B[A]=B[I]=B[j]=B[P]=B[N]=!1;var D="object"==typeof t&&t&&t.Object===Object&&t,z="object"==typeof self&&self&&self.Object===Object&&self,F=D||z||Function("return this")(),H=e&&!e.nodeType&&e,K=H&&"object"==typeof r&&r&&!r.nodeType&&r,G=K&&K.exports===H,V=G&&D.process,Y=function(){try{return V&&V.binding&&V.binding("util")}catch(t){}}(),J=Y&&Y.isTypedArray;function W(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function Q(map){var t=-1,e=Array(map.size);return map.forEach((function(r,n){e[++t]=[n,r]})),e}function X(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}var Z,$,tt,et=Array.prototype,nt=Function.prototype,it=Object.prototype,ot=F["__core-js_shared__"],at=nt.toString,st=it.hasOwnProperty,ut=(Z=/[^.]+$/.exec(ot&&ot.keys&&ot.keys.IE_PROTO||""))?"Symbol(src)_1."+Z:"",ct=it.toString,ft=RegExp("^"+at.call(st).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),lt=G?F.Buffer:void 0,ht=F.Symbol,pt=F.Uint8Array,vt=it.propertyIsEnumerable,yt=et.splice,gt=ht?ht.toStringTag:void 0,mt=Object.getOwnPropertySymbols,bt=lt?lt.isBuffer:void 0,wt=($=Object.keys,tt=Object,function(t){return $(tt(t))}),_t=Wt(F,"DataView"),xt=Wt(F,"Map"),Et=Wt(F,"Promise"),Ot=Wt(F,"Set"),At=Wt(F,"WeakMap"),kt=Wt(Object,"create"),St=$t(_t),It=$t(xt),jt=$t(Et),Pt=$t(Ot),Mt=$t(At),Rt=ht?ht.prototype:void 0,Nt=Rt?Rt.valueOf:void 0;function Tt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Lt(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ct(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ut(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Ct;++e<r;)this.add(t[e])}function Bt(t){var data=this.__data__=new Lt(t);this.size=data.size}function Dt(t,e){var r=re(t),n=!r&&ee(t),o=!r&&!n&&ne(t),c=!r&&!n&&!o&&ue(t),f=r||n||o||c,l=f?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],h=l.length;for(var d in t)!e&&!st.call(t,d)||f&&("length"==d||o&&("offset"==d||"parent"==d)||c&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||Zt(d,h))||l.push(d);return l}function qt(t,e){for(var r=t.length;r--;)if(te(t[r][0],e))return r;return-1}function zt(t){return null==t?void 0===t?R:O:gt&&gt in Object(t)?function(t){var e=st.call(t,gt),r=t[gt];try{t[gt]=void 0;var n=!0}catch(t){}var o=ct.call(t);n&&(e?t[gt]=r:delete t[gt]);return o}(t):function(t){return ct.call(t)}(t)}function Ft(t){return se(t)&&zt(t)==l}function Ht(t,e,r,n,f){return t===e||(null==t||null==e||!se(t)&&!se(e)?t!=t&&e!=e:function(object,t,e,r,n,f){var d=re(object),w=re(t),_=d?h:Xt(object),O=w?h:Xt(t),k=(_=_==l?A:_)==A,S=(O=O==l?A:O)==A,R=_==O;if(R&&ne(object)){if(!ne(t))return!1;d=!0,k=!1}if(R&&!k)return f||(f=new Bt),d||ue(object)?Vt(object,t,e,r,n,f):function(object,t,e,r,n,f,l){switch(e){case L:if(object.byteLength!=t.byteLength||object.byteOffset!=t.byteOffset)return!1;object=object.buffer,t=t.buffer;case T:return!(object.byteLength!=t.byteLength||!f(new pt(object),new pt(t)));case v:case y:case E:return te(+object,+t);case m:return object.name==t.name&&object.message==t.message;case I:case P:return object==t+"";case x:var h=Q;case j:var d=r&o;if(h||(h=X),object.size!=t.size&&!d)return!1;var w=l.get(object);if(w)return w==t;r|=c,l.set(object,t);var _=Vt(h(object),h(t),r,n,f,l);return l.delete(object),_;case M:if(Nt)return Nt.call(object)==Nt.call(t)}return!1}(object,t,_,e,r,n,f);if(!(e&o)){var N=k&&st.call(object,"__wrapped__"),C=S&&st.call(t,"__wrapped__");if(N||C){var U=N?object.value():object,B=C?t.value():t;return f||(f=new Bt),n(U,B,e,r,f)}}if(!R)return!1;return f||(f=new Bt),function(object,t,e,r,n,c){var f=e&o,l=Yt(object),h=l.length,d=Yt(t),v=d.length;if(h!=v&&!f)return!1;var y=h;for(;y--;){var m=l[y];if(!(f?m in t:st.call(t,m)))return!1}var w=c.get(object);if(w&&c.get(t))return w==t;var _=!0;c.set(object,t),c.set(t,object);var x=f;for(;++y<h;){var E=object[m=l[y]],O=t[m];if(r)var A=f?r(O,E,m,t,object,c):r(E,O,m,object,t,c);if(!(void 0===A?E===O||n(E,O,e,r,c):A)){_=!1;break}x||(x="constructor"==m)}if(_&&!x){var k=object.constructor,S=t.constructor;k==S||!("constructor"in object)||!("constructor"in t)||"function"==typeof k&&k instanceof k&&"function"==typeof S&&S instanceof S||(_=!1)}return c.delete(object),c.delete(t),_}(object,t,e,r,n,f)}(t,e,r,n,Ht,f))}function Kt(t){return!(!ae(t)||function(t){return!!ut&&ut in t}(t))&&(ie(t)?ft:C).test($t(t))}function Gt(object){if(e=(t=object)&&t.constructor,r="function"==typeof e&&e.prototype||it,t!==r)return wt(object);var t,e,r,n=[];for(var o in Object(object))st.call(object,o)&&"constructor"!=o&&n.push(o);return n}function Vt(t,e,r,n,f,l){var h=r&o,d=t.length,v=e.length;if(d!=v&&!(h&&v>d))return!1;var y=l.get(t);if(y&&l.get(e))return y==e;var m=-1,w=!0,_=r&c?new Ut:void 0;for(l.set(t,e),l.set(e,t);++m<d;){var x=t[m],E=e[m];if(n)var O=h?n(E,x,m,e,t,l):n(x,E,m,t,e,l);if(void 0!==O){if(O)continue;w=!1;break}if(_){if(!W(e,(function(t,e){if(o=e,!_.has(o)&&(x===t||f(x,t,r,n,l)))return _.push(e);var o}))){w=!1;break}}else if(x!==E&&!f(x,E,r,n,l)){w=!1;break}}return l.delete(t),l.delete(e),w}function Yt(object){return function(object,t,e){var r=t(object);return re(object)?r:function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}(r,e(object))}(object,ce,Qt)}function Jt(map,t){var e,r,data=map.__data__;return("string"==(r=typeof(e=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==e:null===e)?data["string"==typeof t?"string":"hash"]:data.map}function Wt(object,t){var e=function(object,t){return null==object?void 0:object[t]}(object,t);return Kt(e)?e:void 0}Tt.prototype.clear=function(){this.__data__=kt?kt(null):{},this.size=0},Tt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Tt.prototype.get=function(t){var data=this.__data__;if(kt){var e=data[t];return e===n?void 0:e}return st.call(data,t)?data[t]:void 0},Tt.prototype.has=function(t){var data=this.__data__;return kt?void 0!==data[t]:st.call(data,t)},Tt.prototype.set=function(t,e){var data=this.__data__;return this.size+=this.has(t)?0:1,data[t]=kt&&void 0===e?n:e,this},Lt.prototype.clear=function(){this.__data__=[],this.size=0},Lt.prototype.delete=function(t){var data=this.__data__,e=qt(data,t);return!(e<0)&&(e==data.length-1?data.pop():yt.call(data,e,1),--this.size,!0)},Lt.prototype.get=function(t){var data=this.__data__,e=qt(data,t);return e<0?void 0:data[e][1]},Lt.prototype.has=function(t){return qt(this.__data__,t)>-1},Lt.prototype.set=function(t,e){var data=this.__data__,r=qt(data,t);return r<0?(++this.size,data.push([t,e])):data[r][1]=e,this},Ct.prototype.clear=function(){this.size=0,this.__data__={hash:new Tt,map:new(xt||Lt),string:new Tt}},Ct.prototype.delete=function(t){var e=Jt(this,t).delete(t);return this.size-=e?1:0,e},Ct.prototype.get=function(t){return Jt(this,t).get(t)},Ct.prototype.has=function(t){return Jt(this,t).has(t)},Ct.prototype.set=function(t,e){var data=Jt(this,t),r=data.size;return data.set(t,e),this.size+=data.size==r?0:1,this},Ut.prototype.add=Ut.prototype.push=function(t){return this.__data__.set(t,n),this},Ut.prototype.has=function(t){return this.__data__.has(t)},Bt.prototype.clear=function(){this.__data__=new Lt,this.size=0},Bt.prototype.delete=function(t){var data=this.__data__,e=data.delete(t);return this.size=data.size,e},Bt.prototype.get=function(t){return this.__data__.get(t)},Bt.prototype.has=function(t){return this.__data__.has(t)},Bt.prototype.set=function(t,e){var data=this.__data__;if(data instanceof Lt){var r=data.__data__;if(!xt||r.length<199)return r.push([t,e]),this.size=++data.size,this;data=this.__data__=new Ct(r)}return data.set(t,e),this.size=data.size,this};var Qt=mt?function(object){return null==object?[]:(object=Object(object),function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,c=[];++r<n;){var f=t[r];e(f,r,t)&&(c[o++]=f)}return c}(mt(object),(function(symbol){return vt.call(object,symbol)})))}:function(){return[]},Xt=zt;function Zt(t,e){return!!(e=null==e?f:e)&&("number"==typeof t||U.test(t))&&t>-1&&t%1==0&&t<e}function $t(t){if(null!=t){try{return at.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function te(t,e){return t===e||t!=t&&e!=e}(_t&&Xt(new _t(new ArrayBuffer(1)))!=L||xt&&Xt(new xt)!=x||Et&&Xt(Et.resolve())!=k||Ot&&Xt(new Ot)!=j||At&&Xt(new At)!=N)&&(Xt=function(t){var e=zt(t),r=e==A?t.constructor:void 0,n=r?$t(r):"";if(n)switch(n){case St:return L;case It:return x;case jt:return k;case Pt:return j;case Mt:return N}return e});var ee=Ft(function(){return arguments}())?Ft:function(t){return se(t)&&st.call(t,"callee")&&!vt.call(t,"callee")},re=Array.isArray;var ne=bt||function(){return!1};function ie(t){if(!ae(t))return!1;var e=zt(t);return e==w||e==_||e==d||e==S}function oe(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=f}function ae(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function se(t){return null!=t&&"object"==typeof t}var ue=J?function(t){return function(e){return t(e)}}(J):function(t){return se(t)&&oe(t.length)&&!!B[zt(t)]};function ce(object){return null!=(t=object)&&oe(t.length)&&!ie(t)?Dt(object):Gt(object);var t}r.exports=function(t,e){return Ht(t,e)}}).call(this,r(31),r(167)(t))},function(t,e,r){t.exports=self.fetch||(self.fetch=r(412).default||r(412))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";r.d(e,"a",(function(){return R}));var n=r(504);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function c(t){try{for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];return(o=t.apply(void 0,r))&&"function"==typeof o.then?o:Promise.resolve(o)}catch(t){return Promise.reject(t)}var o}function f(t){if(function(t){var e=o(t);return null===t||"object"!==e&&"function"!==e}(t))return String(t);if(function(t){var e=Object.getPrototypeOf(t);return!e||e.isPrototypeOf(Object)}(t)||Array.isArray(t))return JSON.stringify(t);if("function"==typeof t.toJSON)return f(t.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function l(){if(void 0===("undefined"==typeof Buffer?"undefined":o(Buffer)))throw new TypeError("[unstorage] Buffer is not supported!")}var h="base64:";function d(t){if("string"==typeof t)return t;l();var e=Buffer.from(t).toString("base64");return h+e}function v(t){return t?t.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function y(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return v(e.join(":"))}function m(base){return(base=v(base))?base+":":""}function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function _(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function x(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_(Object(r),!0).forEach((function(e){E(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function E(t,e,r){return(e=function(t){var i=function(t,e){if("object"!=w(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=w(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==w(i)?i:i+""}(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function O(t){return function(t){if(Array.isArray(t))return P(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||j(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(){A=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof _?e:_,a=Object.create(i.prototype),c=new N(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var d="suspendedStart",v="suspendedYield",y="executing",s="completed",m={};function _(){}function x(){}function E(){}var p={};f(p,a,(function(){return this}));var O=Object.getPrototypeOf,k=O&&O(O(T([])));k&&k!==r&&n.call(k,a)&&(p=k);var g=E.prototype=_.prototype=Object.create(p);function S(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function I(t,e){function r(o,c,i,a){var f=h(t[o],t,c);if("throw"!==f.type){var u=f.arg,l=u.value;return l&&"object"==w(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,i,a)}),(function(t){r("throw",t,i,a)})):e.resolve(l).then((function(t){u.value=t,i(u)}),(function(t){return r("throw",t,i,a)}))}a(f.arg)}var c;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return c=c?c.then(o,o):o()}})}function j(e,r,n){var o=d;return function(i,a){if(o===y)throw Error("Generator is already running");if(o===s){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=P(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=s,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=y;var p=h(e,r,n);if("normal"===p.type){if(o=n.done?s:v,p.arg===m)continue;return{value:p.arg,done:n.done}}"throw"===p.type&&(o=s,n.method="throw",n.arg=p.arg)}}}function P(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,P(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=h(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function T(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(w(e)+" is not iterable")}return x.prototype=E,o(g,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:x,configurable:!0}),x.displayName=f(E,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,f(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},e.awrap=function(t){return{__await:t}},S(I.prototype),f(I.prototype,c,(function(){return this})),e.AsyncIterator=I,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new I(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(g),f(g,u,"Generator"),f(g,a,(function(){return this})),f(g,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return a.type="throw",a.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var c=this.tryEntries.length-1;c>=0;--c){var i=this.tryEntries[c],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var f=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(f&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(f){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),m}},e}function k(t,e,r,n,o,a,c){try{var i=t[a](c),u=i.value}catch(t){return void r(t)}i.done?e(u):Promise.resolve(u).then(n,o)}function S(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function c(t){k(a,n,o,c,f,"next",t)}function f(t){k(a,n,o,c,f,"throw",t)}c(void 0)}))}}function I(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=j(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,c=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw c}}}}function j(t,a){if(t){if("string"==typeof t)return P(t,a);var e={}.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?P(t,a):void 0}}function P(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,r=Array(a);e<a;e++)r[e]=t[e];return r}var M=function(){var data=new Map;return{name:"memory",options:{},hasItem:function(t){return data.has(t)},getItem:function(t){var e;return null!==(e=data.get(t))&&void 0!==e?e:null},getItemRaw:function(t){var e;return null!==(e=data.get(t))&&void 0!==e?e:null},setItem:function(t,e){data.set(t,e)},setItemRaw:function(t,e){data.set(t,e)},removeItem:function(t){data.delete(t)},getKeys:function(){return Array.from(data.keys())},clear:function(){data.clear()},dispose:function(){data.clear()}}};function R(){var t={mounts:{"":(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).driver||M()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},e=function(e){var r,n=I(t.mountpoints);try{for(n.s();!(r=n.n()).done;){var base=r.value;if(e.startsWith(base))return{base:base,relativeKey:e.slice(base.length),driver:t.mounts[base]}}}catch(t){n.e(t)}finally{n.f()}return{base:"",relativeKey:e,driver:t.mounts[""]}},r=function(base,e){return t.mountpoints.filter((function(t){return t.startsWith(base)||e&&base.startsWith(t)})).map((function(e){return{relativeBase:base.length>e.length?base.slice(e.length):void 0,mountpoint:e,driver:t.mounts[e]}}))},o=function(e,r){if(t.watching){r=v(r);var n,o=I(t.watchListeners);try{for(o.s();!(n=o.n()).done;){(0,n.value)(e,r)}}catch(t){o.e(t)}finally{o.f()}}},_=function(){var e=S(A().mark((function e(){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.watching){e.next=2;break}return e.abrupt("return");case 2:t.watching=!0,e.t0=A().keys(t.mounts);case 4:if((e.t1=e.t0()).done){e.next=11;break}return r=e.t1.value,e.next=8,N(t.mounts[r],o,r);case 8:t.unwatch[r]=e.sent,e.next=4;break;case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=S(A().mark((function e(){var r;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.watching){e.next=2;break}return e.abrupt("return");case 2:e.t0=A().keys(t.unwatch);case 3:if((e.t1=e.t0()).done){e.next=9;break}return r=e.t1.value,e.next=7,t.unwatch[r]();case 7:e.next=3;break;case 9:t.unwatch={},t.watching=!1;case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(t,r,n){var o,c=new Map,f=function(t){var e=c.get(t.base);return e||(e={driver:t.driver,base:t.base,items:[]},c.set(t.base,e)),e},l=I(t);try{for(l.s();!(o=l.n()).done;){var h=o.value,d="string"==typeof h,y=v(d?h:h.key),m=d?void 0:h.value,w=d||!h.options?r:x(x({},r),h.options),_=e(y);f(_).items.push({key:y,value:m,relativeKey:_.relativeKey,options:w})}}catch(t){l.e(t)}finally{l.f()}return Promise.all(O(c.values()).map((function(t){return n(t)}))).then((function(t){return t.flat()}))},j={hasItem:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=v(t);var n=e(t),o=n.relativeKey;return c(n.driver.hasItem,o,r)},getItem:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=v(t);var o=e(t),f=o.relativeKey;return c(o.driver.getItem,f,r).then((function(t){return n(t)}))},getItems:function(t,e){return k(t,e,(function(t){return t.driver.getItems?c(t.driver.getItems,t.items.map((function(t){return{key:t.relativeKey,options:t.options}})),e).then((function(e){return e.map((function(e){return{key:y(t.base,e.key),value:n(e.value)}}))})):Promise.all(t.items.map((function(e){return c(t.driver.getItem,e.relativeKey,e.options).then((function(t){return{key:e.key,value:n(t)}}))})))}))},getItemRaw:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=v(t);var n=e(t),o=n.relativeKey,f=n.driver;return f.getItemRaw?c(f.getItemRaw,o,r):c(f.getItem,o,r).then((function(t){return function(t){return"string"!=typeof t?t:t.startsWith(h)?(l(),Buffer.from(t.slice(h.length),"base64")):t}(t)}))},setItem:function(t,r){var n=arguments;return S(A().mark((function l(){var h,d,y,m;return A().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(h=n.length>2&&void 0!==n[2]?n[2]:{},void 0!==r){l.next=3;break}return l.abrupt("return",j.removeItem(t));case 3:if(t=v(t),d=e(t),y=d.relativeKey,(m=d.driver).setItem){l.next=7;break}return l.abrupt("return");case 7:return l.next=9,c(m.setItem,y,f(r),h);case 9:m.watch||o("update",t);case 10:case"end":return l.stop()}}),l)})))()},setItems:function(t,e){return S(A().mark((function r(){return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,k(t,e,function(){var t=S(A().mark((function t(r){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.driver.setItems){t.next=2;break}return t.abrupt("return",c(r.driver.setItems,r.items.map((function(t){return{key:t.relativeKey,value:f(t.value),options:t.options}})),e));case 2:if(r.driver.setItem){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,Promise.all(r.items.map((function(t){return c(r.driver.setItem,t.relativeKey,f(t.value),t.options)})));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return r.stop()}}),r)})))()},setItemRaw:function(t,r){var n=arguments;return S(A().mark((function f(){var l,h,y,m;return A().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:if(l=n.length>2&&void 0!==n[2]?n[2]:{},void 0!==r){f.next=3;break}return f.abrupt("return",j.removeItem(t,l));case 3:if(t=v(t),h=e(t),y=h.relativeKey,!(m=h.driver).setItemRaw){f.next=10;break}return f.next=8,c(m.setItemRaw,y,r,l);case 8:f.next=16;break;case 10:if(!m.setItem){f.next=15;break}return f.next=13,c(m.setItem,y,d(r),l);case 13:f.next=16;break;case 15:return f.abrupt("return");case 16:m.watch||o("update",t);case 17:case"end":return f.stop()}}),f)})))()},removeItem:function(t){var r=arguments;return S(A().mark((function n(){var f,l,h,d;return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("boolean"==typeof(f=r.length>1&&void 0!==r[1]?r[1]:{})&&(f={removeMeta:f}),t=v(t),l=e(t),h=l.relativeKey,(d=l.driver).removeItem){n.next=6;break}return n.abrupt("return");case 6:return n.next=8,c(d.removeItem,h,f);case 8:if(!f.removeMeta&&!f.removeMata){n.next=11;break}return n.next=11,c(d.removeItem,h+"$",f);case 11:d.watch||o("remove",t);case 12:case"end":return n.stop()}}),n)})))()},getMeta:function(t){var r=arguments;return S(A().mark((function o(){var f,l,h,d,meta,y;return A().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if("boolean"==typeof(f=r.length>1&&void 0!==r[1]?r[1]:{})&&(f={nativeOnly:f}),t=v(t),l=e(t),h=l.relativeKey,d=l.driver,meta=Object.create(null),!d.getMeta){o.next=12;break}return o.t0=Object,o.t1=meta,o.next=10,c(d.getMeta,h,f);case 10:o.t2=o.sent,o.t0.assign.call(o.t0,o.t1,o.t2);case 12:if(f.nativeOnly){o.next=17;break}return o.next=15,c(d.getItem,h+"$",f).then((function(t){return n(t)}));case 15:(y=o.sent)&&"object"===w(y)&&("string"==typeof y.atime&&(y.atime=new Date(y.atime)),"string"==typeof y.mtime&&(y.mtime=new Date(y.mtime)),Object.assign(meta,y));case 17:return o.abrupt("return",meta);case 18:case"end":return o.stop()}}),o)})))()},setMeta:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.setItem(t+"$",e,r)},removeMeta:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.removeItem(t+"$",e)},getKeys:function(base){var t=arguments;return S(A().mark((function e(){var n,o,f,l,h,d,y;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.length>1&&void 0!==t[1]?t[1]:{},base=m(base),o=r(base,!0),f=[],l=[],h=I(o),e.prev=6,y=A().mark((function t(){var e,r,o;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=d.value,t.next=3,c(e.driver.getKeys,e.relativeBase,n);case 3:r=t.sent,o=r.map((function(t){return e.mountpoint+v(t)})).filter((function(t){return!f.some((function(p){return t.startsWith(p)}))})),l.push.apply(l,O(o)),f=[e.mountpoint].concat(O(f.filter((function(p){return!p.startsWith(e.mountpoint)}))));case 7:case"end":return t.stop()}}),t)})),h.s();case 9:if((d=h.n()).done){e.next=13;break}return e.delegateYield(y(),"t0",11);case 11:e.next=9;break;case 13:e.next=18;break;case 15:e.prev=15,e.t1=e.catch(6),h.e(e.t1);case 18:return e.prev=18,h.f(),e.finish(18);case 21:return e.abrupt("return",base?l.filter((function(t){return t.startsWith(base)&&!t.endsWith("$")})):l.filter((function(t){return!t.endsWith("$")})));case 22:case"end":return e.stop()}}),e,null,[[6,15,18,21]])})))()},clear:function(base){var t=arguments;return S(A().mark((function e(){var n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.length>1&&void 0!==t[1]?t[1]:{},base=m(base),e.next=4,Promise.all(r(base,!1).map(function(){var t=S(A().mark((function t(e){var r;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.driver.clear){t.next=2;break}return t.abrupt("return",c(e.driver.clear,e.relativeBase,n));case 2:if(!e.driver.removeItem){t.next=7;break}return t.next=5,e.driver.getKeys(e.relativeBase||"",n);case 5:return r=t.sent,t.abrupt("return",Promise.all(r.map((function(t){return e.driver.removeItem(t,n)}))));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 4:case"end":return e.stop()}}),e)})))()},dispose:function(){return S(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(Object.values(t.mounts).map((function(t){return T(t)})));case 2:case"end":return e.stop()}}),e)})))()},watch:function(e){return S(A().mark((function r(){return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,_();case 2:return t.watchListeners.push(e),r.abrupt("return",S(A().mark((function r(){return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.watchListeners=t.watchListeners.filter((function(t){return t!==e})),0!==t.watchListeners.length){r.next=4;break}return r.next=4,E();case 4:case"end":return r.stop()}}),r)}))));case 4:case"end":return r.stop()}}),r)})))()},unwatch:function(){return S(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.watchListeners=[],e.next=3,E();case 3:case"end":return e.stop()}}),e)})))()},mount:function(base,e){if((base=m(base))&&t.mounts[base])throw new Error("already mounted at ".concat(base));return base&&(t.mountpoints.push(base),t.mountpoints.sort((function(a,b){return b.length-a.length}))),t.mounts[base]=e,t.watching&&Promise.resolve(N(e,o,base)).then((function(e){t.unwatch[base]=e})).catch(console.error),j},unmount:function(base){var e=arguments;return S(A().mark((function r(){var n;return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=!(e.length>1&&void 0!==e[1])||e[1],(base=m(base))&&t.mounts[base]){r.next=4;break}return r.abrupt("return");case 4:if(t.watching&&base in t.unwatch&&(t.unwatch[base](),delete t.unwatch[base]),!n){r.next=8;break}return r.next=8,T(t.mounts[base]);case 8:t.mountpoints=t.mountpoints.filter((function(t){return t!==base})),delete t.mounts[base];case 10:case"end":return r.stop()}}),r)})))()},getMount:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t=v(t)+":";var r=e(t);return{driver:r.driver,base:r.base}},getMounts:function(){var base=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return base=v(base),r(base,t.parents).map((function(t){return{driver:t.driver,base:t.mountpoint}}))}};return j}function N(t,e,base){return t.watch?t.watch((function(t,r){return e(t,base+r)})):function(){}}function T(t){return L.apply(this,arguments)}function L(){return(L=S(A().mark((function t(e){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("function"!=typeof e.dispose){t.next=3;break}return t.next=3,c(e.dispose);case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}])]);